---
phase: 02-security-hardening
plan: 01
type: execute
depends_on: []
files_modified: [.gitignore, .env, .env.example]
---

<objective>
Create credential infrastructure — .gitignore, consolidated .env at project root, and .env.example template.

Purpose: Establish the security foundation that all subsequent credential work depends on. No credentials should be trackable by git, and a clear template should exist for onboarding.
Output: .gitignore preventing credential commits, .env at project root with all Sanity credentials, .env.example with placeholders.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-audit-assessment/01-01-SUMMARY.md

**Constraining decisions:**
- Phase 1 audit confirmed: no .gitignore exists anywhere in the project
- An .env file already exists at `ADVISORI Sanity Migration/.env` with just `SANITY_API_TOKEN=sk...`
- Project ID is `wwmm9rbb`, dataset is `production`, API version is `2024-02-14`
- The token is: `[REDACTED-TOKEN]`
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create comprehensive .gitignore at project root</name>
  <files>.gitignore</files>
  <action>
  Create `.gitignore` at the project root (`ADVISORI Sanity Migration - english/`) with these entries:

  ```
  # Environment and credentials
  .env
  .env.local
  .env.*.local

  # Dependencies
  node_modules/

  # OS files
  .DS_Store
  Thumbs.db

  # IDE
  .idea/
  .vscode/
  *.swp
  *.swo

  # Build artifacts
  dist/
  *.js.map

  # Temporary files
  tmp/
  *.tmp
  nul

  # Logs
  *.log
  npm-debug.log*
  ```

  Do NOT add `.planning/` to .gitignore — planning documents should be tracked.
  Do NOT add `*.json` — source JSON files are project data.
  </action>
  <verify>File exists at project root. Contains .env exclusion. Does NOT exclude .planning/ or *.json.</verify>
  <done>.gitignore created with credential, dependency, and OS file exclusions</done>
</task>

<task type="auto">
  <name>Task 2: Create consolidated .env at project root and .env.example</name>
  <files>.env, .env.example</files>
  <action>
  1. Create `.env` at the project root with ALL Sanity credentials:
     ```
     SANITY_PROJECT_ID=wwmm9rbb
     SANITY_DATASET=production
     SANITY_API_VERSION=2024-02-14
     SANITY_API_TOKEN=[REDACTED-TOKEN]
     ```

  2. Create `.env.example` at the project root with placeholder values:
     ```
     SANITY_PROJECT_ID=your-project-id
     SANITY_DATASET=production
     SANITY_API_VERSION=2024-02-14
     SANITY_API_TOKEN=your-sanity-api-token
     ```

  3. Keep the existing `ADVISORI Sanity Migration/.env` file intact for now — scripts that use dotenv from that directory already work. Plan 02-02 will handle path resolution.

  The root .env will be used by the new shared infrastructure (Phase 3). The subdirectory .env continues to serve existing scripts until they're migrated.
  </action>
  <verify>.env exists at root with all 4 variables. .env.example exists with placeholders (no real token). Neither .env file is in git staging (verify with git status after .gitignore is in place).</verify>
  <done>Root .env with full credentials, .env.example with safe placeholders, both excluded by .gitignore</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] .gitignore exists at project root
- [ ] .gitignore excludes .env files
- [ ] .gitignore does NOT exclude .planning/ or *.json
- [ ] .env exists at project root with SANITY_PROJECT_ID, SANITY_DATASET, SANITY_API_VERSION, SANITY_API_TOKEN
- [ ] .env.example exists with placeholder values (no real credentials)
- [ ] `git status` shows .env files are NOT tracked
</verification>

<success_criteria>

- .gitignore prevents credential files from being committed
- .env at project root has all Sanity credentials for future infrastructure
- .env.example serves as safe onboarding template
- Existing scripts in ADVISORI Sanity Migration/ still work (their .env is untouched)
</success_criteria>

<output>
After completion, create `.planning/phases/02-security-hardening/02-01-SUMMARY.md`
</output>
