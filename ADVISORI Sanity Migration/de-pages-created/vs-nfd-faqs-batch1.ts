import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating VS-NfD page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'vs-nfd' })
    
    if (!existingDoc) {
      throw new Error('Document "vs-nfd" not found')
    }
    
    // Create new FAQs for VS-NfD fundamentals and legal framework
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Was bedeutet VS-NfD und welche rechtlichen Grundlagen regeln den Umgang mit dieser Klassifizierungsstufe?',
        answer: "VS-NfD steht f√ºr 'Verschlusssache - Nur f√ºr den Dienstgebrauch' und stellt die niedrigste Stufe der deutschen Geheimhaltungsgrade dar. Diese Klassifizierung kennzeichnet Informationen, die zwar nicht √∂ffentlich zug√§nglich sind, aber deren Bekanntwerden die Sicherheit der Bundesrepublik Deutschland oder ihrer L√§nder nicht gef√§hrdet. Das Verst√§ndnis der rechtlichen Grundlagen und praktischen Anforderungen ist essentiell f√ºr eine compliant Informationsverarbeitung.\n\nüìã Rechtliche Grundlagen und Definitionen:\n‚Ä¢ VS-NfD ist in der Allgemeinen Verwaltungsvorschrift zum materiellen und organisatorischen Schutz von Verschlusssachen definiert\n‚Ä¢ Die Klassifizierung erfolgt nach dem Sicherheits√ºberpr√ºfungsgesetz und den entsprechenden Durchf√ºhrungsverordnungen\n‚Ä¢ Informationen dieser Stufe erfordern besonderen Schutz vor unbefugter Kenntnisnahme durch Dritte\n‚Ä¢ Die Klassifizierung dient dem Schutz von Verwaltungsinternen Informationen und sensiblen Gesch√§ftsprozessen\n‚Ä¢ Rechtliche Verpflichtungen entstehen sowohl f√ºr √∂ffentliche Auftraggeber als auch f√ºr beauftragte Unternehmen\n\nüîê Charakteristika und Abgrenzung:\n‚Ä¢ VS-NfD Informationen sind nicht f√ºr die √ñffentlichkeit bestimmt, aber weniger sensibel als h√∂here Klassifizierungsstufen\n‚Ä¢ Die Kennzeichnung erfolgt durch entsprechende Vermerke auf Dokumenten und in IT-Systemen\n‚Ä¢ Zugang ist auf Personen beschr√§nkt, die diese Informationen f√ºr ihre dienstlichen Aufgaben ben√∂tigen\n‚Ä¢ Im Gegensatz zu h√∂heren Klassifizierungsstufen ist keine spezielle Sicherheits√ºberpr√ºfung der Personen erforderlich\n‚Ä¢ Die Klassifizierung kann zeitlich begrenzt oder dauerhaft sein, abh√§ngig von der Art der Information\n\nüè¢ Anwendungsbereiche und betroffene Organisationen:\n‚Ä¢ Bundesbeh√∂rden, Landesbeh√∂rden und kommunale Einrichtungen bei der Verarbeitung interner Informationen\n‚Ä¢ Unternehmen, die √∂ffentliche Auftr√§ge ausf√ºhren und dabei Zugang zu VS-NfD Informationen erhalten\n‚Ä¢ Beratungsunternehmen und Dienstleister, die f√ºr √∂ffentliche Auftraggeber t√§tig werden\n‚Ä¢ IT-Dienstleister und Cloud-Provider, die VS-NfD Informationen verarbeiten oder speichern\n‚Ä¢ Forschungseinrichtungen und Universit√§ten bei der Zusammenarbeit mit √∂ffentlichen Stellen\n\n‚öñÔ∏è Rechtliche Verpflichtungen und Konsequenzen:\n‚Ä¢ Verpflichtung zur Implementierung angemessener technischer und organisatorischer Schutzma√ünahmen\n‚Ä¢ Dokumentation und Nachweis der ordnungsgem√§√üen Informationsverarbeitung\n‚Ä¢ Meldepflichten bei Sicherheitsvorf√§llen oder Verdacht auf Kompromittierung\n‚Ä¢ Haftung f√ºr Sch√§den durch unsachgem√§√üe Behandlung klassifizierter Informationen\n‚Ä¢ M√∂gliche strafrechtliche Konsequenzen bei vors√§tzlicher oder fahrl√§ssiger Verletzung der Schutzpflichten\n\nüîÑ Integration in bestehende Compliance-Frameworks:\n‚Ä¢ VS-NfD Anforderungen erg√§nzen bestehende Datenschutz und Informationssicherheits-Frameworks\n‚Ä¢ Harmonisierung mit ISO Standards und branchenspezifischen Sicherheitsanforderungen\n‚Ä¢ Integration in bestehende Risikomanagement und Governance-Strukturen\n‚Ä¢ Ber√ºcksichtigung bei der Entwicklung von Informationssicherheitsrichtlinien und -verfahren\n‚Ä¢ Koordination mit anderen regulatorischen Anforderungen wie DORA oder NIS"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Welche spezifischen Sicherheitsanforderungen gelten f√ºr die Verarbeitung und Speicherung von VS-NfD Informationen?',
        answer: "Die Verarbeitung und Speicherung von VS-NfD Informationen unterliegt spezifischen Sicherheitsanforderungen, die √ºber Standard-Datenschutzma√ünahmen hinausgehen. Diese Anforderungen zielen darauf ab, die Vertraulichkeit und Integrit√§t klassifizierter Informationen zu gew√§hrleisten und unbefugte Zugriffe zu verhindern. Ein systematischer Ansatz zur Implementierung dieser Sicherheitsma√ünahmen ist entscheidend f√ºr compliant Operations.\n\nüîí Verschl√ºsselungsanforderungen:\n‚Ä¢ Mobile Ger√§te, die VS-NfD Informationen speichern oder verarbeiten, m√ºssen mit zugelassenen Verschl√ºsselungsprodukten gesch√ºtzt werden\n‚Ä¢ Verwendung von Verschl√ºsselungsalgorithmen und -produkten, die den Anforderungen des Bundesamts f√ºr Sicherheit in der Informationstechnik entsprechen\n‚Ä¢ End-to-End-Verschl√ºsselung bei der √úbertragung von VS-NfD Informationen √ºber unsichere Netzwerke\n‚Ä¢ Sichere Schl√ºsselverwaltung mit angemessenen Verfahren f√ºr Schl√ºsselgenerierung, -verteilung und -archivierung\n‚Ä¢ Regelm√§√üige √úberpr√ºfung und Aktualisierung der verwendeten Verschl√ºsselungstechnologien\n\nüíæ Speicher und Archivierungsanforderungen:\n‚Ä¢ Physische Sicherung von Speichermedien in angemessen gesch√ºtzten Bereichen\n‚Ä¢ Implementierung von Zugangskontrollen zu Speichersystemen und Archivierungsinfrastrukturen\n‚Ä¢ Sichere L√∂schung von VS-NfD Informationen nach Ablauf der Aufbewahrungsfristen\n‚Ä¢ Backup-Strategien, die die gleichen Sicherheitsanforderungen wie die Prim√§rdaten erf√ºllen\n‚Ä¢ Dokumentation und Nachverfolgung aller Speicher und Archivierungsaktivit√§ten\n\nüåê Netzwerk und √úbertragungssicherheit:\n‚Ä¢ Sichere Netzwerksegmentierung zur Isolation von VS-NfD Verarbeitungsumgebungen\n‚Ä¢ Implementierung von Firewalls und Intrusion-Detection-Systemen f√ºr den Schutz kritischer Netzwerkbereiche\n‚Ä¢ Verschl√ºsselte Kommunikationskan√§le f√ºr die √úbertragung klassifizierter Informationen\n‚Ä¢ Monitoring und Logging aller Netzwerkaktivit√§ten im Zusammenhang mit VS-NfD Informationen\n‚Ä¢ Regelm√§√üige Sicherheits√ºberpr√ºfungen und Penetrationstests der Netzwerkinfrastruktur\n\nüñ•Ô∏è Endpoint und Arbeitsplatz-Sicherheit:\n‚Ä¢ Sichere Konfiguration von Arbeitspl√§tzen und mobilen Ger√§ten f√ºr VS-NfD Verarbeitung\n‚Ä¢ Implementierung von Endpoint-Detection-and-Response-L√∂sungen\n‚Ä¢ Physische Sicherheitsma√ünahmen f√ºr Arbeitspl√§tze mit Zugang zu klassifizierten Informationen\n‚Ä¢ Screen-Locking und automatische Abmeldung bei Inaktivit√§t\n‚Ä¢ Verhinderung unbefugter Software-Installation und USB-Zugriffe\n\nüì± Mobile Device Management:\n‚Ä¢ Zentrale Verwaltung und Konfiguration mobiler Ger√§te f√ºr VS-NfD Zugriff\n‚Ä¢ Remote-Wipe-Funktionalit√§ten f√ºr den Fall von Ger√§teverlust oder -diebstahl\n‚Ä¢ Containerisierung von VS-NfD Anwendungen und Daten auf mobilen Ger√§ten\n‚Ä¢ Regelm√§√üige Sicherheitsupdates und Patch-Management f√ºr mobile Endger√§te\n‚Ä¢ Monitoring und Compliance-√úberpr√ºfung mobiler Ger√§te im Unternehmensumfeld"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Wie sollten Organisationen ihre Mitarbeiter f√ºr den Umgang mit VS-NfD Informationen schulen und sensibilisieren?',
        answer: "Die Schulung und Sensibilisierung von Mitarbeitern f√ºr den Umgang mit VS-NfD Informationen ist ein kritischer Erfolgsfaktor f√ºr eine effektive Compliance-Strategie. Menschen sind oft das schw√§chste Glied in der Sicherheitskette, aber mit angemessener Schulung und kontinuierlicher Sensibilisierung k√∂nnen sie zu einer starken Verteidigungslinie werden. Ein strukturiertes Schulungsprogramm muss sowohl die rechtlichen Anforderungen als auch die praktischen Aspekte des t√§glichen Umgangs mit klassifizierten Informationen abdecken.\n\nüìö Grundlagen-Schulungsprogramm:\n‚Ä¢ Umfassende Einf√ºhrung in die deutsche Klassifizierungslandschaft und die Bedeutung von VS-NfD\n‚Ä¢ Detaillierte Erl√§uterung der rechtlichen Verpflichtungen und m√∂glichen Konsequenzen bei Verst√∂√üen\n‚Ä¢ Praktische Anleitungen f√ºr die Identifikation und Kennzeichnung von VS-NfD Informationen\n‚Ä¢ Verfahren f√ºr die sichere Handhabung, √úbertragung und Archivierung klassifizierter Dokumente\n‚Ä¢ Incident-Response-Verfahren und Meldewege bei Sicherheitsvorf√§llen oder Verdachtsf√§llen\n\nüéØ Rollenspezifische Schulungsmodule:\n‚Ä¢ F√ºhrungskr√§fte erhalten zus√§tzliche Schulungen zu Governance-Aspekten und strategischen Compliance-√úberlegungen\n‚Ä¢ IT-Administratoren lernen spezifische technische Sicherheitsma√ünahmen und Systemkonfigurationen\n‚Ä¢ Projektmanager werden in die Integration von VS-NfD Anforderungen in Projektabl√§ufe eingewiesen\n‚Ä¢ Externe Dienstleister und Berater erhalten spezielle Briefings zu ihren besonderen Verpflichtungen\n‚Ä¢ Neue Mitarbeiter durchlaufen ein strukturiertes Onboarding-Programm mit VS-NfD Komponenten\n\nüîÑ Kontinuierliche Sensibilisierungsma√ünahmen:\n‚Ä¢ Regelm√§√üige Auffrischungsschulungen zur Aktualisierung des Wissensstands\n‚Ä¢ Simulation von Sicherheitsvorf√§llen und Phishing-Tests zur √úberpr√ºfung der Reaktionsf√§higkeit\n‚Ä¢ Newsletter und interne Kommunikation zu aktuellen Bedrohungen und Best Practices\n‚Ä¢ Workshops und Diskussionsrunden zu spezifischen Herausforderungen im Umgang mit VS-NfD\n‚Ä¢ Integration von Sicherheitsbewusstsein in die Unternehmenskultur und t√§gliche Arbeitsabl√§ufe\n\nüìã Dokumentation und Nachweisf√ºhrung:\n‚Ä¢ Systematische Dokumentation aller Schulungsaktivit√§ten und Teilnehmerlisten\n‚Ä¢ Entwicklung von Kompetenzprofilen und Qualifikationsnachweisen f√ºr verschiedene Rollen\n‚Ä¢ Regelm√§√üige Bewertung der Schulungseffektivit√§t durch Tests und praktische √úbungen\n‚Ä¢ Anpassung der Schulungsinhalte basierend auf Feedback und sich √§ndernden Anforderungen\n‚Ä¢ Integration der Schulungsdokumentation in das Compliance-Management-System\n\n‚ö†Ô∏è Spezielle Sicherheitsaspekte:\n‚Ä¢ Sensibilisierung f√ºr Social-Engineering-Angriffe und Informationsabfluss-Risiken\n‚Ä¢ Schulung zur sicheren Nutzung von Cloud-Services und externen Kommunikationsplattformen\n‚Ä¢ Bewusstsein f√ºr die Risiken von Bring-Your-Own-Device-Policies bei VS-NfD Verarbeitung\n‚Ä¢ Verst√§ndnis f√ºr die Bedeutung von Clean-Desk-Policies und physischer Informationssicherheit\n‚Ä¢ Aufkl√§rung √ºber die Risiken von unbeabsichtigter Informationsweitergabe in sozialen Medien\n\nüéì Schulungsdelivery und Methoden:\n‚Ä¢ Kombination aus Pr√§senzschulungen, E-Learning-Modulen und praktischen √úbungen\n‚Ä¢ Verwendung realistischer Szenarien und Fallstudien aus der Praxis\n‚Ä¢ Interaktive Elemente wie Rollenspiele und Gruppendiskussionen zur Vertiefung des Verst√§ndnisses\n‚Ä¢ Bereitstellung von Referenzmaterialien und Quick-Reference-Guides f√ºr den t√§glichen Gebrauch\n‚Ä¢ Regelm√§√üige Evaluation und Anpassung der Schulungsmethoden basierend auf Lerneffektivit√§t"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Welche Herausforderungen entstehen bei der Integration von VS-NfD Compliance in bestehende IT-Infrastrukturen und wie k√∂nnen diese bew√§ltigt werden?',
        answer: "Die Integration von VS-NfD Compliance in bestehende IT-Infrastrukturen bringt verschiedene technische, organisatorische und finanzielle Herausforderungen mit sich. Diese Komplexit√§t erfordert einen strategischen Ansatz, der sowohl die spezifischen Sicherheitsanforderungen von VS-NfD als auch die operativen Bed√ºrfnisse der Organisation ber√ºcksichtigt. Eine erfolgreiche Integration setzt eine gr√ºndliche Analyse der bestehenden Systeme und eine durchdachte Migrationsstrategie voraus.\n\nüèóÔ∏è Infrastruktur-Herausforderungen:\n‚Ä¢ Bestehende IT-Systeme entsprechen m√∂glicherweise nicht den spezifischen Sicherheitsanforderungen f√ºr VS-NfD Verarbeitung\n‚Ä¢ Legacy-Systeme k√∂nnen schwer zu aktualisieren oder zu ersetzen sein, insbesondere wenn sie gesch√§ftskritische Funktionen unterst√ºtzen\n‚Ä¢ Netzwerkarchitekturen m√ºssen m√∂glicherweise grundlegend √ºberarbeitet werden, um angemessene Segmentierung zu gew√§hrleisten\n‚Ä¢ Speichersysteme und Backup-Infrastrukturen erfordern Upgrades f√ºr konforme Verschl√ºsselung und Zugangskontrollen\n‚Ä¢ Integration verschiedener Sicherheitstechnologien kann zu Kompatibilit√§tsproblemen und Performance-Einbu√üen f√ºhren\n\nüîê Sicherheits-Integration:\n‚Ä¢ Implementierung zus√§tzlicher Verschl√ºsselungsebenen ohne Beeintr√§chtigung der Systemperformance\n‚Ä¢ Integration von Identity-and-Access-Management-Systemen f√ºr granulare Berechtigungskontrollen\n‚Ä¢ Harmonisierung verschiedener Monitoring und Logging-Systeme f√ºr umfassende Sicherheits√ºberwachung\n‚Ä¢ Anpassung bestehender Backup und Disaster-Recovery-Strategien an VS-NfD Anforderungen\n‚Ä¢ Koordination zwischen verschiedenen Sicherheitstools zur Vermeidung von Konflikten und Redundanzen\n\nüí∞ Kosten und Ressourcen-Management:\n‚Ä¢ Budgetplanung f√ºr Hardware-Upgrades, Software-Lizenzen und Implementierungsdienstleistungen\n‚Ä¢ Ber√ºcksichtigung laufender Betriebskosten f√ºr erweiterte Sicherheitsma√ünahmen und Compliance-Monitoring\n‚Ä¢ Personalressourcen f√ºr Projektmanagement, technische Implementierung und Change-Management\n‚Ä¢ Schulungskosten f√ºr IT-Personal und Endbenutzer zur Gew√§hrleistung ordnungsgem√§√üer Systemnutzung\n‚Ä¢ M√∂gliche Produktivit√§tsverluste w√§hrend der √úbergangsphase und Systemmigrationen\n\nüîÑ Change-Management und Betriebskontinuit√§t:\n‚Ä¢ Entwicklung detaillierter Migrationspl√§ne mit minimalen Ausfallzeiten f√ºr gesch√§ftskritische Systeme\n‚Ä¢ Stufenweise Implementierung neuer Sicherheitsma√ünahmen zur Reduzierung von Betriebsrisiken\n‚Ä¢ Umfassende Tests und Validierung aller System√§nderungen vor der Produktionseinf√ºhrung\n‚Ä¢ Schulung und Vorbereitung der Benutzer auf neue Arbeitsabl√§ufe und Sicherheitsverfahren\n‚Ä¢ Etablierung von Rollback-Pl√§nen f√ºr den Fall unvorhergesehener Probleme w√§hrend der Implementation\n\nüìä Governance und Compliance-Integration:\n‚Ä¢ Anpassung bestehender IT-Governance-Strukturen zur Ber√ºcksichtigung von VS-NfD Anforderungen\n‚Ä¢ Integration von Compliance-Monitoring in bestehende IT-Service-Management-Prozesse\n‚Ä¢ Entwicklung neuer Policies und Procedures f√ºr VS-NfD konforme IT-Operations\n‚Ä¢ Etablierung von Audit-Trails und Reporting-Mechanismen f√ºr regulatorische Nachweise\n‚Ä¢ Koordination zwischen IT-Abteilung, Compliance-Teams und Gesch√§ftsf√ºhrung f√ºr strategische Entscheidungen\n\nüöÄ Strategische L√∂sungsans√§tze:\n‚Ä¢ Durchf√ºhrung umfassender Gap-Analysen zur Identifikation spezifischer Anpassungsbedarfe\n‚Ä¢ Entwicklung phasenweiser Implementierungsstrategien zur Minimierung von Risiken und Kosten\n‚Ä¢ Nutzung von Cloud-Services und Managed-Security-Providern f√ºr spezialisierte VS-NfD Funktionen\n‚Ä¢ Implementierung von Zero-Trust-Architekturen als Grundlage f√ºr granulare Sicherheitskontrollen\n‚Ä¢ Aufbau interner Expertise durch gezielte Personalentwicklung und externe Beratungsunterst√ºtzung"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
