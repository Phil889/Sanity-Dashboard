import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Tool page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-tool' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-tool" not found')
    }
    
    // Create new FAQs for IAM Tool implementation, deployment utilities, and configuration management
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Welche Implementierungstools und Deployment-Utilities sind f√ºr eine erfolgreiche IAM Tool Einf√ºhrung entscheidend?',
        answer: "Die erfolgreiche Implementierung von IAM Tools erfordert eine sorgf√§ltige Auswahl und den strategischen Einsatz spezialisierter Implementierungstools und Deployment-Utilities. Diese Tools bilden das technische Fundament f√ºr eine reibungslose Einf√ºhrung und gew√§hrleisten, dass die IAM-L√∂sung optimal in die bestehende IT-Infrastruktur integriert wird.\n\nüöÄ Deployment-Automation und Infrastructure-as-Code:\n‚Ä¢ Terraform und Ansible f√ºr automatisierte Infrastructure Provisioning und Configuration Management\n‚Ä¢ Docker und Kubernetes f√ºr containerisierte IAM Deployments mit Skalierbarkeit und Portabilit√§t\n‚Ä¢ CI/CD Pipelines f√ºr automatisierte Testing, Deployment und Rollback-Capabilities\n‚Ä¢ Infrastructure Monitoring Tools f√ºr Real-time Visibility w√§hrend der Deployment-Phase\n‚Ä¢ Version Control Systeme f√ºr Configuration Management und Change Tracking\n\nüîß Configuration Management und Setup-Tools:\n‚Ä¢ LDAP Browser und Directory Management Tools f√ºr Directory Integration und Schema-Konfiguration\n‚Ä¢ Database Migration Tools f√ºr Identity Data Transfer und Schema-Updates\n‚Ä¢ Certificate Management Utilities f√ºr PKI Setup und SSL/TLS Configuration\n‚Ä¢ Network Configuration Tools f√ºr Firewall Rules und Security Group Management\n‚Ä¢ Backup und Recovery Tools f√ºr Data Protection w√§hrend der Implementation\n\nüìä Testing und Validation Frameworks:\n‚Ä¢ Load Testing Tools f√ºr Performance Validation unter realistischen Bedingungen\n‚Ä¢ Security Testing Frameworks f√ºr Vulnerability Assessment und Penetration Testing\n‚Ä¢ Integration Testing Suites f√ºr End-to-End Workflow Validation\n‚Ä¢ User Acceptance Testing Platforms f√ºr Usability und Functionality Verification\n‚Ä¢ Automated Testing Tools f√ºr Regression Testing und Continuous Validation\n\nüîÑ Migration und Data Transfer Utilities:\n‚Ä¢ Identity Data Migration Tools f√ºr sichere und vollst√§ndige User-Daten√ºbertragung\n‚Ä¢ Legacy System Integration Utilities f√ºr Backward Compatibility und Transition Management\n‚Ä¢ Data Mapping und Transformation Tools f√ºr Schema Conversion und Data Cleansing\n‚Ä¢ Synchronization Tools f√ºr Real-time Data Consistency zwischen Systemen\n‚Ä¢ Rollback und Recovery Mechanisms f√ºr Safe Migration mit Fallback-Optionen\n\nüìã Project Management und Orchestration Tools:\n‚Ä¢ Implementation Planning Software f√ºr Timeline Management und Resource Allocation\n‚Ä¢ Change Management Platforms f√ºr Stakeholder Communication und Training Coordination\n‚Ä¢ Documentation Tools f√ºr Technical Specifications und User Guides\n‚Ä¢ Risk Management Frameworks f√ºr Issue Tracking und Mitigation Planning\n‚Ä¢ Quality Assurance Tools f√ºr Compliance Validation und Audit Preparation\n\nüõ°Ô∏è Security und Compliance Utilities:\n‚Ä¢ Security Hardening Scripts f√ºr Post-deployment Security Configuration\n‚Ä¢ Compliance Scanning Tools f√ºr Regulatory Requirement Validation\n‚Ä¢ Audit Logging Configuration f√ºr Comprehensive Activity Tracking\n‚Ä¢ Encryption Key Management Tools f√ºr Secure Key Generation und Distribution\n‚Ä¢ Access Control Validation Tools f√ºr Permission Verification und Role Testing"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Wie gestaltet man effektive Configuration Management Prozesse f√ºr IAM Tools und welche Best Practices sind dabei zu beachten?',
        answer: "Configuration Management f√ºr IAM Tools ist ein kritischer Erfolgsfaktor, der die Stabilit√§t, Sicherheit und Wartbarkeit der gesamten Identity-Infrastruktur bestimmt. Ein systematischer Ansatz f√ºr Configuration Management gew√§hrleistet konsistente Konfigurationen, reduziert Fehlerrisiken und erm√∂glicht effiziente √Ñnderungsprozesse.\n\nüìã Configuration Baseline und Standards:\n‚Ä¢ Standardisierte Configuration Templates f√ºr verschiedene IAM Tool Kategorien und Deployment-Szenarien\n‚Ä¢ Security Baseline Configurations mit Hardening Guidelines und Best Practice Settings\n‚Ä¢ Environment-spezifische Konfigurationen f√ºr Development, Testing und Production Umgebungen\n‚Ä¢ Compliance Configuration Standards f√ºr regulatorische Anforderungen und Audit-Readiness\n‚Ä¢ Version-controlled Configuration Files mit detailliertem Change Tracking und Approval Workflows\n\nüîÑ Change Management und Approval Prozesse:\n‚Ä¢ Strukturierte Change Request Prozesse mit Impact Assessment und Risk Evaluation\n‚Ä¢ Multi-Level Approval Workflows basierend auf Change Criticality und Business Impact\n‚Ä¢ Automated Configuration Validation vor Deployment mit Syntax und Logic Checking\n‚Ä¢ Rollback Procedures f√ºr schnelle Recovery bei Configuration-bedingten Issues\n‚Ä¢ Change Documentation und Communication f√ºr Stakeholder Awareness und Compliance\n\nüõ†Ô∏è Automation und Tool Integration:\n‚Ä¢ Infrastructure-as-Code Implementierung f√ºr reproduzierbare und versionierte Konfigurationen\n‚Ä¢ Configuration Management Databases f√ºr zentrale Inventory und Dependency Tracking\n‚Ä¢ Automated Compliance Scanning f√ºr kontinuierliche Configuration Drift Detection\n‚Ä¢ Integration mit Monitoring Tools f√ºr Real-time Configuration Health Monitoring\n‚Ä¢ Self-healing Mechanisms f√ºr automatische Correction von Configuration Anomalien\n\nüîç Monitoring und Drift Detection:\n‚Ä¢ Continuous Configuration Monitoring f√ºr Unauthorized Changes und Security Violations\n‚Ä¢ Drift Detection Algorithms f√ºr Identification von Configuration Abweichungen\n‚Ä¢ Alerting Mechanisms f√ºr Critical Configuration Changes und Security-relevante Modifications\n‚Ä¢ Regular Configuration Audits f√ºr Compliance Verification und Best Practice Adherence\n‚Ä¢ Performance Impact Analysis f√ºr Configuration Changes und Optimization Opportunities\n\nüìä Documentation und Knowledge Management:\n‚Ä¢ Comprehensive Configuration Documentation mit Technical Specifications und Rationale\n‚Ä¢ Configuration Dependency Mapping f√ºr Impact Analysis und Change Planning\n‚Ä¢ Troubleshooting Guides f√ºr Common Configuration Issues und Resolution Procedures\n‚Ä¢ Training Materials f√ºr Configuration Management Teams und End Users\n‚Ä¢ Lessons Learned Documentation f√ºr Continuous Improvement und Best Practice Evolution\n\nüîí Security und Access Control:\n‚Ä¢ Role-based Access Control f√ºr Configuration Management Functions und Administrative Privileges\n‚Ä¢ Segregation of Duties f√ºr Configuration Changes und Approval Processes\n‚Ä¢ Secure Configuration Storage mit Encryption und Access Logging\n‚Ä¢ Regular Security Reviews f√ºr Configuration-related Vulnerabilities und Exposure Assessment\n‚Ä¢ Incident Response Procedures f√ºr Configuration-related Security Breaches und Recovery Actions\n\nüéØ Performance Optimization und Tuning:\n‚Ä¢ Performance Baseline Establishment f√ºr Configuration Impact Measurement\n‚Ä¢ Capacity Planning Integration f√ºr Resource Allocation und Scaling Decisions\n‚Ä¢ Configuration Optimization Strategies f√ºr Performance Enhancement und Resource Efficiency\n‚Ä¢ Load Testing Integration f√ºr Configuration Change Impact Validation\n‚Ä¢ Continuous Improvement Processes f√ºr Configuration Refinement und Optimization"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Welche Deployment-Strategien und Rollout-Methoden haben sich f√ºr IAM Tools als besonders erfolgreich erwiesen?',
        answer: "Die Wahl der richtigen Deployment-Strategie f√ºr IAM Tools ist entscheidend f√ºr den Implementierungserfolg und minimiert Risiken f√ºr die Gesch√§ftskontinuit√§t. Verschiedene Rollout-Methoden bieten spezifische Vorteile je nach organisatorischen Anforderungen, Risikotoleranz und technischen Gegebenheiten.\n\nüéØ Phased Rollout und Graduelle Einf√ºhrung:\n‚Ä¢ Pilot Deployment mit ausgew√§hlten User-Gruppen f√ºr Real-world Testing und Feedback Collection\n‚Ä¢ Department-wise Rollout f√ºr kontrollierte Expansion und Lessons Learned Integration\n‚Ä¢ Geographic Phasing f√ºr Multi-location Organizations mit regionaler Risk Mitigation\n‚Ä¢ Application-based Phasing f√ºr schrittweise Integration verschiedener Business Applications\n‚Ä¢ Feature-based Rollout f√ºr graduelle Functionality Activation und User Adaptation\n\nüîÑ Blue-Green Deployment f√ºr Zero-Downtime:\n‚Ä¢ Parallel Environment Setup f√ºr Seamless Switching zwischen Production Environments\n‚Ä¢ Traffic Routing Strategies f√ºr Gradual Load Transfer und Performance Monitoring\n‚Ä¢ Automated Health Checks f√ºr Environment Validation vor Traffic Switching\n‚Ä¢ Instant Rollback Capabilities f√ºr Immediate Recovery bei Performance oder Functionality Issues\n‚Ä¢ Data Synchronization Mechanisms f√ºr Consistent State zwischen Blue und Green Environments\n\nüöÄ Canary Deployment f√ºr Risk Mitigation:\n‚Ä¢ Small-scale Production Testing mit Limited User Exposure f√ºr Early Issue Detection\n‚Ä¢ Gradual Traffic Increase basierend auf Performance Metrics und User Feedback\n‚Ä¢ Automated Monitoring und Alerting f√ºr Anomaly Detection und Automatic Rollback\n‚Ä¢ A/B Testing Integration f√ºr Feature Validation und User Experience Optimization\n‚Ä¢ Progressive Delivery mit Feature Flags f√ºr Controlled Feature Activation\n\nüèóÔ∏è Big Bang versus Incremental Approaches:\n‚Ä¢ Big Bang Deployment f√ºr Organizations mit Strong Change Management Capabilities\n‚Ä¢ Risk Assessment f√ºr All-at-once Implementation versus Gradual Transition\n‚Ä¢ Resource Allocation Strategies f√ºr Intensive Support w√§hrend Big Bang Deployments\n‚Ä¢ Contingency Planning f√ºr Rapid Issue Resolution und Business Continuity\n‚Ä¢ Communication Strategies f√ºr Organization-wide Change Management und User Preparation\n\nüîß Hybrid Deployment Strategies:\n‚Ä¢ Combination Approaches f√ºr Complex Organizations mit Diverse Requirements\n‚Ä¢ Risk-based Deployment Planning mit Critical System Prioritization\n‚Ä¢ Parallel Running Periods f√ºr Legacy System Overlap und Gradual Transition\n‚Ä¢ Selective Rollback Capabilities f√ºr Partial Deployment Reversal\n‚Ä¢ Integration Testing in Production f√ºr Real-world Validation ohne Full Commitment\n\nüìä Success Metrics und Validation Criteria:\n‚Ä¢ Performance Benchmarks f√ºr Authentication Response Times und System Throughput\n‚Ä¢ User Adoption Metrics f√ºr Training Effectiveness und Change Management Success\n‚Ä¢ Security Metrics f√ºr Incident Reduction und Compliance Improvement\n‚Ä¢ Business Impact Measurements f√ºr ROI Validation und Value Demonstration\n‚Ä¢ Technical Metrics f√ºr System Stability und Integration Success\n\nüõ°Ô∏è Risk Management und Contingency Planning:\n‚Ä¢ Comprehensive Risk Assessment f√ºr Each Deployment Phase und Mitigation Strategies\n‚Ä¢ Rollback Procedures f√ºr Quick Recovery und Business Continuity Maintenance\n‚Ä¢ Communication Plans f√ºr Stakeholder Updates und Issue Escalation\n‚Ä¢ Support Team Readiness f√ºr Intensive User Support w√§hrend Transition Periods\n‚Ä¢ Business Continuity Planning f√ºr Critical Process Maintenance w√§hrend Deployment"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Wie integriert man IAM Tools optimal in bestehende IT-Infrastrukturen und welche Integration-Patterns sind dabei erfolgreich?',
        answer: "Die Integration von IAM Tools in bestehende IT-Infrastrukturen erfordert einen strategischen Ansatz, der technische Kompatibilit√§t, Sicherheitsanforderungen und operative Effizienz optimal balanciert. Bew√§hrte Integration-Patterns reduzieren Komplexit√§t und gew√§hrleisten nahtlose Interoperabilit√§t zwischen verschiedenen Systemkomponenten.\n\nüîó API-First Integration und Service-Oriented Architecture:\n‚Ä¢ RESTful API Design f√ºr standardisierte System-zu-System Kommunikation\n‚Ä¢ GraphQL Implementation f√ºr flexible Data Querying und Efficient Resource Utilization\n‚Ä¢ Microservices Architecture f√ºr Modular Integration und Independent Scaling\n‚Ä¢ API Gateway Pattern f√ºr Centralized Access Control und Traffic Management\n‚Ä¢ Event-driven Architecture f√ºr Real-time Data Synchronization und Workflow Automation\n\nüåê Directory Integration und Identity Federation:\n‚Ä¢ LDAP Integration f√ºr Seamless Directory Service Connectivity und User Data Synchronization\n‚Ä¢ Active Directory Federation f√ºr Windows-centric Environments und Single Sign-On\n‚Ä¢ SAML Federation f√ºr Cross-domain Authentication und Trust Relationship Management\n‚Ä¢ OAuth und OpenID Connect f√ºr Modern Application Integration und Secure Authorization\n‚Ä¢ Just-in-Time Provisioning f√ºr Dynamic User Creation und Attribute Mapping\n\nüîÑ Data Synchronization und Master Data Management:\n‚Ä¢ Identity Data Synchronization Patterns f√ºr Consistent User Information across Systems\n‚Ä¢ Master Data Management Strategies f√ºr Authoritative Source Definition und Data Governance\n‚Ä¢ Real-time Synchronization f√ºr Immediate Propagation von Identity Changes\n‚Ä¢ Batch Synchronization f√ºr Bulk Data Updates und Scheduled Maintenance Windows\n‚Ä¢ Conflict Resolution Mechanisms f√ºr Data Inconsistency Handling und Automated Reconciliation\n\nüõ†Ô∏è Legacy System Integration und Modernization:\n‚Ä¢ Adapter Pattern f√ºr Legacy Application Connectivity ohne Code Modifications\n‚Ä¢ Proxy Integration f√ºr Transparent Authentication Layer Implementation\n‚Ä¢ Database Integration f√ºr Direct Identity Store Connectivity und Custom Schema Support\n‚Ä¢ Screen Scraping und RPA f√ºr Legacy System Automation und Workflow Integration\n‚Ä¢ Gradual Modernization Strategies f√ºr Phased Legacy System Replacement\n\nüîí Security Integration und Trust Boundaries:\n‚Ä¢ Zero Trust Architecture Implementation f√ºr Comprehensive Security Integration\n‚Ä¢ Network Segmentation f√ºr Secure Communication Channels und Traffic Isolation\n‚Ä¢ Certificate Management Integration f√ºr PKI-based Authentication und Encryption\n‚Ä¢ Security Information Integration f√ºr Centralized Logging und Threat Correlation\n‚Ä¢ Privileged Access Integration f√ºr Elevated Permission Management und Audit Trails\n\nüìä Monitoring und Observability Integration:\n‚Ä¢ Centralized Logging Integration f√ºr Comprehensive Audit Trails und Compliance Reporting\n‚Ä¢ Performance Monitoring Integration f√ºr System Health Visibility und Proactive Issue Detection\n‚Ä¢ Business Intelligence Integration f√ºr Identity Analytics und Usage Pattern Analysis\n‚Ä¢ Alerting System Integration f√ºr Real-time Notification und Incident Response\n‚Ä¢ Dashboard Integration f√ºr Executive Visibility und Operational Metrics\n\nüéØ Best Practices f√ºr Successful Integration:\n‚Ä¢ Comprehensive Integration Testing f√ºr End-to-End Workflow Validation\n‚Ä¢ Phased Integration Approach f√ºr Risk Mitigation und Gradual System Adoption\n‚Ä¢ Documentation und Knowledge Transfer f√ºr Sustainable Integration Maintenance\n‚Ä¢ Performance Optimization f√ºr Efficient Resource Utilization und User Experience\n‚Ä¢ Change Management Integration f√ºr Smooth Transition und User Adoption"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
