import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating KRITIS Gap-Analyse Organisation & Technik page with C-Level FAQs batch 3...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'kritis-gap-analyse-organisation-technik' })
    
    if (!existingDoc) {
      throw new Error('Document "kritis-gap-analyse-organisation-technik" not found')
    }
    
    // Create new C-Level FAQs
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 9),
        question: "Welche regulatorischen Entwicklungen und zuk√ºnftigen Anforderungen sollten bei einer KRITIS Gap-Analyse bereits heute ber√ºcksichtigt werden?",
        answer: "Die Regulierungslandschaft f√ºr kritische Infrastrukturen entwickelt sich rasant weiter, getrieben von sich versch√§rfenden Bedrohungslagen und technologischen Fortschritten. Eine vorausschauende KRITIS Gap-Analyse muss nicht nur heutige Compliance-Anforderungen erf√ºllen, sondern auch zuk√ºnftige regulatorische Entwicklungen antizipieren, um nachhaltige und zukunftsf√§hige Sicherheitsstrategien zu entwickeln.\n\nüá™üá∫ Kommende EU-regulatorische Anforderungen:\n‚Ä¢ NIS2-Richtlinie-Umsetzung: Erweiterte Sicherheitsanforderungen, versch√§rfte Meldepflichten und h√∂here Bu√ügelder f√ºr eine breitere Palette kritischer Entit√§ten ab Oktober 2024.\n‚Ä¢ Cyber Resilience Act (CRA): Neue Cybersecurity-Anforderungen f√ºr IoT-Ger√§te und vernetzte Produkte, die erhebliche Auswirkungen auf kritische Infrastrukturen haben werden.\n‚Ä¢ AI Act Auswirkungen: Regulierung von KI-Systemen in kritischen Infrastrukturen mit strengen Risikoklassifizierungen und Compliance-Anforderungen.\n‚Ä¢ Digital Services Act (DSA) √úberschneidungen: Erweiterte Transparenz- und Risikomanagement-Anforderungen f√ºr digitale Dienste kritischer Infrastrukturen.\n‚Ä¢ Critical Entities Resilience Directive (CER): Physische Resilienz-Anforderungen, die √ºber reine Cybersecurity hinausgehen.\n\nüåê Internationale Regulatory Trends:\n‚Ä¢ NIST Cybersecurity Framework 2.0: Erweiterte Governance- und Supply-Chain-Anforderungen mit globaler Ausstrahlung.\n‚Ä¢ ISO 27001:2022 Updates: Neue Kontrollfamilien f√ºr Cloud Security, Privacy Engineering und Supply Chain Risk Management.\n‚Ä¢ IEC 62443 Evolution: Weiterentwicklung der Industrials Cybersecurity Standards mit strikteren OT-Sicherheitsanforderungen.\n‚Ä¢ Quantensichere Kryptografie: Vorbereitung auf Post-Quantum-Cryptography-Standards und deren Implementierung.\n\nüìà Zukunftsorientierte Gap-Analyse-Dimensionen:\n‚Ä¢ Regulatory Horizon Scanning: Systematische √úberwachung sich entwickelnder Regulierungen und deren potenzielle Auswirkungen auf die Organisation.\n‚Ä¢ Future-Proof Architecture Assessment: Bewertung der Anpassungsf√§higkeit bestehender Sicherheitsarchitekturen an kommende Anforderungen.\n‚Ä¢ Compliance-Roadmap-Integration: Einbettung zuk√ºnftiger regulatorischer Anforderungen in langfristige Technologie- und Sicherheitsstrategien.\n‚Ä¢ Cross-Border-Compliance-Harmonisierung: Vorbereitung auf international harmonisierte Standards und grenz√ºberschreitende Compliance-Anforderungen.\n\nüöÄ ADVISORI's Forward-Looking-Approach:\n‚Ä¢ Regulatory Intelligence: Kontinuierliche Beobachtung und Analyse sich entwickelnder Regulierungen durch spezialisierte Regulatory Affairs Experten.\n‚Ä¢ Future-State-Design: Entwicklung von Sicherheitskonzepten, die bereits heute auf zuk√ºnftige Anforderungen ausgelegt sind.\n‚Ä¢ Adaptive Compliance Frameworks: Aufbau flexibler Compliance-Strukturen, die sich an neue Anforderungen anpassen k√∂nnen.\n‚Ä¢ Early-Adopter-Strategien: Unterst√ºtzung bei der proaktiven Implementierung kommender Standards f√ºr Wettbewerbsvorteile."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 10),
        question: "Wie kann eine KRITIS Gap-Analyse zur Optimierung der Lieferketten-Sicherheit und zur Reduzierung von Supply-Chain-Risiken beitragen?",
        answer: "Supply-Chain-Angriffe haben sich zu einer der gef√§hrlichsten Bedrohungen f√ºr kritische Infrastrukturen entwickelt. Eine umfassende KRITIS Gap-Analyse muss das gesamte √ñkosystem von Lieferanten, Partnern und Dienstleistern bewerten und robuste Supply-Chain-Security-Strategien entwickeln, die sowohl Cyber-Risiken als auch physische Abh√§ngigkeiten adressieren.\n\nüîó Supply-Chain-Risiko-Dimensionen f√ºr kritische Infrastrukturen:\n‚Ä¢ Software-Supply-Chain-Compromises: Bewertung der Risiken durch kompromittierte Software-Updates, Third-Party-Libraries und Open-Source-Komponenten in kritischen Systemen.\n‚Ä¢ Hardware-Tampering und Counterfeit Components: Analyse der Risiken durch manipulierte oder gef√§lschte Hardware-Komponenten in kritischen Infrastrukturen.\n‚Ä¢ Service-Provider-Dependencies: Bewertung der Abh√§ngigkeiten von kritischen Dienstleistern wie Cloud-Providern, Managed-Security-Services und Wartungsunternehmen.\n‚Ä¢ Geopolitische Supply-Chain-Risiken: Ber√ºcksichtigung geopolitischer Spannungen und deren Auswirkungen auf internationale Lieferketten.\n‚Ä¢ Cascading-Failure-Potentials: Analyse der M√∂glichkeit von Kaskadenausf√§llen durch Supply-Chain-Unterbrechungen.\n\nüîç Umfassende Supply-Chain-Assessment-Methoden:\n‚Ä¢ Vendor Risk Assessment Matrix: Systematische Bewertung aller Lieferanten nach Kritikalit√§t, Sicherheitsniveau und potentiellen Auswirkungen bei Kompromittierung.\n‚Ä¢ Supply-Chain-Mapping und Visualisierung: Vollst√§ndige Kartierung aller direkten und indirekten Abh√§ngigkeiten bis hin zu Sub-Sub-Lieferanten.\n‚Ä¢ Security-by-Design-Evaluation: Bewertung der Integration von Sicherheitsanforderungen in Beschaffungsprozesse und Vertragsstrukturen.\n‚Ä¢ Continuous-Monitoring-Capabilities: Assessment der F√§higkeiten zur kontinuierlichen √úberwachung von Lieferanten-Sicherheitsstatus.\n‚Ä¢ Incident-Response-Coordination: Bewertung der Koordinationsf√§higkeiten bei Supply-Chain-Security-Incidents.\n\nüõ°Ô∏è Integrierte Supply-Chain-Security-Strategien:\n‚Ä¢ Zero-Trust-Supply-Chain-Prinzipien: Implementierung von Verification-First-Ans√§tzen, die grunds√§tzlich keine Vertrauensstellung zu Lieferanten voraussetzen.\n‚Ä¢ Diversification-and-Resilience-Strategies: Entwicklung von Strategien zur Risikominimierung durch Lieferanten-Diversifikation und alternative Versorgungswege.\n‚Ä¢ Contractual-Security-Requirements: Integration detaillierter Cybersecurity-Anforderungen in Lieferantenvertr√§ge mit messbaren SLAs.\n‚Ä¢ Supply-Chain-Incident-Response-Playbooks: Entwicklung spezifischer Reaktionsverfahren f√ºr verschiedene Supply-Chain-Compromise-Szenarien.\n‚Ä¢ Vendor-Security-Maturity-Programs: Aufbau von Programmen zur kontinuierlichen Verbesserung der Sicherheits-Reife von Lieferanten.\n\nüìä Advanced Supply-Chain-Risk-Management:\n‚Ä¢ AI-Enhanced-Threat-Detection: Einsatz von Machine Learning f√ºr die Erkennung abnormaler Verhaltensweisen in Supply-Chain-Interaktionen.\n‚Ä¢ Blockchain-based-Provenance-Tracking: Implementierung unver√§nderlicher Herkunftsnachweise f√ºr kritische Komponenten und Software.\n‚Ä¢ Digital-Twins-for-Supply-Chain-Modeling: Nutzung digitaler Zwillinge zur Simulation und Optimierung von Supply-Chain-Resilienz.\n‚Ä¢ Quantum-Safe-Supply-Chain-Cryptography: Vorbereitung auf quantensichere Verschl√ºsselung in Supply-Chain-Kommunikation."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 11),
        question: "Welche Rolle spielt die Integration von Incident Response und Business Continuity Management bei einer KRITIS Gap-Analyse?",
        answer: "Incident Response und Business Continuity Management sind kritische Erfolgsfaktoren f√ºr die Resilienz kritischer Infrastrukturen. Eine professionelle KRITIS Gap-Analyse muss diese Bereiche nicht als separate Silos betrachten, sondern als integrierte Komponenten eines ganzheitlichen Resilienz-Frameworks, das sowohl pr√§ventive als auch reaktive Ma√ünahmen umfasst.\n\nüö® Integrierte Incident Response f√ºr kritische Infrastrukturen:\n‚Ä¢ Multi-Domain-Incident-Coordination: Koordination zwischen IT-Security-Incidents, OT-Sicherheitsvorf√§llen, physischen Sicherheitsereignissen und Safety-Incidents.\n‚Ä¢ Stakeholder-Ecosystem-Management: Einbindung aller relevanten internen und externen Stakeholder, einschlie√ülich Regulierungsbeh√∂rden, anderen KRITIS-Betreibern und Notfalldiensten.\n‚Ä¢ Real-Time-Decision-Support: Entwicklung von Entscheidungsunterst√ºtzungssystemen, die in Echtzeit relevante Informationen f√ºr Incident-Response-Entscheidungen bereitstellen.\n‚Ä¢ Cascading-Impact-Assessment: Bewertung und Management der potenziellen Auswirkungen von Incidents auf nachgelagerte kritische Infrastrukturen.\n‚Ä¢ Public-Communication-Strategies: Vorbereitung professioneller Kommunikationsstrategien f√ºr die √ñffentlichkeit und Medien bei kritischen Incidents.\n\nüèóÔ∏è Business Continuity f√ºr systemkritische Operationen:\n‚Ä¢ Mission-Critical-Service-Prioritization: Klare Identifikation und Priorisierung der absolut kritischen Services, die unter allen Umst√§nden aufrechterhalten werden m√ºssen.\n‚Ä¢ Alternative-Operation-Modes: Entwicklung von degradierten Betriebsmodi, die bei Teilausf√§llen eine grundlegende Versorgung gew√§hrleisten.\n‚Ä¢ Cross-Infrastructure-Dependencies: Management der Abh√§ngigkeiten zwischen verschiedenen kritischen Infrastrukturen und Koordination von Recovery-Ma√ünahmen.\n‚Ä¢ Supply-Chain-Continuity-Planning: Integration von Lieferanten und Partnern in Business Continuity Planungen mit klaren Eskalationswegen.\n‚Ä¢ Regulatory-Compliance-during-Crisis: Sicherstellung der Einhaltung regulatorischer Meldepflichten auch w√§hrend Krisensituationen.\n\nüîÑ Integration und Orchestrierung:\n‚Ä¢ Unified-Command-Structures: Etablierung einheitlicher F√ºhrungsstrukturen, die sowohl Incident Response als auch Business Continuity koordinieren.\n‚Ä¢ Cross-Functional-Team-Integration: Zusammenarbeit zwischen IT, OT, Operations, Legal, Communications und Management in integrierten Crisis-Response-Teams.\n‚Ä¢ Scenario-Based-Exercise-Programs: Durchf√ºhrung realistischer √úbungen, die sowohl technische Incidents als auch Business-Continuity-Herausforderungen simulieren.\n‚Ä¢ Lessons-Learned-Integration: Systematische Erfassung und Integration von Erkenntnissen aus realen Incidents und √úbungen zur kontinuierlichen Verbesserung.\n‚Ä¢ Technology-Enabled-Coordination: Nutzung moderner Kollaborations- und Koordinationstechnologien f√ºr effektive Crisis-Response.\n\nüìà Kontinuierliche Verbesserung und Maturity-Development:\n‚Ä¢ Maturity-Assessment-Frameworks: Bewertung der Reife von Incident Response und Business Continuity Capabilities im Vergleich zu Branchenstandards.\n‚Ä¢ Performance-Metrics-and-KPIs: Entwicklung messbarer Indikatoren f√ºr die Effektivit√§t von Response- und Continuity-Ma√ünahmen.\n‚Ä¢ Adaptive-Improvement-Cycles: Implementierung kontinuierlicher Verbesserungszyklen basierend auf sich √§ndernden Bedrohungslagen und Lessons Learned."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 12),
        question: "Wie unterst√ºtzt ADVISORI Organisationen dabei, ihre KRITIS Gap-Analyse-Ergebnisse in effektive Governance-Strukturen und F√ºhrungsinstrumente zu √ºbersetzen?",
        answer: "Die Translation von technischen Gap-Analyse-Ergebnissen in strategische Governance-Instrumente ist entscheidend f√ºr nachhaltigen Erfolg. ADVISORI entwickelt ma√ügeschneiderte Governance-Frameworks, die es F√ºhrungskr√§ften erm√∂glichen, KRITIS-Compliance als strategisches Asset zu nutzen und kontinuierliche Verbesserungen systematisch zu steuern.\n\nüéØ Executive-Level Governance Integration:\n‚Ä¢ Board-Level-Reporting-Frameworks: Entwicklung pr√§gnanter, aussagekr√§ftiger Dashboards und Berichte, die komplexe Sicherheitsinformationen in strategische Business-Intelligence √ºbersetzen.\n‚Ä¢ Risk-Appetite-Definition: Unterst√ºtzung bei der Definition organisationsspezifischer Risikotoleranz und deren Integration in Entscheidungsprozesse.\n‚Ä¢ Strategic-Security-Investment-Planning: Verkn√ºpfung von Gap-Analyse-Erkenntnissen mit langfristiger Budgetplanung und strategischen Investitionsentscheidungen.\n‚Ä¢ Compliance-Performance-Metrics: Entwicklung von KPIs, die sowohl regulatorische Compliance als auch Gesch√§ftsnutzen messbar machen.\n‚Ä¢ Executive-Education-Programs: Schulung von F√ºhrungskr√§ften in KRITIS-spezifischen Governance-Anforderungen und -M√∂glichkeiten.\n\nüè¢ Organisatorische Governance-Strukturen:\n‚Ä¢ Security-Governance-Committees: Etablierung effektiver Governance-Strukturen mit klaren Verantwortlichkeiten, Befugnissen und Eskalationswegen.\n‚Ä¢ Three-Lines-of-Defense-Integration: Optimale Integration von KRITIS-Security in bestehende Risk-Management-Frameworks und Kontrollsysteme.\n‚Ä¢ Policy-and-Procedure-Frameworks: Entwicklung umfassender, aber praxistauglicher Richtlinien und Verfahren f√ºr KRITIS-Compliance.\n‚Ä¢ Competency-and-Training-Management: Aufbau systematischer Kompetenzentwicklungsprogramme f√ºr alle Hierarchieebenen.\n‚Ä¢ Performance-Management-Integration: Einbettung von Sicherheitszielen in individuelle und organisatorische Performance-Management-Systeme.\n\nüìä Kontinuierliches Monitoring und Steuerung:\n‚Ä¢ Real-Time-Compliance-Dashboards: Implementierung von Echtzeit-√úberwachungssystemen, die kontinuierliche Transparenz √ºber den Compliance-Status bieten.\n‚Ä¢ Predictive-Risk-Analytics: Nutzung von Datenanalysen zur Vorhersage potenzieller Compliance-Probleme und proaktiven Gegensteuerung.\n‚Ä¢ Automated-Compliance-Monitoring: Automatisierung routinem√§√üiger Compliance-Pr√ºfungen zur Reduzierung manueller Aufw√§nde und Erh√∂hung der Genauigkeit.\n‚Ä¢ Exception-Management-Processes: Etablierung strukturierter Verfahren f√ºr den Umgang mit tempor√§ren Compliance-Abweichungen.\n‚Ä¢ Continuous-Improvement-Cycles: Implementation systematischer Verbesserungszyklen basierend auf Performance-Daten und sich √§ndernden Anforderungen.\n\nüåü Strategic Value Creation:\n‚Ä¢ Competitive-Advantage-Development: Transformation von KRITIS-Compliance von einer Kostenstelle zu einem strategischen Differenzierungsfaktor.\n‚Ä¢ Innovation-Enablement: Nutzung von Sicherheitsinvestitionen als Katalysator f√ºr digitale Innovation und Modernisierung.\n‚Ä¢ Stakeholder-Value-Communication: Professionelle Kommunikation des Sicherheitsniveaus an Kunden, Partner und Regulatoren als Vertrauensfaktor.\n‚Ä¢ Crisis-Leadership-Preparedness: Vorbereitung der F√ºhrungsebene auf effektive Krisenf√ºhrung bei Sicherheitsvorf√§llen.\n‚Ä¢ Regulatory-Relationship-Management: Aufbau positiver, proaktiver Beziehungen zu Regulierungsbeh√∂rden durch demonstrierte Compliance-Exzellenz."
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new C-Level FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ C-Level FAQs batch 3 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
