import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Projekte page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-projekte' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-projekte" not found')
    }
    
    // Create new FAQs for IAM Projekte fundamentals
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Was macht IAM Projekte zu den komplexesten Transformationsinitiativen in modernen Unternehmen und welche strategischen Erfolgsfaktoren sind entscheidend f√ºr nachhaltigen Projekterfolg?',
        answer: "IAM Projekte geh√∂ren zu den anspruchsvollsten Transformationsinitiativen, da sie gleichzeitig technische Innovation, organisatorische Ver√§nderungen und strategische Gesch√§ftsziele vorantreiben m√ºssen. Anders als traditionelle IT-Projekte ber√ºhren IAM-Transformationen jeden Aspekt der Unternehmensarchitektur und erfordern eine einzigartige Kombination aus technischer Expertise, strategischem Weitblick und exzellenter Projektf√ºhrung f√ºr nachhaltigen Erfolg.\n\nüéØ Strategische Komplexit√§t und Business-Impact:\n‚Ä¢ Enterprise-weite Transformation mit Auswirkungen auf alle Gesch√§ftsprozesse und Benutzergruppen\n‚Ä¢ Integration heterogener Systemlandschaften mit Legacy-Systemen und modernen Cloud-Anwendungen\n‚Ä¢ Compliance-Integration f√ºr multiple regulatorische Frameworks und internationale Standards\n‚Ä¢ Stakeholder-Management √ºber alle Organisationsebenen mit unterschiedlichen Priorit√§ten und Anforderungen\n‚Ä¢ Change Management f√ºr fundamentale Ver√§nderungen in Arbeitsweisen und Sicherheitskultur\n\nüèóÔ∏è Technische Architektur-Herausforderungen:\n‚Ä¢ Multi-Domain-Integration f√ºr nahtlose Identit√§tsverwaltung √ºber alle Unternehmensbereiche\n‚Ä¢ Zero-Trust-Architektur-Implementation mit kontinuierlicher Verifikation und adaptiven Sicherheitskontrollen\n‚Ä¢ Cloud-Hybrid-Integration f√ºr moderne Arbeitspl√§tze und globale Skalierbarkeit\n‚Ä¢ API-first Design f√ºr zukunftssichere Integration und Ecosystem-Erweiterbarkeit\n‚Ä¢ Performance-Optimierung f√ºr enterprise-scale Deployment mit Millionen von Identit√§ten\n\n‚ö° Agile Projektmethodologie und Delivery-Excellence:\n‚Ä¢ Iterative Entwicklung mit kontinuierlicher Stakeholder-Integration und Feedback-Loops\n‚Ä¢ Risk-based Priorisierung f√ºr kritische Systemkomponenten und Business-Functions\n‚Ä¢ MVP-Ansatz mit schrittweiser Funktionserweiterung und User-Adoption-Optimierung\n‚Ä¢ DevOps-Integration f√ºr automatisierte Deployment-Pipelines und Continuous Integration\n‚Ä¢ Quality Gates mit umfassenden Testing-Strategien und Security-Validierung\n\nüõ°Ô∏è Risikomanagement und Mitigation-Strategien:\n‚Ä¢ Comprehensive Risk Assessment f√ºr technische, organisatorische und regulatorische Risiken\n‚Ä¢ Contingency Planning mit alternativen L√∂sungsans√§tzen und Rollback-Strategien\n‚Ä¢ Security-by-Design f√ºr proaktive Bedrohungsabwehr und Vulnerability Management\n‚Ä¢ Business Continuity Planning f√ºr minimale Disruption kritischer Gesch√§ftsprozesse\n‚Ä¢ Vendor Management f√ºr strategische Partnerschaften und Technologie-Dependencies\n\nüìä Governance und Compliance-Framework:\n‚Ä¢ Project Governance mit klaren Rollen, Verantwortlichkeiten und Entscheidungsstrukturen\n‚Ä¢ Compliance-by-Design f√ºr automatisierte regulatorische Erf√ºllung und Audit-Bereitschaft\n‚Ä¢ Documentation Standards f√ºr umfassende Projektdokumentation und Knowledge Management\n‚Ä¢ Performance Metrics mit KPIs f√ºr Projekterfolg und Business-Value-Realization\n‚Ä¢ Stakeholder Communication mit transparenter Berichterstattung und Erwartungsmanagement\n\nüåê Organizational Change und Adoption-Excellence:\n‚Ä¢ Change Impact Assessment f√ºr umfassende Analyse organisatorischer Auswirkungen\n‚Ä¢ Training-Programme f√ºr Benutzer-Enablement und Kompetenzaufbau\n‚Ä¢ Communication Strategy f√ºr effektive Stakeholder-Engagement und Resistance Management\n‚Ä¢ Cultural Transformation f√ºr Sicherheitsbewusstsein und Identity-centric Mindset\n‚Ä¢ Post-Implementation Support f√ºr nachhaltige Adoption und Continuous Improvement"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Wie entwickelt man eine strategische IAM-Projektarchitektur mit klarer Vision und messbaren Zielen, die sowohl technische Exzellenz als auch Business-Value-Maximierung gew√§hrleistet?',
        answer: "Die Entwicklung einer strategischen IAM-Projektarchitektur erfordert eine ganzheitliche Herangehensweise, die technische Innovation mit strategischen Gesch√§ftszielen verbindet und dabei eine klare Roadmap f√ºr nachhaltige Transformation bereitstellt. Diese Architektur muss sowohl die Komplexit√§t enterprise-weiter Systeme als auch die Dynamik sich √§ndernder Gesch√§ftsanforderungen ber√ºcksichtigen.\n\nüéØ Strategische Vision und Business-Alignment:\n‚Ä¢ Business-Case-Entwicklung mit quantifizierbaren Vorteilen und ROI-Kalkulation f√ºr Stakeholder-Buy-in\n‚Ä¢ Strategic Roadmap mit klaren Meilensteinen und Erfolgsmetriken f√ºr messbare Fortschrittskontrolle\n‚Ä¢ Stakeholder-Mapping f√ºr umfassende Anforderungsanalyse und Erwartungsmanagement\n‚Ä¢ Value Proposition Definition f√ºr eindeutige Kommunikation des Gesch√§ftsnutzens\n‚Ä¢ Future-State Vision mit langfristiger Perspektive f√ºr nachhaltige Wettbewerbsvorteile\n\nüèóÔ∏è Enterprise-Architektur und Technical Design:\n‚Ä¢ Current-State Assessment f√ºr detaillierte Analyse bestehender Systemlandschaften und Identit√§tsstrukturen\n‚Ä¢ Gap-Analyse mit Identifikation kritischer Verbesserungsbereiche und Modernisierungsanforderungen\n‚Ä¢ Target Architecture Design mit Zero-Trust-Prinzipien und Cloud-native Komponenten\n‚Ä¢ Integration Strategy f√ºr nahtlose Anbindung bestehender Systeme und zuk√ºnftiger Erweiterungen\n‚Ä¢ Scalability Planning f√ºr enterprise-weite Deployment-F√§higkeiten und globale Verf√ºgbarkeit\n\nüìä Projektstruktur und Governance-Framework:\n‚Ä¢ Project Charter mit klaren Zielen, Scope-Definition und Success-Kriterien f√ºr eindeutige Projektausrichtung\n‚Ä¢ Governance Structure mit definierten Rollen, Verantwortlichkeiten und Entscheidungsprozessen\n‚Ä¢ Resource Planning f√ºr optimale Allokation von Budget, Personal und technischen Ressourcen\n‚Ä¢ Timeline Development mit realistischen Meilensteinen und Dependency-Management\n‚Ä¢ Risk Register mit proaktiver Identifikation und Mitigation-Strategien f√ºr kritische Projektrisiken\n\n‚öôÔ∏è Agile Delivery-Methodologie und Sprint-Planning:\n‚Ä¢ Epic und User Story Definition f√ºr strukturierte Anforderungserfassung und Priorisierung\n‚Ä¢ Sprint Planning mit iterativer Entwicklung und kontinuierlicher Stakeholder-Integration\n‚Ä¢ Backlog Management f√ºr flexible Anpassung an sich √§ndernde Anforderungen\n‚Ä¢ Definition of Done mit klaren Qualit√§tskriterien und Acceptance-Tests\n‚Ä¢ Retrospective Processes f√ºr kontinuierliche Verbesserung und Lessons-Learned-Integration\n\nüîç Quality Assurance und Testing-Strategy:\n‚Ä¢ Testing Framework mit umfassenden Unit-, Integration- und End-to-End-Tests\n‚Ä¢ Security Testing f√ºr Vulnerability Assessment und Penetration Testing\n‚Ä¢ Performance Testing f√ºr Skalierbarkeit und Load-Handling-Capabilities\n‚Ä¢ User Acceptance Testing f√ºr Benutzerfreundlichkeit und Funktionalit√§tsvalidierung\n‚Ä¢ Compliance Testing f√ºr regulatorische Anforderungen und Audit-Bereitschaft\n\nüåê Change Management und Adoption-Strategy:\n‚Ä¢ Change Impact Assessment f√ºr umfassende Analyse organisatorischer Auswirkungen\n‚Ä¢ Communication Plan f√ºr effektive Stakeholder-Information und Engagement\n‚Ä¢ Training Strategy f√ºr Benutzer-Enablement und Kompetenzentwicklung\n‚Ä¢ Resistance Management f√ºr proaktive Behandlung von Widerst√§nden und Bedenken\n‚Ä¢ Success Metrics f√ºr messbare Adoption-Raten und User-Satisfaction-Monitoring"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Welche agilen Projektmethodologien und iterativen Delivery-Ans√§tze sind f√ºr IAM-Transformationen am effektivsten und wie integriert man kontinuierliche Stakeholder-Feedback f√ºr optimale Projektergebnisse?',
        answer: "Agile Projektmethodologien sind f√ºr IAM-Transformationen besonders wertvoll, da sie die Flexibilit√§t bieten, auf sich √§ndernde Anforderungen zu reagieren, w√§hrend sie gleichzeitig kontinuierliche Delivery und Stakeholder-Integration erm√∂glichen. Die Kombination aus Scrum, Kanban und DevOps-Prinzipien schafft ein robustes Framework f√ºr erfolgreiche IAM-Projektausf√ºhrung.\n\nüöÄ Scrum-Framework f√ºr IAM-Projekte:\n‚Ä¢ Sprint-basierte Entwicklung mit typischen Sprint-L√§ngen von zwei bis vier Wochen f√ºr optimale Feedback-Zyklen\n‚Ä¢ Product Owner Role mit tiefgreifender IAM-Expertise und Business-Domain-Kenntnissen\n‚Ä¢ Scrum Master als Facilitator f√ºr agile Prozesse und Impediment-Resolution\n‚Ä¢ Development Team mit cross-funktionalen F√§higkeiten in IAM-Technologien und Security-Frameworks\n‚Ä¢ Sprint Planning mit detaillierter Story-Point-Estimation und Capacity-Planning\n\nüìã Kanban-Integration f√ºr Continuous Flow:\n‚Ä¢ Work-in-Progress Limits f√ºr optimale Team-Produktivit√§t und Quality-Focus\n‚Ä¢ Visual Board Management f√ºr transparente Workflow-Visualisierung und Bottleneck-Identifikation\n‚Ä¢ Continuous Delivery mit Pull-based System f√ºr bedarfsgerechte Arbeitsverteilung\n‚Ä¢ Cycle Time Optimization f√ºr effiziente Durchlaufzeiten und Predictability\n‚Ä¢ Cumulative Flow Diagrams f√ºr Performance-Monitoring und Process-Improvement\n\n‚ö° DevOps-Integration und Automation:\n‚Ä¢ Continuous Integration mit automatisierten Build- und Test-Pipelines f√ºr Quality Assurance\n‚Ä¢ Infrastructure as Code f√ºr reproduzierbare Deployment-Umgebungen und Configuration Management\n‚Ä¢ Automated Testing mit umfassenden Unit-, Integration- und Security-Tests\n‚Ä¢ Deployment Automation f√ºr konsistente und fehlerfreie Releases\n‚Ä¢ Monitoring und Logging f√ºr Real-time Performance-√úberwachung und Issue-Detection\n\nüîÑ Iterative Delivery und MVP-Ansatz:\n‚Ä¢ Minimum Viable Product Definition f√ºr schnelle Value-Delivery und Early-Feedback-Generation\n‚Ä¢ Incremental Feature Development mit schrittweiser Funktionserweiterung\n‚Ä¢ User Story Mapping f√ºr strukturierte Feature-Priorisierung und Release-Planning\n‚Ä¢ Prototype Development f√ºr Early-Stage Validation und Stakeholder-Alignment\n‚Ä¢ Beta Testing mit ausgew√§hlten Benutzergruppen f√ºr Real-world Validation\n\nüìä Stakeholder-Integration und Feedback-Loops:\n‚Ä¢ Sprint Reviews mit regelm√§√üiger Demonstration entwickelter Features und Funktionalit√§ten\n‚Ä¢ Stakeholder Workshops f√ºr collaborative Anforderungsanalyse und Solution-Design\n‚Ä¢ User Feedback Sessions f√ºr kontinuierliche Verbesserung der Benutzerfreundlichkeit\n‚Ä¢ Business Value Assessment f√ºr regelm√§√üige ROI-Evaluation und Benefit-Realization\n‚Ä¢ Steering Committee Meetings f√ºr strategische Entscheidungen und Richtungs√§nderungen\n\nüõ†Ô∏è Adaptive Planning und Scope-Management:\n‚Ä¢ Rolling Wave Planning f√ºr detaillierte Planung naher Sprints und grobe Planung zuk√ºnftiger Releases\n‚Ä¢ Scope Flexibility f√ºr Anpassung an sich √§ndernde Business-Anforderungen\n‚Ä¢ Priority Adjustment basierend auf Stakeholder-Feedback und Business-Value-Assessment\n‚Ä¢ Risk-based Planning f√ºr proaktive Behandlung kritischer Projektrisiken\n‚Ä¢ Dependency Management f√ºr koordinierte Entwicklung interdependenter Komponenten\n\nüåê Cross-functional Collaboration und Team-Dynamics:\n‚Ä¢ Daily Standups f√ºr transparente Kommunikation und Impediment-Identification\n‚Ä¢ Cross-team Coordination f√ºr enterprise-weite Integration und Consistency\n‚Ä¢ Knowledge Sharing Sessions f√ºr Kompetenzaufbau und Best-Practice-Transfer\n‚Ä¢ Retrospectives f√ºr kontinuierliche Process-Improvement und Team-Development\n‚Ä¢ Pair Programming und Code Reviews f√ºr Quality Assurance und Knowledge Transfer"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Wie implementiert man umfassendes Risikomanagement in IAM-Projekten und welche proaktiven Mitigation-Strategien sind entscheidend f√ºr erfolgreiche Projektausf√ºhrung trotz komplexer Herausforderungen?',
        answer: "Umfassendes Risikomanagement ist das R√ºckgrat erfolgreicher IAM-Projekte und erfordert eine systematische Herangehensweise zur Identifikation, Bewertung und Mitigation von Risiken auf technischer, organisatorischer und strategischer Ebene. Proaktive Risikomanagement-Strategien erm√∂glichen es, auch bei komplexen Herausforderungen Projektziele zu erreichen und nachhaltige Ergebnisse zu liefern.\n\nüîç Comprehensive Risk Assessment und Identification:\n‚Ä¢ Technical Risk Analysis f√ºr Systemintegration, Performance-Bottlenecks und Security-Vulnerabilities\n‚Ä¢ Organizational Risk Evaluation f√ºr Change-Resistance, Skill-Gaps und Resource-Constraints\n‚Ä¢ Regulatory Risk Assessment f√ºr Compliance-Anforderungen und Audit-Readiness\n‚Ä¢ Vendor Risk Management f√ºr Third-Party-Dependencies und Supply-Chain-Risiken\n‚Ä¢ Business Risk Analysis f√ºr Market-Changes, Budget-Constraints und Strategic-Shifts\n\nüìä Risk Quantification und Impact-Assessment:\n‚Ä¢ Probability-Impact Matrix f√ºr systematische Risikobewertung und Priorisierung\n‚Ä¢ Quantitative Risk Analysis mit Monte-Carlo-Simulationen f√ºr Budget- und Timeline-Risiken\n‚Ä¢ Risk Scoring mit standardisierten Metriken f√ºr objektive Vergleichbarkeit\n‚Ä¢ Impact Categories f√ºr strukturierte Bewertung von Auswirkungen auf verschiedene Projektbereiche\n‚Ä¢ Risk Tolerance Definition f√ºr klare Entscheidungskriterien und Escalation-Trigger\n\n‚ö° Proactive Mitigation-Strategies und Contingency-Planning:\n‚Ä¢ Risk Prevention durch Design-Entscheidungen und Architecture-Choices\n‚Ä¢ Risk Mitigation mit spezifischen Ma√ünahmen zur Risikoreduktion\n‚Ä¢ Risk Transfer durch Versicherungen, Vertr√§ge und Vendor-Agreements\n‚Ä¢ Risk Acceptance f√ºr kalkulierte Risiken mit akzeptablen Auswirkungen\n‚Ä¢ Contingency Plans mit alternativen L√∂sungsans√§tzen und Fallback-Optionen\n\nüõ°Ô∏è Security Risk Management und Threat-Mitigation:\n‚Ä¢ Threat Modeling f√ºr systematische Identifikation potenzieller Angriffsvektoren\n‚Ä¢ Vulnerability Assessment mit regelm√§√üigen Security-Scans und Penetration-Tests\n‚Ä¢ Security-by-Design f√ºr proaktive Integration von Sicherheitsma√ünahmen\n‚Ä¢ Incident Response Planning f√ºr schnelle Reaktion auf Security-Vorf√§lle\n‚Ä¢ Compliance Risk Management f√ºr regulatorische Anforderungen und Audit-Bereitschaft\n\nüìà Continuous Risk Monitoring und Adaptive Management:\n‚Ä¢ Risk Register Maintenance mit regelm√§√üiger Aktualisierung und Status-Tracking\n‚Ä¢ Key Risk Indicators f√ºr fr√ºhzeitige Warnung vor sich entwickelnden Risiken\n‚Ä¢ Risk Dashboard f√ºr transparente Kommunikation und Stakeholder-Information\n‚Ä¢ Regular Risk Reviews mit systematischer Bewertung und Strategy-Adjustment\n‚Ä¢ Lessons Learned Integration f√ºr kontinuierliche Verbesserung der Risk-Management-Prozesse\n\nüîÑ Agile Risk Management und Sprint-Integration:\n‚Ä¢ Sprint Risk Assessment f√ºr iterative Risikobewertung in agilen Entwicklungszyklen\n‚Ä¢ Risk Backlog Management f√ºr strukturierte Behandlung identifizierter Risiken\n‚Ä¢ Risk Retrospectives f√ºr kontinuierliche Verbesserung der Risk-Management-Praktiken\n‚Ä¢ Cross-Sprint Risk Tracking f√ºr langfristige Risikomanagement-Kontinuit√§t\n‚Ä¢ Risk-based Sprint Planning f√ºr Priorisierung kritischer Risikobereiche\n\nüåê Stakeholder Communication und Escalation-Management:\n‚Ä¢ Risk Communication Strategy f√ºr effektive Information verschiedener Stakeholder-Gruppen\n‚Ä¢ Escalation Procedures f√ºr strukturierte Behandlung kritischer Risiken\n‚Ä¢ Executive Risk Reporting f√ºr strategische Entscheidungsunterst√ºtzung\n‚Ä¢ Risk Awareness Training f√ºr Sensibilisierung aller Projektbeteiligten\n‚Ä¢ Crisis Communication Planning f√ºr koordinierte Kommunikation in Krisensituationen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
