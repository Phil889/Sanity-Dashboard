import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Wartung page with FAQ batch 4...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-wartung' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-wartung" not found')
    }
    
    // Create new FAQs for IAM Wartung expert topics
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 13),
        question: 'Welche Herausforderungen entstehen bei der Wartung von Legacy-IAM-Systemen und wie modernisiert man diese schrittweise ohne Gesch√§ftsunterbrechung?',
        answer: "Die Wartung von Legacy-IAM-Systemen stellt Unternehmen vor komplexe technische und strategische Herausforderungen, die sowohl technische Expertise als auch gesch√§ftliche Weitsicht erfordern. Diese kritische Aufgabe erfordert einen durchdachten Modernisierungsansatz, der Gesch√§ftskontinuit√§t gew√§hrleistet, w√§hrend gleichzeitig veraltete Systeme schrittweise durch moderne, zukunftssichere L√∂sungen ersetzt werden.\n\nüèõÔ∏è Legacy System Assessment und Modernization Planning:\n‚Ä¢ Comprehensive Legacy Analysis mit detaillierter Bewertung bestehender Systemarchitekturen und Abh√§ngigkeiten\n‚Ä¢ Technical Debt Assessment f√ºr Quantifizierung von Modernisierungsaufwand und Priorit√§ten\n‚Ä¢ Business Impact Evaluation mit Analyse kritischer Gesch√§ftsprozesse und Abh√§ngigkeiten\n‚Ä¢ Risk Assessment Matrix f√ºr systematische Bewertung von Modernisierungsrisiken\n‚Ä¢ Modernization Roadmap Development mit phasenweiser Transformationsstrategie\n\nüîÑ Gradual Migration Strategies und Coexistence Management:\n‚Ä¢ Strangler Fig Pattern Implementation f√ºr schrittweise Abl√∂sung alter Systemkomponenten\n‚Ä¢ Parallel System Operation mit synchroner Datenreplikation zwischen Alt- und Neusystemen\n‚Ä¢ Feature Flag Management f√ºr kontrollierte Funktionsmigration ohne Systemunterbrechung\n‚Ä¢ Data Migration Orchestration mit umfassender Datenvalidierung und Rollback-F√§higkeiten\n‚Ä¢ User Experience Continuity f√ºr nahtlose Benutzererfahrung w√§hrend der Migration\n\nüõ†Ô∏è Technical Modernization Approaches:\n‚Ä¢ API Wrapper Development f√ºr moderne Schnittstellen zu Legacy-Systemen\n‚Ä¢ Microservices Extraction f√ºr schrittweise Modularisierung monolithischer Systeme\n‚Ä¢ Database Modernization mit Schema-Evolution und Performance-Optimierung\n‚Ä¢ Security Hardening f√ºr Verbesserung der Sicherheitsposture alter Systeme\n‚Ä¢ Integration Layer Implementation f√ºr nahtlose Kommunikation zwischen Alt- und Neusystemen\n\nüìä Data Integrity und Consistency Management:\n‚Ä¢ Data Synchronization Strategies f√ºr konsistente Datenreplikation √ºber alle Systeme\n‚Ä¢ Conflict Resolution Mechanisms f√ºr Behandlung von Dateninkonsistenzen\n‚Ä¢ Audit Trail Preservation f√ºr l√ºckenlose Nachverfolgbarkeit w√§hrend der Migration\n‚Ä¢ Backup und Recovery Planning f√ºr sichere Datenwiederherstellung bei Problemen\n‚Ä¢ Data Quality Assurance f√ºr kontinuierliche Datenvalidierung und Bereinigung\n\nüîß Operational Continuity und Support:\n‚Ä¢ Dual System Maintenance f√ºr parallele Wartung von Alt- und Neusystemen\n‚Ä¢ Staff Training Programs f√ºr Kompetenzentwicklung in neuen Technologien\n‚Ä¢ Documentation Migration f√ºr √úbertragung kritischen Wissens\n‚Ä¢ Support Process Adaptation f√ºr effiziente Betreuung hybrider Systemlandschaften\n‚Ä¢ Performance Monitoring f√ºr kontinuierliche √úberwachung beider Systemwelten\n\nüöÄ Future-proofing und Strategic Alignment:\n‚Ä¢ Technology Stack Modernization f√ºr Adoption aktueller Standards und Frameworks\n‚Ä¢ Cloud Migration Planning f√ºr strategische Transformation zu Cloud-nativen L√∂sungen\n‚Ä¢ Scalability Enhancement f√ºr Vorbereitung auf zuk√ºnftige Wachstumsanforderungen\n‚Ä¢ Compliance Modernization f√ºr Erf√ºllung aktueller und zuk√ºnftiger regulatorischer Anforderungen\n‚Ä¢ Innovation Integration f√ºr Adoption modernster IAM-Technologien und Best Practices"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 14),
        question: 'Wie implementiert man effektive Incident Response-Prozesse f√ºr IAM-Wartungsprobleme und welche Eskalationsverfahren sind erforderlich?',
        answer: "Effektive Incident Response-Prozesse f√ºr IAM-Wartungsprobleme sind essentiell f√ºr die Minimierung von Gesch√§ftsauswirkungen, die Aufrechterhaltung der Systemverf√ºgbarkeit und die schnelle Wiederherstellung normaler Betriebszust√§nde. Diese kritische Disziplin erfordert strukturierte Verfahren, klare Verantwortlichkeiten und intelligente Eskalationsmechanismen, die sowohl technische Exzellenz als auch gesch√§ftliche Priorit√§ten ber√ºcksichtigen.\n\nüö® Incident Classification und Priority Matrix:\n‚Ä¢ Severity Level Definition mit klaren Kriterien f√ºr Kritikalit√§tsbewertung von IAM-Vorf√§llen\n‚Ä¢ Business Impact Assessment f√ºr systematische Bewertung von Gesch√§ftsauswirkungen\n‚Ä¢ Response Time Objectives mit definierten SLAs f√ºr verschiedene Incident-Kategorien\n‚Ä¢ Escalation Triggers mit automatischen Benachrichtigungen bei kritischen Schwellenwerten\n‚Ä¢ Priority Matrix Integration f√ºr intelligente Ressourcenallokation basierend auf Gesch√§ftspriorit√§t\n\nüìû Structured Communication und Notification Framework:\n‚Ä¢ Incident Communication Plan mit definierten Stakeholder-Gruppen und Benachrichtigungsverfahren\n‚Ä¢ Automated Alerting Systems f√ºr sofortige Benachrichtigung relevanter Teams\n‚Ä¢ Status Update Protocols f√ºr regelm√§√üige Kommunikation w√§hrend der Incident-Bearbeitung\n‚Ä¢ Executive Briefing Procedures f√ºr Management-Information bei kritischen Vorf√§llen\n‚Ä¢ Customer Communication Guidelines f√ºr transparente externe Kommunikation\n\nüîß Technical Response und Resolution Procedures:\n‚Ä¢ Incident Response Playbooks mit detaillierten Schritt-f√ºr-Schritt-Anleitungen f√ºr h√§ufige Probleme\n‚Ä¢ Diagnostic Tool Integration f√ºr schnelle Problemidentifikation und Root-Cause-Analysis\n‚Ä¢ Emergency Access Procedures f√ºr beschleunigten Zugriff auf kritische Systeme\n‚Ä¢ Rollback Capabilities f√ºr schnelle Wiederherstellung stabiler Systemzust√§nde\n‚Ä¢ Temporary Workaround Implementation f√ºr Aufrechterhaltung kritischer Gesch√§ftsfunktionen\n\n‚è∞ Escalation Management und Resource Coordination:\n‚Ä¢ Tiered Support Structure mit klaren Eskalationspfaden und Verantwortlichkeiten\n‚Ä¢ Expert Resource Pool f√ºr schnellen Zugriff auf spezialisierte Fachkenntnisse\n‚Ä¢ Vendor Escalation Procedures f√ºr effiziente Koordination mit externen Partnern\n‚Ä¢ Management Escalation Triggers f√ºr rechtzeitige Einbindung von F√ºhrungskr√§ften\n‚Ä¢ Cross-functional Team Coordination f√ºr komplexe Incidents mit mehreren Systembeteiligungen\n\nüìä Incident Tracking und Documentation:\n‚Ä¢ Comprehensive Incident Records mit detaillierter Dokumentation aller Aktivit√§ten\n‚Ä¢ Timeline Management f√ºr pr√§zise Nachverfolgung von Incident-Verlauf\n‚Ä¢ Action Item Tracking f√ºr systematische Verfolgung von L√∂sungsma√ünahmen\n‚Ä¢ Knowledge Base Integration f√ºr Wiederverwendung von L√∂sungsans√§tzen\n‚Ä¢ Metrics Collection f√ºr kontinuierliche Verbesserung der Response-Prozesse\n\nüîÑ Post-Incident Analysis und Continuous Improvement:\n‚Ä¢ Root Cause Analysis mit systematischer Untersuchung von Incident-Ursachen\n‚Ä¢ Lessons Learned Documentation f√ºr Wissenstransfer und Prozessverbesserung\n‚Ä¢ Process Optimization basierend auf Incident-Erfahrungen und Feedback\n‚Ä¢ Preventive Measure Implementation f√ºr Vermeidung √§hnlicher zuk√ºnftiger Vorf√§lle\n‚Ä¢ Training Program Updates f√ºr kontinuierliche Kompetenzentwicklung des Response-Teams"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 15),
        question: 'Welche Rolle spielt Vendor Management in der IAM-Wartung und wie optimiert man Beziehungen zu Technologieanbietern f√ºr maximalen Support?',
        answer: "Vendor Management in der IAM-Wartung ist ein strategischer Erfolgsfaktor, der √ºber die Qualit√§t des Supports, die Verf√ºgbarkeit von Ressourcen und die langfristige Systemstabilit√§t entscheidet. Effektive Anbieterbeziehungen transformieren traditionelle Lieferanten-Kunden-Verh√§ltnisse in strategische Partnerschaften, die Innovation f√∂rdern, Risiken minimieren und kontinuierliche Verbesserungen erm√∂glichen.\n\nü§ù Strategic Partnership Development und Relationship Management:\n‚Ä¢ Vendor Assessment Framework f√ºr systematische Bewertung von Technologieanbietern\n‚Ä¢ Partnership Strategy Definition mit klaren Zielen und Erwartungen f√ºr Anbieterbeziehungen\n‚Ä¢ Regular Business Reviews f√ºr strategische Diskussionen √ºber Roadmaps und Innovationen\n‚Ä¢ Executive Relationship Management f√ºr Aufbau von Beziehungen auf F√ºhrungsebene\n‚Ä¢ Joint Innovation Programs f√ºr gemeinsame Entwicklung zukunftsweisender L√∂sungen\n\nüìã Contract Management und SLA Optimization:\n‚Ä¢ Service Level Agreement Definition mit messbaren Leistungsindikatoren und Penalties\n‚Ä¢ Contract Negotiation Strategies f√ºr optimale Vertragsbedingungen und Kostenstrukturen\n‚Ä¢ Performance Monitoring Framework f√ºr kontinuierliche √úberwachung der Anbieterleistung\n‚Ä¢ Escalation Procedures f√ºr effiziente Behandlung von Vertragsproblemen\n‚Ä¢ Contract Renewal Planning f√ºr rechtzeitige Verhandlung und Optimierung\n\nüîß Technical Support Optimization und Knowledge Transfer:\n‚Ä¢ Support Tier Management f√ºr effiziente Nutzung verschiedener Support-Ebenen\n‚Ä¢ Knowledge Base Access f√ºr optimale Nutzung von Anbieter-Dokumentation und Ressourcen\n‚Ä¢ Training Program Coordination f√ºr kontinuierliche Kompetenzentwicklung\n‚Ä¢ Technical Account Management f√ºr dedizierte Ansprechpartner bei kritischen Systemen\n‚Ä¢ Beta Program Participation f√ºr fr√ºhzeitigen Zugang zu neuen Features und Verbesserungen\n\nüìä Performance Management und Continuous Improvement:\n‚Ä¢ Vendor Scorecard Development f√ºr objektive Bewertung der Anbieterleistung\n‚Ä¢ Regular Performance Reviews f√ºr systematische Diskussion von Verbesserungsm√∂glichkeiten\n‚Ä¢ Issue Tracking und Resolution Monitoring f√ºr effiziente Problembehandlung\n‚Ä¢ Feedback Loop Implementation f√ºr kontinuierliche Kommunikation von Anforderungen\n‚Ä¢ Benchmarking Activities f√ºr Vergleich mit anderen Anbietern und Best Practices\n\nüõ°Ô∏è Risk Management und Business Continuity:\n‚Ä¢ Vendor Risk Assessment f√ºr systematische Bewertung von Anbieterrisiken\n‚Ä¢ Business Continuity Planning f√ºr Aufrechterhaltung kritischer Services bei Anbieterproblemen\n‚Ä¢ Multi-Vendor Strategy f√ºr Risikominimierung durch Diversifikation\n‚Ä¢ Exit Strategy Planning f√ºr kontrollierte Migration bei Anbieterwechsel\n‚Ä¢ Disaster Recovery Coordination f√ºr gemeinsame Notfallplanung mit Anbietern\n\nüöÄ Innovation und Future Planning:\n‚Ä¢ Technology Roadmap Alignment f√ºr strategische Ausrichtung auf Anbieter-Entwicklungen\n‚Ä¢ Early Adopter Programs f√ºr Zugang zu innovativen Technologien und Features\n‚Ä¢ Industry Trend Discussion f√ºr gemeinsame Analyse von Marktentwicklungen\n‚Ä¢ Investment Planning Coordination f√ºr optimale Budgetierung und Ressourcenallokation\n‚Ä¢ Strategic Advisory Services f√ºr Nutzung von Anbieter-Expertise bei strategischen Entscheidungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 16),
        question: 'Wie entwickelt man eine kosteneffiziente IAM-Wartungsstrategie ohne Kompromisse bei Qualit√§t und Sicherheit?',
        answer: "Eine kosteneffiziente IAM-Wartungsstrategie erfordert intelligente Balance zwischen Kostenkontrolle und Qualit√§tserhaltung, wobei strategische Optimierung, Automatisierung und datengetriebene Entscheidungsfindung die Grundlage f√ºr nachhaltigen Erfolg bilden. Diese anspruchsvolle Disziplin transformiert Wartung von einem Kostenfaktor zu einem Wertsch√∂pfungstreiber, der sowohl finanzielle als auch operative Exzellenz erm√∂glicht.\n\nüí∞ Cost Structure Analysis und Optimization Framework:\n‚Ä¢ Total Cost of Ownership Assessment f√ºr umfassende Bewertung aller Wartungskosten\n‚Ä¢ Cost Driver Identification f√ºr systematische Analyse der Hauptkostenfaktoren\n‚Ä¢ Budget Allocation Optimization f√ºr intelligente Ressourcenverteilung basierend auf Priorit√§ten\n‚Ä¢ ROI Measurement Framework f√ºr quantitative Bewertung von Wartungsinvestitionen\n‚Ä¢ Cost Benchmarking f√ºr Vergleich mit Industriestandards und Best Practices\n\nü§ñ Automation und Efficiency Enhancement:\n‚Ä¢ Process Automation Implementation f√ºr Reduzierung manueller Arbeitsaufw√§nde\n‚Ä¢ Self-Service Capabilities f√ºr Entlastung des Support-Teams durch Benutzer-Empowerment\n‚Ä¢ Intelligent Monitoring Systems f√ºr proaktive Problemerkennung und Kostenvermeidung\n‚Ä¢ Automated Reporting f√ºr Effizienzsteigerung bei Compliance und Dokumentation\n‚Ä¢ Workflow Optimization f√ºr Eliminierung redundanter Prozesse und Aktivit√§ten\n\nüìä Resource Optimization und Capacity Management:\n‚Ä¢ Right-sizing Strategies f√ºr optimale Dimensionierung von Systemressourcen\n‚Ä¢ Capacity Planning Optimization f√ºr bedarfsgerechte Ressourcenallokation\n‚Ä¢ Skill-based Resource Allocation f√ºr effiziente Nutzung von Fachkenntnissen\n‚Ä¢ Outsourcing Evaluation f√ºr strategische Entscheidungen √ºber interne vs. externe Ressourcen\n‚Ä¢ Cross-training Programs f√ºr Flexibilit√§t und Redundanz bei kritischen F√§higkeiten\n\nüîß Preventive Maintenance und Risk Mitigation:\n‚Ä¢ Predictive Maintenance Implementation f√ºr Kostenvermeidung durch fr√ºhzeitige Problemerkennung\n‚Ä¢ Risk-based Maintenance Prioritization f√ºr fokussierte Ressourcennutzung\n‚Ä¢ Preventive Measure Investment f√ºr langfristige Kosteneinsparungen\n‚Ä¢ Quality Assurance Integration f√ºr Vermeidung kostspieliger Nacharbeiten\n‚Ä¢ Continuous Improvement Culture f√ºr nachhaltige Effizienzsteigerungen\n\nü§ù Strategic Vendor Management und Procurement:\n‚Ä¢ Vendor Consolidation Strategies f√ºr Kosteneinsparungen durch reduzierte Komplexit√§t\n‚Ä¢ Contract Optimization f√ºr bessere Vertragsbedingungen und Kostenstrukturen\n‚Ä¢ Volume Discount Negotiation f√ºr Skaleneffekte bei Lizenzierung und Support\n‚Ä¢ Multi-year Agreement Benefits f√ºr langfristige Kostenstabilit√§t\n‚Ä¢ Alternative Sourcing Models f√ºr innovative Kostenstrukturen und Flexibilit√§t\n\nüìà Performance-based Cost Management:\n‚Ä¢ Value-based Metrics f√ºr Bewertung von Wartungsaktivit√§ten nach Gesch√§ftswert\n‚Ä¢ Cost per Transaction Analysis f√ºr granulare Kostentransparenz\n‚Ä¢ Efficiency KPI Tracking f√ºr kontinuierliche √úberwachung der Kosteneffizienz\n‚Ä¢ Business Impact Correlation f√ºr Verkn√ºpfung von Wartungskosten mit Gesch√§ftsnutzen\n‚Ä¢ Continuous Cost Optimization f√ºr dynamische Anpassung an sich √§ndernde Anforderungen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 4 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
