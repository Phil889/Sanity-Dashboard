import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Implementierung page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-implementierung' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-implementierung" not found')
    }
    
    // Create new FAQs for IAM Implementation fundamentals
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Welche kritischen Erfolgsfaktoren bestimmen den Erfolg einer IAM-Implementierung und wie k√∂nnen Unternehmen typische Implementierungsfehler vermeiden?',
        answer: "IAM-Implementierungen sind komplexe Transformationsprojekte, die strategische Planung, technische Exzellenz und umfassendes Change Management erfordern. Der Erfolg h√§ngt ma√ügeblich von der Balance zwischen technischer Perfektion und menschenzentriertem Design ab, kombiniert mit einer klaren Vision f√ºr die digitale Zukunft des Unternehmens. Studien zeigen, dass √ºber sechzig Prozent der IAM-Projekte aufgrund vermeidbarer Planungs- und Umsetzungsfehler scheitern.\n\nüéØ Strategische Erfolgsfaktoren und Projektfundament:\n‚Ä¢ Executive Sponsorship mit klarem Commitment und ausreichender Ressourcenallokation f√ºr langfristigen Projekterfolg\n‚Ä¢ Comprehensive Stakeholder-Alignment mit fr√ºhzeitiger Einbindung aller betroffenen Gesch√§ftsbereiche und IT-Teams\n‚Ä¢ Business-driven Requirements-Definition mit Fokus auf Gesch√§ftswert statt rein technischer Funktionalit√§ten\n‚Ä¢ Realistic Timeline-Planning mit ausreichenden Puffern f√ºr unvorhergesehene Komplexit√§ten und Anpassungen\n‚Ä¢ Clear Success Metrics mit messbaren KPIs f√ºr Projektfortschritt und Business-Impact-Bewertung\n\nüèóÔ∏è Technische Implementation-Excellence:\n‚Ä¢ Thorough Current-State-Assessment mit detaillierter Analyse bestehender Identit√§ts- und Zugriffsstrukturen\n‚Ä¢ Phased Rollout-Strategy mit Pilot-Implementierungen und schrittweiser Ausweitung auf kritische Systeme\n‚Ä¢ Robust Testing-Framework mit automatisierten Tests, Security-Validierung und Performance-Benchmarking\n‚Ä¢ Integration-First-Approach mit fr√ºhzeitiger Ber√ºcksichtigung aller Legacy-Systeme und Cloud-Services\n‚Ä¢ Scalability-Planning f√ºr zuk√ºnftiges Wachstum und sich √§ndernde Gesch√§ftsanforderungen\n\nüë• Change Management und User-Adoption-Strategien:\n‚Ä¢ Early User-Engagement mit kontinuierlichem Feedback und iterativer Verbesserung der Benutzererfahrung\n‚Ä¢ Comprehensive Training-Programs mit rollenspezifischen Schulungen und kontinuierlicher Unterst√ºtzung\n‚Ä¢ Communication-Strategy mit transparenter Information √ºber Vorteile und Ver√§nderungen f√ºr alle Stakeholder\n‚Ä¢ Support-Structure-Establishment mit Help-Desk-Integration und Escalation-Prozessen f√ºr Go-Live-Phase\n‚Ä¢ Resistance-Management mit proaktiver Identifikation und Adressierung von Bedenken und Widerst√§nden\n\nüîß H√§ufige Implementierungsfehler und Vermeidungsstrategien:\n‚Ä¢ Underestimating Complexity durch unzureichende Analyse der bestehenden IT-Landschaft und Gesch√§ftsprozesse\n‚Ä¢ Insufficient Testing mit mangelhafter Qualit√§tssicherung und unvollst√§ndiger Security-Validierung\n‚Ä¢ Poor Change Management durch Vernachl√§ssigung der menschlichen Faktoren und Benutzerakzeptanz\n‚Ä¢ Inadequate Resource-Allocation mit unrealistischen Zeitpl√§nen und unzureichender Expertise-Verf√ºgbarkeit\n‚Ä¢ Lack of Governance mit fehlenden Prozessen f√ºr kontinuierliche √úberwachung und Optimierung\n\nüìä Kontinuierliche Optimierung und Lessons-Learned-Integration:\n‚Ä¢ Post-Implementation-Review mit systematischer Analyse von Erfolgen und Verbesserungsm√∂glichkeiten\n‚Ä¢ Performance-Monitoring mit kontinuierlicher √úberwachung von System-Performance und Benutzerverhalten\n‚Ä¢ Feedback-Loop-Establishment f√ºr kontinuierliche Verbesserung basierend auf Benutzererfahrungen\n‚Ä¢ Knowledge-Transfer-Processes f√ºr nachhaltige interne Expertise-Entwicklung und Unabh√§ngigkeit\n‚Ä¢ Future-Readiness-Planning mit Vorbereitung auf technologische Entwicklungen und sich √§ndernde Anforderungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Wie entwickelt man eine strukturierte IAM-Implementierungsroadmap und welche Phasen sind f√ºr eine erfolgreiche Umsetzung entscheidend?',
        answer: "Eine strukturierte IAM-Implementierungsroadmap ist das strategische Fundament f√ºr erfolgreiche Identity & Access Management Transformationen und erfordert einen systematischen, phasenorientierten Ansatz, der technische Komplexit√§t mit Gesch√§ftsanforderungen in Einklang bringt. Die Roadmap muss sowohl kurzfristige Quick Wins als auch langfristige strategische Ziele ber√ºcksichtigen, w√§hrend sie gleichzeitig Flexibilit√§t f√ºr sich √§ndernde Anforderungen bietet.\n\nüìã Phase 1: Strategic Assessment und Foundation-Building:\n‚Ä¢ Comprehensive Current-State-Analysis mit detaillierter Inventarisierung aller bestehenden Identit√§ts- und Zugriffssysteme\n‚Ä¢ Business Requirements-Gathering durch strukturierte Stakeholder-Interviews und Workshop-Sessions\n‚Ä¢ Risk Assessment und Compliance-Gap-Analyse f√ºr regulatorische Anforderungen und Sicherheitsstandards\n‚Ä¢ Technology Landscape-Mapping mit Bewertung bestehender Infrastrukturen und Integration-M√∂glichkeiten\n‚Ä¢ Success Criteria-Definition mit messbaren KPIs und Business-Value-Metriken f√ºr Projektbewertung\n\nüéØ Phase 2: Solution Design und Architecture-Planning:\n‚Ä¢ Target-State-Architecture-Development mit Ber√ºcksichtigung von Skalierbarkeit und Zukunftssicherheit\n‚Ä¢ Technology Selection-Process mit Vendor-Evaluation und Proof-of-Concept-Durchf√ºhrung\n‚Ä¢ Integration Strategy-Definition f√ºr nahtlose Anbindung an bestehende Systeme und Cloud-Services\n‚Ä¢ Security Framework-Design mit Zero-Trust-Prinzipien und Defense-in-Depth-Strategien\n‚Ä¢ Detailed Project-Planning mit Ressourcenallokation, Timeline-Definition und Milestone-Festlegung\n\nüîß Phase 3: Pilot Implementation und Proof-of-Value:\n‚Ä¢ Pilot-Group-Selection mit repr√§sentativen Benutzern und kritischen Anwendungsf√§llen\n‚Ä¢ Core System-Deployment mit grundlegenden IAM-Funktionalit√§ten und Essential-Services\n‚Ä¢ Initial Integration-Testing mit ausgew√§hlten Legacy-Systemen und Cloud-Anwendungen\n‚Ä¢ User Experience-Validation durch strukturierte Feedback-Sammlung und Usability-Tests\n‚Ä¢ Performance Baseline-Establishment f√ºr sp√§tere Optimierung und Skalierung\n\nüöÄ Phase 4: Phased Rollout und Scale-Up:\n‚Ä¢ Gradual User-Onboarding mit schrittweiser Ausweitung auf verschiedene Benutzergruppen\n‚Ä¢ System-by-System-Integration mit priorisierter Anbindung kritischer Gesch√§ftsanwendungen\n‚Ä¢ Advanced Feature-Activation wie Privileged Access Management und Governance-Funktionen\n‚Ä¢ Performance Optimization basierend auf Real-World-Usage-Patterns und Monitoring-Daten\n‚Ä¢ Continuous Security-Hardening mit regelm√§√üigen Security-Assessments und Penetration-Tests\n\nüìà Phase 5: Full Production und Optimization:\n‚Ä¢ Complete System-Activation mit allen geplanten Funktionalit√§ten und Integrationen\n‚Ä¢ Comprehensive Monitoring-Implementation f√ºr Performance, Security und Compliance-√úberwachung\n‚Ä¢ Advanced Analytics-Deployment f√ºr Behavioral-Analysis und Risk-based-Authentication\n‚Ä¢ Automation-Enhancement mit Self-Service-Capabilities und Workflow-Optimierung\n‚Ä¢ Knowledge Transfer und Internal-Capability-Building f√ºr nachhaltige Systembetreuung\n\nüîÑ Phase 6: Continuous Improvement und Innovation:\n‚Ä¢ Regular Health-Checks mit systematischer Bewertung von System-Performance und Benutzerverhalten\n‚Ä¢ Technology Refresh-Planning f√ºr Updates, Patches und Feature-Enhancements\n‚Ä¢ Business Alignment-Reviews zur Sicherstellung kontinuierlicher Gesch√§ftswertsteigerung\n‚Ä¢ Innovation Integration mit Evaluation neuer Technologien und Marktentwicklungen\n‚Ä¢ Strategic Roadmap-Updates basierend auf sich √§ndernden Gesch√§ftsanforderungen und Technologie-Trends"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Welche technischen Herausforderungen entstehen bei der Integration von IAM-Systemen in bestehende IT-Landschaften und wie l√∂st man komplexe Legacy-System-Integrationen?',
        answer: "Die Integration von IAM-Systemen in bestehende IT-Landschaften stellt eine der komplexesten technischen Herausforderungen moderner Unternehmens-IT dar und erfordert tiefgreifende Expertise in Legacy-Systemen, modernen Protokollen und Hybrid-Architekturen. Erfolgreiche Integrationen m√ºssen sowohl technische Kompatibilit√§t als auch Gesch√§ftskontinuit√§t gew√§hrleisten, w√§hrend sie gleichzeitig die Grundlage f√ºr zuk√ºnftige Innovationen schaffen.\n\nüèóÔ∏è Legacy-System-Integration und Protokoll-Herausforderungen:\n‚Ä¢ Protocol Diversity-Management mit Unterst√ºtzung f√ºr LDAP, Kerberos, SAML, OAuth und propriet√§re Authentifizierungsverfahren\n‚Ä¢ Database Integration-Complexity durch heterogene Datenstrukturen und unterschiedliche Identit√§ts-Attribute\n‚Ä¢ Custom Application-Challenges mit veralteten APIs und fehlenden Standard-Schnittstellen\n‚Ä¢ Mainframe Integration-Requirements f√ºr kritische Gesch√§ftsanwendungen mit speziellen Sicherheitsanforderungen\n‚Ä¢ Network Segmentation-Considerations f√ºr sichere Kommunikation zwischen verschiedenen Systemebenen\n\nüîó Modern Integration-Patterns und API-Strategien:\n‚Ä¢ RESTful API-Implementation f√ºr moderne Anwendungen mit standardisierten Schnittstellen\n‚Ä¢ GraphQL Integration-Capabilities f√ºr flexible Datenabfragen und optimierte Performance\n‚Ä¢ Event-driven Architecture-Support mit Message-Queuing und Real-time-Synchronisation\n‚Ä¢ Microservices Integration-Patterns f√ºr Cloud-native Anwendungen und Container-Umgebungen\n‚Ä¢ Webhook Implementation f√ºr asynchrone Benachrichtigungen und Workflow-Automation\n\n‚òÅÔ∏è Cloud-Hybrid-Integration und Multi-Cloud-Challenges:\n‚Ä¢ Identity Federation-Complexity zwischen On-Premises und Cloud-Umgebungen\n‚Ä¢ Cross-Cloud Authentication-Challenges mit verschiedenen Cloud-Providern und Sicherheitsmodellen\n‚Ä¢ Data Residency-Requirements mit geografischen Beschr√§nkungen und Compliance-Anforderungen\n‚Ä¢ Latency Optimization f√ºr globale Benutzer und verteilte Anwendungslandschaften\n‚Ä¢ Disaster Recovery-Planning mit Cross-Region-Failover und Business-Continuity-Sicherstellung\n\nüõ°Ô∏è Security Integration und Trust-Boundary-Management:\n‚Ä¢ Certificate Management-Complexity mit PKI-Integration und automatisierter Zertifikatserneuerung\n‚Ä¢ Encryption Key-Management f√ºr End-to-End-Verschl√ºsselung und sichere Daten√ºbertragung\n‚Ä¢ Network Security-Integration mit Firewalls, VPNs und Zero-Trust-Network-Access-L√∂sungen\n‚Ä¢ Privileged Access-Integration f√ºr administrative Zugriffe und kritische System-Operationen\n‚Ä¢ Audit Trail-Consolidation f√ºr umfassende Compliance-Dokumentation und Forensic-Capabilities\n\n‚ö° Performance Optimization und Scalability-Challenges:\n‚Ä¢ Load Balancing-Strategies f√ºr High-Availability und optimale Response-Times\n‚Ä¢ Caching Implementation mit intelligenten Cache-Strategien f√ºr h√§ufig abgerufene Identit√§tsdaten\n‚Ä¢ Database Optimization mit Indexierung und Query-Performance-Tuning f√ºr gro√üe Benutzerbasen\n‚Ä¢ Connection Pooling-Management f√ºr effiziente Ressourcennutzung und Skalierbarkeit\n‚Ä¢ Monitoring Integration mit umfassender Observability und Performance-Analytics\n\nüîß Integration-Tools und Middleware-Solutions:\n‚Ä¢ Enterprise Service Bus-Utilization f√ºr komplexe System-Orchestrierung und Message-Routing\n‚Ä¢ API Gateway-Implementation f√ºr zentrale API-Verwaltung und Security-Policy-Enforcement\n‚Ä¢ Identity Connector-Development f√ºr spezielle Legacy-Systeme und Custom-Applications\n‚Ä¢ Data Transformation-Engines f√ºr Attribute-Mapping und Format-Konvertierung\n‚Ä¢ Testing Automation-Frameworks f√ºr kontinuierliche Integration-Validierung und Regression-Testing"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Wie gestaltet man effektives Change Management f√ºr IAM-Implementierungen und welche Strategien f√ºhren zu optimaler Benutzerakzeptanz?',
        answer: "Effektives Change Management ist der entscheidende Erfolgsfaktor f√ºr IAM-Implementierungen und erfordert einen ganzheitlichen Ansatz, der technische Transformation mit menschenzentriertem Design verbindet. Erfolgreiche IAM-Projekte verstehen, dass Technologie nur dann Wert schafft, wenn sie von den Benutzern akzeptiert und effektiv genutzt wird. Dies erfordert strategische Kommunikation, umfassende Schulungen und kontinuierliche Unterst√ºtzung w√§hrend des gesamten Transformationsprozesses.\n\nüë• Stakeholder-Engagement und Communication-Strategy:\n‚Ä¢ Executive Sponsorship-Activation mit sichtbarer F√ºhrungsunterst√ºtzung und klarer Vision-Kommunikation\n‚Ä¢ Multi-Channel-Communication-Approach mit verschiedenen Medien f√ºr unterschiedliche Zielgruppen\n‚Ä¢ Regular Town-Hall-Sessions f√ºr transparente Information √ºber Projektfortschritt und Vorteile\n‚Ä¢ Feedback-Loop-Establishment mit strukturierten Kan√§len f√ºr Benutzerr√ºckmeldungen und Verbesserungsvorschl√§ge\n‚Ä¢ Success Story-Sharing mit Hervorhebung von Quick Wins und positiven Auswirkungen auf die t√§gliche Arbeit\n\nüéØ User-Centric Design und Experience-Optimization:\n‚Ä¢ User Journey-Mapping mit detaillierter Analyse bestehender Workflows und Schmerzpunkte\n‚Ä¢ Persona-based Design-Approach f√ºr zielgruppenspezifische Benutzererfahrungen und Funktionalit√§ten\n‚Ä¢ Usability Testing-Integration mit iterativer Verbesserung basierend auf realem Benutzerverhalten\n‚Ä¢ Self-Service-Capability-Enhancement f√ºr erh√∂hte Benutzerautonomie und reduzierte IT-Abh√§ngigkeit\n‚Ä¢ Mobile-First-Considerations f√ºr moderne Arbeitspl√§tze und Remote-Work-Anforderungen\n\nüìö Comprehensive Training und Capability-Building:\n‚Ä¢ Role-based Training-Programs mit spezifischen Inhalten f√ºr verschiedene Benutzergruppen\n‚Ä¢ Multi-Modal Learning-Approach mit Online-Tutorials, Workshops und Hands-on-Sessions\n‚Ä¢ Just-in-Time-Training-Delivery mit kontextuellen Hilfen und In-Application-Guidance\n‚Ä¢ Train-the-Trainer-Programs f√ºr nachhaltige interne Expertise-Entwicklung\n‚Ä¢ Continuous Learning-Platforms mit regelm√§√üigen Updates und Advanced-Feature-Schulungen\n\nüîÑ Phased Adoption und Pilot-Strategy:\n‚Ä¢ Champion Network-Establishment mit Early Adopters als Multiplikatoren und Feedback-Gebern\n‚Ä¢ Pilot Group-Selection mit repr√§sentativen Benutzern aus verschiedenen Gesch√§ftsbereichen\n‚Ä¢ Gradual Feature-Rollout mit schrittweiser Einf√ºhrung komplexerer Funktionalit√§ten\n‚Ä¢ Success Metrics-Tracking mit messbaren KPIs f√ºr Adoption-Rate und Benutzerverhalten\n‚Ä¢ Iterative Improvement-Cycles basierend auf Pilot-Erfahrungen und Benutzer-Feedback\n\nüõ†Ô∏è Support-Structure und Help-Desk-Integration:\n‚Ä¢ Multi-Tier-Support-Model mit verschiedenen Eskalationsebenen f√ºr unterschiedliche Problem-Komplexit√§ten\n‚Ä¢ Knowledge Base-Development mit umfassenden FAQs und Self-Help-Ressourcen\n‚Ä¢ Chatbot Integration f√ºr sofortige Unterst√ºtzung bei h√§ufigen Fragen und Standard-Problemen\n‚Ä¢ Video Tutorial-Library mit visuellen Anleitungen f√ºr komplexe Prozesse und Workflows\n‚Ä¢ Community Forum-Establishment f√ºr Peer-to-Peer-Support und Best-Practice-Sharing\n\nüìä Resistance Management und Adoption-Acceleration:\n‚Ä¢ Resistance Root-Cause-Analysis mit systematischer Identifikation von Adoption-Barrieren\n‚Ä¢ Incentive Program-Design mit Belohnungen f√ºr Early Adoption und positive Verhaltens√§nderungen\n‚Ä¢ Quick Win-Identification mit sofortigen Verbesserungen der t√§glichen Arbeitsabl√§ufe\n‚Ä¢ Cultural Change-Integration mit Anpassung von Unternehmensprozessen und Performance-Metriken\n‚Ä¢ Continuous Engagement-Strategies mit regelm√§√üigen Check-ins und Verbesserungsma√ünahmen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
