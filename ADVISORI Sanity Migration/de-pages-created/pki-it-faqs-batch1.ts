import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating PKI IT page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'pki-it' })
    
    if (!existingDoc) {
      throw new Error('Document "pki-it" not found')
    }
    
    // Create new FAQs for PKI IT fundamentals and architecture
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Welche IT-Infrastruktur-Anforderungen sind f√ºr eine professionelle PKI-Implementierung erforderlich?',
        answer: "PKI IT-Infrastrukturen erfordern eine durchdachte Systemarchitektur, die Sicherheit, Verf√ºgbarkeit und Skalierbarkeit optimal verbindet. Die technischen Anforderungen gehen weit √ºber einfache Server-Installationen hinaus und umfassen komplexe IT-Architekturen mit spezialisierten Komponenten f√ºr verschiedene PKI-Funktionen.\n\nüèóÔ∏è Hardware-Infrastruktur und Systemarchitektur:\n‚Ä¢ Dedizierte Server-Hardware f√ºr Root Certificate Authorities mit Air-Gap-Isolation und physischer Sicherheit\n‚Ä¢ Hochverf√ºgbare Cluster-Systeme f√ºr Intermediate CAs mit automatischem Failover und Load Balancing\n‚Ä¢ Hardware Security Modules (HSM) f√ºr kryptographische Schl√ºsseloperationen mit FIPS 140-2 Level 3/4 Zertifizierung\n‚Ä¢ Redundante Netzwerk-Infrastruktur mit separaten Management- und Produktions-VLANs\n‚Ä¢ Backup-Systeme mit geografischer Verteilung f√ºr Disaster Recovery und Business Continuity\n\nüíæ Storage und Datenbank-Anforderungen:\n‚Ä¢ Hochperformante SAN/NAS-Systeme f√ºr Zertifikats-Datenbanken mit RAID-Konfigurationen\n‚Ä¢ Verschl√ºsselte Datenbank-Systeme f√ºr Certificate Stores und Revocation Lists\n‚Ä¢ Archivierungs-Systeme f√ºr langfristige Aufbewahrung von Audit-Logs und Zertifikats-Historien\n‚Ä¢ Backup-Storage mit automatisierten Backup-Zyklen und Point-in-Time Recovery\n‚Ä¢ Compliance-konforme Datenaufbewahrung entsprechend regulatorischer Anforderungen\n\nüåê Netzwerk-Architektur und Sicherheitszonen:\n‚Ä¢ Segmentierte Netzwerk-Topologien mit dedizierten PKI-Subnetzen und Firewall-Regeln\n‚Ä¢ DMZ-Konfigurationen f√ºr √∂ffentlich zug√§ngliche PKI-Services wie OCSP-Responder\n‚Ä¢ VPN-Verbindungen f√ºr sichere Administration und Remote-Management\n‚Ä¢ Network Access Control (NAC) f√ºr Ger√§te-Authentifizierung und Netzwerk-Zugriff\n‚Ä¢ Intrusion Detection/Prevention Systems (IDS/IPS) f√ºr PKI-spezifische Bedrohungserkennung\n\n‚ö° Performance und Skalierungs-Anforderungen:\n‚Ä¢ Load Balancer f√ºr Verteilung von Zertifikats-Anfragen auf mehrere CA-Instanzen\n‚Ä¢ Content Delivery Networks (CDN) f√ºr globale Verteilung von CRL und OCSP-Responses\n‚Ä¢ Caching-Systeme f√ºr h√§ufig abgerufene Zertifikats-Informationen und Validierungsdaten\n‚Ä¢ Auto-Scaling-Mechanismen f√ºr dynamische Anpassung an schwankende Workloads\n‚Ä¢ Performance-Monitoring mit Kapazit√§tsplanung f√ºr zuk√ºnftige Wachstumsanforderungen\n\nüîí Sicherheits-Infrastruktur und H√§rtung:\n‚Ä¢ Betriebssystem-H√§rtung nach Security Benchmarks (CIS, STIG) f√ºr alle PKI-Komponenten\n‚Ä¢ Privileged Access Management (PAM) f√ºr administrative Zugriffe auf kritische PKI-Systeme\n‚Ä¢ Multi-Faktor-Authentifizierung f√ºr alle administrativen Schnittstellen und Management-Tools\n‚Ä¢ Security Information and Event Management (SIEM) Integration f√ºr PKI-Event-Korrelation\n‚Ä¢ Vulnerability Management mit automatisierten Scans und Patch-Management-Prozessen\n\nüõ†Ô∏è Management und Monitoring-Systeme:\n‚Ä¢ Centralized Logging mit strukturierten Log-Formaten f√ºr alle PKI-Komponenten\n‚Ä¢ Real-time Monitoring mit Alerting f√ºr kritische PKI-Services und Zertifikats-Abl√§ufe\n‚Ä¢ Configuration Management Tools (Ansible, Puppet) f√ºr konsistente System-Konfigurationen\n‚Ä¢ Backup-Monitoring und Recovery-Testing f√ºr Validierung der Disaster Recovery-F√§higkeiten\n‚Ä¢ Compliance-Reporting-Tools f√ºr automatisierte Audit-Berichte und Regulatory Compliance"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Wie erfolgt die Integration von PKI-Systemen in bestehende Enterprise-IT-Landschaften?',
        answer: "Die Integration von PKI-Systemen in bestehende Enterprise-IT-Umgebungen erfordert eine systematische Herangehensweise, die sowohl technische Kompatibilit√§t als auch operative Effizienz gew√§hrleistet. Erfolgreiche PKI-Integration ber√ºcksichtigt bestehende Infrastrukturen, Anwendungslandschaften und IT-Prozesse.\n\nüîó Directory Services und Identity Management Integration:\n‚Ä¢ Active Directory Certificate Services (ADCS) Integration f√ºr nahtlose Windows-Umgebung-Anbindung\n‚Ä¢ LDAP-Verzeichnis-Integration f√ºr Zertifikats-Publishing und Certificate Revocation List Distribution\n‚Ä¢ Identity Provider (IdP) Anbindung f√ºr Single Sign-On (SSO) und Federated Identity Management\n‚Ä¢ User Provisioning und Deprovisioning Workflows f√ºr automatische Zertifikats-Lifecycle-Verwaltung\n‚Ä¢ Group Policy Integration f√ºr automatische Zertifikats-Enrollment und Client-Konfiguration\n\nüè¢ Enterprise Application Integration:\n‚Ä¢ Web Application Integration √ºber SSL/TLS Client Certificate Authentication\n‚Ä¢ Email Security Integration mit S/MIME f√ºr verschl√ºsselte und signierte E-Mail-Kommunikation\n‚Ä¢ Document Management System Integration f√ºr digitale Signaturen und Dokumenten-Verschl√ºsselung\n‚Ä¢ ERP und CRM System Integration f√ºr sichere API-Kommunikation mit Client Certificates\n‚Ä¢ Database Encryption Integration f√ºr Transparent Data Encryption (TDE) mit PKI-verwalteten Schl√ºsseln\n\nüåê Network Infrastructure Integration:\n‚Ä¢ VPN Gateway Integration f√ºr certificate-based VPN authentication\n‚Ä¢ Wireless Network Integration (802.1X) f√ºr sichere WLAN-Authentifizierung mit Client Certificates\n‚Ä¢ Network Device Management mit PKI f√ºr Router, Switches und Firewall-Authentifizierung\n‚Ä¢ Software-Defined Networking (SDN) Integration f√ºr dynamische Netzwerk-Sicherheitsrichtlinien\n‚Ä¢ Zero Trust Network Architecture Implementation mit PKI als Trust Anchor\n\nüîÑ DevOps und CI/CD Pipeline Integration:\n‚Ä¢ Container Registry Integration f√ºr Image Signing und Verification mit Code Signing Certificates\n‚Ä¢ Kubernetes Integration f√ºr Pod-to-Pod Communication Security mit Service Mesh Certificates\n‚Ä¢ CI/CD Pipeline Integration f√ºr automatische Code Signing und Artifact Verification\n‚Ä¢ Infrastructure as Code (IaC) Integration f√ºr automatisierte PKI-Deployment und -Konfiguration\n‚Ä¢ Secret Management Integration (HashiCorp Vault, Azure Key Vault) f√ºr sichere Schl√ºssel-Verwaltung\n\n‚òÅÔ∏è Cloud und Hybrid-Umgebung Integration:\n‚Ä¢ Multi-Cloud PKI Architecture f√ºr konsistente Zertifikats-Services √ºber verschiedene Cloud-Provider\n‚Ä¢ Hybrid Cloud Integration mit On-Premises Root CA und Cloud-basierte Issuing CAs\n‚Ä¢ Cloud-native PKI Services Integration (AWS Certificate Manager, Azure Key Vault)\n‚Ä¢ Container Orchestration Platform Integration f√ºr dynamische Certificate Provisioning\n‚Ä¢ Edge Computing Integration f√ºr IoT Device Certificate Management\n\nüìä Monitoring und Management System Integration:\n‚Ä¢ SIEM Integration f√ºr PKI-Event-Korrelation und Security Incident Response\n‚Ä¢ IT Service Management (ITSM) Integration f√ºr PKI-bezogene Service Requests und Incident Handling\n‚Ä¢ Configuration Management Database (CMDB) Integration f√ºr PKI-Asset-Tracking\n‚Ä¢ Performance Monitoring Integration f√ºr End-to-End PKI Service Visibility\n‚Ä¢ Compliance Management Integration f√ºr automatisierte Audit-Trails und Reporting\n\nüîß Legacy System Integration und Modernization:\n‚Ä¢ Legacy Application Wrapper f√ºr PKI-Funktionalit√§t ohne Anwendungs-Modifikation\n‚Ä¢ API Gateway Integration f√ºr Legacy System Modernization mit PKI-basierter Authentifizierung\n‚Ä¢ Mainframe Integration √ºber Cryptographic Coprocessors und Hardware Security Modules\n‚Ä¢ Database Legacy Integration mit Stored Procedures f√ºr Zertifikats-Validierung\n‚Ä¢ Graduelle Migration Strategies f√ºr schrittweise PKI-Einf√ºhrung ohne Service-Unterbrechungen\n\n‚öôÔ∏è Automation und Orchestration Integration:\n‚Ä¢ Workflow Engine Integration f√ºr komplexe PKI-Prozess-Automatisierung\n‚Ä¢ Event-driven Architecture f√ºr reaktive PKI-Services und automatische Zertifikats-Erneuerung\n‚Ä¢ API Management Platform Integration f√ºr PKI-Service-Exposition und Rate Limiting\n‚Ä¢ Business Process Management (BPM) Integration f√ºr PKI-Governance-Workflows\n‚Ä¢ Robotic Process Automation (RPA) f√ºr repetitive PKI-Administrative-Tasks"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Welche Deployment-Strategien und Automatisierungsans√§tze gibt es f√ºr PKI-Systeme?',
        answer: "Moderne PKI-Deployments erfordern systematische Automatisierung und Infrastructure-as-Code-Ans√§tze, um Konsistenz, Reproduzierbarkeit und operative Effizienz zu gew√§hrleisten. Erfolgreiche PKI-Deployment-Strategien kombinieren bew√§hrte DevOps-Praktiken mit PKI-spezifischen Sicherheitsanforderungen.\n\nüèóÔ∏è Infrastructure-as-Code (IaC) f√ºr PKI-Deployments:\n‚Ä¢ Terraform-basierte PKI-Infrastructure-Definitionen f√ºr Cloud und On-Premises Umgebungen\n‚Ä¢ CloudFormation Templates f√ºr AWS-basierte PKI-Architekturen mit automatischer Skalierung\n‚Ä¢ Azure Resource Manager (ARM) Templates f√ºr Microsoft Cloud PKI-Deployments\n‚Ä¢ Ansible Playbooks f√ºr Configuration Management und PKI-Software-Installation\n‚Ä¢ Helm Charts f√ºr Kubernetes-basierte PKI-Container-Deployments\n\nüîÑ CI/CD Pipeline Integration f√ºr PKI:\n‚Ä¢ GitOps-basierte PKI-Configuration-Verwaltung mit Version Control und Change Tracking\n‚Ä¢ Automated Testing Pipelines f√ºr PKI-Konfigurationen und Certificate Chain Validation\n‚Ä¢ Blue-Green Deployment Strategies f√ºr PKI-Updates ohne Service-Unterbrechung\n‚Ä¢ Canary Deployments f√ºr schrittweise PKI-Feature-Rollouts mit Rollback-F√§higkeiten\n‚Ä¢ Pipeline-as-Code f√ºr reproduzierbare PKI-Deployment-Prozesse\n\nüì¶ Container und Orchestration Strategies:\n‚Ä¢ Docker Container Images f√ºr PKI-Komponenten mit Security-geh√§rteten Base Images\n‚Ä¢ Kubernetes Operators f√ºr PKI-Lifecycle-Management und automatische Skalierung\n‚Ä¢ Service Mesh Integration (Istio, Linkerd) f√ºr PKI-basierte Service-to-Service Communication\n‚Ä¢ Container Registry Integration f√ºr sichere PKI-Image-Distribution und Vulnerability Scanning\n‚Ä¢ Pod Security Policies f√ºr PKI-Container-Sicherheit und Privilege Escalation Prevention\n\nüéØ Deployment Pattern und Strategien:\n‚Ä¢ Multi-Tier PKI Architecture Deployment mit separaten Root, Intermediate und Issuing CA Layers\n‚Ä¢ Geographic Distribution Patterns f√ºr globale PKI-Verf√ºgbarkeit und Disaster Recovery\n‚Ä¢ Microservices-basierte PKI-Architektur f√ºr skalierbare und wartbare PKI-Services\n‚Ä¢ Event-driven PKI Deployment f√ºr reaktive Skalierung basierend auf Certificate Request Volume\n‚Ä¢ Immutable Infrastructure Patterns f√ºr PKI-Systeme mit automatischer Drift Detection\n\n‚ö° Automated Certificate Lifecycle Management:\n‚Ä¢ ACME Protocol Implementation f√ºr automatische Certificate Enrollment und Renewal\n‚Ä¢ Certificate Expiration Monitoring mit proaktiven Renewal-Workflows\n‚Ä¢ Automated Certificate Distribution zu Target-Systemen √ºber Configuration Management\n‚Ä¢ Self-Service Certificate Portals mit Approval Workflows und Role-based Access Control\n‚Ä¢ Certificate Inventory Management mit automatischer Discovery und Compliance Tracking\n\nüîß Configuration Management und Drift Prevention:\n‚Ä¢ Desired State Configuration (DSC) f√ºr Windows-basierte PKI-Systeme\n‚Ä¢ Puppet Manifests f√ºr deklarative PKI-System-Konfiguration und Compliance Enforcement\n‚Ä¢ Chef Cookbooks f√ºr PKI-Software-Installation und Konfiguration mit Idempotenz\n‚Ä¢ SaltStack States f√ºr Event-driven PKI-Configuration-Management\n‚Ä¢ Configuration Drift Detection mit automatischer Remediation und Alerting\n\nüõ°Ô∏è Security-First Deployment Approaches:\n‚Ä¢ Secure Boot und Trusted Platform Module (TPM) Integration f√ºr PKI-System-Integrit√§t\n‚Ä¢ Secrets Management Integration f√ºr sichere PKI-Credential-Verwaltung w√§hrend Deployments\n‚Ä¢ Network Segmentation Automation f√ºr PKI-Security-Zone-Konfiguration\n‚Ä¢ Vulnerability Scanning Integration in Deployment-Pipelines f√ºr Security Compliance\n‚Ä¢ Compliance-as-Code f√ºr automatische Security Policy Enforcement\n\nüìä Monitoring und Observability Integration:\n‚Ä¢ Prometheus und Grafana Integration f√ºr PKI-Metrics-Sammlung und Visualization\n‚Ä¢ Distributed Tracing f√ºr PKI-Request-Flow-Analyse und Performance Optimization\n‚Ä¢ Log Aggregation mit ELK Stack f√ºr centralized PKI-Event-Analysis\n‚Ä¢ Application Performance Monitoring (APM) f√ºr PKI-Service-Performance-Tracking\n‚Ä¢ Custom Metrics und Alerting f√ºr PKI-spezifische KPIs und SLA-Monitoring\n\nüîÑ Rollback und Recovery Strategies:\n‚Ä¢ Automated Backup Creation vor PKI-Deployments mit Point-in-Time Recovery\n‚Ä¢ Database Migration Scripts mit Rollback-F√§higkeiten f√ºr PKI-Schema-Updates\n‚Ä¢ Configuration Snapshots f√ºr schnelle Wiederherstellung bei fehlgeschlagenen Deployments\n‚Ä¢ Disaster Recovery Automation mit automatischen Failover-Mechanismen\n‚Ä¢ Business Continuity Testing mit automatisierten Recovery-Validierung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Wie werden PKI-Systeme f√ºr High Availability und Disaster Recovery konfiguriert?',
        answer: "High Availability und Disaster Recovery f√ºr PKI-Systeme erfordern spezielle Architekturen und Verfahren, die die kritische Natur von Zertifikatsdiensten ber√ºcksichtigen. PKI-Verf√ºgbarkeit ist essentiell f√ºr Gesch√§ftskontinuit√§t, da Ausf√§lle weitreichende Auswirkungen auf alle abh√§ngigen Systeme haben k√∂nnen.\n\nüèóÔ∏è High Availability Architecture Design:\n‚Ä¢ Active-Passive Cluster-Konfigurationen f√ºr Root Certificate Authorities mit automatischem Failover\n‚Ä¢ Active-Active Load Balancing f√ºr Intermediate CAs mit Session Affinity und Health Checks\n‚Ä¢ Geographic Redundancy mit Multi-Site PKI-Deployments f√ºr regionale Ausfallsicherheit\n‚Ä¢ Database Clustering mit synchroner Replikation f√ºr Certificate Store High Availability\n‚Ä¢ Shared Storage Systeme mit RAID-Konfigurationen f√ºr Hardware-Ausfallschutz\n\n‚ö° Load Balancing und Traffic Distribution:\n‚Ä¢ Application Load Balancer f√ºr OCSP Responder mit Health Check Monitoring\n‚Ä¢ Global Server Load Balancing (GSLB) f√ºr DNS-basierte PKI-Service-Distribution\n‚Ä¢ Content Delivery Network (CDN) Integration f√ºr CRL Distribution und Caching\n‚Ä¢ API Gateway Load Balancing f√ºr PKI-REST-Services mit Rate Limiting\n‚Ä¢ Session Persistence Strategien f√ºr stateful PKI-Operationen\n\nüíæ Data Replication und Synchronization:\n‚Ä¢ Real-time Database Replication zwischen Primary und Secondary PKI-Sites\n‚Ä¢ Certificate Store Synchronization mit Conflict Resolution f√ºr Multi-Master Setups\n‚Ä¢ HSM Key Backup und Recovery Procedures f√ºr Cryptographic Material Protection\n‚Ä¢ Configuration Synchronization zwischen PKI-Cluster-Nodes\n‚Ä¢ Audit Log Replication f√ºr Compliance und Forensic Analysis\n\nüîÑ Automated Failover Mechanisms:\n‚Ä¢ Health Check Monitoring f√ºr PKI-Services mit automatischer Failover-Ausl√∂sung\n‚Ä¢ DNS Failover f√ºr transparente Client-Umleitung bei Service-Ausf√§llen\n‚Ä¢ Database Failover mit automatischer Primary-Secondary Role Switching\n‚Ä¢ Application-Level Failover f√ºr PKI-Software-Komponenten\n‚Ä¢ Network-Level Failover mit VRRP/HSRP f√ºr Gateway Redundancy\n\nüõ°Ô∏è Disaster Recovery Planning und Implementation:\n‚Ä¢ Recovery Time Objective (RTO) und Recovery Point Objective (RPO) Definition f√ºr PKI-Services\n‚Ä¢ Disaster Recovery Site Setup mit Cold, Warm oder Hot Standby Konfigurationen\n‚Ä¢ Automated Disaster Recovery Procedures mit Runbook Automation\n‚Ä¢ Regular Disaster Recovery Testing mit Business Impact Validation\n‚Ä¢ Cross-Region Backup Strategies f√ºr Geographic Disaster Protection\n\nüìã Backup und Recovery Strategies:\n‚Ä¢ Automated Backup Scheduling f√ºr PKI-Databases, Configurations und Cryptographic Keys\n‚Ä¢ Incremental und Full Backup Strategies mit Retention Policy Management\n‚Ä¢ Point-in-Time Recovery Capabilities f√ºr granulare Wiederherstellung\n‚Ä¢ Backup Encryption und Secure Storage f√ºr Compliance Requirements\n‚Ä¢ Backup Validation und Recovery Testing f√ºr Backup Integrity Assurance\n\nüîß Monitoring und Alerting f√ºr Availability:\n‚Ä¢ Real-time Service Monitoring mit Uptime Tracking und SLA Measurement\n‚Ä¢ Proactive Alerting f√ºr Certificate Expiration und Service Degradation\n‚Ä¢ Performance Monitoring mit Threshold-based Alerting f√ºr Capacity Planning\n‚Ä¢ End-to-End Transaction Monitoring f√ºr PKI-Service-Chain Visibility\n‚Ä¢ Custom Dashboards f√ºr PKI-Availability-Metrics und Trend Analysis\n\n‚öôÔ∏è Maintenance und Patching Strategies:\n‚Ä¢ Rolling Updates f√ºr PKI-Cluster ohne Service-Unterbrechung\n‚Ä¢ Maintenance Window Planning mit Business Impact Assessment\n‚Ä¢ Automated Patching mit Rollback Capabilities f√ºr Security Updates\n‚Ä¢ Configuration Change Management mit Approval Workflows\n‚Ä¢ Capacity Planning und Scaling Procedures f√ºr Growing Certificate Volumes\n\nüåê Network Resilience und Connectivity:\n‚Ä¢ Multiple Network Path Redundancy f√ºr PKI-Service-Connectivity\n‚Ä¢ WAN Optimization f√ºr PKI-Traffic √ºber geografisch verteilte Sites\n‚Ä¢ Network Segmentation mit Redundant Firewall Configurations\n‚Ä¢ VPN Backup Connections f√ºr Site-to-Site PKI-Communication\n‚Ä¢ Internet Service Provider (ISP) Redundancy f√ºr External PKI-Service Access\n\nüìä Business Continuity Integration:\n‚Ä¢ Business Impact Analysis f√ºr PKI-Service-Dependencies\n‚Ä¢ Service Level Agreement (SLA) Definition f√ºr PKI-Availability Requirements\n‚Ä¢ Incident Response Procedures f√ºr PKI-Service-Outages\n‚Ä¢ Communication Plans f√ºr Stakeholder Notification bei PKI-Ausf√§llen\n‚Ä¢ Post-Incident Review Processes f√ºr Continuous Improvement"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
