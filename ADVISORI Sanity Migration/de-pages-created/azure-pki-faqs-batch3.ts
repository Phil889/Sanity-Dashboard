import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating Azure PKI page with FAQ batch 3...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'azure-pki' })
    
    if (!existingDoc) {
      throw new Error('Document "azure-pki" not found')
    }
    
    // Create new FAQs for cost optimization and performance
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 9),
        question: 'Welche Kostenoptimierungsstrategien gibt es f√ºr Azure PKI Services und wie erfolgt die Performance-Optimierung?',
        answer: "Azure PKI Services bieten verschiedene Ans√§tze zur Kostenoptimierung und Performance-Verbesserung, die es Unternehmen erm√∂glichen, ihre PKI-Infrastrukturen effizient und wirtschaftlich zu betreiben. Diese Strategien kombinieren technische Optimierungen mit intelligenten Ressourcenmanagement-Praktiken.\n\nüí∞ Cost Management und Pricing Optimization:\n‚Ä¢ Right-sizing von Azure Key Vault Tiers basierend auf tats√§chlichen Certificate Volume und Performance Anforderungen\n‚Ä¢ Reserved Capacity Planning f√ºr vorhersagbare Certificate Management Workloads mit signifikanten Kosteneinsparungen\n‚Ä¢ Usage-based Scaling f√ºr dynamische Anpassung der PKI-Ressourcen an schwankende Anforderungen\n‚Ä¢ Cost Allocation Tags f√ºr detaillierte Kostenverfolgung und Chargeback-Mechanismen\n‚Ä¢ Azure Cost Management Integration f√ºr kontinuierliche Kosten√ºberwachung und Budget-Alerts\n\n‚ö° Performance Optimization Strategies:\n‚Ä¢ Certificate Caching Mechanisms f√ºr h√§ufig verwendete Certificates und Keys zur Reduzierung von Latency\n‚Ä¢ Geographic Distribution von Key Vaults f√ºr optimale Performance in verschiedenen Regionen\n‚Ä¢ Connection Pooling und Keep-Alive Connections f√ºr effiziente API-Nutzung\n‚Ä¢ Batch Operations f√ºr Bulk Certificate Management Tasks zur Reduzierung von API-Calls\n‚Ä¢ Asynchronous Processing f√ºr Certificate-intensive Operations ohne Blocking\n\nüîÑ Resource Optimization und Lifecycle Management:\n‚Ä¢ Automated Certificate Cleanup f√ºr abgelaufene und nicht mehr verwendete Certificates\n‚Ä¢ Certificate Consolidation Strategies zur Reduzierung der Anzahl verwalteter Certificates\n‚Ä¢ Template-based Certificate Management f√ºr standardisierte und effiziente Certificate-Erstellung\n‚Ä¢ Lifecycle Policy Automation f√ºr automatische Certificate Rotation und Renewal\n‚Ä¢ Archive Strategies f√ºr Long-term Certificate Storage mit kosteneffizienten Storage Tiers\n\nüìä Monitoring und Analytics f√ºr Cost Control:\n‚Ä¢ Usage Pattern Analysis f√ºr Identifikation von Optimierungsm√∂glichkeiten\n‚Ä¢ Cost per Certificate Metrics f√ºr detaillierte Kostenanalyse und ROI-Berechnung\n‚Ä¢ Performance Benchmarking f√ºr kontinuierliche Optimierung der PKI-Operations\n‚Ä¢ Capacity Planning basierend auf historischen Daten und Wachstumsprognosen\n‚Ä¢ Alert Systems f√ºr ungew√∂hnliche Kostenentwicklungen oder Performance-Degradation\n\nüèóÔ∏è Architecture Optimization:\n‚Ä¢ Multi-tenant Key Vault Strategies f√ºr Shared Services und Kostenteilung\n‚Ä¢ Hybrid Deployment Models f√ºr optimale Balance zwischen On-Premises und Cloud Costs\n‚Ä¢ Service Tier Selection basierend auf Security Requirements und Budget Constraints\n‚Ä¢ Network Optimization f√ºr reduzierte Data Transfer Costs und verbesserte Performance\n‚Ä¢ Integration Patterns f√ºr minimale API-Calls und maximale Effizienz\n\nüîß Operational Excellence:\n‚Ä¢ Automation von Routine-Tasks zur Reduzierung von Manual Overhead\n‚Ä¢ Self-Service Portals f√ºr Entwickler zur Reduzierung von Support-Aufwand\n‚Ä¢ Documentation und Training f√ºr effiziente PKI-Nutzung durch Teams\n‚Ä¢ Best Practice Guidelines f√ºr kosteneffiziente Certificate Management Patterns\n‚Ä¢ Regular Reviews und Optimization Cycles f√ºr kontinuierliche Verbesserung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 10),
        question: 'Wie erfolgt die Disaster Recovery und Business Continuity Planung f√ºr Azure PKI Services?',
        answer: "Disaster Recovery und Business Continuity f√ºr Azure PKI Services erfordern eine umfassende Strategie, die sowohl technische Redundanz als auch organisatorische Prozesse umfasst. Diese Planung ist kritisch f√ºr die Aufrechterhaltung von Certificate-basierten Services und Sicherheitsfunktionen.\n\nüîÑ Multi-Region Redundancy und Failover:\n‚Ä¢ Cross-Region Key Vault Replication f√ºr automatische Synchronisation von Certificate Data\n‚Ä¢ Active-Passive und Active-Active Deployment Patterns f√ºr verschiedene RTO und RPO Anforderungen\n‚Ä¢ Automated Failover Mechanisms mit Health Checks und Monitoring f√ºr nahtlose Service Continuity\n‚Ä¢ Geographic Load Distribution f√ºr optimale Performance und Disaster Recovery Capabilities\n‚Ä¢ DNS-based Failover Strategies f√ºr transparente Client-Redirection bei Ausf√§llen\n\nüíæ Backup und Recovery Strategies:\n‚Ä¢ Automated Backup Schedules f√ºr Certificate Data, Keys und Configuration Settings\n‚Ä¢ Point-in-Time Recovery Capabilities f√ºr granulare Wiederherstellung von Certificate States\n‚Ä¢ Cross-Subscription Backup f√ºr zus√§tzliche Isolation und Protection\n‚Ä¢ Encrypted Backup Storage mit Long-term Retention Policies f√ºr Compliance Requirements\n‚Ä¢ Backup Validation und Testing Procedures f√ºr Sicherstellung der Recovery-F√§higkeit\n\nüè¢ Business Continuity Planning:\n‚Ä¢ Recovery Time Objective und Recovery Point Objective Definition f√ºr verschiedene Certificate Services\n‚Ä¢ Business Impact Analysis f√ºr Priorisierung kritischer PKI-Services und Applications\n‚Ä¢ Escalation Procedures und Communication Plans f√ºr Disaster Response Teams\n‚Ä¢ Alternative Authentication Mechanisms f√ºr Fallback-Szenarien bei PKI-Ausf√§llen\n‚Ä¢ Vendor Management und Third-party Dependencies f√ºr externe Certificate Authorities\n\nüß™ Testing und Validation:\n‚Ä¢ Regular Disaster Recovery Drills f√ºr Validation der Recovery Procedures\n‚Ä¢ Chaos Engineering Practices f√ºr Proactive Identification von Failure Points\n‚Ä¢ Automated Testing von Backup und Recovery Processes\n‚Ä¢ Performance Testing unter Disaster Recovery Conditions\n‚Ä¢ Documentation Updates basierend auf Testing Results und Lessons Learned\n\nüìã Compliance und Regulatory Considerations:\n‚Ä¢ Audit Trail Preservation w√§hrend Disaster Recovery Operations\n‚Ä¢ Regulatory Reporting Requirements f√ºr Certificate-related Incidents\n‚Ä¢ Data Residency Compliance bei Cross-Region Recovery Scenarios\n‚Ä¢ Security Controls Maintenance w√§hrend Emergency Operations\n‚Ä¢ Legal und Contractual Obligations f√ºr Certificate Service Availability\n\nüîê Security w√§hrend Disaster Recovery:\n‚Ä¢ Secure Key Escrow und Recovery Procedures f√ºr Critical Certificates\n‚Ä¢ Identity Verification f√ºr Disaster Recovery Operations und Administrative Access\n‚Ä¢ Temporary Certificate Issuance f√ºr Emergency Operations\n‚Ä¢ Security Monitoring w√§hrend Recovery Operations f√ºr Threat Detection\n‚Ä¢ Post-Recovery Security Assessment und Incident Response\n\nüìä Monitoring und Alerting:\n‚Ä¢ Real-time Health Monitoring f√ºr Early Warning Systems\n‚Ä¢ Automated Incident Detection und Response Triggers\n‚Ä¢ Performance Metrics Tracking w√§hrend Recovery Operations\n‚Ä¢ Stakeholder Notification Systems f√ºr Status Updates\n‚Ä¢ Post-Incident Analysis und Reporting f√ºr Continuous Improvement\n\nüîß Operational Procedures:\n‚Ä¢ Runbook Development f√ºr Step-by-Step Recovery Procedures\n‚Ä¢ Role-based Access Controls f√ºr Disaster Recovery Operations\n‚Ä¢ Change Management Processes f√ºr Emergency Modifications\n‚Ä¢ Communication Protocols f√ºr Internal und External Stakeholders\n‚Ä¢ Resource Allocation und Capacity Management w√§hrend Recovery"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 11),
        question: 'Welche Sicherheitsfeatures und Threat Protection Mechanismen bietet Azure PKI?',
        answer: "Azure PKI implementiert umfassende Sicherheitsfeatures und Threat Protection Mechanismen, die mehrschichtige Verteidigung gegen moderne Cyber-Bedrohungen bieten. Diese Sicherheitsarchitektur kombiniert pr√§ventive, detektive und responsive Sicherheitsma√ünahmen.\n\nüõ°Ô∏è Multi-layered Security Architecture:\n‚Ä¢ Defense-in-Depth Strategien mit mehreren Sicherheitsebenen f√ºr Certificate Protection\n‚Ä¢ Zero Trust Network Access f√ºr alle PKI-Operations und Administrative Functions\n‚Ä¢ Least Privilege Access Principles mit granularen Permission Models\n‚Ä¢ Network Segmentation und Micro-segmentation f√ºr Isolation kritischer PKI-Components\n‚Ä¢ Security by Design Principles in allen PKI-Service Implementations\n\nüîê Advanced Threat Detection und Response:\n‚Ä¢ Machine Learning-basierte Anomaly Detection f√ºr ungew√∂hnliche Certificate Usage Patterns\n‚Ä¢ Behavioral Analytics f√ºr Identification von Insider Threats und Compromised Accounts\n‚Ä¢ Real-time Threat Intelligence Integration f√ºr Known Attack Pattern Recognition\n‚Ä¢ Automated Incident Response f√ºr schnelle Reaktion auf Security Events\n‚Ä¢ Forensic Capabilities f√ºr Post-Incident Analysis und Evidence Collection\n\nüîí Cryptographic Security und Key Protection:\n‚Ä¢ Hardware Security Module Integration f√ºr tamper-resistant Key Storage\n‚Ä¢ FIPS-validated Cryptographic Modules f√ºr Government und High-security Requirements\n‚Ä¢ Quantum-resistant Cryptography Support f√ºr Future-proof Security\n‚Ä¢ Key Rotation Automation f√ºr Regular Cryptographic Key Updates\n‚Ä¢ Secure Key Derivation Functions f√ºr Application-specific Key Generation\n\nüìä Comprehensive Audit und Compliance:\n‚Ä¢ Immutable Audit Logs f√ºr alle Certificate Operations und Administrative Actions\n‚Ä¢ Real-time Security Event Monitoring mit SIEM Integration\n‚Ä¢ Compliance Dashboard f√ºr Regulatory Requirements Tracking\n‚Ä¢ Automated Compliance Reporting f√ºr Various Industry Standards\n‚Ä¢ Evidence Collection f√ºr Legal und Regulatory Investigations\n\nüåê Network Security und Access Control:\n‚Ä¢ Private Link und Service Endpoints f√ºr Secure Network Connectivity\n‚Ä¢ Web Application Firewall Integration f√ºr API Protection\n‚Ä¢ DDoS Protection f√ºr High Availability und Service Resilience\n‚Ä¢ IP Whitelisting und Geographic Restrictions f√ºr Access Control\n‚Ä¢ VPN und ExpressRoute Integration f√ºr Secure Hybrid Connectivity\n\nüîç Identity und Access Management Security:\n‚Ä¢ Multi-Factor Authentication f√ºr alle Administrative Access\n‚Ä¢ Privileged Identity Management f√ºr Elevated Permissions\n‚Ä¢ Just-in-Time Access f√ºr Temporary Administrative Rights\n‚Ä¢ Conditional Access Policies basierend auf Risk Assessment\n‚Ä¢ Identity Protection f√ºr Compromised Account Detection\n\n‚ö†Ô∏è Threat Prevention und Mitigation:\n‚Ä¢ Certificate Pinning f√ºr Man-in-the-Middle Attack Prevention\n‚Ä¢ Certificate Transparency Monitoring f√ºr Rogue Certificate Detection\n‚Ä¢ Automated Certificate Revocation f√ºr Compromised Certificates\n‚Ä¢ Threat Hunting Capabilities f√ºr Proactive Security Monitoring\n‚Ä¢ Security Orchestration f√ºr Automated Response Workflows\n\nüîÑ Incident Response und Recovery:\n‚Ä¢ Security Incident Response Plans f√ºr Certificate-related Breaches\n‚Ä¢ Automated Containment Procedures f√ºr Security Incidents\n‚Ä¢ Forensic Analysis Tools f√ºr Incident Investigation\n‚Ä¢ Recovery Procedures f√ºr Compromised PKI Infrastructure\n‚Ä¢ Post-Incident Security Hardening und Lessons Learned Integration"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 12),
        question: 'Wie unterst√ºtzt Azure PKI IoT und Edge Computing Szenarien?',
        answer: "Azure PKI bietet spezialisierte L√∂sungen f√ºr IoT und Edge Computing Szenarien, die die einzigartigen Herausforderungen von verteilten, ressourcenbeschr√§nkten und oft unzuverl√§ssig verbundenen Ger√§ten adressieren. Diese L√∂sungen erm√∂glichen sichere Device Authentication und Communication in gro√üem Ma√üstab.\n\nüåê IoT Device Identity und Authentication:\n‚Ä¢ Device Provisioning Service Integration f√ºr automatische Certificate Enrollment von IoT Devices\n‚Ä¢ X.509 Certificate-based Device Authentication f√ºr starke Device Identity Verification\n‚Ä¢ Device Twin Certificate Management f√ºr Individual Device Configuration und Monitoring\n‚Ä¢ Bulk Certificate Provisioning f√ºr Large-scale IoT Deployments\n‚Ä¢ Device Lifecycle Management mit Automated Certificate Renewal und Revocation\n\nüîß Edge Computing PKI Services:\n‚Ä¢ Azure IoT Edge Integration f√ºr Local Certificate Management und Offline Operations\n‚Ä¢ Edge-to-Cloud Certificate Synchronization f√ºr Hybrid IoT Architectures\n‚Ä¢ Local Certificate Authority Services f√ºr Disconnected Edge Scenarios\n‚Ä¢ Certificate Caching und Local Validation f√ºr Reduced Latency\n‚Ä¢ Edge Security Module Integration f√ºr Hardware-based Certificate Storage\n\nüì± Lightweight PKI f√ºr Resource-constrained Devices:\n‚Ä¢ Optimized Certificate Formats f√ºr Minimal Memory und Storage Requirements\n‚Ä¢ Elliptic Curve Cryptography f√ºr Efficient Cryptographic Operations\n‚Ä¢ Certificate Chain Optimization f√ºr Reduced Network Overhead\n‚Ä¢ Compressed Certificate Formats f√ºr Bandwidth-limited Connections\n‚Ä¢ Power-efficient Cryptographic Operations f√ºr Battery-powered Devices\n\nüîÑ Scalable Certificate Management:\n‚Ä¢ Automated Certificate Lifecycle Management f√ºr Millions of IoT Devices\n‚Ä¢ Certificate Template Policies f√ºr Standardized IoT Device Certificates\n‚Ä¢ Batch Certificate Operations f√ºr Efficient Large-scale Management\n‚Ä¢ Device Group Management f√ºr Policy-based Certificate Distribution\n‚Ä¢ Hierarchical Certificate Structures f√ºr Organizational Device Management\n\nüõ°Ô∏è IoT Security und Threat Protection:\n‚Ä¢ Device Attestation Services f√ºr Hardware-based Device Verification\n‚Ä¢ Secure Boot Integration f√ºr Trusted Device Startup Processes\n‚Ä¢ Over-the-Air Certificate Updates f√ºr Secure Remote Certificate Management\n‚Ä¢ Device Compromise Detection durch Certificate Usage Monitoring\n‚Ä¢ Quarantine Mechanisms f√ºr Suspected Compromised Devices\n\nüåç Global IoT Deployment Support:\n‚Ä¢ Multi-region Certificate Distribution f√ºr Global IoT Networks\n‚Ä¢ Local Certificate Validation f√ºr Reduced Latency in Remote Locations\n‚Ä¢ Offline Certificate Validation f√ºr Intermittently Connected Devices\n‚Ä¢ Regional Compliance Support f√ºr Local Data Protection Requirements\n‚Ä¢ Content Delivery Network Integration f√ºr Efficient Certificate Distribution\n\nüìä IoT Certificate Analytics und Monitoring:\n‚Ä¢ Device Certificate Usage Analytics f√ºr Optimization und Troubleshooting\n‚Ä¢ IoT Security Posture Assessment f√ºr Fleet-wide Security Monitoring\n‚Ä¢ Predictive Analytics f√ºr Certificate Renewal Planning\n‚Ä¢ Device Health Monitoring durch Certificate-based Metrics\n‚Ä¢ Anomaly Detection f√ºr Unusual Device Behavior Patterns\n\nüîó Integration mit IoT Platforms:\n‚Ä¢ Azure IoT Hub Integration f√ºr Seamless Device Onboarding\n‚Ä¢ Azure IoT Central Support f√ºr Simplified IoT Application Development\n‚Ä¢ Third-party IoT Platform Integration f√ºr Multi-vendor Environments\n‚Ä¢ Industrial IoT Protocol Support f√ºr Manufacturing und Automation\n‚Ä¢ Smart City und Connected Vehicle Integration f√ºr Specialized Use Cases"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 3 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
