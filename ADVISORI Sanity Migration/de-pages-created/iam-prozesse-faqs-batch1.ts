import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Prozesse page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-prozesse' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-prozesse" not found')
    }
    
    // Create new FAQs for IAM Prozesse fundamentals
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Was macht IAM-Prozesse zum strategischen Erfolgsfaktor f√ºr moderne Unternehmen und wie unterscheiden sie sich von traditionellen IT-Verwaltungsans√§tzen?',
        answer: "IAM-Prozesse sind das operative Nervensystem moderner Unternehmen und transformieren Identit√§tsverwaltung von einem reaktiven administrativen Overhead zu einem proaktiven Business-Enabler. Anders als traditionelle manuelle IT-Verwaltungsans√§tze orchestrieren moderne IAM-Prozesse intelligente, automatisierte Workflows, die Sicherheit maximieren, Compliance automatisieren und gleichzeitig die Gesch√§ftsagilit√§t erheblich steigern.\n\nüéØ Strategische Transformation und Business-Impact:\n‚Ä¢ End-to-End Identity Lifecycle Management mit vollautomatisierten Joiner-Mover-Leaver-Prozessen\n‚Ä¢ Intelligent Workflow Orchestration mit KI-gest√ºtzter Optimierung und adaptiver Logik\n‚Ä¢ Business-Process-Integration f√ºr nahtlose Einbindung in bestehende Gesch√§ftsabl√§ufe\n‚Ä¢ Risk-based Process Automation mit kontinuierlicher Sicherheitsbewertung und Anpassung\n‚Ä¢ Compliance-by-Design-Ansatz f√ºr automatisierte regulatorische Exzellenz und Audit-Bereitschaft\n\nüöÄ Innovation-Enablement und Competitive Advantage:\n‚Ä¢ Self-Service Capabilities f√ºr beschleunigte Benutzer-Onboarding und reduzierte IT-Belastung\n‚Ä¢ API-driven Architecture f√ºr moderne Anwendungsentwicklung und Ecosystem-Integration\n‚Ä¢ Cloud-native Scalability f√ºr globale Expansion und elastische Ressourcennutzung\n‚Ä¢ Real-time Analytics f√ºr datengetriebene Prozessoptimierung und Performance-Monitoring\n‚Ä¢ Predictive Automation f√ºr proaktive Identit√§tsverwaltung und Anomaly Detection\n\nüõ°Ô∏è Advanced Security und Governance Framework:\n‚Ä¢ Zero-Trust Process Design mit kontinuierlicher Verifikation und Risikobewertung\n‚Ä¢ Segregation of Duties Automation f√ºr automatische Erkennung und Verhinderung von Interessenkonflikten\n‚Ä¢ Privileged Access Workflows mit Just-in-Time-Elevation und umfassendem Monitoring\n‚Ä¢ Threat-aware Processing mit intelligenter Anpassung an aktuelle Bedrohungslagen\n‚Ä¢ Automated Incident Response f√ºr schnelle Reaktion auf Sicherheitsvorf√§lle und Anomalien\n\nüìä Data-driven Excellence und Continuous Improvement:\n‚Ä¢ Process Analytics mit Machine Learning f√ºr kontinuierliche Workflow-Optimierung\n‚Ä¢ Performance Metrics und KPI-Dashboards f√ºr Real-time √úberwachung und Steuerung\n‚Ä¢ Bottleneck Detection mit automatischer Identifikation und Behebung von Engp√§ssen\n‚Ä¢ User Experience Optimization f√ºr maximale Akzeptanz und Produktivit√§tssteigerung\n‚Ä¢ Innovation Integration f√ºr kontinuierliche Weiterentwicklung und Zukunftssicherheit\n\nüåê Enterprise-Scale Integration und Orchestration:\n‚Ä¢ Multi-System Integration mit nahtloser Anbindung aller Unternehmensanwendungen\n‚Ä¢ Hybrid Cloud Support f√ºr konsistente Prozesse √ºber alle Umgebungen hinweg\n‚Ä¢ Legacy System Modernization ohne Disruption bestehender Gesch√§ftsprozesse\n‚Ä¢ Global Deployment mit lokaler Compliance f√ºr internationale Gesch√§ftst√§tigkeit\n‚Ä¢ Disaster Recovery und Business Continuity f√ºr kritische Identit√§tsprozesse"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Welche kritischen Komponenten bilden ein enterprise-grade Identity Lifecycle Management System und wie arbeiten sie zusammen f√ºr optimale Prozessautomatisierung?',
        answer: "Ein enterprise-grade Identity Lifecycle Management System ist ein hochkomplexes √ñkosystem intelligenter Komponenten, die nahtlos zusammenarbeiten, um den gesamten Lebenszyklus digitaler Identit√§ten zu automatisieren und zu optimieren. Diese Architektur muss sowohl h√∂chste Sicherheitsstandards als auch maximale Effizienz gew√§hrleisten, w√§hrend sie gleichzeitig Gesch√§ftsprozesse beschleunigt und Compliance-Anforderungen automatisiert erf√ºllt.\n\nüèóÔ∏è Core Lifecycle Management Infrastructure:\n‚Ä¢ Identity Repository als zentrale, hochverf√ºgbare Datenbank f√ºr alle Identit√§tsinformationen und Lifecycle-Status\n‚Ä¢ Workflow Engine mit intelligenter Orchestrierung f√ºr komplexe, mehrstufige Gesch√§ftsprozesse\n‚Ä¢ Event-driven Architecture f√ºr Real-time Reaktion auf Lifecycle-Ereignisse und Status√§nderungen\n‚Ä¢ Integration Hub f√ºr nahtlose Anbindung aller Zielsysteme und Datenquellen\n‚Ä¢ Process Analytics Engine f√ºr kontinuierliche √úberwachung und Optimierung aller Workflows\n\nüîÑ Intelligent Joiner-Mover-Leaver Orchestration:\n‚Ä¢ Automated Joiner Processes mit intelligenter Rollenzuweisung basierend auf Organisationsstruktur und Gesch√§ftsregeln\n‚Ä¢ Dynamic Mover Workflows mit automatischer Rechte-Migration und Validierung bei Positionswechseln\n‚Ä¢ Secure Leaver Processes mit vollst√§ndiger Deprovisioning-Automation und Compliance-Dokumentation\n‚Ä¢ Exception Handling mit intelligenter Eskalation und manueller Intervention bei komplexen Szenarien\n‚Ä¢ Audit Trail Management mit l√ºckenloser Dokumentation aller Lifecycle-Aktivit√§ten\n\n‚öôÔ∏è Advanced Provisioning und Deprovisioning Engine:\n‚Ä¢ Intelligent Account Creation mit automatischer Generierung von Benutzernamen und Passw√∂rtern\n‚Ä¢ Role-based Provisioning mit dynamischer Zuweisung basierend auf Organisationsrollen und Gesch√§ftsanforderungen\n‚Ä¢ Attribute Synchronization f√ºr konsistente Identit√§tsdaten √ºber alle Systeme hinweg\n‚Ä¢ Dependency Management f√ºr korrekte Reihenfolge bei komplexen Provisioning-Vorg√§ngen\n‚Ä¢ Rollback Capabilities f√ºr sichere R√ºckg√§ngigmachung bei Fehlern oder √Ñnderungen\n\nüõ°Ô∏è Governance und Compliance Automation:\n‚Ä¢ Automated Access Reviews mit intelligenten Empfehlungen und Risk-based Priorisierung\n‚Ä¢ Recertification Workflows mit automatischer Benachrichtigung und Eskalation\n‚Ä¢ Segregation of Duties Monitoring mit Real-time Erkennung von Interessenkonflikten\n‚Ä¢ Compliance Reporting mit automatischer Generierung regulatorischer Berichte\n‚Ä¢ Risk Assessment Integration f√ºr kontinuierliche Bewertung von Identit√§tsrisiken\n\nüìä Process Intelligence und Analytics:\n‚Ä¢ Real-time Monitoring mit Live-Dashboards f√ºr alle Lifecycle-Aktivit√§ten\n‚Ä¢ Performance Analytics f√ºr Identifikation von Bottlenecks und Optimierungsm√∂glichkeiten\n‚Ä¢ Predictive Analytics f√ºr Vorhersage von Kapazit√§tsanforderungen und Ressourcenbedarf\n‚Ä¢ User Behavior Analytics f√ºr Erkennung anomaler Muster und Sicherheitsrisiken\n‚Ä¢ Continuous Improvement Engine f√ºr automatische Prozessoptimierung basierend auf historischen Daten\n\nüîó Integration und Orchestration Platform:\n‚Ä¢ API Gateway f√ºr sichere und skalierbare Integration mit modernen Anwendungen\n‚Ä¢ Connector Framework f√ºr standardisierte Anbindung verschiedener Zielsysteme\n‚Ä¢ Message Queue System f√ºr zuverl√§ssige und asynchrone Kommunikation\n‚Ä¢ Error Handling und Retry Logic f√ºr robuste Verarbeitung auch bei tempor√§ren Ausf√§llen\n‚Ä¢ Load Balancing und Scaling f√ºr optimale Performance auch bei hohem Durchsatz"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Wie implementiert man intelligente Access Request Workflows erfolgreich und welche strategischen Vorteile bieten sie f√ºr moderne Unternehmenssicherheit?',
        answer: "Intelligente Access Request Workflows revolutionieren die Zugriffsverwaltung durch die Kombination von Self-Service-Funktionalit√§ten, kontextbasierter Genehmigungslogik und automatisierten Sicherheitskontrollen. Diese Workflows transformieren traditionelle, manuelle Genehmigungsprozesse in intelligente, adaptive Systeme, die Sicherheit maximieren, Produktivit√§t steigern und gleichzeitig Compliance-Anforderungen automatisch erf√ºllen.\n\nüéØ Intelligent Request Processing und Automation:\n‚Ä¢ Self-Service Access Portals mit intelligenter Katalogisierung und Suchfunktionalit√§ten\n‚Ä¢ Context-aware Request Routing mit automatischer Weiterleitung an die richtigen Genehmiger\n‚Ä¢ Risk-based Approval Logic mit dynamischer Anpassung der Genehmigungsanforderungen\n‚Ä¢ Automated Pre-approval f√ºr Standard-Zugriffe mit geringem Risiko\n‚Ä¢ Intelligent Bundling f√ºr effiziente Bearbeitung zusammengeh√∂riger Zugriffsanfragen\n\nüõ°Ô∏è Advanced Security und Risk Assessment:\n‚Ä¢ Real-time Risk Scoring mit Machine Learning f√ºr intelligente Sicherheitsbewertung\n‚Ä¢ Segregation of Duties Checks mit automatischer Erkennung von Interessenkonflikten\n‚Ä¢ Peer Analysis f√ºr Vergleich mit √§hnlichen Rollen und Identifikation von Anomalien\n‚Ä¢ Temporal Access Controls mit automatischer Befristung und Verl√§ngerungsworkflows\n‚Ä¢ Threat Intelligence Integration f√ºr proaktive Abwehr bekannter Angriffsmuster\n\n‚ö° Workflow Orchestration und Process Excellence:\n‚Ä¢ Multi-stage Approval Processes mit flexibler Konfiguration f√ºr verschiedene Zugriffstypen\n‚Ä¢ Parallel und Sequential Processing f√ºr optimale Balance zwischen Sicherheit und Effizienz\n‚Ä¢ Automated Escalation mit intelligenten Zeitfenstern und Stellvertreterregelungen\n‚Ä¢ Exception Handling f√ºr komplexe Szenarien mit manueller Intervention\n‚Ä¢ SLA Management mit automatischer √úberwachung und Benachrichtigung bei Verz√∂gerungen\n\nüîç Comprehensive Audit und Compliance:\n‚Ä¢ Complete Audit Trails mit l√ºckenloser Dokumentation aller Genehmigungsschritte\n‚Ä¢ Justification Requirements mit automatischer Validierung von Gesch√§ftsbegr√ºndungen\n‚Ä¢ Regulatory Compliance Checks mit automatischer √úberpr√ºfung regulatorischer Anforderungen\n‚Ä¢ Evidence Collection f√ºr umfassende Dokumentation von Genehmigungsentscheidungen\n‚Ä¢ Compliance Reporting mit automatischer Generierung von Audit-Berichten\n\nüìä Analytics und Continuous Improvement:\n‚Ä¢ Request Pattern Analysis f√ºr Identifikation von Trends und Optimierungsm√∂glichkeiten\n‚Ä¢ Approval Time Metrics f√ºr √úberwachung und Verbesserung der Prozesseffizienz\n‚Ä¢ User Satisfaction Tracking f√ºr kontinuierliche Verbesserung der Benutzererfahrung\n‚Ä¢ Bottleneck Detection mit automatischer Identifikation von Engp√§ssen im Genehmigungsprozess\n‚Ä¢ Predictive Analytics f√ºr Vorhersage von Zugriffsanforderungen und Kapazit√§tsplanung\n\nüåê Integration und User Experience:\n‚Ä¢ Mobile-first Design f√ºr moderne Arbeitspl√§tze und Remote-Work-Unterst√ºtzung\n‚Ä¢ Single Sign-On Integration f√ºr nahtlose Benutzererfahrung ohne zus√§tzliche Anmeldungen\n‚Ä¢ Notification System mit intelligenten Benachrichtigungen √ºber alle Kan√§le\n‚Ä¢ Multi-language Support f√ºr globale Organisationen mit verschiedenen Sprachen\n‚Ä¢ Accessibility Features f√ºr inklusive Nutzung durch alle Benutzergruppen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Welche Rolle spielen Governance-Prozesse in einer modernen IAM-Strategie und wie automatisieren sie Compliance-Anforderungen f√ºr regulatorische Exzellenz?',
        answer: "Governance-Prozesse sind das strategische R√ºckgrat jeder robusten IAM-Strategie und bilden die Br√ºcke zwischen technischen Sicherheitsma√ünahmen und gesch√§ftlichen Compliance-Anforderungen. Moderne IAM-Governance automatisiert komplexe regulatorische Prozesse, schafft Transparenz √ºber alle Zugriffsrechte und erm√∂glicht es Unternehmen, proaktiv Risiken zu managen und kontinuierlich Compliance-Exzellenz zu demonstrieren.\n\nüéØ Strategic Governance Framework und Enterprise-Integration:\n‚Ä¢ Identity Governance Strategy mit Alignment zu Gesch√§ftszielen und regulatorischen Anforderungen\n‚Ä¢ Policy Management Framework f√ºr zentrale Definition und Durchsetzung von Zugriffsrichtlinien\n‚Ä¢ Risk-based Governance mit kontinuierlicher Bewertung und Anpassung von Sicherheitsma√ünahmen\n‚Ä¢ Stakeholder Integration f√ºr effektive Zusammenarbeit zwischen IT, Compliance und Gesch√§ftsbereichen\n‚Ä¢ Governance Metrics und KPIs f√ºr messbare Erfolge und kontinuierliche Verbesserung\n\nüîç Automated Access Reviews und Recertification:\n‚Ä¢ Intelligent Access Reviews mit KI-gest√ºtzten Empfehlungen und Risk-based Priorisierung\n‚Ä¢ Role-based Recertification mit automatischer Gruppierung und effizienter Bearbeitung\n‚Ä¢ Peer-based Reviews f√ºr Validierung durch Kollegen mit √§hnlichen Verantwortlichkeiten\n‚Ä¢ Manager-based Certification mit hierarchischer Genehmigungsstruktur\n‚Ä¢ Exception Management f√ºr Behandlung von Sonderf√§llen und komplexen Zugriffsszenarien\n\n‚öôÔ∏è Segregation of Duties und Conflict Management:\n‚Ä¢ Automated SoD Monitoring mit Real-time Erkennung von Interessenkonflikten\n‚Ä¢ Conflict Resolution Workflows f√ºr systematische Behandlung identifizierter Konflikte\n‚Ä¢ Compensating Controls f√ºr Situationen, in denen SoD-Verletzungen gesch√§ftlich notwendig sind\n‚Ä¢ Risk Assessment Integration f√ºr Bewertung der Auswirkungen von SoD-Konflikten\n‚Ä¢ Continuous Monitoring f√ºr proaktive Erkennung neuer Konfliktpotentiale\n\nüìä Compliance Automation und Regulatory Excellence:\n‚Ä¢ Regulatory Framework Mapping f√ºr automatische Zuordnung von Kontrollen zu Compliance-Anforderungen\n‚Ä¢ Automated Compliance Reporting mit Real-time Generierung regulatorischer Berichte\n‚Ä¢ Evidence Collection f√ºr umfassende Dokumentation von Compliance-Aktivit√§ten\n‚Ä¢ Audit Trail Management mit l√ºckenloser Nachverfolgung aller Governance-Aktivit√§ten\n‚Ä¢ Regulatory Change Management f√ºr schnelle Anpassung an neue Compliance-Anforderungen\n\nüõ°Ô∏è Risk Management und Threat Intelligence:\n‚Ä¢ Identity Risk Scoring mit Machine Learning f√ºr intelligente Risikobewertung\n‚Ä¢ Anomaly Detection f√ºr Erkennung ungew√∂hnlicher Zugriffsmuster und Verhaltensweisen\n‚Ä¢ Threat Intelligence Integration f√ºr proaktive Abwehr bekannter Angriffsmuster\n‚Ä¢ Risk Mitigation Workflows f√ºr systematische Behandlung identifizierter Risiken\n‚Ä¢ Predictive Risk Analytics f√ºr Vorhersage potenzieller Sicherheitsrisiken\n\nüåê Enterprise-Scale Governance und Global Compliance:\n‚Ä¢ Multi-jurisdiction Support f√ºr komplexe internationale Compliance-Anforderungen\n‚Ä¢ Data Residency Management f√ºr Einhaltung lokaler Datenschutzbestimmungen\n‚Ä¢ Cross-border Identity Governance f√ºr globale Organisationen mit verschiedenen Rechtssystemen\n‚Ä¢ Vendor Risk Management f√ºr sichere Integration von Drittanbietern und Partnern\n‚Ä¢ Business Continuity Planning f√ºr Aufrechterhaltung der Governance auch in Krisensituationen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
