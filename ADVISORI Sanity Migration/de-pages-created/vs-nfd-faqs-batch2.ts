import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating VS-NfD page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'vs-nfd' })
    
    if (!existingDoc) {
      throw new Error('Document "vs-nfd" not found')
    }
    
    // Create new FAQs for technical security requirements
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Welche spezifischen Verschl√ºsselungsanforderungen m√ºssen bei der Implementierung von VS-NfD Compliance beachtet werden?',
        answer: "Die Verschl√ºsselungsanforderungen f√ºr VS-NfD Informationen sind pr√§zise definiert und erfordern die Verwendung zugelassener Kryptografie-Produkte und -Verfahren. Diese Anforderungen gehen √ºber Standard-Verschl√ºsselungsma√ünahmen hinaus und orientieren sich an den Vorgaben des Bundesamts f√ºr Sicherheit in der Informationstechnik. Eine ordnungsgem√§√üe Implementierung ist essentiell f√ºr die Compliance und den Schutz klassifizierter Informationen.\n\nüîê Zugelassene Verschl√ºsselungsprodukte:\n‚Ä¢ Verwendung von Verschl√ºsselungsprodukten, die eine Zulassung oder Freigabe des BSI f√ºr VS-NfD besitzen\n‚Ä¢ Implementierung von Algorithmen, die den aktuellen kryptografischen Standards und Empfehlungen entsprechen\n‚Ä¢ Ber√ºcksichtigung der BSI-Technischen Richtlinien f√ºr kryptografische Verfahren und Schl√ºssell√§ngen\n‚Ä¢ Regelm√§√üige √úberpr√ºfung der Zulassungsstatus verwendeter Verschl√ºsselungsprodukte\n‚Ä¢ Dokumentation aller eingesetzten Kryptografie-L√∂sungen und deren Zertifizierungsstatus\n\nüíæ Verschl√ºsselung ruhender Daten:\n‚Ä¢ Vollst√§ndige Verschl√ºsselung aller Speichermedien, die VS-NfD Informationen enthalten\n‚Ä¢ Implementierung von Hardware-basierter Verschl√ºsselung f√ºr kritische Speichersysteme\n‚Ä¢ Sichere Verschl√ºsselung von Backup-Medien und Archivierungssystemen\n‚Ä¢ Verwendung separater Verschl√ºsselungsschl√ºssel f√ºr verschiedene Datenklassifikationen\n‚Ä¢ Implementierung von Verschl√ºsselung auf Datei oder Datenbankebene f√ºr granulare Kontrolle\n\nüåê Verschl√ºsselung von Daten in √úbertragung:\n‚Ä¢ End-to-End-Verschl√ºsselung f√ºr alle Kommunikationskan√§le, die VS-NfD Informationen √ºbertragen\n‚Ä¢ Verwendung starker TLS-Konfigurationen mit aktuellen Cipher-Suites f√ºr Webanwendungen\n‚Ä¢ Implementierung von VPN-L√∂sungen mit zugelassenen Verschl√ºsselungsalgorithmen\n‚Ä¢ Sichere E-Mail-Verschl√ºsselung f√ºr den Austausch klassifizierter Informationen\n‚Ä¢ Verschl√ºsselung von API-Kommunikation und Datenbank-Verbindungen\n\nüîë Schl√ºsselmanagement und -verwaltung:\n‚Ä¢ Implementierung robuster Schl√ºsselgenerierungs-, -verteilungs- und -speicherungsverfahren\n‚Ä¢ Verwendung von Hardware-Security-Modulen f√ºr die sichere Schl√ºsselverwahrung\n‚Ä¢ Etablierung von Schl√ºsselrotations-Richtlinien und automatisierten Erneuerungsprozessen\n‚Ä¢ Sichere Schl√ºsselarchivierung und -wiederherstellung f√ºr langfristige Datenzugriffe\n‚Ä¢ Implementierung von Schl√ºsseltrennung und Vier-Augen-Prinzip f√ºr kritische Schl√ºsseloperationen\n\nüì± Mobile und Endpoint-Verschl√ºsselung:\n‚Ä¢ Vollst√§ndige Ger√§teverschl√ºsselung f√ºr alle mobilen Endger√§te mit VS-NfD Zugriff\n‚Ä¢ Implementierung von Container-basierten Verschl√ºsselungsl√∂sungen f√ºr BYOD-Szenarien\n‚Ä¢ Sichere Verschl√ºsselung von Wechselmedien und externen Speicherger√§ten\n‚Ä¢ Remote-Wipe-Funktionalit√§ten mit sicherer Schl√ºssell√∂schung bei Ger√§teverlust\n‚Ä¢ Monitoring und Compliance-√úberpr√ºfung der Verschl√ºsselungsstatus aller Endger√§te\n\nüîç Monitoring und Compliance-√úberwachung:\n‚Ä¢ Kontinuierliche √úberwachung der Verschl√ºsselungsimplementierung und -effektivit√§t\n‚Ä¢ Regelm√§√üige Audits und Penetrationstests der kryptografischen Implementierungen\n‚Ä¢ Automatisierte Compliance-Checks f√ºr Verschl√ºsselungsrichtlinien und -konfigurationen\n‚Ä¢ Incident-Response-Verfahren f√ºr kryptografische Sicherheitsvorf√§lle\n‚Ä¢ Dokumentation und Reporting von Verschl√ºsselungsmetriken f√ºr Compliance-Nachweise"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Wie sollten Netzwerkarchitekturen gestaltet werden, um VS-NfD Informationen sicher zu verarbeiten und zu √ºbertragen?',
        answer: "Die Netzwerkarchitektur f√ºr VS-NfD Informationsverarbeitung erfordert spezielle Sicherheitsma√ünahmen und Designprinzipien, die √ºber Standard-Netzwerksicherheit hinausgehen. Eine durchdachte Netzwerksegmentierung, robuste Zugangskontrollen und umfassende √úberwachungsma√ünahmen sind essentiell f√ºr den Schutz klassifizierter Informationen. Die Architektur muss sowohl Sicherheitsanforderungen als auch operative Effizienz ber√ºcksichtigen.\n\nüèóÔ∏è Netzwerksegmentierung und Isolation:\n‚Ä¢ Implementierung dedizierter Netzwerksegmente f√ºr VS-NfD Informationsverarbeitung\n‚Ä¢ Physische oder logische Trennung von Netzwerkbereichen mit unterschiedlichen Klassifizierungsstufen\n‚Ä¢ Verwendung von VLANs und Mikrosegmentierung f√ºr granulare Netzwerkkontrolle\n‚Ä¢ Implementierung von Air-Gap-Architekturen f√ºr hochsensible VS-NfD Verarbeitungsumgebungen\n‚Ä¢ Etablierung von DMZ-Bereichen f√ºr kontrollierte externe Kommunikation\n\nüî• Firewall und Perimeter-Sicherheit:\n‚Ä¢ Deployment von Next-Generation-Firewalls mit Deep-Packet-Inspection-Capabilities\n‚Ä¢ Implementierung von Application-Layer-Firewalls f√ºr granulare Anwendungskontrolle\n‚Ä¢ Konfiguration restriktiver Firewall-Regeln basierend auf dem Prinzip der minimalen Berechtigung\n‚Ä¢ Verwendung von Intrusion-Prevention-Systemen f√ºr proaktive Bedrohungsabwehr\n‚Ä¢ Regelm√§√üige √úberpr√ºfung und Optimierung von Firewall-Konfigurationen\n\nüåê Sichere Kommunikationskan√§le:\n‚Ä¢ Implementierung von Site-to-Site-VPNs f√ºr sichere Standortverbindungen\n‚Ä¢ Verwendung von Client-VPNs mit starker Authentifizierung f√ºr Remote-Zugriffe\n‚Ä¢ Etablierung sicherer API-Gateways f√ºr Anwendungsintegration\n‚Ä¢ Implementierung von Message-Queuing-Systemen mit Ende-zu-Ende-Verschl√ºsselung\n‚Ä¢ Sichere Konfiguration von Netzwerkprotokollen und Eliminierung unsicherer Protokolle\n\nüîç Netzwerk-Monitoring und Anomalieerkennung:\n‚Ä¢ Deployment von Network-Detection-and-Response-L√∂sungen f√ºr kontinuierliche √úberwachung\n‚Ä¢ Implementierung von SIEM-Systemen f√ºr korrelierte Sicherheitsereignisanalyse\n‚Ä¢ Verwendung von Network-Traffic-Analysis-Tools f√ºr Verhaltensanomalien\n‚Ä¢ Etablierung von Honeypots und Deception-Technologien f√ºr Angriffserkennung\n‚Ä¢ Regelm√§√üige Netzwerk-Penetrationstests und Vulnerability-Assessments\n\nüîê Zugangskontrollen und Authentifizierung:\n‚Ä¢ Implementierung von Network-Access-Control-Systemen f√ºr Ger√§tezulassung\n‚Ä¢ Verwendung von Multi-Faktor-Authentifizierung f√ºr alle Netzwerkzugriffe\n‚Ä¢ Etablierung von Role-Based-Access-Control f√ºr netzwerkbasierte Ressourcen\n‚Ä¢ Implementierung von Privileged-Access-Management f√ºr administrative Netzwerkzugriffe\n‚Ä¢ Kontinuierliche √úberwachung und Validierung von Netzwerkzugriffsberechtigungen\n\n‚òÅÔ∏è Cloud und Hybrid-Netzwerk-Sicherheit:\n‚Ä¢ Sichere Konfiguration von Cloud-Netzwerkkomponenten und Virtual-Private-Clouds\n‚Ä¢ Implementierung von Cloud-Access-Security-Brokern f√ºr Cloud-Service-Kontrolle\n‚Ä¢ Verwendung von Software-Defined-Perimeter-Technologien f√ºr dynamische Netzwerksicherheit\n‚Ä¢ Etablierung sicherer Hybrid-Cloud-Konnektivit√§t mit On-Premises-Infrastrukturen\n‚Ä¢ Compliance-konforme Konfiguration von Cloud-Netzwerkdiensten f√ºr VS-NfD Verarbeitung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Welche Backup und Disaster-Recovery-Strategien sind f√ºr VS-NfD Informationen erforderlich?',
        answer: "Backup und Disaster-Recovery-Strategien f√ºr VS-NfD Informationen m√ºssen die gleichen Sicherheitsanforderungen erf√ºllen wie die Prim√§rdaten und gleichzeitig eine zuverl√§ssige Wiederherstellung im Notfall gew√§hrleisten. Diese Strategien erfordern spezielle √úberlegungen zu Verschl√ºsselung, Zugangskontrollen und geografischer Verteilung. Ein umfassendes Konzept muss sowohl technische als auch organisatorische Aspekte ber√ºcksichtigen.\n\nüíæ Backup-Sicherheitsanforderungen:\n‚Ä¢ Vollst√§ndige Verschl√ºsselung aller Backup-Medien mit zugelassenen Verschl√ºsselungsprodukten\n‚Ä¢ Implementierung separater Verschl√ºsselungsschl√ºssel f√ºr Backup-Systeme\n‚Ä¢ Sichere Aufbewahrung von Backup-Medien in physisch gesch√ºtzten Bereichen\n‚Ä¢ Regelm√§√üige √úberpr√ºfung der Integrit√§t und Wiederherstellbarkeit von Backup-Daten\n‚Ä¢ Dokumentation und Nachverfolgung aller Backup-Aktivit√§ten und Medienstandorte\n\nüîÑ Backup-Strategien und -Verfahren:\n‚Ä¢ Implementierung von mehrstufigen Backup-Strategien mit verschiedenen Aufbewahrungszeiten\n‚Ä¢ Verwendung von Incremental und Differential-Backup-Verfahren f√ºr Effizienz\n‚Ä¢ Etablierung von Offline-Backup-Kopien f√ºr Schutz vor Ransomware und Cyberangriffen\n‚Ä¢ Implementierung von Cross-Site-Backup-Replikation f√ºr geografische Redundanz\n‚Ä¢ Regelm√§√üige Backup-Tests und Wiederherstellungs√ºbungen zur Validierung der Verfahren\n\nüè¢ Disaster-Recovery-Planung:\n‚Ä¢ Entwicklung umfassender Disaster-Recovery-Pl√§ne f√ºr VS-NfD Verarbeitungsumgebungen\n‚Ä¢ Etablierung von Recovery-Time-Objectives und Recovery-Point-Objectives f√ºr kritische Systeme\n‚Ä¢ Implementierung von Hot-Standby-Systemen f√ºr gesch√§ftskritische VS-NfD Anwendungen\n‚Ä¢ Planung alternativer Arbeitspl√§tze und Kommunikationswege f√ºr Notfallsituationen\n‚Ä¢ Regelm√§√üige Disaster-Recovery-Tests und Aktualisierung der Notfallpl√§ne\n\nüîê Zugangskontrollen und Berechtigungen:\n‚Ä¢ Implementierung strenger Zugangskontrollen f√ºr Backup und Recovery-Systeme\n‚Ä¢ Verwendung des Vier-Augen-Prinzips f√ºr kritische Wiederherstellungsoperationen\n‚Ä¢ Etablierung von Emergency-Access-Verfahren f√ºr Notfallsituationen\n‚Ä¢ Regelm√§√üige √úberpr√ºfung und Aktualisierung von Backup-Zugriffsberechtigungen\n‚Ä¢ Dokumentation aller Zugriffe auf Backup und Recovery-Systeme\n\nüìç Geografische Verteilung und Standortsicherheit:\n‚Ä¢ Implementierung geografisch verteilter Backup-Standorte f√ºr Redundanz\n‚Ä¢ Ber√ºcksichtigung von Compliance-Anforderungen bei der Standortwahl\n‚Ä¢ Sichere Transportverfahren f√ºr Backup-Medien zwischen Standorten\n‚Ä¢ Etablierung von Partnerschaften mit spezialisierten Disaster-Recovery-Dienstleistern\n‚Ä¢ Regelm√§√üige Bewertung der physischen Sicherheit aller Backup-Standorte\n\nüîç Monitoring und Compliance:\n‚Ä¢ Kontinuierliche √úberwachung der Backup-Systeme und -Prozesse\n‚Ä¢ Automatisierte Alerting bei Backup-Fehlern oder Anomalien\n‚Ä¢ Regelm√§√üige Compliance-Audits der Backup und Recovery-Verfahren\n‚Ä¢ Integration von Backup-Monitoring in das √ºbergeordnete Security-Operations-Center\n‚Ä¢ Dokumentation und Reporting von Backup-Metriken f√ºr Compliance-Nachweise"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Wie k√∂nnen Cloud-Services sicher f√ºr die Verarbeitung von VS-NfD Informationen genutzt werden?',
        answer: "Die Nutzung von Cloud-Services f√ºr VS-NfD Informationen erfordert besondere Sorgfalt und spezielle Sicherheitsma√ünahmen, die √ºber Standard-Cloud-Security hinausgehen. Nicht alle Cloud-Services sind f√ºr die Verarbeitung klassifizierter Informationen geeignet, und die Auswahl muss sorgf√§ltig auf Basis von Compliance-Anforderungen und Sicherheitsbewertungen erfolgen. Eine umfassende Due-Diligence und kontinuierliche √úberwachung sind essentiell.\n\n‚òÅÔ∏è Cloud-Service-Auswahl und -Bewertung:\n‚Ä¢ Auswahl von Cloud-Providern mit nachgewiesener Expertise in Government und Compliance-Bereichen\n‚Ä¢ Bewertung der Zertifizierungen und Akkreditierungen des Cloud-Providers f√ºr klassifizierte Informationen\n‚Ä¢ Durchf√ºhrung umfassender Security-Assessments und Due-Diligence-Pr√ºfungen\n‚Ä¢ Ber√ºcksichtigung der geografischen Standorte der Cloud-Infrastruktur und Datenresidenz-Anforderungen\n‚Ä¢ Evaluierung der Transparenz und Auditierbarkeit der Cloud-Service-Architektur\n\nüîê Verschl√ºsselung und Schl√ºsselmanagement:\n‚Ä¢ Implementierung von Customer-Managed-Encryption-Keys f√ºr vollst√§ndige Schl√ºsselkontrolle\n‚Ä¢ Verwendung von Hardware-Security-Modules in der Cloud f√ºr sichere Schl√ºsselverwahrung\n‚Ä¢ End-to-End-Verschl√ºsselung f√ºr alle Daten√ºbertragungen zur und von der Cloud\n‚Ä¢ Sichere Schl√ºsselrotation und -archivierung in Cloud-Umgebungen\n‚Ä¢ Implementierung von Bring-Your-Own-Key-Strategien f√ºr maximale Kontrolle\n\nüèóÔ∏è Cloud-Architektur und -Konfiguration:\n‚Ä¢ Implementierung von Private-Cloud oder Dedicated-Cloud-Umgebungen f√ºr VS-NfD Verarbeitung\n‚Ä¢ Verwendung von Virtual-Private-Clouds mit strikter Netzwerksegmentierung\n‚Ä¢ Konfiguration von Cloud-Security-Groups und Network-Access-Control-Lists\n‚Ä¢ Implementierung von Cloud-basierter Mikrosegmentierung f√ºr granulare Kontrolle\n‚Ä¢ Verwendung von Infrastructure-as-Code f√ºr konsistente und sichere Cloud-Deployments\n\nüìã Vertragsgestaltung und Compliance:\n‚Ä¢ Entwicklung spezifischer Vertragsklauseln f√ºr VS-NfD Compliance-Anforderungen\n‚Ä¢ Etablierung von Service-Level-Agreements mit Sicherheits und Compliance-Metriken\n‚Ä¢ Vereinbarung von Audit-Rechten und regelm√§√üigen Compliance-√úberpr√ºfungen\n‚Ä¢ Klare Definition von Verantwortlichkeiten zwischen Cloud-Provider und Kunde\n‚Ä¢ Implementierung von Incident-Response und Breach-Notification-Verfahren\n\nüîç Monitoring und Governance:\n‚Ä¢ Implementierung von Cloud-Security-Posture-Management f√ºr kontinuierliche √úberwachung\n‚Ä¢ Verwendung von Cloud-Access-Security-Brokern f√ºr Aktivit√§tsmonitoring\n‚Ä¢ Etablierung von Cloud-Governance-Frameworks f√ºr Richtlinien und Verfahren\n‚Ä¢ Regelm√§√üige Security-Assessments und Penetrationstests der Cloud-Umgebung\n‚Ä¢ Integration von Cloud-Monitoring in das √ºbergeordnete Security-Operations-Center\n\nüö™ Zugangskontrollen und Identit√§tsmanagement:\n‚Ä¢ Implementierung von Cloud-basiertem Identity-and-Access-Management\n‚Ä¢ Verwendung von Single-Sign-On mit Multi-Faktor-Authentifizierung\n‚Ä¢ Etablierung von Privileged-Access-Management f√ºr Cloud-Administratoren\n‚Ä¢ Implementierung von Just-in-Time-Access f√ºr tempor√§re Berechtigungen\n‚Ä¢ Regelm√§√üige √úberpr√ºfung und Zertifizierung von Cloud-Zugriffsberechtigungen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
