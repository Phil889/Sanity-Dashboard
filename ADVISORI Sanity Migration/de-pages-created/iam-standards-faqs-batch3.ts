import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Standards page with FAQ batch 3...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-standards' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-standards" not found')
    }
    
    // Create new FAQs for implementation and best practices
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 9),
        question: 'Welche Best Practices gelten f√ºr die praktische Implementierung von Standards-konformen IAM-Systemen in komplexen Enterprise-Umgebungen?',
        answer: "Die praktische Implementierung standards-konformer IAM-Systeme in komplexen Enterprise-Umgebungen erfordert einen systematischen, phasenweisen Ansatz, der technische Exzellenz mit organisatorischem Change-Management verbindet. Best Practices transformieren theoretische Standards-Anforderungen in praktikable, skalierbare L√∂sungen, die sowohl Compliance-Ziele als auch Gesch√§ftsanforderungen erf√ºllen.\n\nüéØ Strategic Planning und Roadmap-Development:\n‚Ä¢ Comprehensive Assessment mit detaillierter Analyse bestehender IAM-Landschaften und Standards-Gaps\n‚Ä¢ Phased Implementation Strategy mit priorisierten Rollout-Pl√§nen basierend auf Risiko und Business-Impact\n‚Ä¢ Stakeholder Alignment mit klarer Kommunikation von Standards-Benefits und Implementierungszielen\n‚Ä¢ Resource Planning mit realistischer Budgetierung und Skill-Gap-Analyse\n‚Ä¢ Success Metrics Definition mit messbaren KPIs f√ºr Standards-Compliance und Business-Value\n\nüèóÔ∏è Architecture Design und Technical Implementation:\n‚Ä¢ Modular Architecture mit flexiblen, standards-konformen Komponenten f√ºr zuk√ºnftige Erweiterungen\n‚Ä¢ API-first Design f√ºr nahtlose Integration und Interoperabilit√§t zwischen verschiedenen Systemen\n‚Ä¢ Security-by-Design mit integrierten Sicherheitskontrollen und Defense-in-Depth-Strategien\n‚Ä¢ Scalability Planning mit Cloud-native Architekturen f√ºr wachsende Anforderungen\n‚Ä¢ Vendor-neutral Implementation zur Vermeidung von Lock-in und F√∂rderung von Standards-Compliance\n\nüìã Process Integration und Workflow-Optimization:\n‚Ä¢ Business Process Mapping mit Identifikation aller identit√§tsbezogenen Workflows\n‚Ä¢ Automated Provisioning mit standardisierten Onboarding/Offboarding-Prozessen\n‚Ä¢ Exception Handling mit klaren Eskalationspfaden und Genehmigungsworkflows\n‚Ä¢ Change Management Integration mit ITIL-konformen Prozessen f√ºr IAM-√Ñnderungen\n‚Ä¢ Continuous Improvement mit regelm√§√üiger Prozessoptimierung basierend auf Standards-Updates\n\nüîç Testing und Validation-Strategies:\n‚Ä¢ Comprehensive Testing Framework mit Unit-, Integration- und End-to-End-Tests\n‚Ä¢ Standards Compliance Testing mit automatisierten Validierungstools\n‚Ä¢ Security Testing mit Penetration-Tests und Vulnerability-Assessments\n‚Ä¢ Performance Testing mit Lasttest und Skalierbarkeitsvalidierung\n‚Ä¢ User Acceptance Testing mit Business-User-Feedback und Usability-Bewertung\n\nüë• Change Management und User Adoption:\n‚Ä¢ Training Programme mit rollenspezifischen Schulungen f√ºr verschiedene Benutzergruppen\n‚Ä¢ Communication Strategy mit klarer Vermittlung von Standards-Benefits und √Ñnderungen\n‚Ä¢ Support Structure mit Help-Desk und Self-Service-Ressourcen\n‚Ä¢ Feedback Mechanisms mit kontinuierlicher Sammlung von User-Input\n‚Ä¢ Adoption Metrics mit Messung von User-Engagement und System-Nutzung\n\nüöÄ Continuous Monitoring und Optimization:\n‚Ä¢ Real-time Monitoring mit Dashboard-basierter √úberwachung aller Standards-relevanten Metriken\n‚Ä¢ Automated Compliance Reporting mit regelm√§√üigen Standards-Compliance-Berichten\n‚Ä¢ Performance Optimization mit kontinuierlicher Systemtuning und Kapazit√§tsplanung\n‚Ä¢ Standards Evolution Management mit proaktiver Anpassung an neue Standards-Versionen\n‚Ä¢ Innovation Integration mit Evaluation und Adoption neuer Standards-konformer Technologien"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 10),
        question: 'Wie entwickelt man eine effektive Standards-Governance-Struktur f√ºr IAM-Systeme und welche Rollen und Verantwortlichkeiten sind erforderlich?',
        answer: "Eine effektive Standards-Governance-Struktur f√ºr IAM-Systeme etabliert klare Verantwortlichkeiten, Entscheidungsprozesse und Kontrollmechanismen, die sowohl Standards-Compliance als auch operative Effizienz gew√§hrleisten. Diese Governance transformiert Standards von technischen Anforderungen zu strategischen Gesch√§ftsinstrumenten durch strukturierte F√ºhrung und systematische √úberwachung.\n\nüëë Executive Governance und Strategic Oversight:\n‚Ä¢ IAM Standards Committee mit C-Level-Sponsorship und strategischer Entscheidungsbefugnis\n‚Ä¢ Standards Strategy Definition mit langfristiger Vision und Roadmap-Entwicklung\n‚Ä¢ Budget Allocation mit angemessener Ressourcenzuteilung f√ºr Standards-Implementierung\n‚Ä¢ Risk Oversight mit regelm√§√üiger Bewertung von Compliance-Risiken und Mitigation-Strategien\n‚Ä¢ Performance Review mit quartalsweisen Assessments der Standards-Compliance-Fortschritte\n\nüèõÔ∏è Operational Governance und Day-to-Day Management:\n‚Ä¢ IAM Standards Manager mit Vollzeit-Verantwortung f√ºr Standards-Compliance und -Implementation\n‚Ä¢ Technical Standards Team mit spezialisierten Experten f√ºr verschiedene Standards-Frameworks\n‚Ä¢ Compliance Officers mit Fokus auf regulatorische Anforderungen und Audit-Vorbereitung\n‚Ä¢ Architecture Review Board mit Bewertung aller IAM-√Ñnderungen auf Standards-Konformit√§t\n‚Ä¢ Change Advisory Board mit Integration von Standards-Anforderungen in Change-Prozesse\n\nüìä Standards Management Processes:\n‚Ä¢ Standards Lifecycle Management mit systematischer Verwaltung von Standards-Updates und -√Ñnderungen\n‚Ä¢ Gap Assessment Procedures mit regelm√§√üiger Bewertung der Standards-Compliance\n‚Ä¢ Exception Management mit strukturierten Prozessen f√ºr Standards-Abweichungen\n‚Ä¢ Documentation Management mit zentraler Verwaltung aller Standards-bezogenen Dokumentation\n‚Ä¢ Training Coordination mit systematischer Schulung aller relevanten Stakeholder\n\nüîç Monitoring und Compliance-Validation:\n‚Ä¢ Continuous Monitoring Framework mit Real-time √úberwachung der Standards-Compliance\n‚Ä¢ Audit Coordination mit Vorbereitung und Durchf√ºhrung interner und externer Audits\n‚Ä¢ Metrics und KPI Management mit Definition und Tracking relevanter Standards-Metriken\n‚Ä¢ Incident Management mit spezialisierten Prozessen f√ºr Standards-Compliance-Verletzungen\n‚Ä¢ Corrective Action Management mit systematischer Behebung identifizierter Compliance-Gaps\n\nü§ù Cross-functional Collaboration:\n‚Ä¢ Business Stakeholder Engagement mit regelm√§√üiger Kommunikation √ºber Standards-Impact\n‚Ä¢ IT Operations Integration mit Einbindung von Standards-Anforderungen in operative Prozesse\n‚Ä¢ Security Team Coordination mit Alignment zwischen Standards-Compliance und Security-Zielen\n‚Ä¢ Legal und Compliance Integration mit Ber√ºcksichtigung regulatorischer Anforderungen\n‚Ä¢ Vendor Management mit Standards-Anforderungen in Supplier-Beziehungen\n\nüöÄ Innovation und Continuous Improvement:\n‚Ä¢ Standards Evolution Tracking mit proaktiver √úberwachung von Standards-Entwicklungen\n‚Ä¢ Best Practice Sharing mit organisationsweitem Wissenstransfer\n‚Ä¢ Technology Evaluation mit Bewertung neuer Technologien auf Standards-Konformit√§t\n‚Ä¢ Process Optimization mit kontinuierlicher Verbesserung der Governance-Prozesse\n‚Ä¢ Strategic Planning mit langfristiger Planung f√ºr Standards-Evolution und -Adoption"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 11),
        question: 'Welche Herausforderungen entstehen bei der Migration bestehender IAM-Systeme zu standards-konformen Architekturen und wie minimiert man Disruption?',
        answer: "Die Migration bestehender IAM-Systeme zu standards-konformen Architekturen ist eine komplexe Transformation, die technische, organisatorische und betriebliche Herausforderungen mit sich bringt. Erfolgreiche Migrationen erfordern sorgf√§ltige Planung, schrittweise Implementierung und proaktives Risikomanagement, um Gesch√§ftskontinuit√§t zu gew√§hrleisten und gleichzeitig Standards-Compliance zu erreichen.\n\nüéØ Migration Strategy und Planning:\n‚Ä¢ Current State Assessment mit detaillierter Analyse bestehender IAM-Systeme und -Prozesse\n‚Ä¢ Gap Analysis mit Identifikation aller Standards-Compliance-L√ºcken und Modernisierungsanforderungen\n‚Ä¢ Migration Roadmap mit phasenweisem Ansatz und klaren Meilensteinen\n‚Ä¢ Risk Assessment mit Identifikation potenzieller Disruptions und Mitigation-Strategien\n‚Ä¢ Success Criteria Definition mit messbaren Zielen f√ºr Migration und Standards-Compliance\n\nüîÑ Phased Migration Approach:\n‚Ä¢ Pilot Implementation mit ausgew√§hlten Systemen oder Benutzergruppen f√ºr Proof-of-Concept\n‚Ä¢ Parallel Operation mit gleichzeitigem Betrieb alter und neuer Systeme w√§hrend der √úbergangsphase\n‚Ä¢ Gradual Cutover mit schrittweiser Migration verschiedener Funktionen und Benutzergruppen\n‚Ä¢ Rollback Planning mit detaillierten Verfahren f√ºr Notfall-R√ºckf√ºhrung bei kritischen Problemen\n‚Ä¢ Validation Gates mit Qualit√§tspr√ºfungen nach jeder Migrationsphase\n\nüõ°Ô∏è Risk Mitigation und Business Continuity:\n‚Ä¢ Comprehensive Backup Strategy mit vollst√§ndigen Sicherungen aller kritischen Daten und Konfigurationen\n‚Ä¢ Disaster Recovery Planning mit spezialisierten Verfahren f√ºr Migration-bedingte Ausf√§lle\n‚Ä¢ Service Level Maintenance mit Aufrechterhaltung kritischer IAM-Services w√§hrend der Migration\n‚Ä¢ Emergency Procedures mit klaren Eskalationspfaden und Incident-Response-Verfahren\n‚Ä¢ Communication Planning mit proaktiver Information aller Stakeholder √ºber Migration-Status\n\nüìä Data Migration und Integration:\n‚Ä¢ Data Mapping mit detaillierter Analyse und Transformation bestehender Identit√§tsdaten\n‚Ä¢ Data Quality Assurance mit Bereinigung und Validierung vor der Migration\n‚Ä¢ Integration Testing mit umfassender Validierung aller System-Integrationen\n‚Ä¢ Performance Validation mit Sicherstellung, dass neue Systeme Performance-Anforderungen erf√ºllen\n‚Ä¢ Audit Trail Preservation mit Erhaltung historischer Daten f√ºr Compliance-Zwecke\n\nüë• Change Management und User Experience:\n‚Ä¢ User Communication Strategy mit klarer Information √ºber √Ñnderungen und Benefits\n‚Ä¢ Training Programme mit rechtzeitiger Schulung aller betroffenen Benutzer\n‚Ä¢ Support Enhancement mit verst√§rktem Help-Desk-Support w√§hrend der √úbergangsphase\n‚Ä¢ Feedback Mechanisms mit kontinuierlicher Sammlung von User-Input und Problem-Reports\n‚Ä¢ User Acceptance Testing mit Validierung der neuen Systeme durch Business-User\n\nüöÄ Post-Migration Optimization:\n‚Ä¢ Performance Monitoring mit kontinuierlicher √úberwachung der System-Performance\n‚Ä¢ Standards Compliance Validation mit Best√§tigung, dass alle Standards-Anforderungen erf√ºllt sind\n‚Ä¢ Process Optimization mit Feintuning der neuen Prozesse basierend auf Betriebserfahrungen\n‚Ä¢ Documentation Updates mit Aktualisierung aller technischen und Benutzer-Dokumentation\n‚Ä¢ Lessons Learned Capture mit Dokumentation von Erfahrungen f√ºr zuk√ºnftige Migrationen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 12),
        question: 'Wie etabliert man effektive Metriken und KPIs f√ºr die Messung von IAM-Standards-Compliance und kontinuierliche Verbesserung?',
        answer: "Effektive Metriken und KPIs f√ºr IAM-Standards-Compliance transformieren abstrakte Compliance-Anforderungen in messbare, actionable Insights, die kontinuierliche Verbesserung erm√∂glichen und strategische Entscheidungen unterst√ºtzen. Ein durchdachtes Metrics-Framework verbindet technische Standards-Erf√ºllung mit Gesch√§ftszielen und schafft Transparenz √ºber Compliance-Status und Performance-Trends.\n\nüìä Strategic Compliance Metrics:\n‚Ä¢ Standards Coverage Ratio mit Messung des Anteils implementierter Standards-Anforderungen\n‚Ä¢ Compliance Maturity Score mit Bewertung der Reife verschiedener Standards-Bereiche\n‚Ä¢ Risk Reduction Metrics mit Quantifizierung der durch Standards-Compliance reduzierten Risiken\n‚Ä¢ Audit Readiness Index mit Bewertung der Bereitschaft f√ºr externe Audits und Zertifizierungen\n‚Ä¢ Business Value Realization mit Messung der durch Standards-Compliance erzielten Gesch√§ftsvorteile\n\nüîç Operational Performance Indicators:\n‚Ä¢ Control Effectiveness Rate mit Messung der Wirksamkeit implementierter Standards-Kontrollen\n‚Ä¢ Exception Management Metrics mit Tracking von Standards-Abweichungen und deren Behandlung\n‚Ä¢ Incident Response Time mit Messung der Reaktionszeit auf Standards-Compliance-Verletzungen\n‚Ä¢ Process Automation Level mit Bewertung des Automatisierungsgrads standards-relevanter Prozesse\n‚Ä¢ User Satisfaction Scores mit Messung der Benutzerakzeptanz standards-konformer Systeme\n\n‚ö° Real-time Monitoring Indicators:\n‚Ä¢ Continuous Compliance Status mit Real-time Dashboard f√ºr aktuelle Standards-Compliance\n‚Ä¢ Policy Violation Detection Rate mit automatischer Erkennung von Standards-Verst√∂√üen\n‚Ä¢ System Availability Metrics mit √úberwachung der Verf√ºgbarkeit standards-kritischer Systeme\n‚Ä¢ Performance Degradation Alerts mit Fr√ºherkennung performance-relevanter Standards-Probleme\n‚Ä¢ Security Event Correlation mit Integration von Standards-Compliance in Security-Monitoring\n\nüìà Trend Analysis und Predictive Metrics:\n‚Ä¢ Compliance Trend Analysis mit historischer Bewertung der Standards-Compliance-Entwicklung\n‚Ä¢ Predictive Risk Indicators mit Vorhersage potenzieller Standards-Compliance-Probleme\n‚Ä¢ Seasonal Pattern Recognition mit Identifikation wiederkehrender Compliance-Herausforderungen\n‚Ä¢ Capacity Planning Metrics mit Vorhersage zuk√ºnftiger Standards-Compliance-Anforderungen\n‚Ä¢ Innovation Impact Assessment mit Bewertung neuer Technologien auf Standards-Compliance\n\nüéØ Business Impact Measurements:\n‚Ä¢ Cost Reduction Metrics mit Quantifizierung der durch Standards-Compliance erzielten Kosteneinsparungen\n‚Ä¢ Efficiency Improvement Indicators mit Messung von Prozessverbesserungen durch Standards-Implementation\n‚Ä¢ Customer Trust Metrics mit Bewertung des Vertrauensgewinns durch Standards-Zertifizierungen\n‚Ä¢ Market Access Enablement mit Messung neuer Gesch√§ftsm√∂glichkeiten durch Standards-Compliance\n‚Ä¢ Competitive Advantage Indicators mit Bewertung der Marktpositionierung durch Standards-Excellence\n\nüöÄ Continuous Improvement Framework:\n‚Ä¢ Benchmark Comparison mit Vergleich der eigenen Standards-Performance mit Industry-Best-Practices\n‚Ä¢ Gap Closure Rate mit Messung der Geschwindigkeit bei der Behebung von Standards-L√ºcken\n‚Ä¢ Innovation Adoption Speed mit Bewertung der Geschwindigkeit bei der Adoption neuer Standards\n‚Ä¢ Stakeholder Engagement Level mit Messung der Beteiligung verschiedener Stakeholder-Gruppen\n‚Ä¢ Knowledge Management Effectiveness mit Bewertung des Wissenstransfers zu Standards-Themen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 3 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
