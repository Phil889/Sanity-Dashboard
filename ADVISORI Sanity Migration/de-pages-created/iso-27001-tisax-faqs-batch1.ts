import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating ISO 27001 TISAX page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iso-27001-tisax' })
    
    if (!existingDoc) {
      throw new Error('Document "iso-27001-tisax" not found')
    }
    
    // Create new FAQs for TISAX fundamentals
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Was ist TISAX und warum ist dieser Standard f√ºr die Automobilindustrie unverzichtbar?',
        answer: "TISAX (Trusted Information Security Assessment Exchange) ist der etablierte Branchenstandard der Automobilindustrie f√ºr Informationssicherheitsassessments und bildet das Fundament f√ºr vertrauensvolle Gesch√§ftsbeziehungen entlang der gesamten Automotive Supply Chain. Basierend auf ISO 27001 und dem VDA ISA Katalog, erm√∂glicht TISAX den standardisierten und effizienten Austausch von Sicherheitsbewertungen zwischen OEMs und Zulieferern.\n\nüöó Automotive-spezifische Sicherheitsanforderungen:\n‚Ä¢ TISAX adressiert die einzigartigen Herausforderungen der Automobilindustrie, von der Entwicklung autonomer Fahrzeuge bis zur vernetzten Mobilit√§t\n‚Ä¢ Der Standard ber√ºcksichtigt die komplexen Supply Chain Strukturen mit mehreren Zulieferungsebenen und internationalen Partnerschaften\n‚Ä¢ Spezielle Anforderungen f√ºr den Schutz von Fahrzeugdaten, Entwicklungsinformationen und Produktionsgeheimnissen\n‚Ä¢ Integration von Cybersecurity-Aspekten f√ºr Connected Cars und IoT-Anwendungen in der Automobilproduktion\n‚Ä¢ Ber√ºcksichtigung regulatorischer Anforderungen wie UN-R155 f√ºr Cybersecurity Management Systeme\n\nüîÑ Effizienter Assessment-Austausch:\n‚Ä¢ Einmalige Durchf√ºhrung des Assessments mit Anerkennung durch alle teilnehmenden OEMs und Partner\n‚Ä¢ Standardisierte Bewertungskriterien basierend auf dem VDA ISA Katalog f√ºr Vergleichbarkeit und Transparenz\n‚Ä¢ Zentrale Plattform f√ºr den sicheren Austausch von Assessment-Ergebnissen zwischen autorisierten Partnern\n‚Ä¢ Reduzierung von Mehrfachpr√ºfungen und damit verbundenen Kosten und Ressourcenaufwand\n‚Ä¢ Beschleunigte Onboarding-Prozesse f√ºr neue Gesch√§ftspartner in der Automotive Supply Chain\n\nüåê Internationale Branchenanerkennung:\n‚Ä¢ Akzeptanz durch f√ºhrende OEMs weltweit als Nachweis f√ºr angemessene Informationssicherheit\n‚Ä¢ Voraussetzung f√ºr die Teilnahme an Ausschreibungen und Projekten in der Automobilindustrie\n‚Ä¢ Grundlage f√ºr vertrauensvolle Partnerschaften bei der Entwicklung zukunftsweisender Mobilit√§tsl√∂sungen\n‚Ä¢ Integration in globale Automotive-√ñkosysteme und Plattformen\n‚Ä¢ Unterst√ºtzung bei der Expansion in internationale M√§rkte durch anerkannte Sicherheitsstandards\n\nüìä Business Value f√ºr Automotive-Unternehmen:\n‚Ä¢ Wettbewerbsvorteil durch nachgewiesene Informationssicherheitskompetenz in der Automobilbranche\n‚Ä¢ Zugang zu exklusiven Projekten und Partnerschaften mit f√ºhrenden OEMs\n‚Ä¢ Verbesserung der Marktposition als vertrauensw√ºrdiger Automotive-Partner\n‚Ä¢ Optimierung von Compliance-Prozessen durch branchenspezifische Standards\n‚Ä¢ Aufbau von Reputation als sicherheitsbewusster Akteur in der digitalen Transformation der Mobilit√§t\n\nüîó Integration mit bestehenden Standards:\n‚Ä¢ Nahtlose Erg√§nzung zu bestehenden ISO 27001 Zertifizierungen ohne Redundanzen\n‚Ä¢ Kompatibilit√§t mit anderen Automotive-Standards wie IATF 16949 und ISO 26262\n‚Ä¢ Synergieffekte mit Cybersecurity-Frameworks f√ºr Connected Vehicles\n‚Ä¢ Unterst√ºtzung bei der Vorbereitung auf zuk√ºnftige regulatorische Anforderungen\n‚Ä¢ Grundlage f√ºr die Integration weiterer Automotive-spezifischer Sicherheitsstandards"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Wie unterscheidet sich TISAX von einer herk√∂mmlichen ISO 27001 Zertifizierung?',
        answer: "TISAX baut auf ISO 27001 auf, erweitert diesen jedoch um automotive-spezifische Anforderungen und Assessment-Verfahren, die den besonderen Bed√ºrfnissen der Automobilindustrie gerecht werden. W√§hrend ISO 27001 einen allgemeinen Rahmen f√ºr Informationssicherheitsmanagement bietet, fokussiert TISAX auf die spezifischen Herausforderungen und Risiken der Automotive Supply Chain.\n\nüìã VDA ISA Katalog als Bewertungsgrundlage:\n‚Ä¢ TISAX basiert auf dem VDA ISA (Verband der Automobilindustrie Information Security Assessment) Katalog, der spezifische Automotive-Anforderungen definiert\n‚Ä¢ Detaillierte Bewertungskriterien f√ºr automotive-spezifische Szenarien wie Fahrzeugentwicklung, Produktionsdaten und Connected Car Services\n‚Ä¢ Strukturierte Assessment-Methodik mit definierten Bewertungsleveln und Reifegrad-Indikatoren\n‚Ä¢ Branchenspezifische Kontrollziele, die √ºber die allgemeinen ISO 27001 Anforderungen hinausgehen\n‚Ä¢ Kontinuierliche Weiterentwicklung des Katalogs entsprechend neuer Automotive-Technologien und Bedrohungen\n\nüîç Assessment-Verfahren statt Zertifizierung:\n‚Ä¢ TISAX ist ein Assessment-Verfahren, keine formale Zertifizierung wie ISO 27001\n‚Ä¢ Durchf√ºhrung durch akkreditierte und speziell geschulte TISAX Assessment Provider\n‚Ä¢ Fokus auf praktische Bewertung der Informationssicherheit in automotive-spezifischen Kontexten\n‚Ä¢ Regelm√§√üige Re-Assessments zur Aufrechterhaltung des TISAX Status\n‚Ä¢ Flexiblere Anpassung an sich √§ndernde Automotive-Anforderungen im Vergleich zu starren Zertifizierungsstandards\n\nüöó Automotive-spezifische Schutzbedarfe:\n‚Ä¢ Besondere Ber√ºcksichtigung von Fahrzeugdaten, Entwicklungsinformationen und Produktionsgeheimnissen\n‚Ä¢ Bewertung von Cybersecurity-Ma√ünahmen f√ºr Connected Vehicles und autonome Fahrsysteme\n‚Ä¢ Schutz von Supply Chain Informationen und Lieferantenbeziehungen\n‚Ä¢ Ber√ºcksichtigung von Automotive-spezifischen Compliance-Anforderungen und Regulierungen\n‚Ä¢ Integration von Safety und Security Aspekten entsprechend der Automotive-Entwicklungszyklen\n\nüîÑ Gegenseitige Anerkennung und Effizienz:\n‚Ä¢ Einmalige Assessment-Durchf√ºhrung mit Anerkennung durch alle TISAX-teilnehmenden Unternehmen\n‚Ä¢ Zentrale Plattform f√ºr den sicheren Austausch von Assessment-Ergebnissen\n‚Ä¢ Vermeidung von Mehrfachpr√ºfungen durch verschiedene OEMs und Partner\n‚Ä¢ Standardisierte Bewertungsergebnisse f√ºr bessere Vergleichbarkeit\n‚Ä¢ Effiziente Onboarding-Prozesse f√ºr neue Automotive-Partnerschaften\n\nüìà Branchenspezifische Vorteile:\n‚Ä¢ Direkter Zugang zu Automotive-Projekten und Ausschreibungen\n‚Ä¢ Anerkennung als qualifizierter Automotive-Supplier durch f√ºhrende OEMs\n‚Ä¢ Verbesserung der Wettbewerbsposition in der Automotive Supply Chain\n‚Ä¢ Aufbau von Vertrauen bei automotive-spezifischen Gesch√§ftspartnern\n‚Ä¢ Unterst√ºtzung bei der digitalen Transformation in der Automobilindustrie\n\nüîó Komplement√§re Nutzung mit ISO 27001:\n‚Ä¢ TISAX erg√§nzt bestehende ISO 27001 Zertifizierungen optimal\n‚Ä¢ Nutzung der ISO 27001 Grundlagen als Basis f√ºr TISAX Assessment\n‚Ä¢ Synergieffekte bei der Implementierung und Aufrechterhaltung beider Standards\n‚Ä¢ Gemeinsame Dokumentation und Prozesse f√ºr effiziente Compliance\n‚Ä¢ Aufbau auf bew√§hrten ISMS-Strukturen f√ºr automotive-spezifische Erweiterungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Welche Assessment-Level gibt es bei TISAX und welches ist f√ºr mein Unternehmen geeignet?',
        answer: "TISAX definiert verschiedene Assessment-Level, die sich nach dem Schutzbedarf der zu verarbeitenden Informationen und der Rolle des Unternehmens in der Automotive Supply Chain richten. Die Wahl des geeigneten Levels h√§ngt von den spezifischen Gesch√§ftsanforderungen, Kundenanforderungen und der Art der automotive-bezogenen T√§tigkeiten ab.\n\nüîí Assessment-Level √úbersicht:\n‚Ä¢ AL1 (Assessment Level 1): Grundlegendes Sicherheitsniveau f√ºr normale Gesch√§ftsinformationen ohne besonderen Schutzbedarf\n‚Ä¢ AL2 (Assessment Level 2): Erh√∂htes Sicherheitsniveau f√ºr sensible Informationen mit mittlerem Schutzbedarf\n‚Ä¢ AL3 (Assessment Level 3): Hohes Sicherheitsniveau f√ºr hochsensible Informationen mit sehr hohem Schutzbedarf\n‚Ä¢ Zus√§tzliche Schutzbedarfe: Spezielle Bewertungen f√ºr Prototypenschutz, Datenverarbeitung und weitere automotive-spezifische Anforderungen\n‚Ä¢ Kombinierte Assessments: M√∂glichkeit der Bewertung mehrerer Level je nach Informationsarten und Gesch√§ftsbereichen\n\nüìä AL1 - Standard Informationsschutz:\n‚Ä¢ Geeignet f√ºr Unternehmen, die haupts√§chlich mit allgemeinen Gesch√§ftsinformationen arbeiten\n‚Ä¢ Basis-Assessment f√ºr Lieferanten ohne Zugang zu hochsensiblen Entwicklungsdaten\n‚Ä¢ Fokus auf grundlegende Informationssicherheitsma√ünahmen und Prozesse\n‚Ä¢ Typische Anwendung bei Standard-Zulieferern f√ºr Serienproduktion ohne Entwicklungsbeteiligung\n‚Ä¢ Einstiegslevel f√ºr Unternehmen, die erstmals in die Automotive Supply Chain eintreten\n\nüîê AL2 - Erh√∂hter Informationsschutz:\n‚Ä¢ Erforderlich f√ºr Unternehmen mit Zugang zu sensiblen Entwicklungsinformationen und Produktionsdaten\n‚Ä¢ Geeignet f√ºr Entwicklungspartner und Zulieferer mit Beteiligung an Fahrzeugentwicklungsprojekten\n‚Ä¢ Erweiterte Sicherheitsma√ünahmen f√ºr den Schutz von Konstruktionsdaten und technischen Spezifikationen\n‚Ä¢ Typische Anwendung bei Tier-1 Zulieferern und Entwicklungsdienstleistern\n‚Ä¢ Ber√ºcksichtigung von Supply Chain Security und Lieferantenmanagement\n\nüõ°Ô∏è AL3 - H√∂chster Informationsschutz:\n‚Ä¢ Notwendig f√ºr Unternehmen mit Zugang zu hochkritischen Informationen wie Fahrzeugarchitekturen und Sicherheitssystemen\n‚Ä¢ Geeignet f√ºr strategische Partner bei der Entwicklung autonomer Fahrzeuge und Connected Car Technologien\n‚Ä¢ Umfassende Sicherheitsma√ünahmen einschlie√ülich physischer Sicherheit und Personal√ºberpr√ºfung\n‚Ä¢ Typische Anwendung bei Systemintegratoren und Technologiepartnern f√ºr kritische Fahrzeugsysteme\n‚Ä¢ Spezielle Anforderungen f√ºr den Umgang mit Safety-kritischen Informationen\n\nüéØ Auswahlkriterien f√ºr das geeignete Level:\n‚Ä¢ Art der verarbeiteten automotive-bezogenen Informationen und deren Klassifizierung\n‚Ä¢ Rolle in der Supply Chain und N√§he zu kritischen Entwicklungs- und Produktionsprozessen\n‚Ä¢ Kundenanforderungen und vertragliche Verpflichtungen gegen√ºber OEMs\n‚Ä¢ Gesch√§ftsstrategie und geplante Expansion in automotive-spezifische Bereiche\n‚Ä¢ Bestehende Sicherheitsma√ünahmen und Bereitschaft f√ºr zus√§tzliche Investitionen\n\nüìà Strategische √úberlegungen:\n‚Ä¢ H√∂here Assessment-Level erm√∂glichen Zugang zu wertvolleren Projekten und Partnerschaften\n‚Ä¢ Schrittweise Entwicklung von niedrigeren zu h√∂heren Levels entsprechend Gesch√§ftswachstum\n‚Ä¢ Ber√ºcksichtigung zuk√ºnftiger Marktentwicklungen und Technologietrends in der Automobilindustrie\n‚Ä¢ Balance zwischen Investitionsaufwand und erwarteten Gesch√§ftsm√∂glichkeiten\n‚Ä¢ Aufbau von Wettbewerbsvorteilen durch proaktive Sicherheitspositionierung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Wie l√§uft ein TISAX Assessment ab und wie kann ich mein Unternehmen optimal darauf vorbereiten?',
        answer: "Ein TISAX Assessment folgt einem strukturierten Prozess, der von der Vorbereitung √ºber die eigentliche Bewertung bis zur Nachbereitung reicht. Eine systematische Vorbereitung ist entscheidend f√ºr den Erfolg und umfasst sowohl technische als auch organisatorische Aspekte der Informationssicherheit in automotive-spezifischen Kontexten.\n\nüìã Assessment-Phasen im √úberblick:\n‚Ä¢ Vorbereitungsphase: Selbstbewertung, Gap-Analyse und Implementierung erforderlicher Ma√ünahmen\n‚Ä¢ Anmeldung und Planung: Auswahl des Assessment Providers und Terminkoordination\n‚Ä¢ On-Site Assessment: Vor-Ort-Bewertung durch akkreditierte TISAX Assessoren\n‚Ä¢ Nachbereitung: Ergebnisauswertung, Ma√ünahmenplanung und Zertifikatserstellung\n‚Ä¢ Kontinuierliche √úberwachung: Aufrechterhaltung des TISAX Status durch regelm√§√üige Re-Assessments\n\nüîç Detaillierte Vorbereitungsschritte:\n‚Ä¢ Durchf√ºhrung einer umfassenden Selbstbewertung basierend auf dem VDA ISA Katalog\n‚Ä¢ Identifikation von Gaps zwischen aktueller Sicherheitslage und TISAX Anforderungen\n‚Ä¢ Entwicklung und Implementierung eines Ma√ünahmenplans zur Schlie√üung identifizierter L√ºcken\n‚Ä¢ Schulung der Mitarbeiter zu automotive-spezifischen Sicherheitsanforderungen\n‚Ä¢ Aufbau oder Anpassung der Dokumentation entsprechend TISAX Vorgaben\n\nüè¢ On-Site Assessment Durchf√ºhrung:\n‚Ä¢ Interviews mit Schl√ºsselpersonal zu Sicherheitsprozessen und -verantwortlichkeiten\n‚Ä¢ √úberpr√ºfung der Dokumentation und Nachweis der Implementierung von Sicherheitsma√ünahmen\n‚Ä¢ Technische Bewertung der IT-Infrastruktur und Sicherheitskontrollen\n‚Ä¢ Bewertung der physischen Sicherheit und Zugangskontrollen\n‚Ä¢ Stichprobenartige √úberpr√ºfung der praktischen Umsetzung definierter Prozesse\n\nüìä Bewertungskriterien und Scoring:\n‚Ä¢ Bewertung erfolgt anhand definierter Reifegrade von 0 (nicht implementiert) bis 3 (optimiert)\n‚Ä¢ Ber√ºcksichtigung automotive-spezifischer Kontrollziele und Schutzbedarfe\n‚Ä¢ Gewichtung verschiedener Sicherheitsbereiche entsprechend dem gew√§hlten Assessment-Level\n‚Ä¢ Dokumentation von St√§rken, Schw√§chen und Verbesserungspotenzialen\n‚Ä¢ Erstellung eines detaillierten Assessment-Berichts mit Handlungsempfehlungen\n\nüéØ Optimale Vorbereitung - Best Practices:\n‚Ä¢ Fr√ºhzeitige Einbindung aller relevanten Stakeholder und Aufbau eines interdisziplin√§ren Teams\n‚Ä¢ Durchf√ºhrung von Mock-Assessments zur Simulation der realen Bewertungssituation\n‚Ä¢ Aufbau einer umfassenden Evidenz-Sammlung f√ºr alle implementierten Sicherheitsma√ünahmen\n‚Ä¢ Etablierung klarer Kommunikationswege und Verantwortlichkeiten f√ºr das Assessment\n‚Ä¢ Kontinuierliche √úberwachung und Verbesserung der Sicherheitsma√ünahmen vor dem Assessment\n\nüîÑ Nach dem Assessment:\n‚Ä¢ Analyse der Assessment-Ergebnisse und Identifikation von Verbesserungsma√ünahmen\n‚Ä¢ Entwicklung eines kontinuierlichen Verbesserungsplans f√ºr die Informationssicherheit\n‚Ä¢ Vorbereitung auf Re-Assessments und Aufrechterhaltung des TISAX Status\n‚Ä¢ Nutzung der TISAX Anerkennung f√ºr Gesch√§ftsentwicklung und Partnerschaften\n‚Ä¢ Integration der Lessons Learned in die kontinuierliche Sicherheitsstrategie"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
