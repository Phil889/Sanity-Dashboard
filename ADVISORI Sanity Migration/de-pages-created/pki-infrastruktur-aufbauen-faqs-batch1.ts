import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating PKI Infrastruktur aufbauen page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'pki-infrastruktur-aufbauen' })
    
    if (!existingDoc) {
      throw new Error('Document "pki-infrastruktur-aufbauen" not found')
    }
    
    // Create new FAQs for PKI planning and architecture design
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Welche strategischen √úberlegungen sind beim Aufbau einer PKI-Infrastruktur entscheidend?',
        answer: "Der Aufbau einer PKI-Infrastruktur erfordert eine ganzheitliche strategische Herangehensweise, die weit √ºber technische Implementierungsaspekte hinausgeht. Eine erfolgreiche PKI-Initiative muss Gesch√§ftsziele, Sicherheitsanforderungen, operative Effizienz und langfristige Skalierbarkeit in Einklang bringen. Die strategische Planung bildet das Fundament f√ºr eine PKI, die nicht nur aktuelle Anforderungen erf√ºllt, sondern auch zuk√ºnftige Entwicklungen antizipiert.\n\nüéØ Gesch√§ftsstrategie und PKI-Alignment:\n‚Ä¢ Identifikation der Gesch√§ftsprozesse, die von PKI-Funktionalit√§ten profitieren und deren Digitalisierung vorantreiben\n‚Ä¢ Definition messbarer Gesch√§ftsziele wie Effizienzsteigerung, Kostensenkung, Compliance-Verbesserung und Risikominimierung\n‚Ä¢ Bewertung des strategischen Werts von PKI als Enabler f√ºr digitale Transformation und neue Gesch√§ftsmodelle\n‚Ä¢ Entwicklung einer PKI-Roadmap, die sich an der √ºbergeordneten IT-Strategie und Unternehmensentwicklung orientiert\n‚Ä¢ Ber√ºcksichtigung von Markttrends, regulatorischen Entwicklungen und technologischen Innovationen bei der langfristigen Planung\n\nüîí Sicherheitsarchitektur und Trust-Modell:\n‚Ä¢ Entwicklung eines umfassenden Trust-Modells, das organisatorische Strukturen, Gesch√§ftsprozesse und Sicherheitsanforderungen widerspiegelt\n‚Ä¢ Definition von Sicherheitsebenen und entsprechenden Zertifikatstypen f√ºr verschiedene Anwendungsbereiche und Benutzergruppen\n‚Ä¢ Planung der Certificate Authority-Hierarchie mit angemessener Segmentierung und Risikoisolierung\n‚Ä¢ Ber√ºcksichtigung von Zero Trust-Prinzipien und deren Integration in die PKI-Architektur\n‚Ä¢ Entwicklung von Kryptographie-Strategien, die aktuelle Standards erf√ºllen und Crypto-Agility f√ºr zuk√ºnftige Algorithmus-Migrationen erm√∂glichen\n\n‚öñÔ∏è Compliance und regulatorische Anforderungen:\n‚Ä¢ Analyse branchenspezifischer Regulierungen wie eIDAS, DSGVO, NIS2, DORA und deren Auswirkungen auf PKI-Design\n‚Ä¢ Entwicklung von Compliance-Frameworks, die automatisierte Nachweisf√ºhrung und Audit-Unterst√ºtzung erm√∂glichen\n‚Ä¢ Ber√ºcksichtigung internationaler Standards wie Common Criteria, FIPS und ISO-Normen bei der Architektur-Planung\n‚Ä¢ Integration von Governance-Strukturen, die kontinuierliche Compliance-√úberwachung und -Verbesserung gew√§hrleisten\n‚Ä¢ Planung f√ºr regelm√§√üige Compliance-Assessments und deren Integration in operative PKI-Prozesse\n\nüèóÔ∏è Architektur-Prinzipien und Design-Philosophie:\n‚Ä¢ Anwendung von Defense-in-Depth-Prinzipien f√ºr mehrschichtige Sicherheitsarchitekturen\n‚Ä¢ Implementierung von Fail-Safe-Mechanismen und Redundanzen f√ºr kritische PKI-Komponenten\n‚Ä¢ Ber√ºcksichtigung von Skalierbarkeitsanforderungen und Performance-Optimierung von Anfang an\n‚Ä¢ Integration von Monitoring und Analytics-Capabilities f√ºr proaktive PKI-Verwaltung\n‚Ä¢ Planung f√ºr Interoperabilit√§t mit bestehenden Systemen und zuk√ºnftigen Technologie-Integrationen\n\nüìà Wirtschaftlichkeit und ROI-Betrachtungen:\n‚Ä¢ Entwicklung eines Business Cases mit quantifizierbaren Nutzenargumenten und ROI-Projektionen\n‚Ä¢ Analyse von Total Cost of Ownership einschlie√ülich Implementierung, Betrieb, Wartung und Lifecycle-Kosten\n‚Ä¢ Bewertung von Build-vs-Buy-Entscheidungen und deren langfristige Auswirkungen auf Flexibilit√§t und Kosten\n‚Ä¢ Planung von Investitionsphasen und Budget-Allokation f√ºr nachhaltige PKI-Entwicklung\n‚Ä¢ Ber√ºcksichtigung von Risiko-Kosten und deren Reduzierung durch professionelle PKI-Implementierung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Wie entwickelt man eine ma√ügeschneiderte PKI-Architektur f√ºr spezifische Unternehmensanforderungen?',
        answer: "Die Entwicklung einer ma√ügeschneiderten PKI-Architektur erfordert eine systematische Analyse der spezifischen Unternehmensanforderungen und deren √úbersetzung in technische Designentscheidungen. Eine erfolgreiche PKI-Architektur muss die einzigartigen Charakteristika der Organisation, ihrer Prozesse und Sicherheitsanforderungen widerspiegeln, w√§hrend sie gleichzeitig Flexibilit√§t f√ºr zuk√ºnftige Entwicklungen bietet.\n\nüîç Anforderungsanalyse und Stakeholder-Mapping:\n‚Ä¢ Durchf√ºhrung umfassender Stakeholder-Interviews zur Identifikation expliziter und impliziter PKI-Anforderungen\n‚Ä¢ Analyse bestehender Gesch√§ftsprozesse und deren Digitalisierungspotenzial durch PKI-Integration\n‚Ä¢ Bewertung aktueller Sicherheitsinfrastrukturen und deren Integration in die neue PKI-Architektur\n‚Ä¢ Identifikation kritischer Anwendungsf√§lle und deren spezifische Zertifikatsanforderungen\n‚Ä¢ Dokumentation von Performance-Anforderungen, Verf√ºgbarkeitszielen und Skalierungserwartungen\n\nüèõÔ∏è Trust-Hierarchie und CA-Struktur-Design:\n‚Ä¢ Entwicklung einer Certificate Authority-Hierarchie, die organisatorische Strukturen und Verantwortlichkeiten widerspiegelt\n‚Ä¢ Design von Root CA-Strategien mit angemessener Offline-Sicherheit und Disaster Recovery-Planung\n‚Ä¢ Planung von Intermediate CA-Strukturen f√ºr operative Flexibilit√§t und Risikosegmentierung\n‚Ä¢ Ber√ºcksichtigung von Cross-Certification-Anforderungen f√ºr externe Partnerorganisationen\n‚Ä¢ Integration von Policy Certificate Authorities f√ºr spezifische Anwendungsbereiche und Compliance-Anforderungen\n\nüîß Technologie-Stack und Plattform-Auswahl:\n‚Ä¢ Evaluierung verschiedener PKI-Plattformen basierend auf Funktionalit√§t, Skalierbarkeit und Herstellerunterst√ºtzung\n‚Ä¢ Bewertung von Cloud-, Hybrid- und On-Premises-Deployment-Optionen entsprechend Sicherheits- und Compliance-Anforderungen\n‚Ä¢ Integration von Hardware Security Modules f√ºr kritische Schl√ºsselverwaltung und Compliance-Erf√ºllung\n‚Ä¢ Auswahl geeigneter Kryptographie-Algorithmen und Schl√ºssell√§ngen basierend auf Sicherheitsanforderungen und Performance-Zielen\n‚Ä¢ Planung f√ºr Crypto-Agility und zuk√ºnftige Algorithmus-Migrationen\n\nüåê Integration und Interoperabilit√§t:\n‚Ä¢ Design von APIs und Schnittstellen f√ºr nahtlose Integration in bestehende IT-Landschaften\n‚Ä¢ Planung der Integration mit Identity und Access Management-Systemen f√ºr einheitliche Benutzerverwaltung\n‚Ä¢ Ber√ºcksichtigung von Legacy-System-Anforderungen und Migration-Strategien\n‚Ä¢ Entwicklung von Standards und Protokollen f√ºr konsistente PKI-Nutzung across verschiedene Anwendungen\n‚Ä¢ Integration mit Monitoring- und Management-Systemen f√ºr operative Exzellenz\n\nüìä Lifecycle Management und Automatisierung:\n‚Ä¢ Design automatisierter Certificate Enrollment-Prozesse f√ºr verschiedene Benutzer- und Ger√§tekategorien\n‚Ä¢ Entwicklung von Certificate Lifecycle Management-Workflows mit proaktiver Erneuerung und Widerruf\n‚Ä¢ Integration von Self-Service-Capabilities f√ºr Endbenutzer und Administratoren\n‚Ä¢ Planung von Backup- und Recovery-Strategien f√ºr alle kritischen PKI-Komponenten\n‚Ä¢ Implementierung von Monitoring und Alerting f√ºr proaktive Problemerkennung und -l√∂sung\n\nüõ°Ô∏è Sicherheits-Design und H√§rtung:\n‚Ä¢ Implementierung von Defense-in-Depth-Strategien mit mehrschichtigen Sicherheitskontrollen\n‚Ä¢ Design sicherer Schl√ºsselgenerierung, -speicherung und -verwaltung entsprechend Best Practices\n‚Ä¢ Integration von Audit-Logging und Compliance-Monitoring in alle PKI-Prozesse\n‚Ä¢ Entwicklung von Incident Response-Verfahren f√ºr PKI-spezifische Sicherheitsvorf√§lle\n‚Ä¢ Planung regelm√§√üiger Sicherheits-Assessments und Penetrationstests f√ºr kontinuierliche Verbesserung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Welche kritischen Erfolgsfaktoren bestimmen den erfolgreichen Aufbau einer PKI-Infrastruktur?',
        answer: "Der erfolgreiche Aufbau einer PKI-Infrastruktur h√§ngt von einer Vielzahl kritischer Erfolgsfaktoren ab, die sowohl technische als auch organisatorische Aspekte umfassen. Diese Faktoren m√ºssen von Projektbeginn an ber√ºcksichtigt und kontinuierlich √ºberwacht werden, um sicherzustellen, dass die PKI-Initiative ihre strategischen Ziele erreicht und nachhaltigen Wert f√ºr die Organisation schafft.\n\nüë• Organisatorische Verankerung und Governance:\n‚Ä¢ Etablierung starker F√ºhrungsunterst√ºtzung und klarer Sponsorship auf C-Level f√ºr strategische Ausrichtung\n‚Ä¢ Aufbau eines multidisziplin√§ren PKI-Teams mit Expertise in Sicherheit, IT-Architektur, Compliance und Gesch√§ftsprozessen\n‚Ä¢ Entwicklung klarer Governance-Strukturen mit definierten Rollen, Verantwortlichkeiten und Entscheidungsprozessen\n‚Ä¢ Integration der PKI-Initiative in √ºbergeordnete IT-Governance und Risikomanagement-Frameworks\n‚Ä¢ Etablierung regelm√§√üiger Steering Committee-Meetings f√ºr strategische Ausrichtung und Probleml√∂sung\n\nüìã Projektmanagement und Phasenplanung:\n‚Ä¢ Anwendung bew√§hrter Projektmanagement-Methoden mit klaren Meilensteinen und Erfolgskriterien\n‚Ä¢ Entwicklung einer realistischen Projektplanung mit angemessenen Puffern f√ºr unvorhergesehene Herausforderungen\n‚Ä¢ Implementierung eines phasenweisen Rollout-Ansatzes mit Proof-of-Concept und Pilotphasen\n‚Ä¢ Etablierung effektiver Kommunikationsstrukturen zwischen allen Projektbeteiligten\n‚Ä¢ Kontinuierliches Risikomanagement mit proaktiver Identifikation und Mitigation potenzieller Probleme\n\nüîß Technische Exzellenz und Best Practices:\n‚Ä¢ Anwendung bew√§hrter PKI-Design-Prinzipien und Sicherheitsstandards von Projektbeginn an\n‚Ä¢ Implementierung umfassender Testing-Strategien einschlie√ülich Funktions-, Performance- und Sicherheitstests\n‚Ä¢ Entwicklung robuster Backup- und Disaster Recovery-Verfahren f√ºr alle kritischen PKI-Komponenten\n‚Ä¢ Integration von Monitoring und Alerting-Systemen f√ºr proaktive Problemerkennung\n‚Ä¢ Sicherstellung der Skalierbarkeit und Performance-Optimierung f√ºr zuk√ºnftige Anforderungen\n\nüìö Wissensmanagement und Kompetenzaufbau:\n‚Ä¢ Entwicklung umfassender Dokumentation f√ºr alle PKI-Prozesse, Verfahren und Konfigurationen\n‚Ä¢ Implementierung strukturierter Schulungsprogramme f√ºr Administratoren, Entwickler und Endbenutzer\n‚Ä¢ Aufbau interner PKI-Expertise durch Training, Zertifizierungen und Wissenstransfer\n‚Ä¢ Etablierung von Knowledge-Sharing-Prozessen und Best-Practice-Dokumentation\n‚Ä¢ Planung f√ºr Wissenserhalt und Nachfolgeplanung bei Personalwechseln\n\nü§ù Stakeholder-Engagement und Change Management:\n‚Ä¢ Fr√ºhzeitige Einbindung aller relevanten Stakeholder in Planungs- und Entscheidungsprozesse\n‚Ä¢ Entwicklung effektiver Kommunikationsstrategien f√ºr verschiedene Zielgruppen\n‚Ä¢ Implementierung strukturierter Change Management-Prozesse f√ºr organisatorische Anpassungen\n‚Ä¢ Aufbau von PKI-Awareness und Sicherheitsbewusstsein in der gesamten Organisation\n‚Ä¢ Etablierung von Feedback-Mechanismen f√ºr kontinuierliche Verbesserung\n\n‚ö° Agile Implementierung und kontinuierliche Verbesserung:\n‚Ä¢ Anwendung agiler Entwicklungsmethoden f√ºr flexible Anpassung an sich √§ndernde Anforderungen\n‚Ä¢ Implementierung von DevOps-Praktiken f√ºr effiziente PKI-Deployment und -Management\n‚Ä¢ Etablierung kontinuierlicher Monitoring- und Optimierungsprozesse\n‚Ä¢ Integration von Feedback-Loops f√ºr iterative Verbesserung der PKI-Services\n‚Ä¢ Planung f√ºr regelm√§√üige Architektur-Reviews und Technology-Updates\n\nüéØ Messbare Erfolgskriterien und KPIs:\n‚Ä¢ Definition klarer, messbarer Erfolgskriterien f√ºr alle Projektphasen\n‚Ä¢ Implementierung von KPI-Dashboards f√ºr kontinuierliche Performance-√úberwachung\n‚Ä¢ Etablierung regelm√§√üiger Business Reviews zur Bewertung des PKI-Wertbeitrags\n‚Ä¢ Durchf√ºhrung von Post-Implementation-Reviews f√ºr Lessons Learned\n‚Ä¢ Kontinuierliche Anpassung der Erfolgskriterien basierend auf sich √§ndernden Gesch√§ftsanforderungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Wie gew√§hrleistet man Sicherheit und Compliance beim PKI-Infrastruktur-Aufbau?',
        answer: "Sicherheit und Compliance sind fundamentale S√§ulen beim Aufbau einer PKI-Infrastruktur und m√ºssen von der ersten Planungsphase bis zur operativen Nutzung konsequent ber√ºcksichtigt werden. Eine compliance-konforme und sichere PKI erfordert die Integration bew√§hrter Sicherheitspraktiken, regulatorischer Anforderungen und kontinuierlicher √úberwachungsmechanismen in alle Aspekte der PKI-Implementierung.\n\nüõ°Ô∏è Security-by-Design-Prinzipien:\n‚Ä¢ Implementierung von Defense-in-Depth-Strategien mit mehrschichtigen Sicherheitskontrollen auf allen PKI-Ebenen\n‚Ä¢ Anwendung des Principle of Least Privilege f√ºr alle PKI-Administratoren und -Benutzer\n‚Ä¢ Integration von Zero Trust-Konzepten in die PKI-Architektur mit kontinuierlicher Verifikation\n‚Ä¢ Implementierung sicherer Schl√ºsselgenerierung mit Hardware Security Modules und zertifizierten Zufallszahlengeneratoren\n‚Ä¢ Entwicklung robuster Schl√ºsselverwaltungsverfahren mit angemessener Trennung von Aufgaben und Verantwortlichkeiten\n\nüìú Regulatorische Compliance-Integration:\n‚Ä¢ Analyse und Mapping relevanter Regulierungen wie eIDAS, DSGVO, NIS2, DORA auf PKI-Anforderungen\n‚Ä¢ Implementierung von Compliance-Controls, die automatisierte Nachweisf√ºhrung und Audit-Unterst√ºtzung erm√∂glichen\n‚Ä¢ Entwicklung von Certificate Policies und Certificate Practice Statements entsprechend regulatorischen Vorgaben\n‚Ä¢ Integration von Compliance-Monitoring in alle PKI-Prozesse mit automatisierten Alerts bei Abweichungen\n‚Ä¢ Etablierung regelm√§√üiger Compliance-Assessments und deren Integration in kontinuierliche Verbesserungsprozesse\n\nüîê Kryptographische Sicherheit und Standards:\n‚Ä¢ Auswahl und Implementierung kryptographischer Algorithmen entsprechend aktueller NIST, BSI und ENISA-Empfehlungen\n‚Ä¢ Planung f√ºr Crypto-Agility mit der F√§higkeit zur Migration zu st√§rkeren Algorithmen bei Bedarf\n‚Ä¢ Implementierung angemessener Schl√ºssell√§ngen und -lebensdauern basierend auf Risikobewertungen\n‚Ä¢ Integration von Post-Quantum-Cryptography-√úberlegungen in die langfristige PKI-Strategie\n‚Ä¢ Sicherstellung der Integrit√§t und Authentizit√§t aller kryptographischen Operationen\n\nüè¢ Physische und logische Sicherheit:\n‚Ä¢ Implementierung strenger physischer Sicherheitsma√ünahmen f√ºr alle kritischen PKI-Komponenten\n‚Ä¢ Entwicklung sicherer Netzwerkarchitekturen mit angemessener Segmentierung und Zugriffskontrolle\n‚Ä¢ Integration von Multi-Factor-Authentication f√ºr alle privilegierten PKI-Zugriffe\n‚Ä¢ Implementierung umfassender Logging- und Monitoring-Systeme f√ºr alle PKI-Aktivit√§ten\n‚Ä¢ Entwicklung von Incident Response-Verfahren f√ºr PKI-spezifische Sicherheitsvorf√§lle\n\nüìä Audit und Monitoring-Frameworks:\n‚Ä¢ Implementierung kontinuierlicher Monitoring-Systeme f√ºr alle PKI-Komponenten und -Prozesse\n‚Ä¢ Entwicklung umfassender Audit-Trails f√ºr alle Certificate Lifecycle-Aktivit√§ten\n‚Ä¢ Integration von SIEM-Systemen f√ºr Echtzeit-Erkennung von Sicherheitsanomalien\n‚Ä¢ Etablierung regelm√§√üiger interner und externer Audits zur Validierung der PKI-Sicherheit\n‚Ä¢ Implementierung von Compliance-Dashboards f√ºr kontinuierliche √úberwachung regulatorischer Anforderungen\n\nüîÑ Kontinuierliche Sicherheitsverbesserung:\n‚Ä¢ Etablierung regelm√§√üiger Sicherheits-Assessments und Penetrationstests\n‚Ä¢ Integration von Threat Intelligence f√ºr proaktive Bedrohungserkennung und -abwehr\n‚Ä¢ Implementierung von Vulnerability Management-Prozessen f√ºr alle PKI-Komponenten\n‚Ä¢ Entwicklung von Security Awareness-Programmen f√ºr alle PKI-Stakeholder\n‚Ä¢ Etablierung von Lessons Learned-Prozessen aus Sicherheitsvorf√§llen und Audit-Ergebnissen\n\n‚öñÔ∏è Governance und Risikomanagement:\n‚Ä¢ Entwicklung umfassender PKI-Governance-Frameworks mit klaren Rollen und Verantwortlichkeiten\n‚Ä¢ Integration der PKI-Risiken in das √ºbergeordnete Enterprise Risk Management\n‚Ä¢ Implementierung von Risk-based Authentication und Conditional Access-Mechanismen\n‚Ä¢ Etablierung regelm√§√üiger Risk Assessments f√ºr alle PKI-Komponenten und -Prozesse\n‚Ä¢ Entwicklung von Business Continuity-Pl√§nen f√ºr kritische PKI-Services"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
