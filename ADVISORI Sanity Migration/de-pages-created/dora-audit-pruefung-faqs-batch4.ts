import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating DORA Audit & Pr√ºfung page with FAQ batch 4...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'dora-audit-pruefung' })
    
    if (!existingDoc) {
      throw new Error('Document "dora-audit-pruefung" not found')
    }
    
    // Create new FAQs for third-party auditing and vendor assessments
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 13),
        question: 'Wie f√ºhre ich effektive DORA-Audits bei kritischen IKT-Drittanbietern durch?',
        answer: "DORA-Audits bei kritischen IKT-Drittanbietern erfordern einen spezialisierten Ansatz, der sowohl die technischen F√§higkeiten des Anbieters als auch dessen Auswirkungen auf die operative Resilienz des Finanzinstituts bewertet. Diese Audits sind komplex, da sie externe Organisationen mit unterschiedlichen Governance-Strukturen und Gesch√§ftsmodellen umfassen.\n\nüéØ Strategische Drittanbieter-Audit-Planung:\n‚Ä¢ Entwickeln Sie eine umfassende Drittanbieter-Risikobewertung, die sowohl die Kritikalit√§t der Services als auch die inh√§renten Risiken des Anbieters ber√ºcksichtigt\n‚Ä¢ Klassifizieren Sie Drittanbieter nach ihrer strategischen Bedeutung und dem potenziellen Impact auf Ihre operative Resilienz\n‚Ä¢ Erstellen Sie ma√ügeschneiderte Audit-Programme, die auf die spezifischen Services und Risikoprofile jedes Anbieters zugeschnitten sind\n‚Ä¢ Koordinieren Sie Audit-Aktivit√§ten mit anderen Kunden des Drittanbieters, um Synergien zu nutzen und Audit-Fatigue zu vermeiden\n‚Ä¢ Integrieren Sie regulatorische Anforderungen und Branchenstandards in die Audit-Planung\n\nüîç Umfassende Service-Delivery-Bewertung:\n‚Ä¢ Bewerten Sie die Qualit√§t und Zuverl√§ssigkeit der Service-Delivery-Prozesse des Drittanbieters\n‚Ä¢ Pr√ºfen Sie die Angemessenheit von Service-Level-Agreements und deren praktische Umsetzung\n‚Ä¢ Analysieren Sie die Kapazit√§tsplanung und Skalierbarkeit der angebotenen Services\n‚Ä¢ Bewerten Sie die Wirksamkeit von Change-Management-Prozessen und deren Auswirkungen auf Service-Stabilit√§t\n‚Ä¢ Pr√ºfen Sie die Qualit√§t von Support- und Incident-Management-Prozessen\n\nüõ°Ô∏è Sicherheits- und Resilienz-Assessment:\n‚Ä¢ F√ºhren Sie detaillierte Sicherheitsbewertungen der Drittanbieter-Infrastruktur und -Prozesse durch\n‚Ä¢ Bewerten Sie die Wirksamkeit von Cybersecurity-Kontrollen und deren Alignment mit Ihren Sicherheitsstandards\n‚Ä¢ Pr√ºfen Sie die Business-Continuity- und Disaster-Recovery-F√§higkeiten des Drittanbieters\n‚Ä¢ Analysieren Sie die Resilienz der Drittanbieter-Services gegen verschiedene St√∂rungsszenarien\n‚Ä¢ Bewerten Sie die Wirksamkeit von Backup- und Recovery-Mechanismen\n\nüìä Governance- und Compliance-Validierung:\n‚Ä¢ Bewerten Sie die Governance-Strukturen des Drittanbieters und deren Angemessenheit f√ºr kritische Finanzdienstleistungen\n‚Ä¢ Pr√ºfen Sie die Compliance des Drittanbieters mit relevanten regulatorischen Anforderungen\n‚Ä¢ Analysieren Sie die Qualit√§t von Risikomanagement-Prozessen und deren Integration in die Service-Delivery\n‚Ä¢ Bewerten Sie die Transparenz und Qualit√§t von Reporting-Mechanismen\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von internen Kontrollen und Audit-Funktionen\n\nüîó Lieferketten- und Sub-Contractor-Analyse:\n‚Ä¢ Bewerten Sie die Drittanbieter-Lieferkette und identifizieren Sie kritische Abh√§ngigkeiten\n‚Ä¢ Pr√ºfen Sie die Risikomanagement-Prozesse f√ºr Sub-Contractors und deren √úberwachung\n‚Ä¢ Analysieren Sie die geografische Verteilung von Services und deren Auswirkungen auf Risikoprofile\n‚Ä¢ Bewerten Sie die Wirksamkeit von Vendor-Management-Prozessen des Drittanbieters\n‚Ä¢ Pr√ºfen Sie die Transparenz und Kontrolle √ºber die gesamte Service-Delivery-Kette\n\nüìã Kontinuierliche √úberwachung und Follow-up:\n‚Ä¢ Etablieren Sie kontinuierliche Monitoring-Mechanismen f√ºr kritische Drittanbieter-Services\n‚Ä¢ Implementieren Sie regelm√§√üige Re-Assessment-Zyklen basierend auf Risikoprofilen\n‚Ä¢ Entwickeln Sie Eskalationsprozesse f√ºr identifizierte Risiken oder Compliance-Verst√∂√üe\n‚Ä¢ Schaffen Sie Feedback-Mechanismen zur kontinuierlichen Verbesserung der Drittanbieter-Performance\n‚Ä¢ Integrieren Sie Drittanbieter-Audit-Erkenntnisse in Ihre Gesamtstrategie f√ºr operationelle Resilienz"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 14),
        question: 'Welche Herausforderungen gibt es bei der Auditierung von Cloud-Service-Providern unter DORA?',
        answer: "Die Auditierung von Cloud-Service-Providern unter DORA bringt einzigartige Herausforderungen mit sich, die sowohl technische als auch regulatorische Komplexit√§ten umfassen. Cloud-Umgebungen erfordern spezialisierte Audit-Ans√§tze, die die geteilte Verantwortung, Multi-Tenancy und dynamische Natur von Cloud-Services ber√ºcksichtigen.\n\n‚òÅÔ∏è Shared-Responsibility-Model-Komplexit√§t:\n‚Ä¢ Definieren Sie klar die Verantwortlichkeiten zwischen Ihrem Institut und dem Cloud-Provider f√ºr verschiedene Sicherheits- und Compliance-Aspekte\n‚Ä¢ Bewerten Sie die Angemessenheit der Provider-seitigen Kontrollen und deren Integration mit Ihren eigenen Sicherheitsma√ünahmen\n‚Ä¢ Pr√ºfen Sie die Transparenz des Cloud-Providers bez√ºglich seiner Sicherheits- und Betriebspraktiken\n‚Ä¢ Analysieren Sie die Verf√ºgbarkeit und Qualit√§t von Audit-Berichten und Zertifizierungen des Providers\n‚Ä¢ Bewerten Sie die Wirksamkeit von Interface-Kontrollen zwischen Cloud- und On-Premises-Umgebungen\n\nüîç Multi-Tenancy und Isolation-Bewertung:\n‚Ä¢ Bewerten Sie die Wirksamkeit von Tenant-Isolation-Mechanismen und deren Schutz vor Cross-Tenant-Zugriffen\n‚Ä¢ Pr√ºfen Sie die Sicherheit von geteilten Infrastrukturen und deren Auswirkungen auf Ihre Daten und Anwendungen\n‚Ä¢ Analysieren Sie die Kontrollen zur Verhinderung von Data-Leakage zwischen verschiedenen Tenants\n‚Ä¢ Bewerten Sie die Wirksamkeit von Netzwerk-Segmentierung in Multi-Tenant-Umgebungen\n‚Ä¢ Pr√ºfen Sie die Qualit√§t von Monitoring- und Logging-Mechanismen f√ºr Multi-Tenant-Aktivit√§ten\n\nüìä Datenhoheit und Compliance-Herausforderungen:\n‚Ä¢ Bewerten Sie die Datenlokalisierung und deren Compliance mit regulatorischen Anforderungen\n‚Ä¢ Pr√ºfen Sie die Kontrollen f√ºr grenz√ºberschreitende Daten√ºbertragungen und deren rechtliche Implikationen\n‚Ä¢ Analysieren Sie die Verf√ºgbarkeit und Qualit√§t von Daten-Residency-Garantien\n‚Ä¢ Bewerten Sie die Wirksamkeit von Datenschutz- und Verschl√ºsselungskontrollen\n‚Ä¢ Pr√ºfen Sie die Compliance des Cloud-Providers mit branchenspezifischen Regulierungen\n\nüîß Dynamische Infrastruktur und Konfiguration:\n‚Ä¢ Bewerten Sie die Kontrollen f√ºr Infrastructure-as-Code und automatisierte Konfigurationsmanagement\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von Configuration-Drift-Detection und -Remediation\n‚Ä¢ Analysieren Sie die Sicherheit von Container- und Microservices-Umgebungen\n‚Ä¢ Bewerten Sie die Kontrollen f√ºr dynamische Skalierung und Auto-Scaling-Mechanismen\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von DevOps-Pipeline-Sicherheit\n\nüõ°Ô∏è Incident-Response und Forensik-F√§higkeiten:\n‚Ä¢ Bewerten Sie die Incident-Response-F√§higkeiten des Cloud-Providers und deren Integration mit Ihren eigenen Prozessen\n‚Ä¢ Pr√ºfen Sie die Verf√ºgbarkeit und Qualit√§t von Forensik-Daten in Cloud-Umgebungen\n‚Ä¢ Analysieren Sie die Koordination zwischen Provider und Kunde bei Sicherheitsvorf√§llen\n‚Ä¢ Bewerten Sie die Wirksamkeit von Threat-Detection und -Response in Cloud-Umgebungen\n‚Ä¢ Pr√ºfen Sie die Qualit√§t von Incident-Kommunikation und -Reporting\n\nüìà Kontinuierliche √úberwachung und Assurance:\n‚Ä¢ Implementieren Sie kontinuierliche Cloud-Security-Monitoring-Mechanismen\n‚Ä¢ Bewerten Sie die Qualit√§t von Cloud-Provider-Transparency-Reports und deren Nutzung\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von Third-Party-Attestations und deren regelm√§√üige Aktualisierung\n‚Ä¢ Analysieren Sie die Integration von Cloud-Monitoring in Ihre Gesamtstrategie f√ºr operationelle Resilienz\n‚Ä¢ Entwickeln Sie Cloud-spezifische KPIs und Metriken f√ºr kontinuierliche Assurance\n\nüîÑ Exit-Strategien und Vendor-Lock-in-Vermeidung:\n‚Ä¢ Bewerten Sie die Verf√ºgbarkeit und Qualit√§t von Daten-Portabilit√§t-Mechanismen\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von Exit-Strategien und deren praktische Umsetzbarkeit\n‚Ä¢ Analysieren Sie die Risiken von Vendor-Lock-in und deren Minderungsstrategien\n‚Ä¢ Bewerten Sie die Kosten und Komplexit√§t von Cloud-Provider-Wechseln\n‚Ä¢ Pr√ºfen Sie die Verf√ºgbarkeit von Backup- und Alternative-Provider-Optionen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 15),
        question: 'Wie bewerte ich die DORA-Compliance von Outsourcing-Partnern und deren Subunternehmern?',
        answer: "Die Bewertung der DORA-Compliance von Outsourcing-Partnern und deren Subunternehmern erfordert einen mehrstufigen Ansatz, der die gesamte Service-Delivery-Kette umfasst. Diese Bewertung ist kritisch, da Outsourcing-Arrangements oft komplexe Abh√§ngigkeiten und geteilte Verantwortlichkeiten schaffen.\n\nüèóÔ∏è Umfassende Outsourcing-Struktur-Analyse:\n‚Ä¢ Kartieren Sie die vollst√§ndige Outsourcing-Struktur einschlie√ülich aller Subunternehmer und deren Rollen\n‚Ä¢ Bewerten Sie die Kritikalit√§t verschiedener Outsourcing-Services f√ºr Ihre operative Resilienz\n‚Ä¢ Analysieren Sie die geografische Verteilung von Outsourcing-Services und deren regulatorische Implikationen\n‚Ä¢ Pr√ºfen Sie die Komplexit√§t von Service-Interdependenzen und deren Auswirkungen auf Risikoprofile\n‚Ä¢ Bewerten Sie die Transparenz und Kontrolle √ºber die gesamte Outsourcing-Kette\n\nüìã Vertragliche Compliance-Framework-Bewertung:\n‚Ä¢ Bewerten Sie die Angemessenheit von DORA-spezifischen Klauseln in Outsourcing-Vertr√§gen\n‚Ä¢ Pr√ºfen Sie die Klarheit von Verantwortlichkeiten und Haftungen zwischen verschiedenen Parteien\n‚Ä¢ Analysieren Sie die Wirksamkeit von Service-Level-Agreements und deren DORA-Alignment\n‚Ä¢ Bewerten Sie die Qualit√§t von Audit-Rechten und deren praktische Durchsetzbarkeit\n‚Ä¢ Pr√ºfen Sie die Angemessenheit von Terminierungs- und Exit-Klauseln\n\nüîç Multi-Level-Governance-Assessment:\n‚Ä¢ Bewerten Sie die Governance-Strukturen des prim√§ren Outsourcing-Partners\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von Subunternehmer-Management-Prozessen\n‚Ä¢ Analysieren Sie die Qualit√§t von Risikomanagement-Frameworks auf allen Ebenen\n‚Ä¢ Bewerten Sie die Integration verschiedener Governance-Strukturen in ein koh√§rentes System\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von Eskalations- und Entscheidungsprozessen\n\nüõ°Ô∏è End-to-End-Sicherheitsbewertung:\n‚Ä¢ Bewerten Sie die Sicherheitskontrollen entlang der gesamten Outsourcing-Kette\n‚Ä¢ Pr√ºfen Sie die Konsistenz von Sicherheitsstandards zwischen verschiedenen Service-Providern\n‚Ä¢ Analysieren Sie die Wirksamkeit von Interface-Sicherheit zwischen verschiedenen Anbietern\n‚Ä¢ Bewerten Sie die Qualit√§t von Incident-Response-Koordination zwischen mehreren Parteien\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von End-to-End-Monitoring und -Detection\n\nüìä Compliance-Monitoring und -Reporting:\n‚Ä¢ Implementieren Sie kontinuierliche Compliance-√úberwachung f√ºr alle Outsourcing-Partner\n‚Ä¢ Bewerten Sie die Qualit√§t und Vollst√§ndigkeit von Compliance-Reporting\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von Exception-Management-Prozessen\n‚Ä¢ Analysieren Sie die Integration von Outsourcing-Compliance in Ihre Gesamtstrategie\n‚Ä¢ Bewerten Sie die Qualit√§t von Regulatory-Change-Management-Prozessen\n\nüîÑ Business-Continuity und Resilienz-Validierung:\n‚Ä¢ Bewerten Sie die Business-Continuity-Pl√§ne aller kritischen Outsourcing-Partner\n‚Ä¢ Pr√ºfen Sie die Koordination von Disaster-Recovery-Prozessen zwischen verschiedenen Anbietern\n‚Ä¢ Analysieren Sie die Wirksamkeit von Backup- und Redundanz-Strategien\n‚Ä¢ Bewerten Sie die Resilienz gegen systemische Risiken, die mehrere Anbieter betreffen k√∂nnten\n‚Ä¢ Pr√ºfen Sie die Qualit√§t von Crisis-Communication-Mechanismen\n\nüéØ Kontinuierliche Verbesserung und Optimierung:\n‚Ä¢ Etablieren Sie regelm√§√üige Review-Zyklen f√ºr Outsourcing-Compliance\n‚Ä¢ Implementieren Sie Lessons-Learned-Prozesse aus Compliance-Assessments\n‚Ä¢ Bewerten Sie die Wirksamkeit von Vendor-Development-Programmen\n‚Ä¢ Pr√ºfen Sie die Integration von Outsourcing-Erkenntnissen in strategische Entscheidungen\n‚Ä¢ Entwickeln Sie Benchmarking-Mechanismen f√ºr Outsourcing-Performance\n\nüåê Regulatorische Koordination und Reporting:\n‚Ä¢ Bewerten Sie die Koordination mit Aufsichtsbeh√∂rden bez√ºglich Outsourcing-Arrangements\n‚Ä¢ Pr√ºfen Sie die Qualit√§t von regulatorischem Reporting √ºber Outsourcing-Risiken\n‚Ä¢ Analysieren Sie die Compliance mit Outsourcing-spezifischen regulatorischen Anforderungen\n‚Ä¢ Bewerten Sie die Wirksamkeit von Cross-Border-Compliance-Management\n‚Ä¢ Pr√ºfen Sie die Integration von Outsourcing-Governance in Ihre Gesamtstrategie f√ºr regulatorische Compliance"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 16),
        question: 'Wie entwickle ich ein effektives Vendor-Risk-Assessment-Programm f√ºr DORA-Compliance?',
        answer: "Ein effektives Vendor-Risk-Assessment-Programm f√ºr DORA-Compliance erfordert einen systematischen und risikobasierten Ansatz, der sowohl pr√§ventive als auch kontinuierliche √úberwachungskomponenten integriert. Das Programm muss skalierbar sein und verschiedene Arten von Drittanbietern und Risikoprofilen abdecken.\n\nüéØ Strategische Programm-Architektur:\n‚Ä¢ Entwickeln Sie ein risikobasiertes Klassifizierungssystem f√ºr alle Drittanbieter basierend auf Kritikalit√§t, Komplexit√§t und regulatorischen Anforderungen\n‚Ä¢ Etablieren Sie differenzierte Assessment-Ans√§tze f√ºr verschiedene Vendor-Kategorien und Risikoprofile\n‚Ä¢ Integrieren Sie das Vendor-Risk-Assessment in Ihre Gesamtstrategie f√ºr operationelle Resilienz und Risikomanagement\n‚Ä¢ Schaffen Sie klare Governance-Strukturen mit definierten Rollen und Verantwortlichkeiten\n‚Ä¢ Entwickeln Sie standardisierte Prozesse und Methodologien f√ºr konsistente Assessment-Qualit√§t\n\nüîç Umfassende Due-Diligence-Framework:\n‚Ä¢ Implementieren Sie mehrstufige Due-Diligence-Prozesse, die von grundlegenden Checks bis zu detaillierten On-Site-Audits reichen\n‚Ä¢ Bewerten Sie finanzielle Stabilit√§t, operative Kapazit√§ten und strategische Ausrichtung potenzieller Vendor\n‚Ä¢ Pr√ºfen Sie Compliance-Historie, regulatorische Standings und Reputation in der Branche\n‚Ä¢ Analysieren Sie Gesch√§ftsmodelle, Kundenstrukturen und potenzielle Interessenkonflikte\n‚Ä¢ Bewerten Sie technologische F√§higkeiten, Innovation-Capacity und Zukunftsf√§higkeit\n\nüìä Kontinuierliche Risiko-Monitoring:\n‚Ä¢ Etablieren Sie Real-Time-Monitoring-Mechanismen f√ºr kritische Vendor-Metriken und -Indikatoren\n‚Ä¢ Implementieren Sie automatisierte Alert-Systeme f√ºr signifikante Ver√§nderungen in Vendor-Risikoprofilen\n‚Ä¢ Nutzen Sie externe Datenquellen und Threat-Intelligence f√ºr proaktive Risikobewertung\n‚Ä¢ Entwickeln Sie Trend-Analysen und pr√§diktive Modelle f√ºr Vendor-Risk-Management\n‚Ä¢ Integrieren Sie Vendor-Monitoring in Ihre Gesamtstrategie f√ºr operationelle √úberwachung\n\nüõ°Ô∏è Sicherheits- und Resilienz-Assessment:\n‚Ä¢ Bewerten Sie Cybersecurity-Posture und -Praktiken aller kritischen Vendor systematisch\n‚Ä¢ Pr√ºfen Sie Business-Continuity- und Disaster-Recovery-F√§higkeiten durch praktische Tests\n‚Ä¢ Analysieren Sie Incident-Response-F√§higkeiten und deren Integration mit Ihren eigenen Prozessen\n‚Ä¢ Bewerten Sie Datenmanagement-Praktiken und Compliance mit Datenschutzanforderungen\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von Change-Management und Configuration-Management-Prozessen\n\nüìã Vertragsmanagement und Compliance-Integration:\n‚Ä¢ Entwickeln Sie standardisierte Vertragsklauseln f√ºr DORA-spezifische Anforderungen\n‚Ä¢ Implementieren Sie systematische Contract-Lifecycle-Management-Prozesse\n‚Ä¢ Bewerten Sie die Angemessenheit von Service-Level-Agreements und deren Monitoring\n‚Ä¢ Pr√ºfen Sie die Wirksamkeit von Audit-Rechten und deren praktische Durchsetzung\n‚Ä¢ Etablieren Sie klare Prozesse f√ºr Contract-Amendments und Regulatory-Change-Management\n\nüîÑ Performance-Management und Optimization:\n‚Ä¢ Entwickeln Sie umfassende Vendor-Performance-Metriken und KPIs\n‚Ä¢ Implementieren Sie regelm√§√üige Vendor-Reviews und Performance-Assessments\n‚Ä¢ Etablieren Sie Vendor-Development-Programme f√ºr strategische Partner\n‚Ä¢ Schaffen Sie Feedback-Mechanismen und kontinuierliche Verbesserungsprozesse\n‚Ä¢ Nutzen Sie Benchmarking und Best-Practice-Sharing f√ºr Vendor-Ecosystem-Optimierung\n\nüåê Ecosystem-Management und Koordination:\n‚Ä¢ Bewerten Sie Interdependenzen zwischen verschiedenen Vendor und deren kumulative Risiken\n‚Ä¢ Implementieren Sie Vendor-Concentration-Risk-Management und Diversifikationsstrategien\n‚Ä¢ Entwickeln Sie Koordinationsmechanismen f√ºr Multi-Vendor-Services und -Projekte\n‚Ä¢ Etablieren Sie Industry-Collaboration f√ºr gemeinsame Vendor-Assessments und Standards\n‚Ä¢ Schaffen Sie Vendor-Community-Management f√ºr strategische Partnerschaften\n\nüìà Programm-Governance und kontinuierliche Verbesserung:\n‚Ä¢ Etablieren Sie regelm√§√üige Programm-Reviews und Effectiveness-Assessments\n‚Ä¢ Implementieren Sie Lessons-Learned-Prozesse aus Vendor-Incidents und -Assessments\n‚Ä¢ Entwickeln Sie Programm-Metriken und ROI-Bewertungen f√ºr kontinuierliche Optimierung\n‚Ä¢ Schaffen Sie Integration mit anderen Risikomanagement-Programmen und -Funktionen\n‚Ä¢ Nutzen Sie regulatorische Entwicklungen und Branchentrends f√ºr Programm-Evolution"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 4 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
