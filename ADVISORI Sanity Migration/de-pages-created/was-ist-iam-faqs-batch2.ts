import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating Was ist IAM page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'was-ist-iam' })
    
    if (!existingDoc) {
      throw new Error('Document "was-ist-iam" not found')
    }
    
    // Create new FAQs for IAM components and architecture
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Welche Authentifizierungsmethoden und Single Sign-On Strategien sind f√ºr moderne IAM-Systeme entscheidend?',
        answer: "Moderne Authentifizierung geht weit √ºber traditionelle Benutzername-Passwort-Kombinationen hinaus und umfasst ein vielschichtiges √ñkosystem intelligenter, kontextbasierter Sicherheitsmechanismen. Diese Methoden m√ºssen sowohl h√∂chste Sicherheitsstandards erf√ºllen als auch eine nahtlose, benutzerfreundliche Erfahrung bieten.\n\nüîê Multi-Faktor-Authentifizierung Strategien:\n‚Ä¢ Biometrische Authentifizierung mit Fingerabdruck, Gesichtserkennung und Iris-Scanning f√ºr h√∂chste Sicherheit\n‚Ä¢ Hardware-basierte Tokens und FIDO2-kompatible Sicherheitsschl√ºssel f√ºr phishing-resistente Authentifizierung\n‚Ä¢ Mobile Push-Benachrichtigungen mit kontextbasierten Informationen f√ºr benutzerfreundliche Verifikation\n‚Ä¢ Time-based One-Time Passwords mit dynamischen Codes f√ºr zus√§tzliche Sicherheitsebenen\n‚Ä¢ Risk-based Authentication mit maschinellem Lernen f√ºr adaptive Sicherheitsanforderungen\n\nüöÄ Passwordless Authentication Revolution:\n‚Ä¢ FIDO2 und WebAuthn Standards f√ºr sichere, passwortlose Anmeldung √ºber alle Ger√§te\n‚Ä¢ Biometrische Authentifizierung als prim√§re Authentifizierungsmethode ohne Passwort-Fallback\n‚Ä¢ Certificate-based Authentication f√ºr Ger√§te und Anwendungen mit PKI-Integration\n‚Ä¢ Magic Links und Email-basierte Authentifizierung f√ºr nahtlose Benutzerf√ºhrung\n‚Ä¢ Behavioral Biometrics f√ºr kontinuierliche Authentifizierung basierend auf Nutzungsmustern\n\nüåê Single Sign-On Architektur und Protokolle:\n‚Ä¢ SAML Federation f√ºr Enterprise-Integration und Cross-Domain-Authentifizierung\n‚Ä¢ OAuth und OpenID Connect f√ºr moderne API-basierte Anwendungen und Cloud-Services\n‚Ä¢ Kerberos Integration f√ºr nahtlose Windows-Umgebung und Legacy-System-Anbindung\n‚Ä¢ Social Login Integration f√ºr Consumer-Anwendungen mit Privacy-by-Design\n‚Ä¢ Cross-Platform SSO f√ºr nahtlose Erfahrung √ºber Desktop, Mobile und Web\n\nüß† Adaptive und Kontextbasierte Authentifizierung:\n‚Ä¢ Geolocation-basierte Risikobewertung f√ºr standortabh√§ngige Sicherheitsanforderungen\n‚Ä¢ Device Fingerprinting f√ºr Erkennung bekannter und vertrauensw√ºrdiger Ger√§te\n‚Ä¢ Behavioral Analytics f√ºr Erkennung anomaler Anmeldeversuche und Benutzerverhalten\n‚Ä¢ Time-based Access Controls f√ºr zeitabh√§ngige Zugriffsbeschr√§nkungen\n‚Ä¢ Network-based Authentication f√ºr vertrauensw√ºrdige Netzwerkumgebungen\n\nüîÑ Session Management und Kontinuierliche Verifikation:\n‚Ä¢ Dynamic Session Timeout basierend auf Risikobewertung und Benutzeraktivit√§t\n‚Ä¢ Step-up Authentication f√ºr erh√∂hte Sicherheitsanforderungen bei kritischen Aktionen\n‚Ä¢ Continuous Authentication f√ºr laufende Verifikation w√§hrend der gesamten Sitzung\n‚Ä¢ Session Sharing und Cross-Application SSO f√ºr nahtlose Arbeitsabl√§ufe\n‚Ä¢ Graceful Degradation f√ºr Ausfallsicherheit bei Authentifizierungsfehlern"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Wie funktioniert Role-Based Access Control und welche modernen Autorisierungsmodelle erg√§nzen RBAC in komplexen Unternehmensumgebungen?',
        answer: "Role-Based Access Control bildet das Fundament moderner Autorisierungsarchitekturen, wird jedoch in komplexen Unternehmensumgebungen durch fortschrittliche Modelle erg√§nzt, die dynamische, kontextbasierte und attributbasierte Entscheidungen erm√∂glichen. Diese Evolution erm√∂glicht granulare Kontrolle bei gleichzeitiger Skalierbarkeit und Verwaltbarkeit.\n\nüèóÔ∏è RBAC Grundlagen und Best Practices:\n‚Ä¢ Hierarchische Rollenmodelle mit Vererbung und Delegation f√ºr effiziente Rechteverwaltung\n‚Ä¢ Separation of Duties f√ºr automatische Erkennung und Verhinderung von Interessenkonflikten\n‚Ä¢ Role Mining und Analytics f√ºr datengetriebene Rollenoptimierung und -bereinigung\n‚Ä¢ Dynamic Role Assignment basierend auf Organisationsstrukturen und Gesch√§ftsprozessen\n‚Ä¢ Role Lifecycle Management f√ºr automatisierte Erstellung, √Ñnderung und Archivierung von Rollen\n\nüéØ Attribute-Based Access Control Evolution:\n‚Ä¢ Fine-grained Permissions basierend auf Benutzer-, Ressourcen- und Umgebungsattributen\n‚Ä¢ Policy-based Authorization mit deklarativen Regeln und Business-Logic-Integration\n‚Ä¢ Dynamic Attribute Evaluation f√ºr Real-time Entscheidungen basierend auf aktuellen Kontextdaten\n‚Ä¢ Attribute Aggregation aus verschiedenen Datenquellen f√ºr umfassende Entscheidungsgrundlagen\n‚Ä¢ XACML und ALFA Standards f√ºr interoperable und standardisierte Policy-Definition\n\nüîÑ Hybrid Authorization Models:\n‚Ä¢ RBAC-ABAC Integration f√ºr optimale Balance zwischen Einfachheit und Flexibilit√§t\n‚Ä¢ Relationship-Based Access Control f√ºr komplexe organisatorische Beziehungen\n‚Ä¢ Task-Based Access Control f√ºr prozessorientierte Zugriffskontrolle\n‚Ä¢ Context-Aware Authorization f√ºr situationsabh√§ngige Berechtigungen\n‚Ä¢ Risk-Based Authorization f√ºr dynamische Anpassung basierend auf Bedrohungslandschaft\n\n‚ö° Zero Trust und Least Privilege Prinzipien:\n‚Ä¢ Just-in-Time Access f√ºr tempor√§re Berechtigungserh√∂hung bei Bedarf\n‚Ä¢ Continuous Authorization f√ºr laufende Neubewertung von Zugriffsrechten\n‚Ä¢ Micro-Segmentation f√ºr granulare Netzwerk- und Anwendungszugriffe\n‚Ä¢ Privileged Access Management f√ºr kritische und administrative Berechtigungen\n‚Ä¢ Automated Privilege Escalation und De-escalation basierend auf Gesch√§ftsanforderungen\n\nüìä Policy Management und Governance:\n‚Ä¢ Centralized Policy Administration f√ºr konsistente Regelanwendung √ºber alle Systeme\n‚Ä¢ Policy Simulation und Testing f√ºr Validierung vor Produktionseinf√ºhrung\n‚Ä¢ Automated Policy Conflict Detection f√ºr Identifikation widerspr√ºchlicher Regeln\n‚Ä¢ Policy Versioning und Rollback f√ºr sichere √Ñnderungsverwaltung\n‚Ä¢ Compliance Mapping f√ºr automatische Zuordnung zu regulatorischen Anforderungen\n\nüîç Advanced Authorization Capabilities:\n‚Ä¢ Machine Learning-basierte Anomaly Detection f√ºr ungew√∂hnliche Zugriffsmuster\n‚Ä¢ Predictive Authorization f√ºr proaktive Berechtigungsanpassungen\n‚Ä¢ Graph-based Access Control f√ºr komplexe Beziehungsmodelle\n‚Ä¢ API-level Authorization f√ºr Microservices und moderne Anwendungsarchitekturen\n‚Ä¢ Cross-Domain Authorization f√ºr f√∂derierte Umgebungen und Partner-Integration"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Welche Rolle spielt Privileged Access Management in der IAM-Architektur und wie sch√ºtzt es kritische Unternehmensressourcen?',
        answer: "Privileged Access Management ist das Hochsicherheitszentrum jeder IAM-Architektur und sch√ºtzt die wertvollsten und kritischsten Unternehmensressourcen vor internen und externen Bedrohungen. PAM geht weit √ºber traditionelle Passwort-Safes hinaus und umfasst eine umfassende Sicherheitsstrategie f√ºr alle privilegierten Identit√§ten und Zugriffe.\n\nüõ°Ô∏è Privileged Account Discovery und Inventory:\n‚Ä¢ Automated Discovery f√ºr Identifikation aller privilegierten Accounts √ºber alle Systeme\n‚Ä¢ Service Account Management f√ºr nicht-menschliche Identit√§ten und Anwendungskonten\n‚Ä¢ Shared Account Control f√ºr gemeinsam genutzte administrative Konten\n‚Ä¢ Orphaned Account Detection f√ºr verwaiste und vergessene privilegierte Konten\n‚Ä¢ Privileged Entitlement Analytics f√ºr Risikobewertung und Optimierung\n\nüîê Credential Management und Vaulting:\n‚Ä¢ Centralized Password Vaulting mit Enterprise-grade Verschl√ºsselung und HSM-Integration\n‚Ä¢ Automated Password Rotation f√ºr regelm√§√üige √Ñnderung ohne Serviceunterbrechung\n‚Ä¢ SSH Key Management f√ºr sichere Server-zu-Server-Kommunikation\n‚Ä¢ API Key und Certificate Management f√ºr moderne Anwendungslandschaften\n‚Ä¢ Emergency Access Procedures f√ºr Break-Glass-Szenarien und Notfallzugriffe\n\n‚ö° Just-in-Time und Just-Enough Access:\n‚Ä¢ Temporary Privilege Elevation f√ºr zeitlich begrenzte Berechtigungserh√∂hung\n‚Ä¢ Workflow-based Approval f√ºr kontrollierte Genehmigungsprozesse\n‚Ä¢ Risk-based Access Decisions f√ºr dynamische Zugriffsentscheidungen\n‚Ä¢ Automated Privilege Revocation nach Ablauf oder Aufgabenerf√ºllung\n‚Ä¢ Contextual Access Controls basierend auf Gesch√§ftsanforderungen und Risikobewertung\n\nüìπ Session Monitoring und Recording:\n‚Ä¢ Comprehensive Session Recording f√ºr vollst√§ndige Nachverfolgung privilegierter Aktivit√§ten\n‚Ä¢ Real-time Session Monitoring mit Anomaly Detection und Alerting\n‚Ä¢ Keystroke Logging und Screen Recording f√ºr forensische Analyse\n‚Ä¢ Command Filtering und Blocking f√ºr Verhinderung gef√§hrlicher Aktionen\n‚Ä¢ Live Session Intervention f√ºr sofortige Reaktion auf verd√§chtige Aktivit√§ten\n\nüîç Privileged Analytics und Threat Detection:\n‚Ä¢ Behavioral Analytics f√ºr Erkennung anomaler privilegierter Aktivit√§ten\n‚Ä¢ Machine Learning-basierte Risk Scoring f√ºr kontinuierliche Risikobewertung\n‚Ä¢ Threat Intelligence Integration f√ºr proaktive Bedrohungserkennung\n‚Ä¢ Insider Threat Detection f√ºr Identifikation b√∂swilliger interner Akteure\n‚Ä¢ Automated Incident Response f√ºr schnelle Reaktion auf Sicherheitsvorf√§lle\n\nüåê Cloud und DevOps Integration:\n‚Ä¢ Cloud Privileged Access f√ºr AWS, Azure, GCP und Multi-Cloud-Umgebungen\n‚Ä¢ DevOps Secrets Management f√ºr CI/CD-Pipelines und Container-Umgebungen\n‚Ä¢ Infrastructure as Code Integration f√ºr automatisierte Berechtigungsverwaltung\n‚Ä¢ Kubernetes RBAC Integration f√ºr Container-Orchestrierung\n‚Ä¢ API-driven PAM f√ºr moderne Anwendungsarchitekturen und Microservices\n\nüìä Compliance und Audit Support:\n‚Ä¢ Comprehensive Audit Trails f√ºr regulatorische Compliance und forensische Analyse\n‚Ä¢ Automated Compliance Reporting f√ºr SOX, PCI-DSS, HIPAA und andere Standards\n‚Ä¢ Segregation of Duties Enforcement f√ºr automatische Konfliktverhinderung\n‚Ä¢ Privileged User Certification f√ºr regelm√§√üige √úberpr√ºfung und Validierung\n‚Ä¢ Risk Assessment und Remediation f√ºr kontinuierliche Sicherheitsverbesserung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Wie gew√§hrleistet Identity Governance kontinuierliche Compliance und optimiert Zugriffsrechte in dynamischen Gesch√§ftsumgebungen?',
        answer: "Identity Governance transformiert IAM von einer reaktiven zu einer proaktiven, intelligenten Disziplin, die kontinuierlich Zugriffsrechte optimiert, Compliance sicherstellt und Gesch√§ftsrisiken minimiert. Es verbindet technische Identit√§tsverwaltung mit strategischen Gesch√§ftszielen und regulatorischen Anforderungen.\n\nüéØ Continuous Access Certification und Review:\n‚Ä¢ Automated Certification Campaigns f√ºr regelm√§√üige √úberpr√ºfung aller Zugriffsrechte\n‚Ä¢ Risk-based Certification mit Priorisierung kritischer und risikoreicher Berechtigungen\n‚Ä¢ Manager-driven Reviews f√ºr gesch√§ftsorientierte Entscheidungsfindung\n‚Ä¢ Peer-based Certification f√ºr fachspezifische Validierung von Zugriffsrechten\n‚Ä¢ Exception Handling und Remediation f√ºr systematische Behandlung von Abweichungen\n\nüìä Access Analytics und Intelligence:\n‚Ä¢ Usage Analytics f√ºr datengetriebene Entscheidungen √ºber Berechtigungsoptimierung\n‚Ä¢ Entitlement Mining f√ºr Identifikation von Zugriffsmustern und Rollenoptimierung\n‚Ä¢ Toxic Combinations Detection f√ºr automatische Erkennung gef√§hrlicher Berechtigungskombinationen\n‚Ä¢ Dormant Account Analysis f√ºr Identifikation ungenutzter und verwaister Konten\n‚Ä¢ Access Trend Analysis f√ºr proaktive Kapazit√§tsplanung und Risikomanagement\n\nüîÑ Automated Provisioning und Lifecycle Management:\n‚Ä¢ Birthright Provisioning f√ºr automatische Grundberechtigungen neuer Mitarbeiter\n‚Ä¢ Role-based Provisioning mit intelligenter Rollenzuweisung basierend auf Gesch√§ftskontext\n‚Ä¢ Joiner-Mover-Leaver Processes f√ºr vollst√§ndige Lifecycle-Automatisierung\n‚Ä¢ Temporary Access Management f√ºr zeitlich begrenzte Projektberechtigungen\n‚Ä¢ Automated Deprovisioning f√ºr sichere Entfernung von Zugriffsrechten bei Ausscheiden\n\nüõ°Ô∏è Risk-based Governance und Compliance:\n‚Ä¢ Continuous Risk Assessment f√ºr laufende Bewertung von Identit√§ts- und Zugriffsrisiken\n‚Ä¢ Regulatory Compliance Mapping f√ºr automatische Zuordnung zu Compliance-Anforderungen\n‚Ä¢ Policy Violation Detection f√ºr Real-time Erkennung von Richtlinienverst√∂√üen\n‚Ä¢ Segregation of Duties Monitoring f√ºr kontinuierliche √úberwachung kritischer Trennungen\n‚Ä¢ Audit Trail Management f√ºr umfassende Nachverfolgung aller Governance-Aktivit√§ten\n\n‚öôÔ∏è Business-driven Identity Governance:\n‚Ä¢ Business Role Modeling f√ºr Ausrichtung technischer Rollen an Gesch√§ftsfunktionen\n‚Ä¢ Application Owner Integration f√ºr dezentrale Verantwortung und Entscheidungsfindung\n‚Ä¢ Data Owner Governance f√ºr datenzentrierte Zugriffskontrolle und Klassifizierung\n‚Ä¢ Business Process Integration f√ºr nahtlose Einbindung in Gesch√§ftsabl√§ufe\n‚Ä¢ Cost Center Allocation f√ºr transparente Kostenzuordnung und Budgetierung\n\nüîç Advanced Governance Capabilities:\n‚Ä¢ Machine Learning-basierte Anomaly Detection f√ºr intelligente Risikobewertung\n‚Ä¢ Predictive Analytics f√ºr proaktive Identifikation potenzieller Compliance-Probleme\n‚Ä¢ Natural Language Processing f√ºr automatische Policy-Interpretation und -Anwendung\n‚Ä¢ Graph Analytics f√ºr komplexe Beziehungsanalyse und Risikobewertung\n‚Ä¢ Blockchain Integration f√ºr unver√§nderliche Audit-Trails und Compliance-Nachweise\n\nüìà Continuous Improvement und Optimization:\n‚Ä¢ Governance Metrics und KPIs f√ºr messbare Verbesserung der Governance-Effektivit√§t\n‚Ä¢ Benchmarking und Best Practice Integration f√ºr kontinuierliche Optimierung\n‚Ä¢ Feedback Loops f√ºr iterative Verbesserung von Governance-Prozessen\n‚Ä¢ Automation Opportunities Identification f√ºr weitere Effizienzsteigerungen\n‚Ä¢ Strategic Governance Roadmap f√ºr langfristige Entwicklung und Innovation"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
