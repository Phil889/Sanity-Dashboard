import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating Was ist IAM page with FAQ batch 4...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'was-ist-iam' })
    
    if (!existingDoc) {
      throw new Error('Document "was-ist-iam" not found')
    }
    
    // Create new FAQs for IAM security and compliance
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 13),
        question: 'Welche Compliance-Anforderungen muss ein modernes IAM-System erf√ºllen und wie automatisiert man regulatorische Berichterstattung?',
        answer: "Moderne IAM-Systeme stehen im Zentrum komplexer regulatorischer Landschaften und m√ºssen eine Vielzahl von Compliance-Anforderungen erf√ºllen. Die Automatisierung der Compliance-Berichterstattung transformiert IAM von einer Compliance-Belastung zu einem strategischen Compliance-Enabler, der kontinuierliche Konformit√§t gew√§hrleistet und Audit-Bereitschaft sicherstellt.\n\nüìã Zentrale Compliance-Frameworks und Anforderungen:\n‚Ä¢ DSGVO f√ºr Datenschutz und Privacy-by-Design mit umfassenden Benutzerrechten\n‚Ä¢ SOX f√ºr interne Kontrollen und Segregation of Duties in Finanzprozessen\n‚Ä¢ HIPAA f√ºr Gesundheitsdatenschutz mit strengen Zugriffskontroll-Anforderungen\n‚Ä¢ PCI-DSS f√ºr Kreditkartendaten-Sicherheit mit detaillierten Zugriffsprotokollen\n‚Ä¢ ISO 27001 f√ºr Informationssicherheits-Management-Systeme\n\nüîê Identity-spezifische Compliance-Kontrollen:\n‚Ä¢ Access Certification f√ºr regelm√§√üige √úberpr√ºfung und Validierung aller Benutzerrechte\n‚Ä¢ Segregation of Duties f√ºr automatische Erkennung und Verhinderung von Interessenkonflikten\n‚Ä¢ Privileged Access Controls f√ºr strenge √úberwachung administrativer Berechtigungen\n‚Ä¢ Data Access Governance f√ºr datenschutzrechtliche Compliance und Klassifizierung\n‚Ä¢ Audit Trail Completeness f√ºr l√ºckenlose Nachverfolgung aller Identit√§ts-Aktivit√§ten\n\nü§ñ Automated Compliance Reporting:\n‚Ä¢ Real-time Compliance Dashboards f√ºr kontinuierliche √úberwachung des Compliance-Status\n‚Ä¢ Automated Report Generation f√ºr regulatorische Berichte und Audit-Dokumentation\n‚Ä¢ Exception Reporting f√ºr automatische Identifikation von Compliance-Verst√∂√üen\n‚Ä¢ Trend Analysis f√ºr proaktive Identifikation potenzieller Compliance-Risiken\n‚Ä¢ Regulatory Change Management f√ºr automatische Anpassung an neue Anforderungen\n\nüìä Audit-Bereitschaft und Evidence Collection:\n‚Ä¢ Comprehensive Audit Trails f√ºr vollst√§ndige Nachverfolgung aller IAM-Aktivit√§ten\n‚Ä¢ Evidence Automation f√ºr automatische Sammlung und Aufbereitung von Audit-Belegen\n‚Ä¢ Control Testing Automation f√ºr kontinuierliche Validierung von Sicherheitskontrollen\n‚Ä¢ Remediation Tracking f√ºr systematische Behandlung identifizierter Schwachstellen\n‚Ä¢ Audit Workflow Integration f√ºr nahtlose Zusammenarbeit mit internen und externen Auditoren\n\nüåç Internationale und branchenspezifische Anforderungen:\n‚Ä¢ GDPR Right to be Forgotten f√ºr automatisierte L√∂schung von Identit√§tsdaten\n‚Ä¢ Financial Services Regulations f√ºr strenge Kontrollen in Banken und Finanzinstituten\n‚Ä¢ Healthcare Compliance f√ºr HIPAA und andere medizinische Datenschutzbestimmungen\n‚Ä¢ Government Security Clearances f√ºr beh√∂rdliche Sicherheitsanforderungen\n‚Ä¢ Cross-border Data Transfer Compliance f√ºr internationale Gesch√§ftst√§tigkeit\n\nüîÑ Continuous Compliance und Risk Management:\n‚Ä¢ Risk-based Compliance Monitoring f√ºr dynamische Anpassung an Bedrohungslandschaft\n‚Ä¢ Predictive Compliance Analytics f√ºr proaktive Identifikation potenzieller Verst√∂√üe\n‚Ä¢ Automated Remediation f√ºr schnelle Behebung identifizierter Compliance-Probleme\n‚Ä¢ Compliance Training Integration f√ºr kontinuierliche Sensibilisierung der Mitarbeiter\n‚Ä¢ Third-party Risk Assessment f√ºr Compliance-Bewertung von Lieferanten und Partnern"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 14),
        question: 'Wie implementiert man Zero Trust Prinzipien in IAM-Architekturen und welche Sicherheitsvorteile entstehen dadurch?',
        answer: "Zero Trust revolutioniert IAM-Architekturen durch die fundamentale Annahme, dass kein Benutzer, Ger√§t oder Netzwerk standardm√§√üig vertrauensw√ºrdig ist. Diese Philosophie transformiert IAM von perimeter-basierter zu identit√§tszentrierter Sicherheit und schafft eine adaptive, kontextbewusste Sicherheitsarchitektur, die kontinuierliche Verifikation und Risikobewertung erm√∂glicht.\n\nüõ°Ô∏è Fundamentale Zero Trust Prinzipien in IAM:\n‚Ä¢ Never Trust, Always Verify f√ºr kontinuierliche Authentifizierung und Autorisierung\n‚Ä¢ Least Privilege Access f√ºr minimale Berechtigungen basierend auf aktuellen Anforderungen\n‚Ä¢ Assume Breach f√ºr proaktive Sicherheitsma√ünahmen und Incident Response\n‚Ä¢ Verify Explicitly f√ºr umfassende Kontext-Bewertung bei jeder Zugriffsentscheidung\n‚Ä¢ Continuous Monitoring f√ºr Real-time Risikobewertung und adaptive Sicherheitskontrollen\n\nüîç Identity-zentrierte Sicherheitsarchitektur:\n‚Ä¢ Identity as the New Perimeter f√ºr zentrale Rolle der Identit√§t in Sicherheitsentscheidungen\n‚Ä¢ Contextual Authentication f√ºr dynamische Sicherheitsanforderungen basierend auf Risikobewertung\n‚Ä¢ Device Trust Assessment f√ºr kontinuierliche Bewertung der Ger√§tesicherheit\n‚Ä¢ Network Location Independence f√ºr sicheren Zugriff unabh√§ngig vom Netzwerkstandort\n‚Ä¢ Application-level Security f√ºr granulare Kontrolle auf Anwendungsebene\n\n‚ö° Adaptive und Risk-based Security:\n‚Ä¢ Real-time Risk Scoring f√ºr dynamische Bewertung von Benutzer- und Zugriffsrisiken\n‚Ä¢ Behavioral Analytics f√ºr Erkennung anomaler Aktivit√§ten und Bedrohungen\n‚Ä¢ Machine Learning-basierte Threat Detection f√ºr intelligente Anomaly Detection\n‚Ä¢ Contextual Access Controls f√ºr situationsabh√§ngige Sicherheitsanforderungen\n‚Ä¢ Automated Response f√ºr schnelle Reaktion auf identifizierte Bedrohungen\n\nüîê Micro-Segmentation und Granulare Kontrollen:\n‚Ä¢ Network Micro-Segmentation f√ºr isolierte Sicherheitszonen und Lateral Movement Prevention\n‚Ä¢ Application-level Segmentation f√ºr granulare Kontrolle auf Funktionsebene\n‚Ä¢ Data-centric Security f√ºr schutzbasierte Zugriffskontrolle auf Datenebene\n‚Ä¢ API-level Authorization f√ºr sichere Microservices-Kommunikation\n‚Ä¢ Session-based Controls f√ºr dynamische Sicherheitsanpassungen w√§hrend der Nutzung\n\nüìä Continuous Verification und Monitoring:\n‚Ä¢ Session Monitoring f√ºr kontinuierliche √úberwachung von Benutzeraktivit√§ten\n‚Ä¢ Privilege Escalation Detection f√ºr Erkennung unautorisierten Berechtigungsaufbaus\n‚Ä¢ Anomaly Detection f√ºr Identifikation ungew√∂hnlicher Zugriffsmuster\n‚Ä¢ Threat Intelligence Integration f√ºr proaktive Bedrohungserkennung\n‚Ä¢ Automated Incident Response f√ºr schnelle Reaktion auf Sicherheitsvorf√§lle\n\nüåê Cloud-native Zero Trust Implementation:\n‚Ä¢ Identity Provider Integration f√ºr zentrale Authentifizierung und Autorisierung\n‚Ä¢ Cloud Security Posture Management f√ºr kontinuierliche Sicherheitsbewertung\n‚Ä¢ Container Security f√ºr sichere Microservices-Deployments\n‚Ä¢ Serverless Security f√ºr ereignisgesteuerte Sicherheitskontrollen\n‚Ä¢ Multi-Cloud Security f√ºr einheitliche Sicherheit √ºber verschiedene Cloud-Provider\n\nüéØ Business Benefits und Strategic Advantages:\n‚Ä¢ Reduced Attack Surface durch minimale Berechtigungen und Micro-Segmentation\n‚Ä¢ Improved Incident Response durch kontinuierliche √úberwachung und automatisierte Reaktion\n‚Ä¢ Enhanced Compliance durch umfassende Audit-Trails und Kontrollen\n‚Ä¢ Increased Agility durch sichere Remote Work und Cloud-Adoption\n‚Ä¢ Better User Experience durch adaptive Sicherheit und nahtlose Authentifizierung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 15),
        question: 'Welche Bedrohungen und Angriffsvektoren zielen spezifisch auf IAM-Systeme ab und wie sch√ºtzt man sich effektiv davor?',
        answer: "IAM-Systeme sind hochwertige Ziele f√ºr Cyberkriminelle, da sie den Schl√ºssel zu allen Unternehmensressourcen darstellen. Ein umfassendes Verst√§ndnis der Bedrohungslandschaft und proaktive Schutzma√ünahmen sind essentiell, um die Integrit√§t und Sicherheit von Identity Management Systemen zu gew√§hrleisten und Advanced Persistent Threats abzuwehren.\n\nüéØ Prim√§re IAM-Angriffsvektoren:\n‚Ä¢ Credential Stuffing und Password Spraying f√ºr Brute-Force-Angriffe auf Benutzerkonten\n‚Ä¢ Phishing und Social Engineering f√ºr Diebstahl von Authentifizierungsdaten\n‚Ä¢ Privilege Escalation f√ºr unautorisierten Zugriff auf administrative Funktionen\n‚Ä¢ Session Hijacking f√ºr √úbernahme aktiver Benutzersitzungen\n‚Ä¢ Identity Provider Attacks f√ºr Kompromittierung zentraler Authentifizierungssysteme\n\nüîì Advanced Persistent Threats gegen IAM:\n‚Ä¢ Supply Chain Attacks f√ºr Kompromittierung von IAM-Komponenten und -Lieferanten\n‚Ä¢ Zero-Day Exploits f√ºr Ausnutzung unbekannter Schwachstellen in IAM-Software\n‚Ä¢ Insider Threats f√ºr b√∂swillige Aktivit√§ten privilegierter Benutzer\n‚Ä¢ API Attacks f√ºr Ausnutzung von Schwachstellen in IAM-Schnittstellen\n‚Ä¢ Cloud Infrastructure Attacks f√ºr Kompromittierung cloud-basierter IAM-Services\n\nüõ°Ô∏è Multi-layered Defense Strategies:\n‚Ä¢ Defense in Depth f√ºr mehrschichtige Sicherheitskontrollen und Redundanz\n‚Ä¢ Threat Intelligence Integration f√ºr proaktive Bedrohungserkennung und -abwehr\n‚Ä¢ Security Information and Event Management f√ºr zentrale √úberwachung und Korrelation\n‚Ä¢ Incident Response Planning f√ºr schnelle und effektive Reaktion auf Sicherheitsvorf√§lle\n‚Ä¢ Regular Security Assessments f√ºr kontinuierliche Bewertung der Sicherheitslage\n\nüîç Proactive Threat Detection:\n‚Ä¢ Behavioral Analytics f√ºr Erkennung anomaler Benutzer- und Systemaktivit√§ten\n‚Ä¢ Machine Learning-basierte Anomaly Detection f√ºr intelligente Bedrohungserkennung\n‚Ä¢ User and Entity Behavior Analytics f√ºr umfassende Verhaltensanalyse\n‚Ä¢ Threat Hunting f√ºr proaktive Suche nach versteckten Bedrohungen\n‚Ä¢ Deception Technology f√ºr Fr√ºherkennung von Angreifern im Netzwerk\n\n‚ö° Real-time Response und Mitigation:\n‚Ä¢ Automated Threat Response f√ºr sofortige Reaktion auf identifizierte Bedrohungen\n‚Ä¢ Dynamic Risk Scoring f√ºr adaptive Sicherheitsma√ünahmen basierend auf Bedrohungslage\n‚Ä¢ Quarantine und Isolation f√ºr schnelle Eind√§mmung kompromittierter Identit√§ten\n‚Ä¢ Forensic Capabilities f√ºr detaillierte Analyse von Sicherheitsvorf√§llen\n‚Ä¢ Recovery Procedures f√ºr schnelle Wiederherstellung nach Sicherheitsvorf√§llen\n\nüîê Hardening und Resilience:\n‚Ä¢ Security Configuration Management f√ºr sichere Konfiguration aller IAM-Komponenten\n‚Ä¢ Vulnerability Management f√ºr systematische Identifikation und Behebung von Schwachstellen\n‚Ä¢ Patch Management f√ºr zeitnahe Installation von Sicherheitsupdates\n‚Ä¢ Backup und Recovery f√ºr Schutz vor Datenverlust und Ransomware\n‚Ä¢ Business Continuity Planning f√ºr Aufrechterhaltung kritischer IAM-Services\n\nüìö Security Awareness und Training:\n‚Ä¢ User Security Training f√ºr Sensibilisierung gegen Social Engineering und Phishing\n‚Ä¢ Administrator Training f√ºr sichere Verwaltung von IAM-Systemen\n‚Ä¢ Incident Response Training f√ºr effektive Reaktion auf Sicherheitsvorf√§lle\n‚Ä¢ Security Culture Development f√ºr organisationsweite Sicherheitsbewusstsein\n‚Ä¢ Regular Security Drills f√ºr Validierung von Sicherheitsprozeduren und -f√§higkeiten"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 16),
        question: 'Wie gestaltet man Customer Identity und Access Management f√ºr externe Benutzer und welche besonderen Herausforderungen entstehen dabei?',
        answer: "Customer Identity and Access Management erweitert IAM √ºber Unternehmensgrenzen hinaus und schafft sichere, skalierbare Identit√§tsl√∂sungen f√ºr Millionen externer Benutzer. CIAM erfordert eine fundamental andere Herangehensweise als Enterprise IAM, da es Benutzerfreundlichkeit, Skalierbarkeit und Datenschutz in den Vordergrund stellt, w√§hrend es gleichzeitig robuste Sicherheit gew√§hrleistet.\n\nüë• CIAM vs. Enterprise IAM Unterschiede:\n‚Ä¢ Scale Considerations f√ºr Millionen von Benutzern statt Tausenden von Mitarbeitern\n‚Ä¢ User Experience Focus f√ºr nahtlose, frictionless Authentifizierung und Self-Service\n‚Ä¢ Privacy-by-Design f√ºr DSGVO-Compliance und Datenschutz-Anforderungen\n‚Ä¢ Self-Registration und Social Login f√ºr benutzerfreundliche Onboarding-Prozesse\n‚Ä¢ Consumer-grade Security f√ºr Balance zwischen Sicherheit und Benutzerfreundlichkeit\n\nüöÄ Skalierbarkeit und Performance:\n‚Ä¢ Cloud-native Architecture f√ºr elastische Skalierung und globale Verf√ºgbarkeit\n‚Ä¢ Content Delivery Networks f√ºr optimale Performance und niedrige Latenz\n‚Ä¢ Database Sharding f√ºr horizontale Skalierung von Identit√§tsdaten\n‚Ä¢ Caching Strategies f√ºr schnelle Authentifizierung und Autorisierung\n‚Ä¢ Load Balancing f√ºr gleichm√§√üige Verteilung der Benutzerlast\n\nüé® User Experience und Journey Optimization:\n‚Ä¢ Frictionless Registration f√ºr minimale Barrieren beim Onboarding\n‚Ä¢ Progressive Profiling f√ºr schrittweise Sammlung von Benutzerinformationen\n‚Ä¢ Social Login Integration f√ºr vereinfachte Authentifizierung √ºber bekannte Plattformen\n‚Ä¢ Mobile-first Design f√ºr optimale Erfahrung auf mobilen Ger√§ten\n‚Ä¢ Personalization f√ºr ma√ügeschneiderte Benutzererfahrungen\n\nüîê Security und Fraud Prevention:\n‚Ä¢ Risk-based Authentication f√ºr adaptive Sicherheitsma√ünahmen\n‚Ä¢ Device Fingerprinting f√ºr Erkennung verd√§chtiger Ger√§te und Aktivit√§ten\n‚Ä¢ Bot Detection f√ºr Schutz vor automatisierten Angriffen\n‚Ä¢ Account Takeover Protection f√ºr Schutz vor Konto√ºbernahmen\n‚Ä¢ Fraud Analytics f√ºr Erkennung betr√ºgerischer Aktivit√§ten\n\nüìä Privacy und Consent Management:\n‚Ä¢ Consent Management Platforms f√ºr DSGVO-konforme Einwilligungsverwaltung\n‚Ä¢ Data Minimization f√ºr Sammlung nur notwendiger Benutzerinformationen\n‚Ä¢ Right to be Forgotten f√ºr automatisierte L√∂schung von Benutzerdaten\n‚Ä¢ Privacy Preferences f√ºr granulare Kontrolle √ºber Datenschutz-Einstellungen\n‚Ä¢ Transparent Data Usage f√ºr klare Kommunikation der Datenverwendung\n\nüåê Multi-channel und Omnichannel Integration:\n‚Ä¢ Cross-channel Identity f√ºr einheitliche Identit√§t √ºber alle Touchpoints\n‚Ä¢ Single Sign-On f√ºr nahtlose Erfahrung √ºber verschiedene Anwendungen\n‚Ä¢ API-first Architecture f√ºr flexible Integration in verschiedene Kan√§le\n‚Ä¢ Real-time Synchronization f√ºr konsistente Benutzerdaten √ºber alle Systeme\n‚Ä¢ Offline Capabilities f√ºr Funktionalit√§t auch ohne Internetverbindung\n\nüìà Analytics und Business Intelligence:\n‚Ä¢ User Journey Analytics f√ºr Verst√§ndnis des Benutzerverhaltens\n‚Ä¢ Conversion Optimization f√ºr Verbesserung der Registrierungs- und Login-Raten\n‚Ä¢ Segmentation und Targeting f√ºr personalisierte Marketingkampagnen\n‚Ä¢ A/B Testing f√ºr kontinuierliche Optimierung der Benutzererfahrung\n‚Ä¢ Customer Lifetime Value Analysis f√ºr gesch√§ftsorientierte Identit√§ts-Insights\n\nüîß Integration und Ecosystem Management:\n‚Ä¢ Third-party Integration f√ºr Anbindung von Marketing- und CRM-Systemen\n‚Ä¢ Partner Federation f√ºr sichere Identit√§tsfreigabe mit Gesch√§ftspartnern\n‚Ä¢ Marketplace Integration f√ºr einheitliche Identit√§t in Multi-Vendor-Umgebungen\n‚Ä¢ Legacy System Integration f√ºr schrittweise Modernisierung bestehender Systeme\n‚Ä¢ Vendor Management f√ºr optimale Auswahl und Integration von CIAM-L√∂sungen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 4 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
