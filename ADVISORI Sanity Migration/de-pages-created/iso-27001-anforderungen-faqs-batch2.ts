import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating ISO 27001 Anforderungen page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iso-27001-anforderungen' })
    
    if (!existingDoc) {
      throw new Error('Document "iso-27001-anforderungen" not found')
    }
    
    // Create new FAQs for ISO 27001 implementation and compliance aspects
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Welche spezifischen Anforderungen stellt ISO 27001 an das Risikomanagement und wie werden diese systematisch umgesetzt?',
        answer: "Das Risikomanagement bildet das Herzst√ºck der ISO 27001 und unterliegt spezifischen, detaillierten Anforderungen, die eine systematische und nachvollziehbare Herangehensweise an Informationssicherheitsrisiken gew√§hrleisten. Diese Anforderungen gehen weit √ºber eine oberfl√§chliche Risikobetrachtung hinaus und erfordern eine tiefgreifende, methodische Auseinandersetzung mit allen Aspekten der Informationssicherheit.\n\nüéØ Systematische Risikobeurteilungsmethodik:\n‚Ä¢ Entwicklung und Dokumentation einer konsistenten Risikobeurteilungsmethodik, die alle relevanten Aspekte der Informationssicherheit abdeckt und reproduzierbare Ergebnisse liefert\n‚Ä¢ Definition klarer Kriterien f√ºr Risikoakzeptanz, Risikobewertung und Risikobehandlung, die mit den Gesch√§ftszielen und der Risikobereitschaft der Organisation √ºbereinstimmen\n‚Ä¢ Etablierung systematischer Verfahren zur Identifikation von Informationswerten, Bedrohungen, Schwachstellen und deren potenziellen Auswirkungen\n‚Ä¢ Implementierung strukturierter Bewertungsverfahren f√ºr Eintrittswahrscheinlichkeiten und Schadensausma√ü unter Ber√ºcksichtigung qualitativer und quantitativer Faktoren\n‚Ä¢ Regelm√§√üige √úberpr√ºfung und Anpassung der Risikomanagement-Methodik an ver√§nderte Gesch√§ftsanforderungen und Bedrohungslandschaften\n\nüîç Umfassende Risikoidentifikation und -analyse:\n‚Ä¢ Systematische Identifikation aller Informationswerte innerhalb des ISMS-Anwendungsbereichs einschlie√ülich Daten, Systeme, Prozesse und physische Assets\n‚Ä¢ Detaillierte Analyse der Bedrohungslandschaft unter Ber√ºcksichtigung interner und externer Bedrohungsquellen sowie deren Entwicklungstrends\n‚Ä¢ Bewertung organisatorischer, technischer und physischer Schwachstellen durch strukturierte Assessments und Penetrationstests\n‚Ä¢ Analyse von Abh√§ngigkeiten zwischen verschiedenen Informationswerten und deren Auswirkungen auf das Gesamtrisiko\n‚Ä¢ Ber√ºcksichtigung regulatorischer, vertraglicher und gesch√§ftlicher Anforderungen bei der Risikoidentifikation\n\nüìä Strukturierte Risikobewertung und -priorisierung:\n‚Ä¢ Anwendung konsistenter Bewertungskriterien f√ºr die Einsch√§tzung von Eintrittswahrscheinlichkeiten und Schadensausma√ü\n‚Ä¢ Entwicklung einer Risikomatrix oder eines Risikoscoring-Systems zur objektiven Risikobewertung und -vergleichbarkeit\n‚Ä¢ Ber√ºcksichtigung bestehender Kontrollma√ünahmen bei der Bewertung des Restrisikos\n‚Ä¢ Priorisierung der Risiken basierend auf ihrer Bedeutung f√ºr die Gesch√§ftsziele und kritischen Gesch√§ftsprozesse\n‚Ä¢ Dokumentation aller Bewertungsentscheidungen und deren Begr√ºndung f√ºr Nachvollziehbarkeit und Audit-Zwecke\n\nüõ°Ô∏è Systematische Risikobehandlung:\n‚Ä¢ Entwicklung umfassender Risikobehandlungspl√§ne mit konkreten Ma√ünahmen, Verantwortlichkeiten und Zeitpl√§nen\n‚Ä¢ Auswahl angemessener Risikobehandlungsoptionen wie Risikominderung, Risikoakzeptanz, Risikovermeidung oder Risikotransfer\n‚Ä¢ Implementierung gezielter Kontrollma√ünahmen zur Behandlung identifizierter Risiken unter Ber√ºcksichtigung von Kosten-Nutzen-Aspekten\n‚Ä¢ √úberwachung der Wirksamkeit implementierter Risikobehandlungsma√ünahmen durch regelm√§√üige Assessments und Messungen\n‚Ä¢ Kontinuierliche Anpassung der Risikobehandlungsstrategien basierend auf ver√§nderten Risikobewertungen und Gesch√§ftsanforderungen\n\nüîÑ Kontinuierliche Risiko√ºberwachung und -√ºberpr√ºfung:\n‚Ä¢ Etablierung systematischer Prozesse zur kontinuierlichen √úberwachung der Risikolandschaft und Fr√ºherkennung neuer Risiken\n‚Ä¢ Regelm√§√üige Aktualisierung der Risikobeurteilung basierend auf ver√§nderten Gesch√§ftsprozessen, Technologien oder Bedrohungen\n‚Ä¢ Implementierung von Risikoindikatoren und Schwellenwerten zur proaktiven Risikosteuerung\n‚Ä¢ Durchf√ºhrung periodischer Risiko-Reviews zur Bewertung der Angemessenheit und Wirksamkeit des Risikomanagement-Prozesses\n‚Ä¢ Integration von Lessons Learned aus Sicherheitsvorf√§llen und externen Entwicklungen in die kontinuierliche Risikobewertung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Wie werden die organisatorischen Anforderungen der ISO 27001 f√ºr F√ºhrung und Verantwortlichkeiten praktisch implementiert?',
        answer: "Die organisatorischen Anforderungen der ISO 27001 f√ºr F√ºhrung und Verantwortlichkeiten sind fundamental f√ºr den Erfolg eines ISMS und erfordern eine durchdachte, systematische Implementierung, die alle Organisationsebenen einbezieht. Diese Anforderungen schaffen das notwendige Fundament f√ºr eine effektive Informationssicherheits-Governance und nachhaltige ISMS-Wirksamkeit.\n\nüëë Top-Management-Engagement und -Verantwortung:\n‚Ä¢ Sichtbare und nachweisbare Verpflichtung des Top-Managements zur Informationssicherheit durch strategische Entscheidungen und Ressourcenbereitstellung\n‚Ä¢ Entwicklung und Kommunikation einer klaren Informationssicherheitspolitik, die die strategische Ausrichtung und Grunds√§tze der Organisation widerspiegelt\n‚Ä¢ Regelm√§√üige Management-Reviews zur strategischen Bewertung der ISMS-Performance und Entscheidungsfindung √ºber notwendige Verbesserungen\n‚Ä¢ Integration von Informationssicherheitszielen in die Gesamtstrategie und Gesch√§ftsplanung der Organisation\n‚Ä¢ Sicherstellung angemessener Ressourcen f√ºr die Etablierung, Implementierung und kontinuierliche Verbesserung des ISMS\n\nüèóÔ∏è Organisationsstruktur und Governance:\n‚Ä¢ Etablierung einer klaren ISMS-Governance-Struktur mit definierten Rollen, Verantwortlichkeiten und Berichtswegen\n‚Ä¢ Benennung eines ISMS-Verantwortlichen oder Chief Information Security Officers mit entsprechenden Befugnissen und Ressourcen\n‚Ä¢ Aufbau eines Informationssicherheits-Komitees oder -Gremiums zur strategischen Steuerung und √úberwachung des ISMS\n‚Ä¢ Definition von Eskalationswegen und Entscheidungsprozessen f√ºr sicherheitsrelevante Angelegenheiten\n‚Ä¢ Integration der Informationssicherheits-Governance in bestehende Unternehmens-Governance-Strukturen\n\nüìã Rollen- und Verantwortlichkeitsmatrix:\n‚Ä¢ Entwicklung einer umfassenden Rollen- und Verantwortlichkeitsmatrix f√ºr alle ISMS-relevanten Aktivit√§ten und Prozesse\n‚Ä¢ Eindeutige Zuordnung von Verantwortlichkeiten f√ºr die Implementierung, √úberwachung und Verbesserung von Kontrollma√ünahmen\n‚Ä¢ Definition von Stellvertretungsregelungen und Backup-Verantwortlichkeiten f√ºr kritische ISMS-Rollen\n‚Ä¢ Ber√ºcksichtigung von Interessenkonflikten und Implementierung angemessener Kontrollen zur Risikominimierung\n‚Ä¢ Regelm√§√üige √úberpr√ºfung und Aktualisierung der Rollen- und Verantwortlichkeitsmatrix bei organisatorischen √Ñnderungen\n\nüéì Kompetenz- und Bewusstseinsanforderungen:\n‚Ä¢ Systematische Bewertung der erforderlichen Kompetenzen f√ºr alle ISMS-relevanten Rollen und Positionen\n‚Ä¢ Entwicklung und Implementierung umfassender Schulungs- und Sensibilisierungsprogramme f√ºr alle Mitarbeiter\n‚Ä¢ Etablierung spezifischer Qualifizierungsanforderungen f√ºr Mitarbeiter in sicherheitskritischen Positionen\n‚Ä¢ Regelm√§√üige Bewertung und Dokumentation der Kompetenzentwicklung und Schulungseffektivit√§t\n‚Ä¢ Aufbau einer Sicherheitskultur durch kontinuierliche Kommunikation und Sensibilisierungsma√ünahmen\n\nüìû Kommunikation und Berichtswesen:\n‚Ä¢ Etablierung systematischer Kommunikationsprozesse f√ºr interne und externe ISMS-relevante Informationen\n‚Ä¢ Entwicklung regelm√§√üiger Berichterstattung √ºber ISMS-Performance, Risiken und Verbesserungsma√ünahmen an das Management\n‚Ä¢ Implementierung von Feedback-Mechanismen f√ºr Mitarbeiter zur kontinuierlichen Verbesserung des ISMS\n‚Ä¢ Aufbau effektiver Kommunikationskan√§le f√ºr Sicherheitsvorf√§lle und Notfallsituationen\n‚Ä¢ Sicherstellung transparenter und zeitnaher Kommunikation bei sicherheitsrelevanten √Ñnderungen oder Vorf√§llen\n\nüîÑ Kontinuierliche Verbesserung der Organisation:\n‚Ä¢ Implementierung systematischer Prozesse zur kontinuierlichen Bewertung und Verbesserung der organisatorischen Strukturen\n‚Ä¢ Regelm√§√üige √úberpr√ºfung der Wirksamkeit der Governance-Strukturen und Anpassung an ver√§nderte Anforderungen\n‚Ä¢ Integration von Lessons Learned aus internen und externen Audits in die organisatorische Weiterentwicklung\n‚Ä¢ Benchmarking mit Branchenstandards und Best Practices zur Identifikation von Verbesserungspotenzialen\n‚Ä¢ Aufbau einer lernenden Organisation, die proaktiv auf neue Herausforderungen und Entwicklungen reagiert"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Welche technischen Anforderungen definiert ISO 27001 und wie werden diese in moderne IT-Landschaften integriert?',
        answer: "Die technischen Anforderungen der ISO 27001 sind umfassend und m√ºssen geschickt in moderne, komplexe IT-Landschaften integriert werden, die Cloud-Services, mobile Technologien, IoT-Ger√§te und hybride Infrastrukturen umfassen. Diese Integration erfordert einen strategischen Ansatz, der sowohl aktuelle als auch zuk√ºnftige technologische Entwicklungen ber√ºcksichtigt.\n\nüîê Zugangskontrollen und Identit√§tsmanagement:\n‚Ä¢ Implementierung robuster Authentifizierungs- und Autorisierungsmechanismen einschlie√ülich Multi-Faktor-Authentifizierung f√ºr kritische Systeme\n‚Ä¢ Etablierung eines umfassenden Identity and Access Management Systems mit zentraler Benutzerverwaltung und rollenbasierter Zugriffskontrolle\n‚Ä¢ Implementierung des Prinzips der minimalen Berechtigung und regelm√§√üige √úberpr√ºfung von Zugriffsrechten\n‚Ä¢ Aufbau sicherer Remote-Access-L√∂sungen f√ºr mobile Arbeitspl√§tze und externe Mitarbeiter\n‚Ä¢ Integration von Privileged Access Management f√ºr administrative und kritische Systemzugriffe\n\nüõ°Ô∏è Kryptographie und Datenschutz:\n‚Ä¢ Implementierung angemessener Verschl√ºsselungsverfahren f√ºr Daten in Ruhe und w√§hrend der √úbertragung\n‚Ä¢ Etablierung eines Kryptographie-Management-Systems mit sicherer Schl√ºsselverwaltung und -rotation\n‚Ä¢ Anwendung von Datenschutz-Technologien wie Anonymisierung und Pseudonymisierung f√ºr sensible Daten\n‚Ä¢ Implementierung von Data Loss Prevention Systemen zur Verhinderung unautorisierten Datenabflusses\n‚Ä¢ Ber√ºcksichtigung von Quantum-Safe-Kryptographie f√ºr zukunftssichere Verschl√ºsselung\n\nüåê Netzwerksicherheit und Segmentierung:\n‚Ä¢ Implementierung von Netzwerksegmentierung und Mikrosegmentierung zur Begrenzung von Sicherheitsvorf√§llen\n‚Ä¢ Aufbau robuster Firewall-Architekturen mit Next-Generation-Firewall-Funktionalit√§ten\n‚Ä¢ Implementierung von Intrusion Detection und Prevention Systemen f√ºr kontinuierliche Bedrohungs√ºberwachung\n‚Ä¢ Etablierung sicherer Netzwerkarchitekturen mit Zero-Trust-Prinzipien\n‚Ä¢ Integration von Network Access Control f√ºr dynamische Zugriffskontrolle basierend auf Ger√§testatus und Benutzeridentit√§t\n\n‚òÅÔ∏è Cloud-Sicherheit und hybride Umgebungen:\n‚Ä¢ Entwicklung umfassender Cloud-Sicherheitsstrategien f√ºr Public, Private und Hybrid-Cloud-Umgebungen\n‚Ä¢ Implementierung von Cloud Security Posture Management f√ºr kontinuierliche √úberwachung der Cloud-Konfiguration\n‚Ä¢ Etablierung sicherer API-Management-Praktiken f√ºr Cloud-Services und Microservices-Architekturen\n‚Ä¢ Aufbau von Container-Sicherheit und Kubernetes-Security f√ºr moderne Anwendungsarchitekturen\n‚Ä¢ Integration von Cloud Access Security Broker L√∂sungen f√ºr erweiterte Cloud-Sicherheitskontrolle\n\nüì± Endpoint-Sicherheit und Mobile Device Management:\n‚Ä¢ Implementierung umfassender Endpoint Detection and Response L√∂sungen f√ºr erweiterte Bedrohungserkennung\n‚Ä¢ Etablierung von Mobile Device Management und Mobile Application Management f√ºr sichere mobile Arbeitspl√§tze\n‚Ä¢ Aufbau von Bring Your Own Device Sicherheitsrichtlinien und -kontrollen\n‚Ä¢ Implementierung von Endpoint-Verschl√ºsselung und sicherer Boot-Prozesse\n‚Ä¢ Integration von IoT-Sicherheitsma√ünahmen f√ºr vernetzte Ger√§te und Smart-Building-Technologien\n\nüîç Monitoring und Incident Response:\n‚Ä¢ Implementierung von Security Information and Event Management Systemen f√ºr zentrale Sicherheits√ºberwachung\n‚Ä¢ Etablierung von Security Orchestration, Automation and Response Plattformen f√ºr effiziente Incident-Response\n‚Ä¢ Aufbau von Threat Intelligence Capabilities f√ºr proaktive Bedrohungserkennung\n‚Ä¢ Implementierung von Digital Forensics und Incident Analysis Capabilities\n‚Ä¢ Integration von Artificial Intelligence und Machine Learning f√ºr erweiterte Anomalieerkennung und Bedrohungsanalyse"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Wie werden die Compliance-Anforderungen der ISO 27001 mit anderen regulatorischen Frameworks harmonisiert?',
        answer: "Die Harmonisierung der ISO 27001 Compliance-Anforderungen mit anderen regulatorischen Frameworks ist eine komplexe, aber essenzielle Aufgabe f√ºr moderne Organisationen, die multiple Compliance-Verpflichtungen erf√ºllen m√ºssen. Eine strategische Herangehensweise erm√∂glicht Synergieeffekte und reduziert den Gesamtaufwand f√ºr Compliance-Management erheblich.\n\nüîó Strategische Framework-Integration:\n‚Ä¢ Entwicklung einer umfassenden Compliance-Landkarte, die alle relevanten regulatorischen Anforderungen wie DORA, NIS2, GDPR, SOX und branchenspezifische Standards systematisch erfasst\n‚Ä¢ Identifikation von √úberschneidungen und Synergien zwischen verschiedenen Frameworks zur Maximierung der Effizienz\n‚Ä¢ Aufbau einer einheitlichen Governance-Struktur, die alle Compliance-Bereiche koordiniert und strategisch steuert\n‚Ä¢ Entwicklung integrierter Compliance-Strategien, die gemeinsame Ziele und Ma√ünahmen f√ºr multiple Frameworks definieren\n‚Ä¢ Etablierung von Cross-Framework-Mapping zur Identifikation gemeinsamer Kontrollziele und Implementierungsans√§tze\n\nüìã Einheitliche Kontrollma√ünahmen-Architektur:\n‚Ä¢ Entwicklung einer konsolidierten Kontrollbibliothek, die Anforderungen aus verschiedenen Frameworks in einheitliche Kontrollma√ünahmen √ºberf√ºhrt\n‚Ä¢ Implementierung von Multi-Purpose-Kontrollen, die gleichzeitig mehrere regulatorische Anforderungen erf√ºllen\n‚Ä¢ Aufbau einer Kontroll-Mapping-Matrix, die zeigt, welche Kontrollma√ünahmen welche Framework-Anforderungen abdecken\n‚Ä¢ Etablierung einheitlicher Kontrollbewertungs- und Testverfahren f√ºr alle relevanten Frameworks\n‚Ä¢ Entwicklung gemeinsamer KPIs und Metriken f√ºr die √úberwachung der Multi-Framework-Compliance\n\nüéØ Risikoorientierte Compliance-Integration:\n‚Ä¢ Integration aller regulatorischen Risiken in ein einheitliches Enterprise Risk Management System\n‚Ä¢ Entwicklung einer konsolidierten Risikobewertungsmethodik, die alle Framework-spezifischen Risikoanforderungen ber√ºcksichtigt\n‚Ä¢ Aufbau von Cross-Framework-Risikobehandlungspl√§nen, die multiple Compliance-Ziele gleichzeitig adressieren\n‚Ä¢ Implementierung einheitlicher Risiko-Monitoring-Prozesse f√ºr alle relevanten regulatorischen Bereiche\n‚Ä¢ Etablierung von Compliance-Risiko-Dashboards f√ºr integrierte √úbersicht √ºber alle Framework-Risiken\n\nüìä Harmonisierte Dokumentation und Berichterstattung:\n‚Ä¢ Entwicklung einer einheitlichen Dokumentationsstruktur, die alle Framework-Anforderungen systematisch abdeckt\n‚Ä¢ Aufbau integrierter Audit-Trails, die gleichzeitig f√ºr multiple Framework-Audits verwendet werden k√∂nnen\n‚Ä¢ Implementierung automatisierter Berichterstattungssysteme, die Framework-spezifische Reports aus gemeinsamen Datenquellen generieren\n‚Ä¢ Etablierung einheitlicher Evidenz-Management-Prozesse f√ºr alle Compliance-Bereiche\n‚Ä¢ Entwicklung von Master-Compliance-Dashboards mit Framework-spezifischen Views und Drill-Down-M√∂glichkeiten\n\nüîÑ Integrierte Audit- und Assessment-Programme:\n‚Ä¢ Entwicklung konsolidierter Audit-Programme, die multiple Framework-Anforderungen in einheitlichen Pr√ºfungszyklen abdecken\n‚Ä¢ Aufbau von Cross-Framework-Assessment-Methodiken f√ºr effiziente und umfassende Compliance-Bewertungen\n‚Ä¢ Implementierung einheitlicher Corrective Action Management Prozesse f√ºr alle Framework-Findings\n‚Ä¢ Etablierung gemeinsamer Audit-Ressourcen und -Kompetenzen f√ºr alle relevanten Compliance-Bereiche\n‚Ä¢ Entwicklung integrierter Continuous Monitoring Ans√§tze f√ºr Real-Time-Compliance-√úberwachung\n\nüöÄ Zukunftsorientierte Compliance-Architektur:\n‚Ä¢ Aufbau flexibler Compliance-Architekturen, die sich schnell an neue regulatorische Anforderungen anpassen k√∂nnen\n‚Ä¢ Implementierung von RegTech-L√∂sungen f√ºr automatisierte Compliance-√úberwachung und -Berichterstattung\n‚Ä¢ Entwicklung von Compliance-as-a-Service-Modellen f√ºr skalierbare und effiziente Framework-Integration\n‚Ä¢ Etablierung von Regulatory Change Management Prozessen f√ºr proaktive Anpassung an neue Anforderungen\n‚Ä¢ Integration von Artificial Intelligence f√ºr predictive Compliance Analytics und automatisierte Risikobewertung"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
