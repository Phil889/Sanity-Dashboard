import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM IT page with FAQ batch 4...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-it' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-it" not found')
    }
    
    // Create new FAQs for security and compliance in IAM IT
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 13),
        question: 'Wie implementiert man Zero Trust Network Architecture f√ºr IAM IT-Infrastrukturen und welche technischen Komponenten sind dabei entscheidend?',
        answer: "Zero Trust Network Architecture f√ºr IAM IT-Infrastrukturen erfordert eine fundamentale Neugestaltung traditioneller Netzwerk-Sicherheitsmodelle, bei der jeder Zugriff kontinuierlich verifiziert wird, unabh√§ngig von der Netzwerkposition. Die technische Umsetzung umfasst mehrere kritische Komponenten und Architektur-Patterns.\n\nüõ°Ô∏è Zero Trust Architecture Principles f√ºr IAM:\n‚Ä¢ Never Trust, Always Verify als fundamentales Sicherheitsprinzip\n‚Ä¢ Least Privilege Access mit minimalen erforderlichen Berechtigungen\n‚Ä¢ Assume Breach Mentalit√§t f√ºr proaktive Sicherheitsma√ünahmen\n‚Ä¢ Continuous Verification f√ºr alle Zugriffe und Transaktionen\n‚Ä¢ Micro-Segmentation f√ºr granulare Netzwerk-Isolation\n\nüîê Identity-Centric Security Framework:\n‚Ä¢ Strong Authentication mit Multi-Factor Authentication (MFA)\n‚Ä¢ Device Trust und Certificate-based Authentication\n‚Ä¢ Behavioral Analytics f√ºr Anomaly Detection\n‚Ä¢ Risk-based Access Control f√ºr adaptive Sicherheitsentscheidungen\n‚Ä¢ Session Management mit kontinuierlicher Re-Authentication\n\nüåê Network Micro-Segmentation:\n‚Ä¢ Software-Defined Perimeter (SDP) f√ºr dynamische Netzwerk-Grenzen\n‚Ä¢ Network Access Control (NAC) f√ºr Device-basierte Zugriffskontrolle\n‚Ä¢ Virtual Private Networks (VPN) mit Zero Trust Principles\n‚Ä¢ Secure Web Gateways f√ºr Web-Traffic-Filtering\n‚Ä¢ Cloud Access Security Brokers (CASB) f√ºr Cloud-Service-Kontrolle\n\nüìä Data Protection und Encryption:\n‚Ä¢ End-to-End Encryption f√ºr alle Daten√ºbertragungen\n‚Ä¢ Data Loss Prevention (DLP) f√ºr sensitive Information\n‚Ä¢ Rights Management f√ºr granulare Datenzugriffskontrolle\n‚Ä¢ Tokenization f√ºr Schutz sensibler Identity-Daten\n‚Ä¢ Key Management f√ºr Encryption-Schl√ºssel-Lifecycle\n\nüîç Continuous Monitoring und Analytics:\n‚Ä¢ Real-time Security Information and Event Management (SIEM)\n‚Ä¢ User and Entity Behavior Analytics (UEBA)\n‚Ä¢ Network Traffic Analysis f√ºr Anomaly Detection\n‚Ä¢ Threat Intelligence Integration f√ºr proaktive Bedrohungserkennung\n‚Ä¢ Security Orchestration f√ºr automatisierte Response\n\n‚öôÔ∏è Technical Implementation Components:\n‚Ä¢ Identity and Access Management (IAM) als zentrale Kontrollinstanz\n‚Ä¢ Policy Enforcement Points (PEP) f√ºr Zugriffskontrolle\n‚Ä¢ Policy Decision Points (PDP) f√ºr Authorization-Entscheidungen\n‚Ä¢ Security Token Service (STS) f√ºr Token-Management\n‚Ä¢ Certificate Authority (CA) f√ºr PKI-basierte Authentication\n\nüèóÔ∏è Architecture Patterns und Integration:\n‚Ä¢ API Gateway mit Zero Trust Enforcement\n‚Ä¢ Service Mesh f√ºr Microservices-Security\n‚Ä¢ Container Security mit Pod Security Policies\n‚Ä¢ Cloud-native Security f√ºr Multi-Cloud Environments\n‚Ä¢ Edge Computing Security f√ºr verteilte Infrastrukturen\n\nüìã Operational Excellence:\n‚Ä¢ Security Policy Management f√ºr konsistente Enforcement\n‚Ä¢ Incident Response f√ºr Zero Trust Environments\n‚Ä¢ Compliance Monitoring f√ºr regulatorische Anforderungen\n‚Ä¢ Performance Optimization f√ºr Security-Overhead\n‚Ä¢ Change Management f√ºr Zero Trust Updates\n\nüß™ Testing und Validation:\n‚Ä¢ Penetration Testing f√ºr Zero Trust Effectiveness\n‚Ä¢ Red Team Exercises f√ºr Attack Simulation\n‚Ä¢ Compliance Auditing f√ºr Regulatory Requirements\n‚Ä¢ Performance Testing f√ºr Security Impact\n‚Ä¢ Continuous Security Assessment f√ºr Improvement Opportunities"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 14),
        question: 'Welche Compliance-Anforderungen m√ºssen bei IAM IT-Infrastrukturen f√ºr DORA, NIS2 und GDPR ber√ºcksichtigt werden und wie automatisiert man deren Erf√ºllung?',
        answer: "Compliance-Anforderungen f√ºr IAM IT-Infrastrukturen unter DORA, NIS2 und GDPR erfordern eine systematische Herangehensweise, die sowohl technische Kontrollen als auch operative Prozesse umfasst. Die Automatisierung der Compliance-Erf√ºllung ist dabei entscheidend f√ºr Effizienz und Konsistenz.\n\nüìã DORA (Digital Operational Resilience Act) Requirements:\n‚Ä¢ ICT Risk Management f√ºr Identity-Systeme\n‚Ä¢ Incident Reporting f√ºr IAM-bezogene Sicherheitsvorf√§lle\n‚Ä¢ Digital Operational Resilience Testing f√ºr IAM-Infrastrukturen\n‚Ä¢ Third-Party Risk Management f√ºr IAM-Service-Provider\n‚Ä¢ Information Sharing f√ºr Cyber Threat Intelligence\n\nüõ°Ô∏è NIS2 (Network and Information Security Directive) Compliance:\n‚Ä¢ Cybersecurity Risk Management f√ºr kritische Infrastrukturen\n‚Ä¢ Security Incident Handling und Reporting\n‚Ä¢ Business Continuity Planning f√ºr IAM-Services\n‚Ä¢ Supply Chain Security f√ºr IAM-Komponenten\n‚Ä¢ Cybersecurity Governance und Oversight\n\nüîí GDPR (General Data Protection Regulation) f√ºr IAM:\n‚Ä¢ Privacy by Design f√ºr Identity-Datenverarbeitung\n‚Ä¢ Data Minimization f√ºr User-Attribute und Profile\n‚Ä¢ Consent Management f√ºr Identity-Datennutzung\n‚Ä¢ Right to be Forgotten f√ºr User-Account-L√∂schung\n‚Ä¢ Data Breach Notification f√ºr Identity-Kompromittierungen\n\n‚öôÔ∏è Automated Compliance Framework:\n‚Ä¢ Policy-as-Code f√ºr automatisierte Compliance-Checks\n‚Ä¢ Continuous Compliance Monitoring mit Real-time Dashboards\n‚Ä¢ Automated Audit Trail Generation f√ºr Regulatory Reporting\n‚Ä¢ Configuration Management f√ºr Compliance-konforme Settings\n‚Ä¢ Automated Remediation f√ºr Compliance-Violations\n\nüìä Technical Controls Implementation:\n‚Ä¢ Access Logging f√ºr alle Identity-Transaktionen\n‚Ä¢ Data Encryption f√ºr Schutz personenbezogener Daten\n‚Ä¢ Backup und Recovery f√ºr Business Continuity\n‚Ä¢ Network Segmentation f√ºr kritische IAM-Komponenten\n‚Ä¢ Vulnerability Management f√ºr Security Patch Management\n\nüîç Monitoring und Reporting Automation:\n‚Ä¢ Automated Compliance Dashboards f√ºr Management Reporting\n‚Ä¢ Real-time Alerting f√ºr Compliance-Violations\n‚Ä¢ Automated Evidence Collection f√ºr Audit Purposes\n‚Ä¢ Regulatory Reporting Automation f√ºr Beh√∂rden\n‚Ä¢ Risk Assessment Automation f√ºr kontinuierliche Bewertung\n\nüìã Documentation und Record Keeping:\n‚Ä¢ Automated Documentation Generation f√ºr Compliance-Prozesse\n‚Ä¢ Version Control f√ºr Policy und Procedure Updates\n‚Ä¢ Audit Trail Management f√ºr Compliance-Aktivit√§ten\n‚Ä¢ Training Record Management f√ºr Compliance-Schulungen\n‚Ä¢ Incident Documentation f√ºr Regulatory Reporting\n\nüîß Technical Implementation Strategies:\n‚Ä¢ SIEM Integration f√ºr Compliance-Event-Correlation\n‚Ä¢ GRC (Governance, Risk, Compliance) Platform Integration\n‚Ä¢ API-based Compliance Data Collection\n‚Ä¢ Machine Learning f√ºr Anomaly Detection\n‚Ä¢ Blockchain f√ºr Immutable Audit Trails\n\nüåê Cross-Border Compliance Considerations:\n‚Ä¢ Data Residency Requirements f√ºr verschiedene Jurisdiktionen\n‚Ä¢ Cross-Border Data Transfer Mechanisms\n‚Ä¢ Local Compliance Requirements f√ºr Multi-National Organizations\n‚Ä¢ Regulatory Change Management f√ºr evolvierende Anforderungen\n‚Ä¢ International Standards Alignment (ISO 27001, SOC 2)\n\nüìà Continuous Improvement:\n‚Ä¢ Compliance Maturity Assessment f√ºr Gap Identification\n‚Ä¢ Regulatory Intelligence f√ºr proaktive Compliance-Vorbereitung\n‚Ä¢ Benchmarking gegen Industry Best Practices\n‚Ä¢ Cost-Benefit Analysis f√ºr Compliance-Investments\n‚Ä¢ Stakeholder Communication f√ºr Compliance-Status"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 15),
        question: 'Wie gestaltet man sichere Secrets Management und Encryption Key Lifecycle f√ºr IAM IT-Infrastrukturen in Enterprise-Umgebungen?',
        answer: "Sichere Secrets Management und Encryption Key Lifecycle f√ºr IAM IT-Infrastrukturen erfordern eine umfassende Strategie, die sowohl technische Sicherheit als auch operative Effizienz gew√§hrleistet. Die richtige Implementierung ist kritisch f√ºr den Schutz sensibler Identity-Daten und System-Credentials.\n\nüîê Secrets Management Architecture:\n‚Ä¢ Centralized Secrets Vault mit HashiCorp Vault oder AWS Secrets Manager\n‚Ä¢ Role-based Access Control f√ºr Secrets-Zugriff\n‚Ä¢ Dynamic Secrets Generation f√ºr tempor√§re Credentials\n‚Ä¢ Secrets Rotation Automation f√ºr regelm√§√üige Erneuerung\n‚Ä¢ Audit Logging f√ºr alle Secrets-Operationen\n\nüóùÔ∏è Encryption Key Management Lifecycle:\n‚Ä¢ Key Generation mit Hardware Security Modules (HSM)\n‚Ä¢ Key Distribution √ºber sichere Kan√§le\n‚Ä¢ Key Storage mit Tamper-resistant Hardware\n‚Ä¢ Key Rotation nach definierten Zeitintervallen\n‚Ä¢ Key Destruction mit sicherer L√∂schung\n\nüõ°Ô∏è Security Controls und Best Practices:\n‚Ä¢ Multi-Person Authorization f√ºr kritische Key-Operationen\n‚Ä¢ Separation of Duties f√ºr Key Management Roles\n‚Ä¢ Encryption at Rest f√ºr alle gespeicherten Secrets\n‚Ä¢ Network Encryption f√ºr Secrets-√úbertragung\n‚Ä¢ Zero-Knowledge Architecture f√ºr Secrets-Zugriff\n\n‚öôÔ∏è Automated Secrets Lifecycle Management:\n‚Ä¢ Automated Secrets Discovery f√ºr Inventory Management\n‚Ä¢ Policy-driven Rotation Schedules\n‚Ä¢ Automated Certificate Renewal f√ºr PKI-Certificates\n‚Ä¢ Dependency Tracking f√ºr Secrets-Usage\n‚Ä¢ Automated Compliance Reporting f√ºr Audit Requirements\n\nüîß Integration Patterns f√ºr IAM Systems:\n‚Ä¢ API-based Secrets Retrieval f√ºr Applications\n‚Ä¢ Just-in-Time Secrets Provisioning\n‚Ä¢ Secrets Injection f√ºr Container Deployments\n‚Ä¢ Database Credential Management f√ºr IAM Stores\n‚Ä¢ Service Account Key Management f√ºr System-to-System Authentication\n\nüìä Monitoring und Alerting:\n‚Ä¢ Real-time Monitoring f√ºr Secrets-Access-Patterns\n‚Ä¢ Anomaly Detection f√ºr ungew√∂hnliche Secrets-Usage\n‚Ä¢ Automated Alerting f√ºr Secrets-Expiration\n‚Ä¢ Compliance Monitoring f√ºr Policy Violations\n‚Ä¢ Performance Monitoring f√ºr Secrets-Retrieval-Latency\n\nüåê Multi-Cloud und Hybrid Considerations:\n‚Ä¢ Cross-Cloud Key Management f√ºr Multi-Cloud Deployments\n‚Ä¢ Hybrid Secrets Synchronization zwischen On-Premise und Cloud\n‚Ä¢ Cloud Provider Key Management Service Integration\n‚Ä¢ Vendor-agnostic Secrets Management f√ºr Portability\n‚Ä¢ Disaster Recovery f√ºr Secrets und Keys\n\nüîç Security Assessment und Testing:\n‚Ä¢ Regular Security Audits f√ºr Secrets Management Practices\n‚Ä¢ Penetration Testing f√ºr Secrets-Storage-Security\n‚Ä¢ Vulnerability Scanning f√ºr Key Management Infrastructure\n‚Ä¢ Compliance Testing f√ºr Regulatory Requirements\n‚Ä¢ Red Team Exercises f√ºr Secrets-Protection-Effectiveness\n\nüìã Operational Procedures:\n‚Ä¢ Emergency Key Recovery Procedures\n‚Ä¢ Incident Response f√ºr Secrets-Compromise\n‚Ä¢ Change Management f√ºr Key Management Policies\n‚Ä¢ Training f√ºr Key Management Personnel\n‚Ä¢ Documentation f√ºr Secrets Management Processes\n\nüß™ Advanced Security Features:\n‚Ä¢ Quantum-resistant Cryptography f√ºr Future-proofing\n‚Ä¢ Homomorphic Encryption f√ºr Computation on Encrypted Data\n‚Ä¢ Secure Multi-Party Computation f√ºr Distributed Key Management\n‚Ä¢ Threshold Cryptography f√ºr Distributed Key Operations\n‚Ä¢ Post-Quantum Key Exchange f√ºr Secure Communication\n\nüíº Enterprise Integration:\n‚Ä¢ Identity Provider Integration f√ºr Secrets-Access-Control\n‚Ä¢ SIEM Integration f√ºr Security Event Correlation\n‚Ä¢ Configuration Management Database (CMDB) Integration\n‚Ä¢ IT Service Management (ITSM) Integration\n‚Ä¢ Enterprise Architecture Alignment f√ºr Governance"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 16),
        question: 'Welche Backup-, Recovery- und Business Continuity-Strategien sind f√ºr kritische IAM IT-Infrastrukturen erforderlich und wie testet man deren Wirksamkeit?',
        answer: "Backup-, Recovery- und Business Continuity-Strategien f√ºr kritische IAM IT-Infrastrukturen m√ºssen die besondere Bedeutung von Identity-Services f√ºr die gesamte Unternehmens-IT ber√ºcksichtigen. Die Wirksamkeit dieser Strategien muss regelm√§√üig durch realistische Tests validiert werden.\n\nüíæ Comprehensive Backup Strategy:\n‚Ä¢ Multi-Tier Backup Architecture mit verschiedenen Recovery-Zielen\n‚Ä¢ Real-time Replication f√ºr kritische Identity-Daten\n‚Ä¢ Incremental und Differential Backups f√ºr Effizienz\n‚Ä¢ Cross-Site Backup Replication f√ºr Geographic Redundancy\n‚Ä¢ Immutable Backups f√ºr Ransomware Protection\n\nüîÑ Recovery Time und Recovery Point Objectives:\n‚Ä¢ RTO (Recovery Time Objective) unter 15 Minuten f√ºr kritische IAM-Services\n‚Ä¢ RPO (Recovery Point Objective) unter 5 Minuten f√ºr Identity-Daten\n‚Ä¢ Tiered Recovery Strategies f√ºr verschiedene Service-Levels\n‚Ä¢ Automated Failover f√ºr minimale Downtime\n‚Ä¢ Manual Override Capabilities f√ºr komplexe Scenarios\n\nüèóÔ∏è High Availability Architecture Design:\n‚Ä¢ Active-Active Clustering f√ºr Load Distribution\n‚Ä¢ Geographic Load Balancing f√ºr Disaster Recovery\n‚Ä¢ Database Clustering mit Automatic Failover\n‚Ä¢ Application-Level Redundancy f√ºr Service Continuity\n‚Ä¢ Network Redundancy f√ºr Connectivity Assurance\n\nüìä Data Consistency und Integrity:\n‚Ä¢ Transactional Consistency f√ºr Identity-Updates\n‚Ä¢ Data Validation f√ºr Backup Integrity\n‚Ä¢ Checksum Verification f√ºr Data Corruption Detection\n‚Ä¢ Cross-Site Data Synchronization f√ºr Consistency\n‚Ä¢ Conflict Resolution f√ºr Multi-Master Scenarios\n\nüß™ Testing und Validation Procedures:\n‚Ä¢ Regular Disaster Recovery Drills mit realistischen Scenarios\n‚Ä¢ Automated Recovery Testing f√ºr Procedure Validation\n‚Ä¢ Failover Testing ohne Service Interruption\n‚Ä¢ Data Integrity Testing nach Recovery\n‚Ä¢ Performance Testing unter Recovery Conditions\n\n‚ö° Automated Recovery Orchestration:\n‚Ä¢ Runbook Automation f√ºr standardisierte Recovery-Prozesse\n‚Ä¢ Health Check Automation f√ºr Failure Detection\n‚Ä¢ Automated Notification f√ºr Stakeholder Communication\n‚Ä¢ Dependency Management f√ºr Service Recovery Order\n‚Ä¢ Rollback Automation f√ºr Failed Recovery Attempts\n\nüõ°Ô∏è Security w√§hrend Recovery Operations:\n‚Ä¢ Secure Recovery Channels f√ºr Data Restoration\n‚Ä¢ Access Control f√ºr Recovery Operations\n‚Ä¢ Audit Logging f√ºr Recovery Activities\n‚Ä¢ Encryption f√ºr Backup Data Protection\n‚Ä¢ Identity Verification f√ºr Recovery Personnel\n\nüìã Business Continuity Planning:\n‚Ä¢ Business Impact Analysis f√ºr IAM-Service-Dependencies\n‚Ä¢ Communication Plans f√ºr Stakeholder Notification\n‚Ä¢ Alternative Work Procedures f√ºr Extended Outages\n‚Ä¢ Vendor Coordination f√ºr Third-Party Dependencies\n‚Ä¢ Regulatory Compliance w√§hrend Disaster Scenarios\n\nüîç Monitoring und Alerting:\n‚Ä¢ Real-time Health Monitoring f√ºr Early Warning\n‚Ä¢ Predictive Analytics f√ºr Failure Prevention\n‚Ä¢ Automated Escalation f√ºr Critical Issues\n‚Ä¢ Performance Degradation Detection\n‚Ä¢ Capacity Monitoring f√ºr Resource Exhaustion\n\nüìä Recovery Metrics und KPIs:\n‚Ä¢ Mean Time to Recovery (MTTR) Measurement\n‚Ä¢ Recovery Success Rate Tracking\n‚Ä¢ Data Loss Measurement f√ºr RPO Compliance\n‚Ä¢ Service Availability Metrics\n‚Ä¢ Cost Analysis f√ºr Recovery Operations\n\nüåê Cloud und Hybrid Recovery Strategies:\n‚Ä¢ Cloud-based Disaster Recovery f√ºr Cost Efficiency\n‚Ä¢ Hybrid Recovery f√ºr On-Premise und Cloud Integration\n‚Ä¢ Multi-Cloud Recovery f√ºr Vendor Diversification\n‚Ä¢ Container-based Recovery f√ºr Rapid Deployment\n‚Ä¢ Infrastructure-as-Code f√ºr Consistent Recovery\n\nüìã Documentation und Training:\n‚Ä¢ Detailed Recovery Procedures Documentation\n‚Ä¢ Regular Training f√ºr Recovery Teams\n‚Ä¢ Lessons Learned Documentation\n‚Ä¢ Recovery Playbooks f√ºr verschiedene Scenarios\n‚Ä¢ Knowledge Transfer f√ºr Personnel Changes\n\nüí∞ Cost Optimization:\n‚Ä¢ Tiered Storage f√ºr Cost-effective Backup\n‚Ä¢ Cloud Storage f√ºr Long-term Retention\n‚Ä¢ Automated Lifecycle Management f√ºr Backup Data\n‚Ä¢ Resource Optimization f√ºr Recovery Infrastructure\n‚Ä¢ ROI Analysis f√ºr Business Continuity Investments"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 4 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
