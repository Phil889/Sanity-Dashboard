import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating CRA Anforderungen page with FAQs batch 3...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'cra-anforderungen' })
    
    if (!existingDoc) {
      throw new Error('Document "cra-anforderungen" not found')
    }
    
    // Create new FAQs
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 9),
        question: 'Welche organisatorischen Governance-Strukturen sind erforderlich, um CRA Anforderungen systematisch zu verwalten und zu √ºberwachen?',
        answer: "Die Etablierung effektiver organisatorischer Governance-Strukturen f√ºr CRA Anforderungen erfordert eine strategische Neuausrichtung der Unternehmensf√ºhrung, die Cybersicherheit als Kerngesch√§ftsfunktion verankert und systematische √úberwachung, Entscheidungsfindung und kontinuierliche Verbesserung gew√§hrleistet. Diese Strukturen m√ºssen sowohl strategische Vision als auch operative Exzellenz vereinen und dabei Flexibilit√§t f√ºr sich √§ndernde Anforderungen bewahren.\n\nüèõÔ∏è Strategische Governance-Architektur:\n‚Ä¢ Etablierung eines CRA Steering Committees auf Vorstandsebene mit direkter Berichtslinie an die Gesch√§ftsf√ºhrung, das strategische Entscheidungen trifft, Ressourcen allokiert und Compliance-Performance √ºberwacht.\n‚Ä¢ Aufbau einer Matrix-Governance-Struktur, die funktionale Cybersicherheitsexpertise mit produktspezifischen Verantwortlichkeiten verkn√ºpft und Cross-funktionale Zusammenarbeit zwischen Entwicklung, Operations, Compliance und Business-Bereichen f√∂rdert.\n‚Ä¢ Definition klarer Rollen und Verantwortlichkeiten f√ºr alle Stakeholder, einschlie√ülich Chief Information Security Officer, Product Security Officers, Compliance Manager, Risk Manager und externe Berater.\n‚Ä¢ Integration der CRA-Governance in bestehende Unternehmensf√ºhrungsstrukturen wie Enterprise Risk Management, Quality Management und Audit-Komitees, um Synergien zu maximieren und Governance-Overhead zu minimieren.\n‚Ä¢ Entwicklung von Governance-Charters und Mandaten, die Autorit√§t, Verantwortlichkeiten und Rechenschaftspflichten f√ºr alle Governance-Gremien klar definieren.\n\nüìä Operative √úberwachungs- und Steuerungsmechanismen:\n‚Ä¢ Implementierung von CRA Compliance Dashboards und KPI-Systemen, die Real-time Einblicke in Compliance-Status, Risikopositionen und Performance-Trends bieten.\n‚Ä¢ Aufbau von Risk-based Monitoring-Prozessen, die kontinuierliche Bewertung von Compliance-Risiken und proaktive Identifikation von Verbesserungsm√∂glichkeiten erm√∂glichen.\n‚Ä¢ Etablierung von Eskalationspfaden und Entscheidungsframeworks f√ºr verschiedene Arten von CRA-bezogenen Herausforderungen, von Routine-Compliance-Fragen bis hin zu kritischen Sicherheitsvorf√§llen.\n‚Ä¢ Entwicklung von Performance Management-Systemen, die CRA-bezogene Ziele und Metriken in individuelle und Team-Bewertungen integrieren und Incentive-Alignment gew√§hrleisten.\n‚Ä¢ Integration von Continuous Improvement-Prozessen, die regelm√§√üige Reviews, Feedback-Integration und Anpassungen an sich √§ndernde Anforderungen systematisch durchf√ºhren.\n\nüéØ Entscheidungsprozesse und Accountability:\n‚Ä¢ Entwicklung strukturierter Entscheidungsframeworks, die verschiedene Arten von CRA-bezogenen Entscheidungen kategorisieren und entsprechende Entscheidungskompetenzen, Prozesse und Zeitrahmen definieren.\n‚Ä¢ Implementierung von RACI-Matrizen f√ºr alle kritischen CRA-Prozesse, die Verantwortlichkeiten, Rechenschaftspflichten, Konsultationen und Informationspflichten klar zuordnen.\n‚Ä¢ Aufbau von Konfliktl√∂sungsmechanismen f√ºr Situationen, in denen CRA-Anforderungen mit anderen Gesch√§ftszielen oder technischen Constraints in Konflikt stehen.\n‚Ä¢ Etablierung von Audit- und Assurance-Prozessen, die regelm√§√üige unabh√§ngige Bewertungen der Governance-Effektivit√§t und Compliance-Performance durchf√ºhren.\n‚Ä¢ Integration von Stakeholder-Engagement-Strategien, die interne und externe Perspektiven in Governance-Entscheidungen einbeziehen und Transparenz gew√§hrleisten."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 10),
        question: 'Wie k√∂nnen wir effektive Incident Response und Crisis Management Capabilities aufbauen, die den CRA Anforderungen entsprechen?',
        answer: "Der Aufbau effektiver Incident Response und Crisis Management Capabilities f√ºr CRA Compliance erfordert eine umfassende Vorbereitung, die technische Reaktionsf√§higkeiten mit organisatorischen Prozessen und strategischer Kommunikation verbindet. Diese Capabilities m√ºssen sowohl pr√§ventive Ma√ünahmen als auch reaktive Strategien umfassen und dabei verschiedene Incident-Szenarien und Stakeholder-Anforderungen ber√ºcksichtigen.\n\nüö® Umfassende Incident Response Architektur:\n‚Ä¢ Entwicklung eines strukturierten Incident Response Plans, der verschiedene Incident-Kategorien definiert, Eskalationspfade festlegt und spezifische Reaktionsverfahren f√ºr unterschiedliche Schweregrade und Incident-Typen beschreibt.\n‚Ä¢ Aufbau eines Computer Security Incident Response Teams mit klar definierten Rollen, Verantwortlichkeiten und Kompetenzen, einschlie√ülich Incident Commander, Technical Analysts, Communications Lead und Legal Counsel.\n‚Ä¢ Implementierung von Incident Detection und Monitoring-Systemen, die automatisierte Erkennung, Klassifizierung und initiale Bewertung von Sicherheitsvorf√§llen erm√∂glichen.\n‚Ä¢ Etablierung von Forensic Capabilities und Evidence Preservation-Prozessen, die rechtskonforme Untersuchung und Dokumentation von Incidents gew√§hrleisten.\n‚Ä¢ Integration von Threat Intelligence und Attribution-Capabilities, die Verst√§ndnis von Angreiferverhalten und Motivation erm√∂glichen.\n\n‚ö° Schnelle Response und Containment-Strategien:\n‚Ä¢ Entwicklung von Rapid Response Playbooks f√ºr verschiedene Incident-Szenarien, die standardisierte Verfahren f√ºr schnelle Eind√§mmung und Schadensbegrenzung bereitstellen.\n‚Ä¢ Implementierung von Automated Response-Capabilities, die sofortige Reaktionen auf bestimmte Incident-Typen erm√∂glichen, wie automatische Isolation kompromittierter Systeme oder Sperrung verd√§chtiger Accounts.\n‚Ä¢ Aufbau von Crisis Communication-Protokollen, die interne und externe Stakeholder zeitnah und angemessen √ºber Incidents informieren.\n‚Ä¢ Etablierung von Business Continuity und Disaster Recovery-Prozesse, die kritische Gesch√§ftsfunktionen w√§hrend und nach Incidents aufrechterhalten.\n‚Ä¢ Integration von Supply Chain Incident Response, die Koordination mit Partnern und Lieferanten bei Incidents erm√∂glicht.\n\nüîÑ Recovery und Lessons Learned Integration:\n‚Ä¢ Entwicklung systematischer Recovery-Prozesse, die sichere Wiederherstellung von Systemen und Diensten nach Incidents gew√§hrleisten.\n‚Ä¢ Implementierung von Post-Incident Review-Verfahren, die umfassende Analyse von Incident-Ursachen, Response-Effektivit√§t und Verbesserungsm√∂glichkeiten durchf√ºhren.\n‚Ä¢ Aufbau von Lessons Learned-Datenbanken und Knowledge Management-Systemen, die Erkenntnisse aus Incidents f√ºr zuk√ºnftige Verbesserungen verf√ºgbar machen.\n‚Ä¢ Integration von Incident Metrics und Performance Measurement, die kontinuierliche Verbesserung der Incident Response-Capabilities erm√∂glichen.\n‚Ä¢ Etablierung von Training und Simulation-Programme, die regelm√§√üige √úbungen und Tabletop-Exercises f√ºr alle Incident Response-Teams durchf√ºhren.\n\nüìã Compliance und Regulatory Reporting:\n‚Ä¢ Entwicklung von Regulatory Notification-Prozessen, die zeitgerechte und vollst√§ndige Meldung von Incidents an relevante Beh√∂rden gew√§hrleisten.\n‚Ä¢ Implementierung von Documentation Standards, die umfassende Aufzeichnung aller Incident-Aktivit√§ten f√ºr Compliance-Nachweise und rechtliche Anforderungen sicherstellen.\n‚Ä¢ Aufbau von Stakeholder Communication-Strategien, die verschiedene Zielgruppen mit angemessenen Informationen √ºber Incidents und Reaktionsma√ünahmen versorgen.\n‚Ä¢ Integration von Legal und Regulatory Expertise in Incident Response-Prozesse, um Compliance-Anforderungen und rechtliche Implikationen zu ber√ºcksichtigen.\n‚Ä¢ Etablierung von Continuous Monitoring und Reporting-Systeme, die laufende √úberwachung der Incident Response-Performance und Compliance-Status erm√∂glichen."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 11),
        question: 'Welche Supply Chain Security Ma√ünahmen sind erforderlich, um CRA Anforderungen f√ºr die gesamte Lieferkette zu erf√ºllen?',
        answer: "Supply Chain Security f√ºr CRA Compliance erfordert eine ganzheitliche Herangehensweise, die √ºber traditionelle Lieferantenmanagement-Praktiken hinausgeht und umfassende Cybersicherheitsma√ünahmen entlang der gesamten Wertsch√∂pfungskette implementiert. Diese Ma√ünahmen m√ºssen sowohl direkte als auch indirekte Abh√§ngigkeiten abdecken und dabei Transparenz, Kontrolle und kontinuierliche √úberwachung gew√§hrleisten.\n\nüîç Umfassende Supply Chain Visibility:\n‚Ä¢ Entwicklung einer vollst√§ndigen Supply Chain-Kartierung, die alle direkten und indirekten Lieferanten, Subunternehmer und Drittanbieter-Abh√§ngigkeiten identifiziert und dokumentiert.\n‚Ä¢ Implementierung von Software Bill of Materials und Hardware Bill of Materials-Prozessen, die detaillierte Inventarisierung aller Komponenten, Bibliotheken und Abh√§ngigkeiten erm√∂glichen.\n‚Ä¢ Aufbau von Supply Chain Risk Assessment-Capabilities, die systematische Bewertung von Cybersicherheitsrisiken f√ºr alle Lieferanten und Komponenten durchf√ºhren.\n‚Ä¢ Etablierung von Vendor Security Assessment-Programme, die umfassende Evaluierung der Cybersicherheitspraktiken aller kritischen Lieferanten gew√§hrleisten.\n‚Ä¢ Integration von Continuous Monitoring-Systeme, die laufende √úberwachung der Supply Chain-Sicherheit und fr√ºhzeitige Erkennung von Risiken erm√∂glichen.\n\nüìã Vertragliche und Governance-Anforderungen:\n‚Ä¢ Entwicklung standardisierter Cybersicherheitsklauseln f√ºr alle Lieferantenvertr√§ge, die spezifische CRA-Anforderungen, Sicherheitsstandards und Compliance-Verpflichtungen definieren.\n‚Ä¢ Implementierung von Supplier Code of Conduct-Dokumenten, die Mindestanforderungen f√ºr Cybersicherheitspraktiken und Incident Response-Capabilities festlegen.\n‚Ä¢ Aufbau von Audit Rights und Inspection-Mechanismen, die regelm√§√üige √úberpr√ºfung der Lieferanten-Compliance erm√∂glichen.\n‚Ä¢ Etablierung von Incident Notification-Anforderungen, die zeitgerechte Meldung von Sicherheitsvorf√§llen durch Lieferanten gew√§hrleisten.\n‚Ä¢ Integration von Termination Rights und Remediation-Mechanismen f√ºr F√§lle von Non-Compliance oder Sicherheitsverletzungen.\n\nüõ°Ô∏è Technische Sicherheitsma√ünahmen:\n‚Ä¢ Implementierung von Secure Development Lifecycle-Anforderungen f√ºr alle Software-Lieferanten, einschlie√ülich Code Reviews, Security Testing und Vulnerability Management.\n‚Ä¢ Aufbau von Component Verification und Integrity-Checking-Prozesse, die Authentizit√§t und Unversehrtheit aller gelieferten Komponenten gew√§hrleisten.\n‚Ä¢ Etablierung von Secure Communication-Kan√§le und Data Protection-Ma√ünahmen f√ºr alle Lieferanteninteraktionen.\n‚Ä¢ Integration von Zero Trust-Prinzipien in Supply Chain-Interaktionen, die kontinuierliche Verifikation und minimale Privilegien implementieren.\n‚Ä¢ Entwicklung von Isolation und Segmentation-Strategien, die Risiken von kompromittierten Lieferanten-Komponenten begrenzen.\n\nüîÑ Kontinuierliche √úberwachung und Verbesserung:\n‚Ä¢ Implementierung von Supply Chain Threat Intelligence-Capabilities, die externe Bedrohungsinformationen sammeln und in Risikobewertungen integrieren.\n‚Ä¢ Aufbau von Performance Monitoring und Scorecard-Systeme, die kontinuierliche Bewertung der Lieferanten-Cybersicherheitsleistung erm√∂glichen.\n‚Ä¢ Etablierung von Supplier Development-Programme, die Unterst√ºtzung und Training f√ºr Lieferanten zur Verbesserung ihrer Cybersicherheitspraktiken bieten.\n‚Ä¢ Integration von Business Continuity Planning, das alternative Lieferanten und Contingency-Pl√§ne f√ºr kritische Komponenten vorsieht.\n‚Ä¢ Entwicklung von Supply Chain Incident Response-Prozesse, die koordinierte Reaktionen auf Supply Chain-bezogene Sicherheitsvorf√§lle erm√∂glichen."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 12),
        question: 'Wie k√∂nnen wir Mitarbeitertraining und Awareness-Programme entwickeln, die alle CRA-relevanten Rollen und Verantwortlichkeiten abdecken?',
        answer: "Die Entwicklung umfassender Mitarbeitertraining und Awareness-Programme f√ºr CRA Compliance erfordert eine strategische Herangehensweise, die verschiedene Rollen, Kompetenzniveaus und Lernstile ber√ºcksichtigt und dabei sowohl technische F√§higkeiten als auch kulturelle Transformation f√∂rdert. Diese Programme m√ºssen kontinuierlich aktualisiert werden und praktische Anwendung mit theoretischem Wissen verbinden.\n\nüéØ Rollenbasierte Training-Strategien:\n‚Ä¢ Entwicklung spezifischer Trainingspfade f√ºr verschiedene Rollen, einschlie√ülich Entwickler, Produktmanager, Compliance-Spezialisten, F√ºhrungskr√§fte und Support-Teams, mit ma√ügeschneiderten Inhalten und Lernzielen.\n‚Ä¢ Implementierung von Competency Frameworks, die erforderliche CRA-Kenntnisse und F√§higkeiten f√ºr jede Rolle definieren und Fortschrittsmessung erm√∂glichen.\n‚Ä¢ Aufbau von Security Champions-Programmen, die ausgew√§hlte Mitarbeiter zu internen Cybersicherheitsexperten und Multiplikatoren entwickeln.\n‚Ä¢ Etablierung von Cross-funktionalen Training-Initiativen, die Verst√§ndnis f√ºr interdisziplin√§re Zusammenarbeit und gemeinsame Verantwortlichkeiten f√∂rdern.\n‚Ä¢ Integration von Leadership Development-Komponenten, die F√ºhrungskr√§fte bef√§higen, Cybersicherheitskultur zu f√∂rdern und strategische Entscheidungen zu treffen.\n\nüìö Umfassende Curriculum-Entwicklung:\n‚Ä¢ Erstellung modularer Trainingsinhalte, die grundlegende CRA-Konzepte, spezifische Anforderungen, praktische Implementierung und aktuelle Bedrohungslandschaften abdecken.\n‚Ä¢ Implementierung von Hands-on Learning-Ans√§tzen, einschlie√ülich Simulationen, Tabletop-Exercises und praktischer Laborumgebungen f√ºr realit√§tsnahe Erfahrungen.\n‚Ä¢ Aufbau von Case Study-basierten Lernmaterialien, die reale Szenarien und Lessons Learned aus der Branche integrieren.\n‚Ä¢ Integration von Regulatory Updates und Trend-Analysen, die Mitarbeiter √ºber sich √§ndernde Anforderungen und Best Practices informieren.\n‚Ä¢ Entwicklung von Assessment- und Zertifizierungsprogrammen, die Kompetenzvalidierung und kontinuierliche Verbesserung erm√∂glichen.\n\nüîÑ Kontinuierliche Awareness und Engagement:\n‚Ä¢ Implementierung regelm√§√üiger Awareness-Kampagnen, die aktuelle Bedrohungen, Compliance-Updates und Erfolgsgeschichten kommunizieren.\n‚Ä¢ Aufbau von Gamification-Elementen und Incentive-Programmen, die Engagement und Motivation f√ºr Cybersicherheitslernen f√∂rdern.\n‚Ä¢ Etablierung von Communities of Practice und Wissensaustausch-Foren, die peer-to-peer Learning und Best Practice Sharing erm√∂glichen.\n‚Ä¢ Integration von Just-in-Time Training-Ressourcen, die kontextuelle Hilfe und Guidance w√§hrend der t√§glichen Arbeit bereitstellen.\n‚Ä¢ Entwicklung von Feedback-Mechanismen und Continuous Improvement-Prozessen, die Trainingsprogramme basierend auf Mitarbeiterbed√ºrfnissen und -erfahrungen optimieren.\n\nüìä Messung und Optimierung der Training-Effektivit√§t:\n‚Ä¢ Implementierung umfassender Training Metrics und Analytics, die Teilnahme, Engagement, Kompetenzentwicklung und Verhaltens√§nderungen messen.\n‚Ä¢ Aufbau von Pre- und Post-Training Assessments, die Lernfortschritt und Wissenszuwachs quantifizieren.\n‚Ä¢ Etablierung von Long-term Impact Measurement, die Korrelation zwischen Training und tats√§chlicher Compliance-Performance analysiert.\n‚Ä¢ Integration von ROI-Analysen, die Gesch√§ftswert und Kosteneffektivit√§t von Training-Investitionen demonstrieren.\n‚Ä¢ Entwicklung von Adaptive Learning-Systeme, die Trainingsinhalte und -methoden basierend auf individuellen Lernfortschritten und -pr√§ferenzen anpassen."
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQs batch 3 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
