import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating Managed PKI page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'managed-pki' })
    
    if (!existingDoc) {
      throw new Error('Document "managed-pki" not found')
    }
    
    // Create new FAQs for technical implementation and integration
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Wie erfolgt die technische Integration von Managed PKI Services in bestehende IT-Infrastrukturen?',
        answer: "Die technische Integration von Managed PKI Services in bestehende IT-Infrastrukturen erfordert eine durchdachte Architektur und standardisierte Schnittstellen, um nahtlose Interoperabilit√§t und optimale Performance zu gew√§hrleisten. Moderne Managed PKI Services bieten flexible Integrationsm√∂glichkeiten f√ºr verschiedene Anwendungsszenarien.\n\nüîå API-basierte Integration und Automatisierung:\n‚Ä¢ RESTful APIs erm√∂glichen programmatische Integration in bestehende Anwendungen und Workflows\n‚Ä¢ SCEP (Simple Certificate Enrollment Protocol) f√ºr automatische Zertifikatsanforderung von Netzwerkger√§ten\n‚Ä¢ EST (Enrollment over Secure Transport) f√ºr sichere Zertifikatserneuerung in IoT und mobilen Umgebungen\n‚Ä¢ ACME (Automatic Certificate Management Environment) Protocol f√ºr vollautomatisierte Certificate Lifecycle Management\n‚Ä¢ Webhook-basierte Benachrichtigungen f√ºr Echtzeit-Updates √ºber Zertifikatsstatus und -ereignisse\n\nüåê Directory Services und LDAP Integration:\n‚Ä¢ Nahtlose Integration mit Active Directory f√ºr zentrale Benutzerverwaltung und Authentifizierung\n‚Ä¢ LDAP-basierte Certificate Publishing f√ºr automatische Verteilung von Zertifikaten\n‚Ä¢ Certificate Template Mapping f√ºr konsistente Zertifikatserstellung basierend auf Benutzerrollen\n‚Ä¢ Group Policy Integration f√ºr automatische Zertifikatsverteilung an Windows-Clients\n‚Ä¢ Cross-Forest Trust Unterst√ºtzung f√ºr komplexe Enterprise-Umgebungen\n\nüîß Enterprise Application Integration:\n‚Ä¢ Native Integration mit f√ºhrenden Enterprise-Anwendungen wie SAP, Oracle und Microsoft Office\n‚Ä¢ Web Server Integration f√ºr SSL/TLS Zertifikate mit automatischer Deployment-Funktionalit√§t\n‚Ä¢ Load Balancer und Reverse Proxy Integration f√ºr hochverf√ºgbare Web-Services\n‚Ä¢ Container und Kubernetes Integration f√ºr Cloud-native Anwendungsarchitekturen\n‚Ä¢ DevOps Pipeline Integration f√ºr automatisierte Certificate Management in CI/CD Prozessen\n\nüìä Monitoring und Management Integration:\n‚Ä¢ SIEM Integration f√ºr Security Event Correlation und Compliance Monitoring\n‚Ä¢ SNMP-basierte Monitoring-Integration f√ºr Netzwerk-Management-Systeme\n‚Ä¢ Syslog Integration f√ºr zentrale Log-Aggregation und Audit Trail Management\n‚Ä¢ Dashboard und Reporting Integration mit bestehenden IT Service Management Tools\n‚Ä¢ Alerting und Notification Integration mit Enterprise Messaging Systemen\n\nüõ°Ô∏è Security und Network Integration:\n‚Ä¢ VPN Integration f√ºr sichere Remote Access mit zertifikatbasierter Authentifizierung\n‚Ä¢ Network Access Control (NAC) Integration f√ºr ger√§tebasierte Netzwerkzugriffskontrolle\n‚Ä¢ Firewall und Security Appliance Integration f√ºr erweiterte Threat Protection\n‚Ä¢ Identity Provider Integration f√ºr Single Sign-On und Federated Authentication\n‚Ä¢ Multi-Factor Authentication Integration f√ºr erweiterte Sicherheitsanforderungen\n\n‚òÅÔ∏è Cloud und Hybrid Integration:\n‚Ä¢ Multi-Cloud Integration f√ºr AWS, Azure und Google Cloud Platform\n‚Ä¢ Hybrid Cloud Connectivity f√ºr nahtlose Integration zwischen On-Premises und Cloud-Umgebungen\n‚Ä¢ Container Orchestration Integration f√ºr dynamische Zertifikatsverwaltung\n‚Ä¢ Serverless Function Integration f√ºr event-driven Certificate Management\n‚Ä¢ Edge Computing Integration f√ºr verteilte PKI-Services\n\nüîÑ Migration und Transition Management:\n‚Ä¢ Parallel-Betrieb w√§hrend Migrationsphasen f√ºr kontinuierliche Verf√ºgbarkeit\n‚Ä¢ Certificate Mapping und Translation Services f√ºr Legacy-System-Integration\n‚Ä¢ Graduelle Migration Tools f√ºr schrittweise √úberf√ºhrung bestehender Zertifikate\n‚Ä¢ Rollback-Mechanismen f√ºr sichere R√ºckkehr zu vorherigen Konfigurationen\n‚Ä¢ Testing und Validation Frameworks f√ºr umfassende Integrationstests"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Welche Automatisierungsm√∂glichkeiten bieten moderne Managed PKI Services f√ºr Certificate Lifecycle Management?',
        answer: "Moderne Managed PKI Services bieten umfassende Automatisierungsm√∂glichkeiten, die den gesamten Certificate Lifecycle von der Erstellung bis zur Archivierung abdecken. Diese Automatisierung reduziert operative Aufw√§nde, minimiert Fehlerquellen und gew√§hrleistet kontinuierliche Compliance.\n\nü§ñ Vollautomatisierte Certificate Enrollment:\n‚Ä¢ Zero-Touch Provisioning f√ºr neue Ger√§te und Anwendungen ohne manuelle Intervention\n‚Ä¢ Template-basierte Zertifikatserstellung mit vorkonfigurierten Policies und Attributen\n‚Ä¢ Bulk Certificate Generation f√ºr gro√üe Mengen von Zertifikaten mit einheitlichen Parametern\n‚Ä¢ Dynamic Certificate Attributes basierend auf Benutzerrollen und Systemkonfigurationen\n‚Ä¢ Self-Service Portale mit automatischer Genehmigung f√ºr standardisierte Zertifikatsanforderungen\n\n‚è∞ Intelligentes Renewal Management:\n‚Ä¢ Proaktive Renewal-Benachrichtigungen mit konfigurierbaren Vorlaufzeiten\n‚Ä¢ Automatische Zertifikatserneuerung basierend auf definierten Policies und Zeitpl√§nen\n‚Ä¢ Grace Period Management f√ºr nahtlose √úberg√§nge zwischen alten und neuen Zertifikaten\n‚Ä¢ Dependency-aware Renewal f√ºr gekoppelte Zertifikate und Anwendungen\n‚Ä¢ Emergency Renewal Procedures f√ºr kritische Situationen und Sicherheitsvorf√§lle\n\nüîç Kontinuierliche Discovery und Inventory Management:\n‚Ä¢ Network Scanning f√ºr automatische Erkennung von Zertifikaten in der Infrastruktur\n‚Ä¢ Agent-based Discovery f√ºr detaillierte Zertifikatsinventarisierung auf Endger√§ten\n‚Ä¢ Cloud Resource Discovery f√ºr dynamische Umgebungen und Container-Infrastrukturen\n‚Ä¢ Shadow Certificate Detection f√ºr nicht autorisierte oder unbekannte Zertifikate\n‚Ä¢ Real-time Inventory Updates f√ºr aktuelle √úbersicht aller Zertifikate\n\nüö´ Automatisierte Revocation und Compliance:\n‚Ä¢ Policy-based Revocation f√ºr automatischen Widerruf bei Compliance-Verst√∂√üen\n‚Ä¢ Real-time CRL und OCSP Updates f√ºr sofortige Revocation-Propagation\n‚Ä¢ Automated Compliance Checking gegen definierte Sicherheitsrichtlinien\n‚Ä¢ Vulnerability-triggered Revocation bei Erkennung kompromittierter Systeme\n‚Ä¢ Audit Trail Automation f√ºr l√ºckenlose Dokumentation aller Revocation-Aktivit√§ten\n\nüì± DevSecOps und CI/CD Integration:\n‚Ä¢ Pipeline-integrierte Certificate Management f√ºr automatische Zertifikatsbereitstellung\n‚Ä¢ Infrastructure as Code Integration f√ºr deklarative Zertifikatskonfiguration\n‚Ä¢ Container Image Signing mit automatischer Zertifikatserstellung und -verwaltung\n‚Ä¢ Kubernetes Operator f√ºr native Certificate Management in Container-Umgebungen\n‚Ä¢ GitOps-basierte Certificate Deployment f√ºr versionskontrollierte Zertifikatsverwaltung\n\nüîß Workflow Automation und Orchestration:\n‚Ä¢ Business Process Integration f√ºr komplexe Genehmigungsworkflows\n‚Ä¢ Event-driven Automation basierend auf System- und Anwendungsereignissen\n‚Ä¢ Multi-step Approval Processes mit automatischer Eskalation und Benachrichtigung\n‚Ä¢ Integration mit ITSM Tools f√ºr Ticket-basierte Certificate Management Prozesse\n‚Ä¢ Custom Workflow Engine f√ºr unternehmensspezifische Automatisierungsanforderungen\n\nüìä Analytics und Predictive Management:\n‚Ä¢ Machine Learning-basierte Vorhersage von Zertifikatsanforderungen und -mustern\n‚Ä¢ Capacity Planning Automation f√ºr optimale Ressourcenallokation\n‚Ä¢ Performance Analytics f√ºr kontinuierliche Optimierung der Automatisierungsprozesse\n‚Ä¢ Anomaly Detection f√ºr fr√ºhzeitige Erkennung ungew√∂hnlicher Zertifikatsaktivit√§ten\n‚Ä¢ Predictive Maintenance f√ºr proaktive Systemwartung und Optimierung\n\nüåê Multi-Platform und Cross-Domain Automation:\n‚Ä¢ Plattform√ºbergreifende Automatisierung f√ºr Windows, Linux und mobile Betriebssysteme\n‚Ä¢ Cross-Domain Certificate Management f√ºr komplexe Organisationsstrukturen\n‚Ä¢ Federated Automation f√ºr verteilte PKI-Umgebungen und Partnernetzwerke\n‚Ä¢ API Orchestration f√ºr Integration verschiedener PKI-Services und -Anbieter\n‚Ä¢ Hybrid Cloud Automation f√ºr nahtlose Certificate Management zwischen verschiedenen Cloud-Umgebungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Wie gew√§hrleisten Managed PKI Services Hochverf√ºgbarkeit und Disaster Recovery?',
        answer: "Managed PKI Services implementieren umfassende Hochverf√ºgbarkeits- und Disaster Recovery-Strategien, die kritische PKI-Operations auch bei schwerwiegenden St√∂rungen aufrechterhalten. Diese Resilienz-Architekturen gew√§hrleisten kontinuierliche Verf√ºgbarkeit gesch√§ftskritischer Zertifikatsdienste.\n\nüèóÔ∏è Redundante Infrastruktur-Architekturen:\n‚Ä¢ Geografisch verteilte Rechenzentren mit aktiv-aktiv oder aktiv-passiv Konfigurationen\n‚Ä¢ Load-balanced Certificate Authority Services f√ºr optimale Lastverteilung\n‚Ä¢ Redundante HSM-Cluster mit automatischem Failover bei Hardware-Ausf√§llen\n‚Ä¢ Multi-Region Deployment f√ºr maximale geografische Ausfallsicherheit\n‚Ä¢ Network-level Redundancy mit mehreren Internet Service Providern und Verbindungswegen\n\n‚ö° Real-time Failover und Recovery Mechanismen:\n‚Ä¢ Automatische Failover-Systeme mit minimalen Recovery Time Objectives (RTO)\n‚Ä¢ Health Monitoring und Heartbeat-Systeme f√ºr kontinuierliche Verf√ºgbarkeits√ºberwachung\n‚Ä¢ Circuit Breaker Patterns f√ºr graceful Degradation bei partiellen Systemausf√§llen\n‚Ä¢ Database Replication und Synchronisation f√ºr konsistente Datenintegrit√§t\n‚Ä¢ Session Persistence und State Management f√ºr nahtlose Benutzerexperience\n\nüíæ Umfassende Backup und Recovery Strategien:\n‚Ä¢ Kontinuierliche Datenreplikation mit Point-in-Time Recovery Capabilities\n‚Ä¢ Encrypted Backup Storage mit geografischer Verteilung f√ºr maximale Sicherheit\n‚Ä¢ Automated Backup Testing und Validation f√ºr garantierte Wiederherstellbarkeit\n‚Ä¢ Granular Recovery Options f√ºr selektive Wiederherstellung spezifischer Komponenten\n‚Ä¢ Cross-Region Backup Replication f√ºr Schutz vor regionalen Katastrophen\n\nüîê HSM und Root Key Protection:\n‚Ä¢ Hardware Security Module Clustering mit automatischer Key Synchronisation\n‚Ä¢ Offline Root CA Storage mit sicheren Key Escrow Verfahren\n‚Ä¢ Multi-Person Control f√ºr kritische Key Recovery Operationen\n‚Ä¢ Tamper-resistant Key Storage mit physischen und logischen Schutzma√ünahmen\n‚Ä¢ Key Ceremony Procedures f√ºr sichere Root Key Wiederherstellung\n\nüìä Service Level Agreements und Performance Garantien:\n‚Ä¢ Definierte Availability SLAs mit typischerweise neunundneunzig Komma neun Prozent Uptime\n‚Ä¢ Recovery Time Objectives (RTO) von wenigen Minuten f√ºr kritische Services\n‚Ä¢ Recovery Point Objectives (RPO) mit minimalem Datenverlust bei Ausf√§llen\n‚Ä¢ Performance Monitoring mit proaktiven Alerting-Systemen\n‚Ä¢ Capacity Planning f√ºr Lastspitzen und Wachstumsanforderungen\n\nüåê Global Distribution und Edge Services:\n‚Ä¢ Content Delivery Network Integration f√ºr optimierte Certificate Distribution\n‚Ä¢ Edge Computing Nodes f√ºr reduzierte Latenz und verbesserte Performance\n‚Ä¢ Regional Service Endpoints f√ºr lokale Compliance und Datenresidenz\n‚Ä¢ Anycast Routing f√ºr automatische Traffic-Umleitung bei Ausf√§llen\n‚Ä¢ Global Load Balancing mit intelligenter Traffic-Verteilung\n\nüîÑ Business Continuity Planning:\n‚Ä¢ Comprehensive Disaster Recovery Plans mit regelm√§√üigen Tests und Updates\n‚Ä¢ Emergency Response Teams mit definierten Eskalationsprozeduren\n‚Ä¢ Communication Plans f√ºr Stakeholder-Benachrichtigung bei St√∂rungen\n‚Ä¢ Alternative Processing Sites f√ºr kritische PKI-Operations\n‚Ä¢ Vendor Management f√ºr externe Dienstleister und Lieferanten\n\nüõ°Ô∏è Proaktive Monitoring und Incident Response:\n‚Ä¢ Security Operations Center mit kontinuierlicher √úberwachung\n‚Ä¢ Predictive Analytics f√ºr fr√ºhzeitige Erkennung potenzieller Probleme\n‚Ä¢ Automated Incident Response f√ºr schnelle Reaktion auf St√∂rungen\n‚Ä¢ Root Cause Analysis f√ºr kontinuierliche Verbesserung der Systemstabilit√§t\n‚Ä¢ Post-Incident Reviews f√ºr Lessons Learned und Prozessoptimierung\n\nüìã Compliance und Audit Readiness:\n‚Ä¢ Continuous Compliance Monitoring f√ºr regulatorische Anforderungen\n‚Ä¢ Audit Trail Preservation auch w√§hrend Disaster Recovery Szenarien\n‚Ä¢ Documentation Management f√ºr alle DR-Prozesse und -Verfahren\n‚Ä¢ Regular Compliance Assessments und Third-Party Audits\n‚Ä¢ Incident Reporting und Regulatory Notification Procedures"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Welche Kostenmodelle und Pricing-Strukturen bieten Managed PKI Services?',
        answer: "Managed PKI Services bieten flexible Kostenmodelle und Pricing-Strukturen, die sich an unterschiedliche Unternehmensanforderungen und Nutzungsmuster anpassen. Diese Modelle erm√∂glichen kosteneffiziente PKI-Nutzung ohne hohe Vorabinvestitionen.\n\nüí∞ Usage-basierte Pricing-Modelle:\n‚Ä¢ Pay-per-Certificate Modelle mit gestaffelten Preisen basierend auf Zertifikatsvolumen\n‚Ä¢ Transaction-based Pricing f√ºr Zertifikatsausstellung, Renewal und Revocation-Operationen\n‚Ä¢ Bandwidth-basierte Abrechnung f√ºr OCSP und CRL Distribution Services\n‚Ä¢ API Call Pricing f√ºr programmatische PKI-Integrationen und Automatisierung\n‚Ä¢ Storage-basierte Kosten f√ºr Certificate Archiving und Audit Trail Retention\n\nüìä Subscription und Service-Level Modelle:\n‚Ä¢ Tiered Subscription Plans mit verschiedenen Feature-Sets und Service-Levels\n‚Ä¢ Enterprise Licensing mit Flatrate-Preisen f√ºr unbegrenzte Zertifikatsnutzung\n‚Ä¢ Departmental Licensing f√ºr organisationsweite PKI-Services mit Kostenstellen-Zuordnung\n‚Ä¢ User-based Licensing f√ºr personenbezogene Zertifikate und Identity Management\n‚Ä¢ Device-based Licensing f√ºr IoT und Machine-to-Machine Kommunikation\n\nüè¢ Enterprise und Volume Pricing:\n‚Ä¢ Volume Discounts mit progressiven Rabatten bei steigenden Zertifikatsmengen\n‚Ä¢ Enterprise Agreements mit mehrj√§hrigen Vertr√§gen und Preisstabilit√§t\n‚Ä¢ Commitment-based Pricing mit Mindestabnahmen f√ºr bessere Konditionen\n‚Ä¢ Global Enterprise Licensing f√ºr multinationale Organisationen\n‚Ä¢ Partner und Reseller Pricing f√ºr Systemintegratoren und Managed Service Provider\n\n ‚òÅÔ∏è Cloud-native und Hybrid Pricing:\n‚Ä¢ Cloud Marketplace Integration mit Pay-as-you-go Modellen\n‚Ä¢ Reserved Instance Pricing f√ºr vorhersagbare Workloads mit Kosteneinsparungen\n‚Ä¢ Spot Pricing f√ºr tempor√§re oder entwicklungsbezogene PKI-Nutzung\n‚Ä¢ Hybrid Pricing f√ºr Kombinationen aus Cloud und On-Premises Services\n‚Ä¢ Multi-Cloud Pricing f√ºr plattform√ºbergreifende PKI-Deployments\n\nüîß Service-Add-on und Premium Features:\n‚Ä¢ Basic Service Tiers mit Upgrade-Optionen f√ºr erweiterte Funktionalit√§ten\n‚Ä¢ Premium Support Pricing f√ºr erweiterte SLAs und Priority Support\n‚Ä¢ Professional Services Pricing f√ºr Consulting, Implementation und Training\n‚Ä¢ Custom Development Pricing f√ºr spezielle Anpassungen und Integrationen\n‚Ä¢ Compliance Add-ons f√ºr spezielle regulatorische Anforderungen\n\nüìà Flexible Skalierungs- und Anpassungsoptionen:\n‚Ä¢ Auto-scaling Pricing mit automatischer Anpassung an Nutzungsspitzen\n‚Ä¢ Seasonal Pricing f√ºr Unternehmen mit saisonalen Schwankungen\n‚Ä¢ Project-based Pricing f√ºr tempor√§re oder projektspezifische PKI-Anforderungen\n‚Ä¢ Pilot Program Pricing f√ºr Evaluierung und Proof-of-Concept Projekte\n‚Ä¢ Migration Incentives f√ºr Wechsel von bestehenden PKI-L√∂sungen\n\nüí° Total Cost of Ownership Optimierung:\n‚Ä¢ Transparent Pricing ohne versteckte Kosten oder Setup-Geb√ºhren\n‚Ä¢ Predictable Monthly oder Annual Billing f√ºr bessere Budgetplanung\n‚Ä¢ Cost Optimization Tools f√ºr Monitoring und Analyse der PKI-Ausgaben\n‚Ä¢ ROI Calculators f√ºr Vergleich mit internen PKI-Implementierungen\n‚Ä¢ Cost Allocation und Chargeback-Funktionalit√§ten f√ºr interne Kostenverrechnung\n\nüéØ Branchenspezifische und Compliance Pricing:\n‚Ä¢ Healthcare und HIPAA Compliance Pricing f√ºr medizinische Einrichtungen\n‚Ä¢ Financial Services Pricing f√ºr Banken und Finanzdienstleister\n‚Ä¢ Government und Public Sector Pricing mit speziellen Konditionen\n‚Ä¢ Education Pricing f√ºr Universit√§ten und Bildungseinrichtungen\n‚Ä¢ Non-Profit Pricing f√ºr gemeinn√ºtzige Organisationen\n\nüìã Contract und Billing Flexibilit√§t:\n‚Ä¢ Monthly, Quarterly oder Annual Billing Cycles je nach Pr√§ferenz\n‚Ä¢ Multi-Currency Support f√ºr internationale Organisationen\n‚Ä¢ Flexible Payment Terms und Credit Arrangements\n‚Ä¢ Automated Billing und Invoice Management\n‚Ä¢ Detailed Usage Reporting und Cost Analytics f√ºr Transparenz und Kontrolle"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
