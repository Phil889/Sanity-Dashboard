import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Management page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-management' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-management" not found')
    }
    
    // Create new FAQs for IAM Management operational processes
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Wie entwickelt man eine effektive Role Management Strategie und welche Best Practices gew√§hrleisten optimale Berechtigungsstrukturen?',
        answer: "Eine effektive Role Management Strategie ist das Fundament f√ºr skalierbare, sichere und compliance-konforme Identit√§tsverwaltung. Durch intelligente Rollenarchitekturen, Business-orientierte Hierarchien und kontinuierliche Optimierung schaffen wir Berechtigungsstrukturen, die sowohl operative Effizienz als auch strategische Flexibilit√§t gew√§hrleisten, w√§hrend sie gleichzeitig Sicherheitsrisiken minimieren und regulatorische Anforderungen erf√ºllen.\n\nüéØ Strategic Role Architecture und Business-Alignment:\n‚Ä¢ Business-driven Role Design mit direkter Verbindung zu Organisationsstrukturen und Gesch√§ftsprozessen\n‚Ä¢ Hierarchical Role Models mit Vererbungsstrukturen f√ºr effiziente Verwaltung und Skalierbarkeit\n‚Ä¢ Functional Role Separation mit klarer Trennung zwischen Business-Rollen und technischen Berechtigungen\n‚Ä¢ Dynamic Role Composition f√ºr flexible Anpassung an sich √§ndernde Gesch√§ftsanforderungen\n‚Ä¢ Role Lifecycle Management mit automatisierten Prozessen f√ºr Erstellung, Modifikation und Deaktivierung\n\n‚öôÔ∏è Intelligent Role Mining und Optimization:\n‚Ä¢ Automated Role Discovery durch Analyse bestehender Zugriffsmuster und Benutzerverhalten\n‚Ä¢ Machine Learning-basierte Empfehlungen f√ºr optimale Rollenzusammensetzungen\n‚Ä¢ Outlier Detection f√ºr Identifikation ungew√∂hnlicher Berechtigungskombinationen\n‚Ä¢ Role Consolidation f√ºr Reduzierung von Rollenvielfalt und Vereinfachung der Verwaltung\n‚Ä¢ Continuous Optimization basierend auf tats√§chlicher Nutzung und Performance-Metriken\n\nüõ°Ô∏è Security-focused Role Governance:\n‚Ä¢ Segregation of Duties Integration mit automatischer Erkennung und Verhinderung von Interessenkonflikten\n‚Ä¢ Risk-based Role Assignment mit intelligenter Bewertung von Sicherheitsrisiken\n‚Ä¢ Toxic Combinations Prevention f√ºr gef√§hrliche Berechtigungskombinationen\n‚Ä¢ Privileged Role Management mit speziellen Kontrollen f√ºr administrative Funktionen\n‚Ä¢ Emergency Role Procedures mit umfassender Protokollierung und Audit-Trail\n\nüîç Advanced Role Analytics und Monitoring:\n‚Ä¢ Role Usage Analytics f√ºr Einblicke in tats√§chliche Rollennutzung und Optimierungspotenziale\n‚Ä¢ Access Pattern Analysis zur Identifikation von Trends und Anomalien\n‚Ä¢ Role Effectiveness Metrics f√ºr Bewertung der Rollenperformance und Business-Impact\n‚Ä¢ Compliance Monitoring mit kontinuierlicher √úberwachung regulatorischer Anforderungen\n‚Ä¢ Predictive Insights f√ºr proaktive Anpassung an zuk√ºnftige Gesch√§ftsanforderungen\n\n‚ö° Automated Role Provisioning und Management:\n‚Ä¢ Smart Role Assignment mit Business-Rule-Integration und automatisierten Workflows\n‚Ä¢ Self-Service Role Requests mit intelligenten Empfehlungen und Approval-Prozessen\n‚Ä¢ Temporary Role Assignment f√ºr Projektarbeit und zeitlich begrenzte Anforderungen\n‚Ä¢ Role Recertification mit automatisierten Kampagnen und intelligenten Empfehlungen\n‚Ä¢ Exception Handling mit automatisierten Eskalationsprozessen und Resolution-Tracking\n\nüåê Enterprise-Scale Role Management:\n‚Ä¢ Multi-tenant Role Architecture f√ºr komplexe Organisationsstrukturen\n‚Ä¢ Global Role Standards mit lokalen Anpassungen f√ºr internationale Compliance\n‚Ä¢ Cross-system Role Synchronization f√ºr konsistente Berechtigungen √ºber alle Plattformen\n‚Ä¢ Scalable Role Repository f√ºr Millionen von Rollen und Zuweisungen\n‚Ä¢ High-performance Role Engine f√ºr schnelle Autorisierungsentscheidungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Welche Automatisierungsstrategien maximieren die Effizienz von IAM Provisioning-Prozessen und wie gew√§hrleistet man dabei Sicherheit und Compliance?',
        answer: "Automatisierte IAM Provisioning-Prozesse sind das operative R√ºckgrat moderner Identit√§tsverwaltung und transformieren manuelle, fehleranf√§llige Workflows in intelligente, selbstoptimierende Systeme. Durch strategische Automatisierung, intelligente Business-Rule-Integration und kontinuierliche √úberwachung schaffen wir Provisioning-Landschaften, die sowohl operative Exzellenz als auch h√∂chste Sicherheitsstandards gew√§hrleisten.\n\nüéØ Strategic Automation Framework und Process Design:\n‚Ä¢ End-to-End Workflow Automation von HR-Integration bis zur finalen Account-Aktivierung\n‚Ä¢ Business-Rule-Engine f√ºr intelligente Entscheidungen basierend auf Organisationsdaten und Policies\n‚Ä¢ Event-driven Architecture f√ºr Real-time Verarbeitung von Identit√§ts√§nderungen\n‚Ä¢ Exception-based Processing mit automatisierter Behandlung von Standardf√§llen und manueller Eskalation bei Ausnahmen\n‚Ä¢ Continuous Process Optimization durch Machine Learning und Performance-Analytics\n\n‚ö° Intelligent Onboarding und Account Creation:\n‚Ä¢ Pre-boarding Automation mit Integration in HR-Systeme und automatischer Vorbereitung aller Ressourcen\n‚Ä¢ Smart Account Generation mit Business-Rule-basierter Zuweisung von Benutzernamen, E-Mail-Adressen und initialen Berechtigungen\n‚Ä¢ Role-based Provisioning mit automatischer Zuweisung basierend auf Position, Abteilung und Gesch√§ftsanforderungen\n‚Ä¢ Multi-system Orchestration f√ºr simultane Account-Erstellung in allen relevanten Systemen\n‚Ä¢ Welcome Package Automation mit personalisierten Informationen und automatischer Bereitstellung von Zugangsdaten\n\nüîÑ Dynamic Change Management und Adaptive Provisioning:\n‚Ä¢ Real-time HR Synchronization f√ºr sofortige Verarbeitung von Organisations√§nderungen\n‚Ä¢ Intelligent Role Transition mit automatischer Anpassung von Berechtigungen bei Positionswechseln\n‚Ä¢ Temporary Access Automation f√ºr Projektarbeit und zeitlich begrenzte Anforderungen\n‚Ä¢ Delegation Workflows f√ºr Urlaubsvertretungen und tempor√§re Verantwortungs√ºbertragungen\n‚Ä¢ Bulk Operations f√ºr effiziente Verarbeitung gro√üer √Ñnderungsvolumen\n\nüõ°Ô∏è Security-integrated Provisioning und Risk Management:\n‚Ä¢ Risk-based Provisioning mit automatischer Bewertung von Sicherheitsrisiken bei jeder Berechtigungszuweisung\n‚Ä¢ Segregation of Duties Enforcement mit automatischer Erkennung und Verhinderung von Interessenkonflikten\n‚Ä¢ Approval Workflows mit intelligenten Routing-Algorithmen und Risk-based Eskalation\n‚Ä¢ Security Validation mit automatisierten Checks gegen Security-Policies und Compliance-Anforderungen\n‚Ä¢ Anomaly Detection f√ºr ungew√∂hnliche Provisioning-Anfragen und verd√§chtige Aktivit√§ten\n\nüìä Comprehensive Monitoring und Quality Assurance:\n‚Ä¢ Real-time Provisioning Monitoring mit sofortiger Erkennung von Fehlern und Anomalien\n‚Ä¢ Quality Gates mit automatisierten Validierungen vor finaler Account-Aktivierung\n‚Ä¢ Performance Metrics f√ºr kontinuierliche √úberwachung von Provisioning-Geschwindigkeit und Erfolgsraten\n‚Ä¢ Audit Trail Management mit umfassender Dokumentation aller Provisioning-Aktivit√§ten\n‚Ä¢ Compliance Reporting mit automatisierter Erstellung regulatorischer Berichte\n\nüåê Enterprise-Scale Automation und Integration:\n‚Ä¢ Multi-cloud Provisioning f√ºr konsistente Account-Erstellung √ºber alle Cloud-Plattformen\n‚Ä¢ Legacy System Integration mit speziellen Adaptern f√ºr √§ltere Anwendungen\n‚Ä¢ API-driven Architecture f√ºr nahtlose Integration moderner Anwendungslandschaften\n‚Ä¢ Scalable Processing f√ºr Millionen von Provisioning-Transaktionen\n‚Ä¢ Global Deployment mit lokalen Anpassungen f√ºr internationale Compliance-Anforderungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Wie implementiert man effektive IAM Monitoring und Analytics Systeme f√ºr kontinuierliche √úberwachung und proaktive Risikominimierung?',
        answer: "Effektive IAM Monitoring und Analytics Systeme sind das intelligente Nervensystem moderner Identit√§tsverwaltung und transformieren passive √úberwachung in proaktive, datengetriebene Sicherheitsintelligenz. Durch kontinuierliche Analyse, Machine Learning-basierte Anomaly Detection und Real-time Response-Mechanismen schaffen wir eine IAM-Landschaft, die Bedrohungen erkennt, bevor sie zu Sicherheitsvorf√§llen werden.\n\nüéØ Strategic Monitoring Architecture und Intelligence Framework:\n‚Ä¢ Comprehensive Data Collection von allen IAM-Komponenten, Anwendungen und Infrastrukturelementen\n‚Ä¢ Real-time Event Processing mit intelligenter Korrelation und Kontextualisierung\n‚Ä¢ Multi-dimensional Analytics f√ºr Benutzerverhalten, Zugriffsmuster und Systemperformance\n‚Ä¢ Predictive Intelligence mit Machine Learning f√ºr Vorhersage potenzieller Sicherheitsrisiken\n‚Ä¢ Continuous Learning mit adaptiven Algorithmen f√ºr verbesserte Erkennungsgenauigkeit\n\nüîç Advanced Behavioral Analytics und Anomaly Detection:\n‚Ä¢ User Behavior Analytics f√ºr Erstellung individueller Verhaltensprofile und Erkennung von Abweichungen\n‚Ä¢ Entity Behavior Analytics f√ºr √úberwachung von Anwendungen, Services und Infrakomponenten\n‚Ä¢ Peer Group Analysis f√ºr Vergleich mit √§hnlichen Benutzern und Identifikation von Ausrei√üern\n‚Ä¢ Time-series Analysis f√ºr Erkennung zeitlicher Anomalien und ungew√∂hnlicher Aktivit√§tsmuster\n‚Ä¢ Risk Scoring mit dynamischen Algorithmen f√ºr kontinuierliche Risikobewertung\n\n‚ö° Real-time Threat Detection und Response:\n‚Ä¢ Insider Threat Detection mit speziellen Algorithmen f√ºr Erkennung kompromittierter oder b√∂swilliger Insider\n‚Ä¢ Account Takeover Detection f√ºr sofortige Erkennung von Credential-Diebstahl und unauthorisierten Zugriffen\n‚Ä¢ Privilege Escalation Monitoring f√ºr √úberwachung ungew√∂hnlicher Berechtigungs√§nderungen\n‚Ä¢ Lateral Movement Detection f√ºr Erkennung von Angreifern, die sich durch das Netzwerk bewegen\n‚Ä¢ Automated Response mit sofortigen Schutzma√ünahmen bei kritischen Bedrohungen\n\nüìä Comprehensive Compliance und Governance Analytics:\n‚Ä¢ Access Governance Monitoring mit kontinuierlicher √úberwachung von Berechtigungsstrukturen\n‚Ä¢ Segregation of Duties Analytics f√ºr Erkennung von Interessenkonflikten und Policy-Verst√∂√üen\n‚Ä¢ Compliance Dashboard mit Real-time √úberwachung regulatorischer Anforderungen\n‚Ä¢ Audit Analytics f√ºr intelligente Vorbereitung und Unterst√ºtzung von Compliance-Audits\n‚Ä¢ Risk Trend Analysis f√ºr proaktive Identifikation von Governance-Herausforderungen\n\nüõ°Ô∏è Security Intelligence und Threat Correlation:\n‚Ä¢ Threat Intelligence Integration f√ºr Anreicherung von Monitoring-Daten mit externen Bedrohungsinformationen\n‚Ä¢ Cross-system Correlation f√ºr ganzheitliche Sicht auf Sicherheitsereignisse\n‚Ä¢ Attack Pattern Recognition f√ºr Erkennung bekannter Angriffsmuster und Taktiken\n‚Ä¢ False Positive Reduction durch intelligente Filterung und Kontextualisierung\n‚Ä¢ Incident Enrichment mit automatischer Sammlung relevanter Kontextinformationen\n\nüåê Enterprise-Scale Analytics und Performance Optimization:\n‚Ä¢ Big Data Analytics f√ºr Verarbeitung gro√üer Datenmengen aus globalen Deployments\n‚Ä¢ Stream Processing f√ºr Real-time Analyse hochfrequenter Ereignisse\n‚Ä¢ Machine Learning Pipelines f√ºr kontinuierliche Verbesserung der Erkennungsalgorithmen\n‚Ä¢ Scalable Storage f√ºr langfristige Aufbewahrung und historische Analyse\n‚Ä¢ Performance Optimization mit intelligenten Caching und Indexing-Strategien"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Welche Strategien gew√§hrleisten erfolgreiche IAM Integration in komplexe Enterprise-Umgebungen und wie minimiert man Disruption bestehender Gesch√§ftsprozesse?',
        answer: "Erfolgreiche IAM Integration in komplexe Enterprise-Umgebungen erfordert eine strategische, phasenweise Herangehensweise, die technische Exzellenz mit Business-Kontinuit√§t verbindet. Durch intelligente Integrationsmuster, minimale Disruption und kontinuierliche Stakeholder-Einbindung schaffen wir IAM-Landschaften, die nahtlos in bestehende Infrastrukturen eingebettet werden, w√§hrend sie gleichzeitig transformative Verbesserungen erm√∂glichen.\n\nüéØ Strategic Integration Planning und Enterprise Architecture:\n‚Ä¢ Comprehensive Current-State Assessment mit detaillierter Analyse aller bestehenden Systeme und Prozesse\n‚Ä¢ Future-State Architecture Design mit klarer Vision f√ºr die Ziel-IAM-Landschaft\n‚Ä¢ Integration Roadmap mit phasenweiser Implementierung und Risikominimierung\n‚Ä¢ Stakeholder Alignment mit kontinuierlicher Einbindung aller relevanten Gesch√§ftsbereiche\n‚Ä¢ Change Impact Analysis f√ºr Bewertung und Minimierung von Gesch√§ftsdisruption\n\n‚öôÔ∏è Technical Integration Patterns und Connectivity:\n‚Ä¢ API-first Integration f√ºr moderne, skalierbare Anbindung neuer Anwendungen\n‚Ä¢ Legacy System Adapters f√ºr sichere Integration √§lterer Anwendungen ohne Code-√Ñnderungen\n‚Ä¢ Federated Identity f√ºr nahtlose Single Sign-On √ºber alle Systeme hinweg\n‚Ä¢ Event-driven Integration f√ºr Real-time Synchronisation und Datenkonzistenz\n‚Ä¢ Hybrid Deployment Models f√ºr schrittweise Migration von On-Premises zu Cloud\n\nüîÑ Phased Implementation und Risk Mitigation:\n‚Ä¢ Pilot Programs mit ausgew√§hlten Anwendungen und Benutzergruppen f√ºr Proof-of-Concept\n‚Ä¢ Parallel Operations mit gleichzeitigem Betrieb alter und neuer Systeme w√§hrend der √úbergangsphase\n‚Ä¢ Gradual Migration mit schrittweiser √úberf√ºhrung von Benutzern und Anwendungen\n‚Ä¢ Rollback Capabilities f√ºr sofortige R√ºckkehr zu vorherigen Zust√§nden bei kritischen Problemen\n‚Ä¢ Continuous Monitoring mit Real-time √úberwachung der Integrationsstabilit√§t\n\nüõ°Ô∏è Security und Compliance w√§hrend der Integration:\n‚Ä¢ Security-by-Design mit Integration von Sicherheitskontrollen von Beginn an\n‚Ä¢ Zero-Downtime Migration f√ºr kritische Gesch√§ftsprozesse ohne Unterbrechung\n‚Ä¢ Data Protection mit sicherer √úbertragung und Speicherung w√§hrend der Migration\n‚Ä¢ Compliance Continuity f√ºr durchg√§ngige Erf√ºllung regulatorischer Anforderungen\n‚Ä¢ Audit Trail Preservation mit l√ºckenloser Dokumentation aller Integrationsaktivit√§ten\n\nüìä Performance Optimization und Quality Assurance:\n‚Ä¢ Load Testing mit Simulation realer Produktionslasten vor Go-Live\n‚Ä¢ Performance Monitoring mit kontinuierlicher √úberwachung von Response-Zeiten und Durchsatz\n‚Ä¢ Capacity Planning f√ºr angemessene Ressourcenallokation und Skalierbarkeit\n‚Ä¢ Quality Gates mit automatisierten Tests und Validierungen vor jeder Implementierungsphase\n‚Ä¢ User Acceptance Testing mit umfassender Validierung durch Gesch√§ftsbenutzer\n\nüåê Change Management und User Adoption:\n‚Ä¢ Communication Strategy mit transparenter Information aller Stakeholder √ºber √Ñnderungen und Vorteile\n‚Ä¢ Training Programs mit umfassender Schulung f√ºr Endbenutzer und Administratoren\n‚Ä¢ Support Structure mit dediziertem Support-Team w√§hrend der √úbergangsphase\n‚Ä¢ Feedback Loops mit kontinuierlicher Sammlung und Integration von Benutzerfeedback\n‚Ä¢ Success Metrics mit messbaren KPIs f√ºr Bewertung des Integrationserfolgs"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
