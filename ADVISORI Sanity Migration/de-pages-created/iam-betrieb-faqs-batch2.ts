import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Betrieb page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-betrieb' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-betrieb" not found')
    }
    
    // Create new FAQs for IAM Betrieb operations
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Wie implementiert man effektives Change Management im IAM Betrieb und welche Strategien minimieren Risiken bei System-Updates und Konfigurations√§nderungen?',
        answer: "Effektives Change Management im IAM Betrieb ist das strategische R√ºckgrat stabiler und sicherer Identit√§tssysteme und gew√§hrleistet durch strukturierte Prozesse, umfassende Risikobewertung und kontrollierte Deployment-Strategien die sichere Evolution kritischer IAM-Infrastrukturen ohne Beeintr√§chtigung der Gesch√§ftskontinuit√§t. Modernes IAM Change Management transformiert potenzielle Risikofaktoren in kontrollierte Innovationsm√∂glichkeiten.\n\nüìã Strategic Change Planning und Risk Assessment:\n‚Ä¢ Comprehensive Change Impact Analysis mit Business-Impact-Bewertung und Stakeholder-Mapping\n‚Ä¢ Risk-based Change Classification mit angepassten Approval-Workflows und Kontrollebenen\n‚Ä¢ Dependency Analysis f√ºr Verst√§ndnis komplexer System-Interdependenzen und Downstream-Effects\n‚Ä¢ Business-Continuity-Assessment f√ºr Sicherstellung unterbrechungsfreier Service-Delivery\n‚Ä¢ Rollback-Strategy-Definition mit detaillierten Recovery-Procedures und Contingency-Planning\n\nüîç Advanced Testing und Validation-Frameworks:\n‚Ä¢ Multi-Stage Testing-Environment mit Production-like Configurations und Real-world-Scenarios\n‚Ä¢ Automated Testing-Pipelines mit Regression-Tests und Performance-Validation\n‚Ä¢ Security-Testing-Integration mit Vulnerability-Scanning und Penetration-Testing\n‚Ä¢ User-Acceptance-Testing mit Business-User-Involvement und Functionality-Validation\n‚Ä¢ Load-Testing und Stress-Testing f√ºr Performance-Impact-Assessment\n\n‚öôÔ∏è Controlled Deployment und Release-Management:\n‚Ä¢ Blue-Green-Deployment-Strategies f√ºr Zero-Downtime-Updates und Instant-Rollback-Capabilities\n‚Ä¢ Canary-Releases mit graduellem Traffic-Routing und Real-time-Monitoring\n‚Ä¢ Feature-Flags f√ºr kontrollierte Feature-Activation und A/B-Testing-Capabilities\n‚Ä¢ Phased-Rollout-Strategies mit User-Group-based Deployment und Feedback-Integration\n‚Ä¢ Automated-Deployment-Pipelines mit Continuous-Integration und Quality-Gates\n\nüõ°Ô∏è Security-focused Change Controls:\n‚Ä¢ Security-Review-Boards mit Cyber-Security-Expert-Involvement und Threat-Assessment\n‚Ä¢ Compliance-Validation f√ºr regulatorische Konformit√§t und Audit-Trail-Maintenance\n‚Ä¢ Privileged-Access-Controls f√ºr Change-Implementation mit Segregation-of-Duties\n‚Ä¢ Security-Configuration-Baselines mit Drift-Detection und Compliance-Monitoring\n‚Ä¢ Vulnerability-Assessment-Integration f√ºr Security-Impact-Evaluation\n\nüìä Change Monitoring und Performance-Tracking:\n‚Ä¢ Real-time Change-Impact-Monitoring mit KPI-Tracking und Anomaly-Detection\n‚Ä¢ Performance-Baseline-Comparison f√ºr Identification von Performance-Degradation\n‚Ä¢ User-Experience-Monitoring mit Response-Time-Analysis und Error-Rate-Tracking\n‚Ä¢ Business-Metrics-Monitoring f√ºr Assessment von Business-Impact und Value-Delivery\n‚Ä¢ Automated-Alerting-Systems f√ºr sofortige Benachrichtigung bei Change-related-Issues\n\nüîÑ Continuous Improvement und Lessons-Learned:\n‚Ä¢ Post-Implementation-Reviews mit Success-Criteria-Assessment und Improvement-Identification\n‚Ä¢ Change-Metrics-Analysis f√ºr Trend-Identification und Process-Optimization\n‚Ä¢ Knowledge-Base-Updates mit Best-Practice-Documentation und Troubleshooting-Guides\n‚Ä¢ Process-Refinement basierend auf Change-Outcomes und Stakeholder-Feedback\n‚Ä¢ Training-Program-Updates f√ºr Skill-Enhancement und Change-Management-Excellence"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Welche Rolle spielt Security Operations Center Integration im IAM Betrieb und wie gew√§hrleistet sie umfassende Threat Detection und Incident Response?',
        answer: "Security Operations Center Integration im IAM Betrieb ist das operative Nervensystem moderner Cyber-Defense-Strategien und schafft durch nahtlose Verzahnung von Identity-Security-Events mit umfassender Threat-Intelligence eine hocheffektive Verteidigungsarchitektur gegen Advanced Persistent Threats und Insider-Angriffe. Diese Integration transformiert isolierte Sicherheitssysteme in ein intelligentes, adaptives Ecosystem f√ºr proaktive Bedrohungsabwehr.\n\nüîç Advanced Threat Detection und Identity-Analytics:\n‚Ä¢ Behavioral-Analytics-Integration f√ºr Erkennung anomaler Benutzeraktivit√§ten und Insider-Threats\n‚Ä¢ Machine-Learning-basierte Pattern-Recognition f√ºr Identification sophistizierter Angriffsmuster\n‚Ä¢ Cross-System-Correlation f√ºr Zusammenf√ºhrung von IAM-Events mit Network-Security-Intelligence\n‚Ä¢ Real-time Risk-Scoring mit dynamischer Anpassung basierend auf Threat-Landscape-Changes\n‚Ä¢ Predictive-Threat-Modeling f√ºr proaktive Identification potenzieller Sicherheitsrisiken\n\nüö® Intelligent Event Correlation und SIEM-Integration:\n‚Ä¢ Multi-Source-Event-Aggregation mit Normalization und Enrichment von IAM-Security-Events\n‚Ä¢ Advanced-Correlation-Rules f√ºr Identification komplexer Attack-Chains und Multi-Stage-Threats\n‚Ä¢ Threat-Intelligence-Integration f√ºr Context-Enrichment und IOC-Matching\n‚Ä¢ False-Positive-Reduction durch Machine-Learning-basierte Event-Classification\n‚Ä¢ Priority-based Alert-Management mit Business-Impact-Assessment und Resource-Allocation\n\n‚ö° Automated Incident Response und Orchestration:\n‚Ä¢ Playbook-driven Response-Automation f√ºr standardisierte Incident-Handling-Procedures\n‚Ä¢ Dynamic-Containment-Strategies mit automatischer Account-Isolation und Access-Revocation\n‚Ä¢ Threat-Hunting-Automation f√ºr proaktive Suche nach versteckten Bedrohungen\n‚Ä¢ Evidence-Collection-Automation f√ºr Forensic-Analysis und Legal-Compliance\n‚Ä¢ Stakeholder-Notification-Automation mit Role-based Communication und Escalation-Procedures\n\nüõ°Ô∏è Proactive Defense und Threat-Intelligence-Integration:\n‚Ä¢ Threat-Feed-Integration f√ºr Real-time Updates zu aktuellen Bedrohungslagen\n‚Ä¢ Indicator-of-Compromise-Monitoring mit automatischer Blocking und Alerting\n‚Ä¢ Vulnerability-Intelligence-Correlation f√ºr Prioritization von Security-Patches\n‚Ä¢ Adversary-Tactics-Tracking f√ºr Understanding von Angreifer-Methoden und Countermeasures\n‚Ä¢ Threat-Landscape-Analysis f√ºr strategische Security-Planning und Resource-Allocation\n\nüìä Security Metrics und Compliance-Reporting:\n‚Ä¢ Security-KPI-Dashboards mit Real-time Visibility in Security-Posture und Threat-Exposure\n‚Ä¢ Compliance-Reporting-Automation f√ºr regulatorische Anforderungen und Audit-Bereitschaft\n‚Ä¢ Risk-Assessment-Metrics f√ºr quantitative Bewertung von Security-Improvements\n‚Ä¢ Incident-Trend-Analysis f√ºr Identification von Security-Gaps und Improvement-Opportunities\n‚Ä¢ Executive-Reporting mit Business-Impact-Assessment und ROI-Calculation\n\nüîó Cross-Platform Integration und Ecosystem-Orchestration:\n‚Ä¢ API-driven Integration f√ºr nahtlose Kommunikation zwischen IAM und SOC-Systemen\n‚Ä¢ Workflow-Orchestration f√ºr koordinierte Response-Actions √ºber Multiple-Security-Tools\n‚Ä¢ Cloud-Security-Integration f√ºr Hybrid und Multi-Cloud-Environment-Protection\n‚Ä¢ Third-Party-Tool-Integration f√ºr Comprehensive-Security-Ecosystem-Coverage\n‚Ä¢ Vendor-Agnostic-Orchestration f√ºr Flexibility und Best-of-Breed-Tool-Selection"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Wie etabliert man effektive Performance-Monitoring-Strategien f√ºr IAM-Systeme und welche Metriken sind entscheidend f√ºr optimale Service-Delivery?',
        answer: "Effektive Performance-Monitoring-Strategien f√ºr IAM-Systeme sind das analytische Fundament operationaler Exzellenz und erm√∂glichen durch intelligente Metriken-Erfassung, proaktive Trend-Analyse und datengetriebene Optimierung die kontinuierliche Maximierung von System-Performance, User-Experience und Business-Value. Modernes IAM Performance-Monitoring transformiert reaktive Problembehandlung in pr√§ventive Performance-Optimierung.\n\nüìä Comprehensive Metrics Framework und KPI-Definition:\n‚Ä¢ Response-Time-Metrics mit granularer Aufschl√ºsselung nach Authentication-Types und User-Journeys\n‚Ä¢ Throughput-Measurements f√ºr Transaction-Volume-Tracking und Capacity-Utilization-Analysis\n‚Ä¢ Availability-Metrics mit Service-Level-Agreement-Compliance und Downtime-Impact-Assessment\n‚Ä¢ Error-Rate-Analysis mit Categorization nach Error-Types und Root-Cause-Identification\n‚Ä¢ User-Experience-Metrics mit End-to-End-Journey-Tracking und Satisfaction-Scoring\n\n‚ö° Real-time Monitoring und Alerting-Systems:\n‚Ä¢ Multi-Layer-Monitoring von Infrastructure, Application und Business-Service-Levels\n‚Ä¢ Intelligent-Threshold-Management mit Dynamic-Baselines und Anomaly-Detection\n‚Ä¢ Predictive-Alerting f√ºr proaktive Benachrichtigung vor Performance-Degradation\n‚Ä¢ Escalation-Automation mit Role-based Notification und Response-Time-Tracking\n‚Ä¢ Dashboard-Visualization mit Real-time Updates und Drill-down-Capabilities\n\nüîç Advanced Analytics und Trend-Analysis:\n‚Ä¢ Historical-Performance-Analysis mit Trend-Identification und Seasonal-Pattern-Recognition\n‚Ä¢ Capacity-Planning-Analytics f√ºr Forecasting zuk√ºnftiger Resource-Requirements\n‚Ä¢ Performance-Bottleneck-Analysis mit Hotspot-Identification und Optimization-Recommendations\n‚Ä¢ Correlation-Analysis zwischen Performance-Metrics und Business-Outcomes\n‚Ä¢ Predictive-Modeling f√ºr Performance-Forecasting und Proactive-Optimization\n\nüéØ User-Experience-Focused Monitoring:\n‚Ä¢ End-User-Response-Time-Tracking mit Geographic und Device-based Segmentation\n‚Ä¢ Authentication-Success-Rate-Monitoring mit Failure-Analysis und Improvement-Tracking\n‚Ä¢ Single-Sign-On-Performance-Metrics mit Cross-Application-Journey-Analysis\n‚Ä¢ Mobile-Access-Performance-Tracking mit Network-Condition-Correlation\n‚Ä¢ Self-Service-Portal-Performance mit User-Interaction-Analysis und Conversion-Tracking\n\nüõ†Ô∏è Infrastructure Performance und Resource-Optimization:\n‚Ä¢ Server-Performance-Metrics mit CPU, Memory, Disk und Network-Utilization-Tracking\n‚Ä¢ Database-Performance-Monitoring mit Query-Analysis und Index-Optimization-Recommendations\n‚Ä¢ Network-Latency-Analysis mit Geographic-Distribution und CDN-Performance-Assessment\n‚Ä¢ Load-Balancer-Performance mit Traffic-Distribution-Analysis und Health-Check-Monitoring\n‚Ä¢ Cloud-Resource-Utilization mit Cost-Optimization und Right-Sizing-Recommendations\n\nüìà Business-Impact Metrics und Value-Demonstration:\n‚Ä¢ Business-Process-Performance mit IAM-Integration-Impact-Assessment\n‚Ä¢ Productivity-Metrics mit Time-Savings-Calculation und Efficiency-Improvements\n‚Ä¢ Security-Incident-Correlation mit Performance-Impact-Analysis\n‚Ä¢ Compliance-Metrics mit Audit-Readiness und Regulatory-Performance-Tracking\n‚Ä¢ ROI-Calculation mit Cost-Benefit-Analysis und Value-Realization-Measurement"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Welche Best Practices gew√§hrleisten erfolgreiche Disaster Recovery und Business Continuity f√ºr kritische IAM-Infrastrukturen?',
        answer: "Erfolgreiche Disaster Recovery und Business Continuity f√ºr kritische IAM-Infrastrukturen erfordern eine ganzheitliche Strategie, die technische Robustheit mit operationaler Exzellenz verbindet und durch umfassende Planung, regelm√§√üige Tests und kontinuierliche Optimierung die Gesch√§ftskontinuit√§t auch bei schwerwiegenden St√∂rungen sicherstellt. Moderne IAM Business Continuity transformiert potenzielle Katastrophenszenarien in beherrschbare Gesch√§ftsrisiken.\n\nüéØ Strategic Business Continuity Planning:\n‚Ä¢ Business-Impact-Analysis mit Identification kritischer IAM-Services und Recovery-Priorit√§ten\n‚Ä¢ Recovery-Time-Objective und Recovery-Point-Objective Definition f√ºr verschiedene Service-Levels\n‚Ä¢ Risk-Assessment mit Threat-Modeling und Vulnerability-Analysis f√ºr Disaster-Scenarios\n‚Ä¢ Stakeholder-Mapping mit Roles und Responsibilities f√ºr Emergency-Response-Teams\n‚Ä¢ Communication-Plans mit Internal und External-Stakeholder-Notification-Procedures\n\nüèóÔ∏è Resilient Architecture Design und Redundancy-Implementation:\n‚Ä¢ Multi-Site-Deployment mit Geographic-Distribution und Active-Active-Configurations\n‚Ä¢ Data-Replication-Strategies mit Real-time Synchronization und Consistency-Management\n‚Ä¢ Load-Balancing und Failover-Mechanisms mit Automatic-Detection und Traffic-Redirection\n‚Ä¢ Cloud-based Backup-Sites mit Rapid-Deployment-Capabilities und Elastic-Scaling\n‚Ä¢ Network-Redundancy mit Multiple-Connectivity-Paths und Carrier-Diversity\n\nüíæ Comprehensive Backup und Data-Protection-Strategies:\n‚Ä¢ Multi-Tier-Backup-Architecture mit Local, Remote und Cloud-based Storage-Options\n‚Ä¢ Incremental und Differential-Backup-Strategies f√ºr Optimization von Storage und Recovery-Time\n‚Ä¢ Cross-Platform-Backup-Validation mit Integrity-Checks und Recovery-Testing\n‚Ä¢ Encryption-at-Rest und In-Transit f√ºr Data-Protection und Compliance-Requirements\n‚Ä¢ Retention-Policy-Management mit Legal-Hold-Capabilities und Automated-Purging\n\nüîÑ Recovery Procedures und Automation:\n‚Ä¢ Automated-Failover-Procedures mit Health-Check-Monitoring und Trigger-Mechanisms\n‚Ä¢ Step-by-Step-Recovery-Runbooks mit Detailed-Instructions und Decision-Trees\n‚Ä¢ Recovery-Automation-Scripts mit Error-Handling und Rollback-Capabilities\n‚Ä¢ Database-Recovery-Procedures mit Point-in-Time-Recovery und Transaction-Log-Management\n‚Ä¢ Application-Recovery-Orchestration mit Dependency-Management und Service-Startup-Sequencing\n\nüß™ Regular Testing und Validation-Programs:\n‚Ä¢ Disaster-Recovery-Drills mit Realistic-Scenarios und Full-Scale-Testing\n‚Ä¢ Tabletop-Exercises mit Cross-functional-Teams und Decision-Making-Simulations\n‚Ä¢ Recovery-Time-Testing mit Performance-Measurement und Improvement-Identification\n‚Ä¢ Data-Integrity-Validation mit Comprehensive-Verification und Quality-Assurance\n‚Ä¢ Lessons-Learned-Integration mit Process-Improvement und Plan-Updates\n\nüìã Governance und Compliance-Management:\n‚Ä¢ Regulatory-Compliance-Alignment mit Industry-Standards und Legal-Requirements\n‚Ä¢ Documentation-Management mit Version-Control und Access-Management\n‚Ä¢ Audit-Trail-Maintenance mit Comprehensive-Logging und Evidence-Collection\n‚Ä¢ Third-Party-Vendor-Management mit SLA-Alignment und Recovery-Coordination\n‚Ä¢ Insurance-Coordination mit Coverage-Assessment und Claims-Management-Procedures"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
