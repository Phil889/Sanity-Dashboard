import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating VS-NfD page with FAQ batch 3...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'vs-nfd' })
    
    if (!existingDoc) {
      throw new Error('Document "vs-nfd" not found')
    }
    
    // Create new FAQs for organizational controls and processes
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 9),
        question: 'Welche organisatorischen Kontrollen und Governance-Strukturen sind f√ºr VS-NfD Compliance erforderlich?',
        answer: "Die Implementierung effektiver organisatorischer Kontrollen und Governance-Strukturen ist fundamental f√ºr eine erfolgreiche VS-NfD Compliance. Diese Strukturen schaffen das notwendige Framework f√ºr die systematische Verwaltung klassifizierter Informationen und gew√§hrleisten, dass alle Mitarbeiter und Prozesse den erforderlichen Sicherheitsstandards entsprechen. Eine durchdachte Governance-Architektur ist essentiell f√ºr nachhaltige Compliance.\n\nüèõÔ∏è Governance-Framework und Verantwortlichkeiten:\n‚Ä¢ Etablierung eines dedizierten Geheimschutzbeauftragten oder Information-Security-Officers f√ºr VS-NfD Angelegenheiten\n‚Ä¢ Definition klarer Rollen und Verantwortlichkeiten f√ºr alle Ebenen der Organisation\n‚Ä¢ Implementierung von Governance-Gremien mit regelm√§√üigen Review-Zyklen f√ºr VS-NfD Compliance\n‚Ä¢ Entwicklung von Eskalationspfaden und Entscheidungsstrukturen f√ºr sicherheitsrelevante Angelegenheiten\n‚Ä¢ Integration von VS-NfD Governance in bestehende Unternehmensf√ºhrungsstrukturen\n\nüìã Richtlinien und Verfahrensdokumentation:\n‚Ä¢ Entwicklung umfassender Sicherheitsrichtlinien speziell f√ºr VS-NfD Informationsverarbeitung\n‚Ä¢ Erstellung detaillierter Arbeitsanweisungen f√ºr den t√§glichen Umgang mit klassifizierten Informationen\n‚Ä¢ Implementierung von Dokumentenmanagement-Systemen f√ºr Richtlinien und Verfahren\n‚Ä¢ Regelm√§√üige √úberpr√ºfung und Aktualisierung aller Compliance-Dokumentationen\n‚Ä¢ Sicherstellung der Verf√ºgbarkeit und Zug√§nglichkeit relevanter Richtlinien f√ºr alle Mitarbeiter\n\nüîê Zugangsmanagement und Berechtigungskontrollen:\n‚Ä¢ Implementierung des Need-to-Know-Prinzips f√ºr alle VS-NfD Informationszugriffe\n‚Ä¢ Etablierung formaler Verfahren f√ºr Berechtigungserteilung, -√ºberpr√ºfung und -entzug\n‚Ä¢ Regelm√§√üige Access-Reviews und Rezertifizierungsprozesse f√ºr alle Benutzerkonten\n‚Ä¢ Implementierung von Segregation-of-Duties-Prinzipien f√ºr kritische Gesch√§ftsprozesse\n‚Ä¢ Dokumentation und Audit-Trail f√ºr alle Zugangs√§nderungen und -entscheidungen\n\nüë• Personalmanagement und Sicherheits√ºberpr√ºfungen:\n‚Ä¢ Entwicklung spezifischer Einstellungsverfahren f√ºr Positionen mit VS-NfD Zugang\n‚Ä¢ Implementierung von Background-Checks und Referenzpr√ºfungen f√ºr relevante Mitarbeiter\n‚Ä¢ Etablierung von Vertraulichkeitsverpflichtungen und Sicherheitsvereinbarungen\n‚Ä¢ Regelm√§√üige Sicherheitsschulungen und Awareness-Programme f√ºr alle Mitarbeiter\n‚Ä¢ Entwicklung von Verfahren f√ºr Mitarbeiterausscheiden und Berechtigungsentzug\n\nüìä Monitoring und Compliance-√úberwachung:\n‚Ä¢ Implementierung kontinuierlicher Monitoring-Systeme f√ºr VS-NfD Compliance-Status\n‚Ä¢ Etablierung von Key-Performance-Indicators und Compliance-Metriken\n‚Ä¢ Regelm√§√üige interne Audits und Selbstbewertungen der Compliance-Posture\n‚Ä¢ Entwicklung von Reporting-Mechanismen f√ºr Management und Aufsichtsbeh√∂rden\n‚Ä¢ Implementierung von Corrective-Action-Prozessen f√ºr identifizierte Compliance-L√ºcken\n\nüîÑ Change-Management und Kontinuierliche Verbesserung:\n‚Ä¢ Etablierung formaler Change-Management-Prozesse f√ºr sicherheitsrelevante √Ñnderungen\n‚Ä¢ Implementierung von Risk-Assessment-Verfahren f√ºr alle organisatorischen √Ñnderungen\n‚Ä¢ Entwicklung von Lessons-Learned-Prozessen aus Sicherheitsvorf√§llen und Audits\n‚Ä¢ Regelm√§√üige Bewertung und Optimierung der Governance-Strukturen\n‚Ä¢ Integration von Best-Practices und regulatorischen Entwicklungen in die Organisationsstrukturen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 10),
        question: 'Wie sollten Incident-Response und Security-Breach-Management-Verfahren f√ºr VS-NfD Informationen gestaltet werden?',
        answer: "Incident-Response und Security-Breach-Management f√ºr VS-NfD Informationen erfordern spezialisierte Verfahren, die √ºber Standard-Incident-Response hinausgehen. Diese Verfahren m√ºssen sowohl die technischen Aspekte der Incident-Behandlung als auch die spezifischen Melde- und Dokumentationspflichten f√ºr klassifizierte Informationen ber√ºcksichtigen. Eine effektive Incident-Response-Capability ist essentiell f√ºr die Minimierung von Sch√§den und die Aufrechterhaltung der Compliance.\n\nüö® Incident-Klassifizierung und -Priorisierung:\n‚Ä¢ Entwicklung spezifischer Klassifizierungsschemata f√ºr VS-NfD bezogene Sicherheitsvorf√§lle\n‚Ä¢ Definition von Severity-Levels basierend auf potentiellen Auswirkungen auf klassifizierte Informationen\n‚Ä¢ Etablierung von Eskalationsmatrizen f√ºr verschiedene Incident-Typen und -Schweregrade\n‚Ä¢ Implementierung automatisierter Alerting-Systeme f√ºr kritische VS-NfD Sicherheitsereignisse\n‚Ä¢ Ber√ºcksichtigung regulatorischer Meldepflichten bei der Incident-Priorisierung\n\n‚ö° Sofortma√ünahmen und Containment:\n‚Ä¢ Entwicklung von Playbooks f√ºr verschiedene Incident-Szenarien mit VS-NfD Bezug\n‚Ä¢ Implementierung von Isolation und Containment-Verfahren f√ºr kompromittierte Systeme\n‚Ä¢ Etablierung von Emergency-Response-Teams mit spezialisierten VS-NfD Kenntnissen\n‚Ä¢ Sichere Kommunikationskan√§le f√ºr Incident-Response-Koordination\n‚Ä¢ Verfahren f√ºr die sichere Beweissicherung und Forensik bei VS-NfD Incidents\n\nüîç Incident-Investigation und Forensik:\n‚Ä¢ Spezialisierte forensische Verfahren f√ºr VS-NfD Umgebungen unter Ber√ºcksichtigung der Klassifizierung\n‚Ä¢ Sichere Handhabung und Analyse von Beweismitteln aus klassifizierten Systemen\n‚Ä¢ Koordination mit externen Forensik-Experten unter Wahrung der Vertraulichkeitsanforderungen\n‚Ä¢ Dokumentation von Incident-Timelines und Impact-Assessments\n‚Ä¢ Entwicklung von Lessons-Learned und Root-Cause-Analysis-Verfahren\n\nüì¢ Meldewesen und Kommunikation:\n‚Ä¢ Implementierung spezifischer Meldeverfahren f√ºr VS-NfD Sicherheitsvorf√§lle an relevante Beh√∂rden\n‚Ä¢ Entwicklung von Kommunikationsprotokollen f√ºr interne und externe Stakeholder\n‚Ä¢ Ber√ºcksichtigung von Vertraulichkeitsanforderungen bei der Incident-Kommunikation\n‚Ä¢ Etablierung von Media-Response und Public-Relations-Verfahren f√ºr √∂ffentliche Incidents\n‚Ä¢ Koordination mit Rechtsabteilung und Compliance-Teams f√ºr regulatorische Meldungen\n\nüîß Recovery und Wiederherstellung:\n‚Ä¢ Entwicklung spezifischer Recovery-Verfahren f√ºr VS-NfD Systeme und Daten\n‚Ä¢ Implementierung von Backup-Restoration-Prozessen unter Ber√ºcksichtigung der Klassifizierung\n‚Ä¢ Verfahren f√ºr die Validierung der Systemintegrit√§t nach Incident-Recovery\n‚Ä¢ Post-Incident-Monitoring und √úberwachung f√ºr weitere Kompromittierungszeichen\n‚Ä¢ Dokumentation von Recovery-Aktivit√§ten und Validation-Tests\n\nüìö Training und Preparedness:\n‚Ä¢ Regelm√§√üige Incident-Response-√úbungen und Tabletop-Exercises f√ºr VS-NfD Szenarien\n‚Ä¢ Spezialisierte Schulungen f√ºr Incident-Response-Teams zu VS-NfD Besonderheiten\n‚Ä¢ Entwicklung von Incident-Response-Handb√ºchern und Quick-Reference-Guides\n‚Ä¢ Cross-Training und Backup-Ressourcen f√ºr kritische Incident-Response-Rollen\n‚Ä¢ Regelm√§√üige Updates und Verbesserungen der Incident-Response-Verfahren basierend auf √úbungen und realen Incidents"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 11),
        question: 'Welche Dokumentenmanagement und Lifecycle-Management-Prozesse sind f√ºr VS-NfD Informationen erforderlich?',
        answer: "Dokumentenmanagement und Lifecycle-Management f√ºr VS-NfD Informationen erfordern spezielle Verfahren, die den gesamten Lebenszyklus klassifizierter Informationen von der Erstellung bis zur sicheren Vernichtung abdecken. Diese Prozesse m√ºssen sowohl physische als auch digitale Dokumente ber√ºcksichtigen und sicherstellen, dass alle Handling-, Speicher- und Archivierungsanforderungen erf√ºllt werden. Ein systematischer Ansatz ist essentiell f√ºr die Aufrechterhaltung der Informationssicherheit.\n\nüìÑ Dokumentenerstellung und -klassifizierung:\n‚Ä¢ Implementierung standardisierter Verfahren f√ºr die Klassifizierung neuer Dokumente als VS-NfD\n‚Ä¢ Entwicklung von Templates und Formatvorgaben f√ºr VS-NfD Dokumente\n‚Ä¢ Automatisierte Klassifizierungstools und Metadaten-Management f√ºr digitale Dokumente\n‚Ä¢ Schulung der Mitarbeiter in korrekter Dokumentenklassifizierung und -kennzeichnung\n‚Ä¢ Etablierung von Review-Prozessen f√ºr Klassifizierungsentscheidungen\n\nüè∑Ô∏è Kennzeichnung und Metadaten-Management:\n‚Ä¢ Standardisierte Kennzeichnungsverfahren f√ºr physische und digitale VS-NfD Dokumente\n‚Ä¢ Implementierung von Metadaten-Schemata f√ºr umfassende Dokumentenverfolgung\n‚Ä¢ Automatisierte Kennzeichnungssysteme f√ºr digitale Dokumentenmanagement-Plattformen\n‚Ä¢ Versionskontrolle und Change-Tracking f√ºr alle VS-NfD Dokumente\n‚Ä¢ Integration von Klassifizierungsmarkierungen in Dokumentenworkflows\n\nüíæ Speicherung und Archivierung:\n‚Ä¢ Implementierung sicherer Speicherl√∂sungen f√ºr physische und digitale VS-NfD Dokumente\n‚Ä¢ Entwicklung von Archivierungsstrategien mit angemessenen Aufbewahrungszeiten\n‚Ä¢ Sichere Backup-Verfahren f√ºr alle klassifizierten Dokumentenbest√§nde\n‚Ä¢ Implementierung von Zugangskontrollen f√ºr Archiv- und Speichersysteme\n‚Ä¢ Regelm√§√üige Integrit√§tspr√ºfungen und Validierung archivierter Dokumente\n\nüîÑ Dokumentenzirkulation und -freigabe:\n‚Ä¢ Etablierung kontrollierter Verfahren f√ºr die Weitergabe von VS-NfD Dokumenten\n‚Ä¢ Implementierung von Approval-Workflows f√ºr Dokumentenfreigaben\n‚Ä¢ Sichere √úbertragungsverfahren f√ºr interne und externe Dokumentenaustausche\n‚Ä¢ Tracking und Logging aller Dokumentenzugriffe und -bewegungen\n‚Ä¢ Entwicklung von Verfahren f√ºr die R√ºckholung verteilter Dokumente\n\nüìã Lifecycle-Management und Retention:\n‚Ä¢ Entwicklung umfassender Retention-Policies f√ºr verschiedene VS-NfD Dokumententypen\n‚Ä¢ Automatisierte Lifecycle-Management-Systeme f√ºr digitale Dokumentenbest√§nde\n‚Ä¢ Regelm√§√üige Reviews von Dokumentenbest√§nden und Klassifizierungsstatus\n‚Ä¢ Implementierung von Disposition-Schedules und Vernichtungsverfahren\n‚Ä¢ Dokumentation aller Lifecycle-Entscheidungen und -Aktivit√§ten\n\nüóëÔ∏è Sichere Vernichtung und Disposal:\n‚Ä¢ Entwicklung spezifischer Vernichtungsverfahren f√ºr VS-NfD Dokumente\n‚Ä¢ Implementierung zertifizierter Vernichtungsmethoden f√ºr verschiedene Medientypen\n‚Ä¢ Sichere L√∂schverfahren f√ºr digitale Dokumente und Speichermedien\n‚Ä¢ Dokumentation und Zertifizierung aller Vernichtungsaktivit√§ten\n‚Ä¢ Regelm√§√üige Audits der Vernichtungsverfahren und -nachweise"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 12),
        question: 'Wie k√∂nnen Drittanbieter und externe Dienstleister sicher in VS-NfD Compliance-Prozesse integriert werden?',
        answer: "Die Integration von Drittanbietern und externen Dienstleistern in VS-NfD Compliance-Prozesse erfordert besondere Sorgfalt und umfassende Sicherheitsma√ünahmen. Diese Partner m√ºssen die gleichen Sicherheitsstandards erf√ºllen wie interne Prozesse, was spezielle Vertragsgestaltung, Due-Diligence-Verfahren und kontinuierliche √úberwachung erfordert. Ein strukturierter Ansatz f√ºr Vendor-Management ist essentiell f√ºr die Aufrechterhaltung der Compliance-Integrit√§t.\n\nüîç Vendor-Assessment und Due-Diligence:\n‚Ä¢ Umfassende Sicherheitsbewertungen aller Drittanbieter vor Vertragsabschluss\n‚Ä¢ Evaluierung der VS-NfD Compliance-F√§higkeiten und -Erfahrungen potentieller Partner\n‚Ä¢ √úberpr√ºfung von Zertifizierungen, Akkreditierungen und Sicherheitsnachweisen\n‚Ä¢ On-Site-Audits und Facility-Inspektionen f√ºr kritische Dienstleister\n‚Ä¢ Bewertung der finanziellen Stabilit√§t und Gesch√§ftskontinuit√§t von Drittanbietern\n\nüìã Vertragsgestaltung und rechtliche Anforderungen:\n‚Ä¢ Entwicklung spezifischer Vertragsklauseln f√ºr VS-NfD Compliance-Anforderungen\n‚Ä¢ Implementierung von Service-Level-Agreements mit Sicherheits- und Compliance-Metriken\n‚Ä¢ Vereinbarung von Audit-Rechten und regelm√§√üigen Compliance-√úberpr√ºfungen\n‚Ä¢ Klare Definition von Haftung und Verantwortlichkeiten bei Sicherheitsvorf√§llen\n‚Ä¢ Implementierung von Termination-Klauseln bei Compliance-Verst√∂√üen\n\nüîê Zugangskontrollen und Berechtigungsmanagement:\n‚Ä¢ Implementierung strikter Zugangskontrollen f√ºr externe Dienstleister\n‚Ä¢ Verwendung des Least-Privilege-Prinzips f√ºr alle Drittanbieter-Zugriffe\n‚Ä¢ Etablierung tempor√§rer und projektbezogener Zugriffsberechtigungen\n‚Ä¢ Implementierung von Multi-Faktor-Authentifizierung f√ºr alle externen Zugriffe\n‚Ä¢ Regelm√§√üige Review und Rezertifizierung aller Drittanbieter-Berechtigungen\n\nüìä Monitoring und Compliance-√úberwachung:\n‚Ä¢ Kontinuierliche √úberwachung aller Drittanbieter-Aktivit√§ten in VS-NfD Umgebungen\n‚Ä¢ Implementierung von Real-Time-Monitoring und Alerting f√ºr externe Zugriffe\n‚Ä¢ Regelm√§√üige Compliance-Assessments und Audit-Programme f√ºr Drittanbieter\n‚Ä¢ Integration von Vendor-Monitoring in das √ºbergeordnete Security-Operations-Center\n‚Ä¢ Entwicklung von Vendor-Scorecards und Performance-Dashboards\n\nüö® Incident-Response und Breach-Management:\n‚Ä¢ Entwicklung koordinierter Incident-Response-Verfahren mit Drittanbietern\n‚Ä¢ Etablierung von Kommunikationsprotokollen f√ºr Sicherheitsvorf√§lle\n‚Ä¢ Implementierung von Breach-Notification-Verfahren und Meldepflichten\n‚Ä¢ Koordination von Forensik-Aktivit√§ten bei Incidents mit Drittanbieter-Beteiligung\n‚Ä¢ Entwicklung von Lessons-Learned-Prozessen aus Vendor-bezogenen Incidents\n\nüîÑ Lifecycle-Management und Exit-Strategien:\n‚Ä¢ Entwicklung umfassender Onboarding-Prozesse f√ºr neue Drittanbieter\n‚Ä¢ Implementierung regelm√§√üiger Vendor-Reviews und Performance-Bewertungen\n‚Ä¢ Etablierung von Exit-Strategien und Datenr√ºckgabe-Verfahren\n‚Ä¢ Sichere Deprovisioning-Prozesse bei Vertragsbeendigung\n‚Ä¢ Dokumentation und Archivierung aller Vendor-Compliance-Aktivit√§ten"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 3 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
