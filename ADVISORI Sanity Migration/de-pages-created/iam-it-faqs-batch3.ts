import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM IT page with FAQ batch 3...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-it' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-it" not found')
    }
    
    // Create new FAQs for cloud and hybrid infrastructure
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 9),
        question: 'Wie entwickelt man Multi-Cloud IAM-Strategien und welche technischen Herausforderungen m√ºssen bei der Cloud-Provider-√ºbergreifenden Identity Federation gel√∂st werden?',
        answer: "Multi-Cloud IAM-Strategien erfordern eine durchdachte Architektur, die sowohl die Vorteile verschiedener Cloud-Provider nutzt als auch die Komplexit√§t der Provider-√ºbergreifenden Identity Federation beherrscht. Die technischen Herausforderungen umfassen Protokoll-Harmonisierung, Daten-Synchronisation und einheitliche Sicherheitsstandards.\n\n‚òÅÔ∏è Multi-Cloud Architecture Design Principles:\n‚Ä¢ Cloud-agnostic Identity Provider als zentrale Authentifizierungsinstanz\n‚Ä¢ Federated Identity Management f√ºr nahtlose Cross-Cloud Authentication\n‚Ä¢ Standardized Protocols (SAML, OAuth, OpenID Connect) f√ºr Provider-Interoperabilit√§t\n‚Ä¢ Unified Identity Namespace f√ºr konsistente User-Identit√§ten\n‚Ä¢ Cross-Cloud Policy Engine f√ºr einheitliche Authorization-Regeln\n\nüîó Identity Federation Patterns:\n‚Ä¢ Hub-and-Spoke Model mit zentralem Identity Provider\n‚Ä¢ Mesh Federation f√ºr direkte Provider-to-Provider-Verbindungen\n‚Ä¢ Hierarchical Federation f√ºr komplexe Organisationsstrukturen\n‚Ä¢ Trust Relationship Management zwischen verschiedenen Cloud-Providern\n‚Ä¢ Token Translation Services f√ºr Protocol-Bridging\n\nüõ°Ô∏è Security und Trust Management:\n‚Ä¢ Cross-Cloud Certificate Management f√ºr sichere Federation\n‚Ä¢ Mutual Authentication zwischen Cloud-Providern\n‚Ä¢ Token Validation und Trust Chain Verification\n‚Ä¢ Encryption Key Management f√ºr Multi-Cloud Environments\n‚Ä¢ Security Assertion Markup Language (SAML) f√ºr sichere Attribute-√úbertragung\n\nüìä Data Consistency und Synchronization:\n‚Ä¢ Eventually Consistent Identity Stores √ºber Cloud-Grenzen hinweg\n‚Ä¢ Conflict Resolution Strategies f√ºr Multi-Master Scenarios\n‚Ä¢ Real-time Synchronization f√ºr kritische Identity-Changes\n‚Ä¢ Data Residency Compliance f√ºr verschiedene Jurisdiktionen\n‚Ä¢ Backup und Recovery Strategies f√ºr Multi-Cloud Identity Data\n\n‚ö° Performance Optimization Strategies:\n‚Ä¢ Geographic Load Balancing f√ºr optimale User Experience\n‚Ä¢ Caching Strategies f√ºr Cross-Cloud Identity Lookups\n‚Ä¢ Connection Pooling f√ºr effiziente Provider-Kommunikation\n‚Ä¢ Latency Optimization durch intelligente Routing-Algorithmen\n‚Ä¢ CDN Integration f√ºr globale Performance-Verbesserung\n\nüîß Technical Implementation Challenges:\n‚Ä¢ API Rate Limiting und Throttling Management √ºber Provider hinweg\n‚Ä¢ Network Connectivity und VPN-Setup zwischen Cloud-Providern\n‚Ä¢ Monitoring und Observability f√ºr Multi-Cloud Identity Flows\n‚Ä¢ Cost Optimization f√ºr Cross-Cloud Data Transfer\n‚Ä¢ Vendor Lock-in Prevention durch Abstraction Layers\n\nüìã Operational Excellence:\n‚Ä¢ Unified Management Console f√ºr Multi-Cloud Identity Operations\n‚Ä¢ Automated Failover zwischen Cloud-Providern\n‚Ä¢ Compliance Reporting f√ºr verschiedene Cloud-Jurisdiktionen\n‚Ä¢ Incident Response Procedures f√ºr Multi-Cloud Scenarios\n‚Ä¢ Change Management f√ºr Provider-√ºbergreifende Updates\n\nüåê Integration Patterns:\n‚Ä¢ API Gateway Federation f√ºr einheitliche Service-Endpoints\n‚Ä¢ Event-driven Synchronization f√ºr Real-time Identity Updates\n‚Ä¢ Microservices Architecture f√ºr Cloud-agnostic Components\n‚Ä¢ Container-based Deployment f√ºr Provider-Portabilit√§t\n‚Ä¢ Infrastructure-as-Code f√ºr konsistente Multi-Cloud Deployments"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 10),
        question: 'Welche spezifischen Anforderungen stellen Hybrid-Cloud IAM-Infrastrukturen und wie implementiert man sichere Konnektivit√§t zwischen On-Premise und Cloud-Systemen?',
        answer: "Hybrid-Cloud IAM-Infrastrukturen stellen besondere Anforderungen an Sicherheit, Performance und Integration, da sie die Komplexit√§t von On-Premise-Systemen mit der Dynamik von Cloud-Umgebungen verbinden m√ºssen. Die sichere Konnektivit√§t erfordert durchdachte Netzwerk-Architekturen und robuste Sicherheitsma√ünahmen.\n\nüåâ Hybrid Connectivity Architecture:\n‚Ä¢ Site-to-Site VPN f√ºr sichere Netzwerk-Verbindungen\n‚Ä¢ Direct Connect oder ExpressRoute f√ºr dedizierte High-Bandwidth-Verbindungen\n‚Ä¢ Software-Defined Perimeter (SDP) f√ºr Zero Trust Network Access\n‚Ä¢ Network Segmentation f√ºr Isolation kritischer Identity-Services\n‚Ä¢ Redundant Connectivity f√ºr High Availability\n\nüîê Security Framework f√ºr Hybrid Environments:\n‚Ä¢ End-to-End Encryption f√ºr alle Identity-Daten√ºbertragungen\n‚Ä¢ Mutual TLS (mTLS) f√ºr Service-to-Service-Authentifizierung\n‚Ä¢ Certificate-based Authentication f√ºr System-Identit√§ten\n‚Ä¢ Network Access Control (NAC) f√ºr Device-Authentication\n‚Ä¢ Intrusion Detection Systems (IDS) f√ºr Anomaly Detection\n\nüìä Data Synchronization und Consistency:\n‚Ä¢ Bidirectional Synchronization zwischen On-Premise und Cloud Identity Stores\n‚Ä¢ Conflict Resolution f√ºr simultane Updates in verschiedenen Umgebungen\n‚Ä¢ Delta Synchronization f√ºr effiziente Daten√ºbertragung\n‚Ä¢ Real-time Replication f√ºr kritische Identity-Changes\n‚Ä¢ Data Integrity Validation f√ºr Corruption Detection\n\n‚ö° Performance Optimization f√ºr Hybrid Scenarios:\n‚Ä¢ Intelligent Caching f√ºr h√§ufig abgerufene Identity-Daten\n‚Ä¢ Load Balancing zwischen On-Premise und Cloud-Services\n‚Ä¢ Connection Pooling f√ºr effiziente Resource-Nutzung\n‚Ä¢ Compression f√ºr Bandwidth-Optimization\n‚Ä¢ Geographic Routing f√ºr optimale Latency\n\nüõ†Ô∏è Integration Patterns und Protocols:\n‚Ä¢ LDAP Proxy f√ºr Legacy System Integration\n‚Ä¢ SAML Federation f√ºr Web-based Applications\n‚Ä¢ OAuth und OpenID Connect f√ºr moderne API-Integration\n‚Ä¢ Kerberos Constrained Delegation f√ºr Windows-Environments\n‚Ä¢ REST API Gateways f√ºr Protocol Translation\n\nüìã Operational Management:\n‚Ä¢ Unified Monitoring f√ºr On-Premise und Cloud-Components\n‚Ä¢ Centralized Logging f√ºr Audit und Compliance\n‚Ä¢ Automated Backup und Recovery f√ºr Hybrid Data\n‚Ä¢ Change Management f√ºr Cross-Environment Updates\n‚Ä¢ Incident Response f√ºr Hybrid-specific Issues\n\nüîß Technical Implementation Considerations:\n‚Ä¢ Firewall Configuration f√ºr IAM-specific Traffic\n‚Ä¢ DNS Resolution f√ºr Hybrid Service Discovery\n‚Ä¢ Time Synchronization f√ºr Accurate Audit Trails\n‚Ä¢ Certificate Management f√ºr PKI-based Authentication\n‚Ä¢ Bandwidth Planning f√ºr Identity-Traffic\n\nüåê Cloud-specific Integration Challenges:\n‚Ä¢ Azure AD Connect f√ºr Microsoft-centric Environments\n‚Ä¢ AWS Directory Service f√ºr Amazon-based Infrastructures\n‚Ä¢ Google Cloud Identity f√ºr Google Workspace Integration\n‚Ä¢ Multi-Cloud Federation f√ºr Provider-agnostic Solutions\n‚Ä¢ Container-based Hybrid Deployments f√ºr Kubernetes Environments\n\nüìä Compliance und Governance:\n‚Ä¢ Data Residency Requirements f√ºr verschiedene Jurisdiktionen\n‚Ä¢ Audit Trail Continuity √ºber Environment-Grenzen hinweg\n‚Ä¢ Regulatory Compliance f√ºr Hybrid Data Processing\n‚Ä¢ Privacy Controls f√ºr Cross-Border Data Transfer\n‚Ä¢ Risk Assessment f√ºr Hybrid Security Posture"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 11),
        question: 'Wie gestaltet man Infrastructure-as-Code (IaC) f√ºr IAM-Systeme und welche Best Practices sind f√ºr automatisierte Deployment-Pipelines entscheidend?',
        answer: "Infrastructure-as-Code f√ºr IAM-Systeme erfordert spezialisierte Ans√§tze, die sowohl die Sicherheitsanforderungen von Identity Management als auch die Komplexit√§t automatisierter Deployments ber√ºcksichtigen. Die richtige IaC-Strategie erm√∂glicht reproduzierbare, sichere und skalierbare IAM-Infrastrukturen.\n\nüèóÔ∏è IaC Architecture Patterns f√ºr IAM:\n‚Ä¢ Modular Infrastructure Design mit wiederverwendbaren Components\n‚Ä¢ Environment-specific Configuration Management\n‚Ä¢ Immutable Infrastructure f√ºr konsistente Deployments\n‚Ä¢ Blue-Green Deployment Strategies f√ºr Zero-Downtime Updates\n‚Ä¢ Canary Releases f√ºr risikoarme Feature-Rollouts\n\nüîß Terraform Best Practices f√ºr IAM Infrastructure:\n‚Ä¢ State Management mit Remote Backends f√ºr Team-Collaboration\n‚Ä¢ Module Development f√ºr wiederverwendbare IAM-Components\n‚Ä¢ Variable Management f√ºr Environment-specific Configurations\n‚Ä¢ Resource Tagging f√ºr Cost Management und Governance\n‚Ä¢ Dependency Management f√ºr komplexe Infrastructure-Relationships\n\nüõ°Ô∏è Security-by-Design in IaC:\n‚Ä¢ Secrets Management mit HashiCorp Vault oder Cloud-native Solutions\n‚Ä¢ Policy-as-Code f√ºr automatisierte Compliance-Checks\n‚Ä¢ Security Scanning f√ºr Infrastructure Code\n‚Ä¢ Least Privilege Principles f√ºr Service Accounts\n‚Ä¢ Encryption Configuration f√ºr Data-at-Rest und in-Transit\n\nüì¶ Container-based IaC f√ºr IAM:\n‚Ä¢ Dockerfile Optimization f√ºr IAM-Application Images\n‚Ä¢ Kubernetes Manifests f√ºr Container Orchestration\n‚Ä¢ Helm Charts f√ºr parametrisierte Deployments\n‚Ä¢ Operator Patterns f√ºr Custom Resource Management\n‚Ä¢ Service Mesh Configuration f√ºr Secure Communication\n\nüîÑ CI/CD Pipeline Design:\n‚Ä¢ Multi-Stage Pipelines mit Security Gates\n‚Ä¢ Automated Testing f√ºr Infrastructure Code\n‚Ä¢ Static Code Analysis f√ºr Security Vulnerabilities\n‚Ä¢ Integration Testing f√ºr IAM-specific Functionality\n‚Ä¢ Rollback Strategies f√ºr Failed Deployments\n\nüìä Configuration Management:\n‚Ä¢ GitOps Workflows f√ºr Version-controlled Infrastructure\n‚Ä¢ Environment Promotion Strategies\n‚Ä¢ Configuration Drift Detection und Remediation\n‚Ä¢ Secret Rotation Automation\n‚Ä¢ Compliance Validation in Deployment Pipelines\n\n‚öôÔ∏è Automation und Orchestration:\n‚Ä¢ Ansible Playbooks f√ºr Configuration Management\n‚Ä¢ AWS CloudFormation f√ºr AWS-specific Resources\n‚Ä¢ Azure Resource Manager Templates f√ºr Azure Deployments\n‚Ä¢ Google Cloud Deployment Manager f√ºr GCP Infrastructure\n‚Ä¢ Pulumi f√ºr Multi-Cloud Infrastructure Programming\n\nüîç Monitoring und Observability:\n‚Ä¢ Infrastructure Metrics Collection\n‚Ä¢ Automated Alerting f√ºr Infrastructure Issues\n‚Ä¢ Cost Monitoring f√ºr Resource Optimization\n‚Ä¢ Performance Tracking f√ºr Infrastructure Components\n‚Ä¢ Audit Logging f√ºr Infrastructure Changes\n\nüìã Operational Excellence:\n‚Ä¢ Documentation-as-Code f√ºr Infrastructure Knowledge\n‚Ä¢ Disaster Recovery Automation\n‚Ä¢ Capacity Planning Automation\n‚Ä¢ Cost Optimization Strategies\n‚Ä¢ Change Management Integration\n\nüß™ Testing Strategies f√ºr IaC:\n‚Ä¢ Unit Testing f√ºr Infrastructure Modules\n‚Ä¢ Integration Testing f√ºr End-to-End Scenarios\n‚Ä¢ Security Testing f√ºr Vulnerability Detection\n‚Ä¢ Performance Testing f√ºr Scalability Validation\n‚Ä¢ Chaos Engineering f√ºr Resilience Testing"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 12),
        question: 'Welche Monitoring- und Observability-Strategien sind f√ºr komplexe IAM IT-Infrastrukturen erforderlich und wie implementiert man proaktive Incident Detection?',
        answer: "Monitoring und Observability f√ºr komplexe IAM IT-Infrastrukturen erfordern einen ganzheitlichen Ansatz, der sowohl technische Metriken als auch Business-relevante KPIs umfasst. Proaktive Incident Detection ist dabei entscheidend f√ºr die Aufrechterhaltung der Service-Qualit√§t und Sicherheit.\n\nüìä Comprehensive Monitoring Architecture:\n‚Ä¢ Multi-Layer Monitoring f√ºr Infrastructure, Platform und Application\n‚Ä¢ Real-time Metrics Collection mit Prometheus und Grafana\n‚Ä¢ Distributed Tracing f√ºr End-to-End Request Visibility\n‚Ä¢ Centralized Logging mit ELK Stack oder Splunk\n‚Ä¢ Custom Dashboards f√ºr IAM-spezifische KPIs\n\nüîç Key Performance Indicators f√ºr IAM:\n‚Ä¢ Authentication Response Time und Success Rates\n‚Ä¢ Authorization Latency und Decision Accuracy\n‚Ä¢ User Provisioning und Deprovisioning Times\n‚Ä¢ API Response Times und Error Rates\n‚Ä¢ Database Performance und Connection Pool Utilization\n\n‚ö° Real-time Alerting und Notification:\n‚Ä¢ Intelligent Alerting mit Machine Learning-based Anomaly Detection\n‚Ä¢ Escalation Procedures f√ºr verschiedene Severity-Levels\n‚Ä¢ Integration mit Incident Management Systems\n‚Ä¢ Mobile Notifications f√ºr Critical Issues\n‚Ä¢ Alert Correlation f√ºr Noise Reduction\n\nüõ°Ô∏è Security Monitoring und Threat Detection:\n‚Ä¢ User Behavior Analytics f√ºr Anomaly Detection\n‚Ä¢ Failed Authentication Monitoring f√ºr Brute Force Detection\n‚Ä¢ Privilege Escalation Detection\n‚Ä¢ Suspicious Activity Pattern Recognition\n‚Ä¢ Compliance Violation Monitoring\n\nüìà Predictive Analytics und Capacity Planning:\n‚Ä¢ Trend Analysis f√ºr Resource Utilization\n‚Ä¢ Capacity Forecasting f√ºr Proactive Scaling\n‚Ä¢ Performance Degradation Prediction\n‚Ä¢ Cost Optimization Recommendations\n‚Ä¢ SLA Compliance Tracking\n\nüîß Infrastructure Health Monitoring:\n‚Ä¢ Server Resource Utilization (CPU, Memory, Disk, Network)\n‚Ä¢ Database Performance Metrics\n‚Ä¢ Network Latency und Bandwidth Utilization\n‚Ä¢ Container und Kubernetes Cluster Health\n‚Ä¢ Cloud Service Availability und Performance\n\nüìä Application Performance Monitoring (APM):\n‚Ä¢ Code-Level Performance Insights\n‚Ä¢ Database Query Performance Analysis\n‚Ä¢ Memory Leak Detection\n‚Ä¢ Garbage Collection Monitoring\n‚Ä¢ Thread Pool Utilization\n\nüåê End-User Experience Monitoring:\n‚Ä¢ Synthetic Transaction Monitoring\n‚Ä¢ Real User Monitoring (RUM)\n‚Ä¢ Page Load Times und User Journey Analysis\n‚Ä¢ Mobile Application Performance\n‚Ä¢ Geographic Performance Variations\n\nüîÑ Automated Incident Response:\n‚Ä¢ Self-Healing Infrastructure mit Automated Remediation\n‚Ä¢ Automated Scaling basierend auf Performance Metrics\n‚Ä¢ Circuit Breaker Activation f√ºr Service Protection\n‚Ä¢ Automated Failover f√ºr High Availability\n‚Ä¢ Rollback Automation f√ºr Failed Deployments\n\nüìã Observability Best Practices:\n‚Ä¢ Structured Logging f√ºr bessere Searchability\n‚Ä¢ Correlation IDs f√ºr Request Tracing\n‚Ä¢ Metric Standardization f√ºr Consistency\n‚Ä¢ Documentation f√ºr Monitoring Procedures\n‚Ä¢ Regular Review und Optimization von Monitoring Strategies\n\nüß™ Chaos Engineering f√ºr Resilience Testing:\n‚Ä¢ Controlled Failure Injection\n‚Ä¢ Monitoring System Validation\n‚Ä¢ Incident Response Testing\n‚Ä¢ Recovery Time Measurement\n‚Ä¢ Continuous Improvement basierend auf Test-Ergebnissen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 3 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
