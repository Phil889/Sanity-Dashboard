import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating CRR/CRD SREP Vorbereitung & Dokumentation page with FAQs batch 2 (German)...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'crr-crd-srep-vorbereitung-dokumentation' })
    
    if (!existingDoc) {
      throw new Error('Document "crr-crd-srep-vorbereitung-dokumentation" not found')
    }
    
    // Create new FAQs in German
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: "Wie sollte eine effektive SREP-Feedbackschleife gestaltet werden, um kontinuierliche Verbesserungen zu erzielen?",
        answer: "Der SREP-Prozess sollte nicht als einmaliges Ereignis, sondern als kontinuierlicher Verbesserungszyklus verstanden werden. Eine systematische Feedbackschleife erm√∂glicht es, aus jeder SREP-Runde wertvolle Erkenntnisse zu gewinnen und diese in konkrete Optimierungsma√ünahmen umzusetzen. ADVISORI hat einen strukturierten Ansatz entwickelt, der diesen kontinuierlichen Lernprozess systematisiert und nachhaltige Verbesserungen sicherstellt.\n\nüîÑ Kernelemente einer effektiven SREP-Feedbackschleife:\n‚Ä¢ Strukturierte Nachbereitung: Systematische Analyse der aufsichtlichen Feststellungen, Bewertungen und informellen R√ºckmeldungen nach jeder SREP-Runde.\n‚Ä¢ Ursachenanalyse: Tiefgreifende Untersuchung der Gr√ºnde f√ºr kritische Bewertungen oder Feststellungen, die √ºber die unmittelbaren Symptome hinausgeht.\n‚Ä¢ Ma√ünahmenmanagement: Entwicklung, Priorisierung und Umsetzungsverfolgung konkreter Verbesserungsma√ünahmen mit klaren Verantwortlichkeiten und Zeitpl√§nen.\n‚Ä¢ Wirksamkeitspr√ºfung: Regelm√§√üige √úberpr√ºfung der Effektivit√§t umgesetzter Ma√ünahmen und Nachjustierung bei Bedarf.\n\nüìà Prozessgestaltung f√ºr kontinuierliche Verbesserung:\n‚Ä¢ SREP-Debriefing: Durchf√ºhrung eines strukturierten Debriefings direkt nach Abschluss des SREP-Prozesses, um alle Erkenntnisse und Beobachtungen zu erfassen, solange sie noch frisch sind.\n‚Ä¢ Ganzheitliche Bewertung: Analyse nicht nur der formalen Feststellungen, sondern auch der informellen Hinweise, Nachfragen und Beobachtungen w√§hrend des gesamten SREP-Prozesses.\n‚Ä¢ Priorisierungsworkshop: Gemeinsame Bewertung und Priorisierung der identifizierten Handlungsfelder nach Kritikalit√§t, Umsetzungsaufwand und strategischer Bedeutung.\n‚Ä¢ Ma√ünahmenplanung: Entwicklung eines detaillierten Aktionsplans mit konkreten Ma√ünahmen, Verantwortlichkeiten, Ressourcenzuordnung und Meilensteinen.\n\nüîç Erfolgsfaktoren f√ºr eine wirksame Feedbackschleife:\n‚Ä¢ Management-Commitment: Aktive Unterst√ºtzung und Einbindung der F√ºhrungsebene in den Nachbereitungs- und Verbesserungsprozess.\n‚Ä¢ Bereichs√ºbergreifende Zusammenarbeit: Einbeziehung aller relevanten Fachbereiche, um ein vollst√§ndiges Bild zu erhalten und sicherzustellen, dass Ma√ünahmen ganzheitlich umgesetzt werden.\n‚Ä¢ Transparente Kommunikation: Offene Kommunikation der Erkenntnisse und Ma√ünahmen an alle Beteiligten, um das Bewusstsein zu sch√§rfen und Akzeptanz zu f√∂rdern.\n‚Ä¢ Integriertes Tracking: Einbindung der SREP-Ma√ünahmen in das regul√§re Projektmanagement und Reporting, um kontinuierliche Aufmerksamkeit sicherzustellen.\n\nüõ†Ô∏è ADVISORI's Unterst√ºtzungsansatz f√ºr die SREP-Nachbereitung:\n‚Ä¢ Moderierte Debriefing-Workshops: Wir f√ºhren strukturierte Nachbereitungsworkshops durch, die alle Aspekte des SREP-Prozesses abdecken und wertvolle Erkenntnisse systematisch erfassen.\n‚Ä¢ Gap-Analyse und Ma√ünahmenentwicklung: Wir unterst√ºtzen Sie bei der Identifikation von Handlungsfeldern und der Entwicklung zielgerichteter, effizienter Verbesserungsma√ünahmen.\n‚Ä¢ Umsetzungsbegleitung: Wir bieten methodische Unterst√ºtzung bei der Umsetzung komplexer Ma√ünahmen und bringen Best Practices aus vergleichbaren Projekten ein.\n‚Ä¢ Wirksamkeitsbewertung: Wir helfen Ihnen, die Effektivit√§t der umgesetzten Ma√ünahmen zu evaluieren und kontinuierliche Verbesserungspotenziale zu identifizieren."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: "Welche Rolle spielt die Dokumentation von Governance-Prozessen im SREP, und wie kann diese optimiert werden?",
        answer: "Die Dokumentation von Governance-Prozessen spielt eine zentrale Rolle im SREP-Prozess, da die Aufsichtsbeh√∂rden der internen Governance eines Instituts besondere Aufmerksamkeit widmen. Eine klare, konsistente und √ºberzeugende Darstellung der Governance-Strukturen und -Prozesse ist entscheidend f√ºr eine positive SREP-Bewertung und demonstriert die F√§higkeit des Instituts zur effektiven Steuerung und Kontrolle seiner Risiken. ADVISORI unterst√ºtzt Institute bei der Optimierung ihrer Governance-Dokumentation durch einen strukturierten, praxisorientierten Ansatz.\n\nüèõÔ∏è Kritische Governance-Aspekte im SREP-Fokus:\n‚Ä¢ Aufbauorganisation und Verantwortlichkeiten: Klare Darstellung der Organisationsstruktur, Entscheidungsgremien, Berichtslinien und Verantwortlichkeiten auf allen Ebenen.\n‚Ä¢ Risikostrategie und -appetit: Dokumentation des Prozesses zur Festlegung, Kommunikation und √úberwachung der Risikostrategie und des Risikoappetits.\n‚Ä¢ Three Lines of Defense: Nachvollziehbare Implementation des Three-Lines-of-Defense-Modells mit klaren Rollenabgrenzungen und Kontrollmechanismen.\n‚Ä¢ Interne Kontrollfunktionen: Detaillierte Beschreibung der Aufgaben, Befugnisse, Ressourcen und Unabh√§ngigkeit der Kontrollfunktionen (Risikomanagement, Compliance, Interne Revision).\n\nüìä Erfolgsfaktoren f√ºr √ºberzeugende Governance-Dokumentation:\n‚Ä¢ Konsistente End-to-End-Darstellung: L√ºckenlose Dokumentation der Governance-Prozesse von der strategischen Ebene bis zur operativen Umsetzung.\n‚Ä¢ Nachvollziehbare Entscheidungsprozesse: Transparente Darstellung, wie strategische Entscheidungen getroffen, kommuniziert und umgesetzt werden.\n‚Ä¢ Konkrete Nachweise der Wirksamkeit: Belege f√ºr die effektive Funktionsweise der Governance-Strukturen anhand konkreter Beispiele und Kennzahlen.\n‚Ä¢ Klare Verkn√ºpfung mit dem Gesch√§ftsmodell: Darstellung, wie die Governance-Strukturen auf das spezifische Gesch√§ftsmodell und Risikoprofil des Instituts zugeschnitten sind.\n\nüîÑ Optimierungsans√§tze f√ºr die Governance-Dokumentation:\n‚Ä¢ Governance-Framework-Dokumentation: Entwicklung eines umfassenden Governance-Rahmenwerks, das alle relevanten Aspekte strukturiert und konsistent abbildet.\n‚Ä¢ Prozesslandkarte: Erstellung einer visuellen Darstellung aller Governance-Prozesse und ihrer Interdependenzen f√ºr einen √ºberzeugenden Gesamt√ºberblick.\n‚Ä¢ Rollenmatrix: Detaillierte Dokumentation der Rollen, Verantwortlichkeiten und Entscheidungsbefugnisse aller relevanten Funktionen und Gremien.\n‚Ä¢ Wirksamkeitsnachweise: Systematische Sammlung und Aufbereitung von Belegen f√ºr die Effektivit√§t der Governance-Strukturen, z.B. durch Sitzungsprotokolle, Eskalationsbeispiele oder Kennzahlentracking.\n\nüõ†Ô∏è ADVISORI's Ansatz zur Optimierung der Governance-Dokumentation:\n‚Ä¢ Governance-Gap-Analyse: Wir f√ºhren eine detaillierte Analyse Ihrer bestehenden Governance-Dokumentation durch und identifizieren systematisch Optimierungspotenziale.\n‚Ä¢ Best-Practice-Templates: Wir stellen bew√§hrte Vorlagen f√ºr alle relevanten Governance-Dokumente zur Verf√ºgung, die aufsichtliche Erwartungen erf√ºllen und leicht anpassbar sind.\n‚Ä¢ Governance-Mapping: Wir unterst√ºtzen Sie bei der Erstellung einer konsistenten, integrierten Darstellung Ihrer Governance-Strukturen und -Prozesse.\n‚Ä¢ Fallbasierte Nachweisf√ºhrung: Wir helfen Ihnen, √ºberzeugende Wirksamkeitsnachweise zu identifizieren und aufzubereiten, die die praktische Umsetzung Ihrer Governance-Prozesse belegen."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: "Wie k√∂nnen Institute die Dokumentation ihres ICAAP und ILAAP f√ºr den SREP-Prozess optimieren?",
        answer: "ICAAP (Internal Capital Adequacy Assessment Process) und ILAAP (Internal Liquidity Adequacy Assessment Process) sind zentrale Elemente des SREP und stellen hohe Anforderungen an die Dokumentation. Eine √ºberzeugende ICAAP/ILAAP-Dokumentation demonstriert nicht nur die regulatorische Compliance, sondern auch die F√§higkeit des Instituts zur effektiven Steuerung seiner Kapital- und Liquidit√§tsrisiken. ADVISORI unterst√ºtzt Institute bei der Optimierung ihrer ICAAP/ILAAP-Dokumentation durch einen strukturierten, auf aufsichtliche Erwartungen ausgerichteten Ansatz.\n\nüìö Kernelemente einer √ºberzeugenden ICAAP/ILAAP-Dokumentation:\n‚Ä¢ Governance und Integration: Klare Darstellung der Einbettung von ICAAP/ILAAP in die Gesamtbanksteuerung und Entscheidungsprozesse.\n‚Ä¢ Risikoidentifikation und -bewertung: Nachvollziehbare Dokumentation des Prozesses zur Identifikation, Bewertung und Aggregation aller wesentlichen Risiken.\n‚Ä¢ Methoden und Modelle: Detaillierte Beschreibung der angewandten Methoden und Modelle, inklusive ihrer Annahmen, Limitationen und Validierungsergebnisse.\n‚Ä¢ Stresstests und Szenarioanalysen: Umfassende Dokumentation des Stresstestrahmenwerks, der Szenarioauswahl und -kalibrierung sowie der Ergebnisinterpretation.\n\nüîç EZB-konforme Struktur f√ºr ICAAP/ILAAP-Dokumentation:\n‚Ä¢ Reader's Manual: Einf√ºhrender √úberblick √ºber die ICAAP/ILAAP-Architektur, der die Navigierbarkeit und das Verst√§ndnis der Dokumentation erleichtert.\n‚Ä¢ Normative Perspektive: Umfassende Darstellung der mehrj√§hrigen Kapital- und Liquidit√§tsplanung unter Baseline- und Stressszenarien.\n‚Ä¢ √ñkonomische Perspektive: Detaillierte Beschreibung der internen Risikoquantifizierung und des √∂konomischen Kapital- bzw. Liquidit√§tsbedarfs.\n‚Ä¢ Daten, IT und Infrastruktur: Dokumentation der Datenquellen, Systeme und Prozesse, die ICAAP/ILAAP unterst√ºtzen, inklusive Datenqualit√§tskontrollen.\n‚Ä¢ Einbettung in Strategieprozesse: Darstellung, wie ICAAP/ILAAP-Ergebnisse in strategische Entscheidungen, Limitfestlegung und Gesch√§ftsplanung einflie√üen.\n\nüìà Optimierungsans√§tze f√ºr die ICAAP/ILAAP-Dokumentation:\n‚Ä¢ Integrierte Dokumentationsarchitektur: Entwicklung einer koh√§renten Dokumentationsstruktur mit klaren Verweisbeziehungen, die die Konsistenz sicherstellt und Redundanzen minimiert.\n‚Ä¢ Narrativ-gest√ºtzte Darstellung: Erg√§nzung technischer Details durch √ºberzeugende Narrative, die die Angemessenheit der Methoden und Prozesse f√ºr das spezifische Gesch√§ftsmodell erl√§utern.\n‚Ä¢ Visualisierung komplexer Zusammenh√§nge: Einsatz von Diagrammen, Prozesslandkarten und Dashboards, um komplexe Methodiken und Interdependenzen verst√§ndlich darzustellen.\n‚Ä¢ Wirksamkeitsnachweise: Systematische Integration von Belegen f√ºr die tats√§chliche Anwendung und den Einfluss von ICAAP/ILAAP auf Gesch√§ftsentscheidungen.\n\nüõ†Ô∏è ADVISORI's Ansatz zur Optimierung der ICAAP/ILAAP-Dokumentation:\n‚Ä¢ Gap-Analyse gegen aufsichtliche Erwartungen: Wir f√ºhren eine detaillierte Analyse Ihrer bestehenden ICAAP/ILAAP-Dokumentation gegen die aktuellen EZB-Leitlinien und Best Practices durch.\n‚Ä¢ Dokumentationsroadmap: Wir entwickeln eine strukturierte Roadmap zur schrittweisen Optimierung Ihrer ICAAP/ILAAP-Dokumentation mit klaren Priorit√§ten und Meilensteinen.\n‚Ä¢ Methodenvalidierung: Wir unterst√ºtzen Sie bei der kritischen √úberpr√ºfung und Verbesserung Ihrer Methoden und ihrer Dokumentation, um aufsichtliche Anforderungen zu erf√ºllen.\n‚Ä¢ Integration von Lessons Learned: Wir bringen Erkenntnisse aus zahlreichen SREP-Prozessen ein, um typische Schwachstellen in der ICAAP/ILAAP-Dokumentation proaktiv zu adressieren."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: "Wie kann man die Gesch√§ftsmodellanalyse (GMA) f√ºr den SREP-Prozess √ºberzeugend dokumentieren?",
        answer: "Die Gesch√§ftsmodellanalyse (GMA) bildet als Element 1 des SREP die Grundlage f√ºr die aufsichtliche Bewertung und hat erheblichen Einfluss auf die Gesamtbeurteilung eines Instituts. Eine √ºberzeugende Dokumentation des Gesch√§ftsmodells und seiner Nachhaltigkeit stellt nicht nur regulatorische Compliance sicher, sondern kann auch strategische Vorteile im aufsichtlichen Dialog schaffen. ADVISORI unterst√ºtzt Institute bei der Optimierung ihrer GMA-Dokumentation durch einen strukturierten, strategisch ausgerichteten Ansatz.\n\nüîç Kernaspekte einer √ºberzeugenden GMA-Dokumentation:\n‚Ä¢ Gesch√§ftsmodellbeschreibung: Klare, pr√§zise Darstellung des Gesch√§ftsmodells, der Wertsch√∂pfungsketten und Alleinstellungsmerkmale mit Bezug zum Marktumfeld.\n‚Ä¢ Strategie und Umsetzung: Transparente Dokumentation der strategischen Ziele, Planungsannahmen und Umsetzungsma√ünahmen mit nachvollziehbaren Meilensteinen.\n‚Ä¢ Rentabilit√§t und Nachhaltigkeit: Fundierte Analyse der aktuellen und prognostizierten Ertragslage, Rentabilit√§tstreiber und -risiken unter verschiedenen Szenarien.\n‚Ä¢ Wettbewerbspositionierung: √úberzeugende Darstellung der Marktposition, Wettbewerbsvorteile und -herausforderungen mit klaren Handlungsstrategien.\n\nüìä Aufsichtliche Fokusthemen in der GMA-Bewertung:\n‚Ä¢ Tragf√§higkeit des Gesch√§ftsmodells: Nachweise f√ºr die F√§higkeit, √ºber die n√§chsten 12 Monate akzeptable Ertr√§ge zu generieren, unter Ber√ºcksichtigung von Risikoprofil und Strategieumsetzung.\n‚Ä¢ Nachhaltigkeit der Strategie: Belege f√ºr die langfristige √úberlebensf√§higkeit (mindestens 3 Jahre) basierend auf strategischen Pl√§nen, Finanzprognosen und dem Wettbewerbsumfeld.\n‚Ä¢ Identifikation von Schl√ºsselrisiken: Systematische Analyse der wesentlichen Vulnerabilit√§ten des Gesch√§ftsmodells gegen√ºber internen und externen Faktoren.\n‚Ä¢ Digitale Transformation: Darstellung der Digitalisierungsstrategie und ihrer Auswirkungen auf Gesch√§ftsmodell, Prozesse und Kundenbeziehungen.\n\nüí° Erfolgsfaktoren f√ºr eine √ºberzeugende GMA-Dokumentation:\n‚Ä¢ Strategische Narrative: Entwicklung eines koh√§renten, faktenbasierten Narrativs, das die St√§rken des Gesch√§ftsmodells und seiner Zukunftsf√§higkeit √ºberzeugend vermittelt.\n‚Ä¢ Quantitative Untermauerung: Unterst√ºtzung qualitativer Aussagen durch aussagekr√§ftige Kennzahlen, Benchmarks und Trendanalysen, die die Tragf√§higkeit des Gesch√§ftsmodells belegen.\n‚Ä¢ Transparenz bei Herausforderungen: Offener Umgang mit identifizierten Schwachstellen und klare Darstellung der geplanten Gegenma√ünahmen und ihrer erwarteten Wirkung.\n‚Ä¢ Konsistenz mit anderen SREP-Elementen: Sicherstellung der Koh√§renz zwischen GMA-Dokumentation und anderen SREP-relevanten Dokumenten, insbesondere zu Governance, Risikomanagement und Kapitalplanung.\n\nüõ†Ô∏è ADVISORI's Ansatz zur Optimierung der GMA-Dokumentation:\n‚Ä¢ Strategische Positionierungsanalyse: Wir unterst√ºtzen Sie bei der Entwicklung einer √ºberzeugenden Darstellung Ihres Gesch√§ftsmodells und seiner Alleinstellungsmerkmale im Marktkontext.\n‚Ä¢ Gesch√§ftsmodell-Stresstests: Wir helfen Ihnen, die Resilienz Ihres Gesch√§ftsmodells unter verschiedenen Stressszenarien zu analysieren und √ºberzeugend zu dokumentieren.\n‚Ä¢ Rentabilit√§tstreiber-Analyse: Wir unterst√ºtzen Sie bei der detaillierten Analyse und Dokumentation Ihrer Ertragstreiber, -risiken und Optimierungspotenziale.\n‚Ä¢ Strategische Roadmap: Wir helfen Ihnen, Ihre strategischen Initiativen und Transformationsprojekte √ºberzeugend darzustellen und mit Ihrem Gesch√§ftsmodell zu verkn√ºpfen."
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs (German) to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQs batch 2 (German) added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
