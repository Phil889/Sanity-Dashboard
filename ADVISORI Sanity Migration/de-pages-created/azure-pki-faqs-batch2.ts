import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating Azure PKI page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'azure-pki' })
    
    if (!existingDoc) {
      throw new Error('Document "azure-pki" not found')
    }
    
    // Create new FAQs for DevOps integration and hybrid scenarios
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Wie funktioniert die Integration von Azure PKI in DevOps-Pipelines und CI/CD-Workflows?',
        answer: "Die Integration von Azure PKI in DevOps-Pipelines revolutioniert das Certificate Management durch Automatisierung, Infrastructure as Code Prinzipien und nahtlose Integration in moderne Entwicklungsworkflows. Diese Herangehensweise erm√∂glicht es Entwicklungsteams, PKI-Services als integralen Bestandteil ihrer Anwendungsarchitektur zu behandeln.\n\nüîÑ Azure DevOps Services Integration:\n‚Ä¢ Azure Pipelines Integration f√ºr automatische Certificate Provisioning und Deployment in Build und Release Pipelines\n‚Ä¢ Variable Groups f√ºr sichere Speicherung von Certificate-bezogenen Konfigurationen und Secrets\n‚Ä¢ Service Connections f√ºr authentifizierte Verbindungen zu Azure Key Vault und anderen PKI-Services\n‚Ä¢ Pipeline Templates f√ºr wiederverwendbare Certificate Management Workflows und Best Practices\n‚Ä¢ Multi-stage Pipeline Support f√ºr Certificate Promotion durch verschiedene Umgebungen\n\nüèóÔ∏è Infrastructure as Code Integration:\n‚Ä¢ Azure Resource Manager Templates f√ºr deklarative PKI-Infrastruktur Definition und Deployment\n‚Ä¢ Bicep Templates f√ºr moderne, typisierte Infrastructure as Code Entwicklung\n‚Ä¢ Terraform Provider Integration f√ºr Multi-Cloud und Hybrid Infrastructure Management\n‚Ä¢ Ansible Playbooks f√ºr Configuration Management und Certificate Lifecycle Automation\n‚Ä¢ Pulumi Integration f√ºr programmatische Infrastructure Definition mit modernen Programmiersprachen\n\nüîê Automated Certificate Lifecycle Management:\n‚Ä¢ Automated Certificate Enrollment durch Pipeline-triggered Workflows und Event-driven Automation\n‚Ä¢ Certificate Renewal Automation mit konfigurierbaren Vorlaufzeiten und Notification-Systemen\n‚Ä¢ Certificate Validation und Testing Integration in Continuous Integration Workflows\n‚Ä¢ Automated Certificate Distribution zu verschiedenen Deployment-Zielen und Umgebungen\n‚Ä¢ Certificate Revocation und Cleanup Automation f√ºr End-of-Life Certificate Management\n\nüß™ Testing und Quality Assurance:\n‚Ä¢ Certificate Validation Tests als Teil der Continuous Integration Pipeline\n‚Ä¢ Security Scanning Integration f√ºr Certificate-related Vulnerabilities und Compliance Checks\n‚Ä¢ Load Testing mit Certificate-basierten Authentication Scenarios\n‚Ä¢ Penetration Testing Integration f√ºr PKI-Security Assessment\n‚Ä¢ Compliance Testing f√ºr Regulatory Requirements und Internal Policies\n\nüì¶ Container und Kubernetes Integration:\n‚Ä¢ Docker Container Certificate Management f√ºr Containerized Applications\n‚Ä¢ Kubernetes Secret Management f√ºr Certificate Storage und Distribution\n‚Ä¢ Helm Charts f√ºr PKI-enabled Application Deployment\n‚Ä¢ Istio Service Mesh Integration f√ºr Certificate-based Service-to-Service Communication\n‚Ä¢ Container Registry Integration f√ºr Signed Container Images und Supply Chain Security\n\nüåê Multi-Environment Management:\n‚Ä¢ Environment-specific Certificate Policies und Configuration Management\n‚Ä¢ Blue-Green Deployment Support mit Certificate Coordination\n‚Ä¢ Canary Deployment Integration f√ºr graduelle Certificate Rollouts\n‚Ä¢ Feature Flag Integration f√ºr Certificate-related Feature Management\n‚Ä¢ Environment Promotion Workflows f√ºr Certificate Lifecycle Management\n\nüìä Monitoring und Observability:\n‚Ä¢ Application Insights Integration f√ºr Certificate Performance und Usage Monitoring\n‚Ä¢ Azure Monitor Integration f√ºr PKI-related Metrics und Alerting\n‚Ä¢ Log Analytics f√ºr Certificate Lifecycle Event Tracking\n‚Ä¢ Custom Dashboards f√ºr Certificate Management KPIs und Operational Metrics\n‚Ä¢ Automated Reporting f√ºr Compliance und Audit Requirements"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Welche Hybrid Cloud PKI-Strategien unterst√ºtzt Azure und wie erfolgt die Integration mit On-Premises Infrastrukturen?',
        answer: "Azure Hybrid Cloud PKI-Strategien erm√∂glichen es Unternehmen, die Vorteile der Cloud-Skalierbarkeit mit bestehenden On-Premises Investitionen zu kombinieren. Diese Ans√§tze bieten Flexibilit√§t, Sicherheit und nahtlose Integration f√ºr komplexe Enterprise-Umgebungen mit verschiedenen Compliance- und Governance-Anforderungen.\n\nüåâ Hybrid Connectivity und Netzwerk-Integration:\n‚Ä¢ Azure ExpressRoute f√ºr dedizierte, private Verbindungen zwischen On-Premises und Azure PKI-Services\n‚Ä¢ Site-to-Site VPN Gateway Integration f√ºr sichere, verschl√ºsselte Kommunikation √ºber das Internet\n‚Ä¢ Point-to-Site VPN f√ºr Remote User und Administrator Access zu Hybrid PKI-Ressourcen\n‚Ä¢ Azure Virtual WAN f√ºr optimierte, globale Netzwerk-Konnektivit√§t und Traffic-Routing\n‚Ä¢ Private Link und Service Endpoints f√ºr sichere, private Verbindungen zu Azure PKI-Services\n\nüè¢ Active Directory Integration und Synchronization:\n‚Ä¢ Azure AD Connect f√ºr Identity Synchronization zwischen On-Premises Active Directory und Azure AD\n‚Ä¢ Active Directory Certificate Services Integration f√ºr nahtlose Certificate Authority Hierarchien\n‚Ä¢ Cross-Forest Trust Relationships f√ºr Multi-Domain Certificate Management\n‚Ä¢ Group Policy Integration f√ºr Certificate Auto-enrollment und Policy Distribution\n‚Ä¢ LDAP Integration f√ºr Legacy Application Support und Directory Services\n\nüîÑ Certificate Authority Hierarchies:\n‚Ä¢ Root CA On-Premises mit Subordinate CAs in Azure f√ºr optimale Security und Compliance\n‚Ä¢ Cross-Certification zwischen On-Premises und Azure Certificate Authorities\n‚Ä¢ Certificate Chain Validation und Trust Path Management f√ºr Hybrid Scenarios\n‚Ä¢ CRL und OCSP Distribution Points f√ºr Certificate Revocation Status Checking\n‚Ä¢ Certificate Template Synchronization zwischen On-Premises und Cloud Environments\n\nüõ°Ô∏è Security und Compliance Considerations:\n‚Ä¢ Data Residency Requirements f√ºr Certificate Storage und Processing\n‚Ä¢ Regulatory Compliance f√ºr Industry-specific Standards und Government Regulations\n‚Ä¢ Audit Trail Synchronization zwischen On-Premises und Cloud Systems\n‚Ä¢ Encryption Key Management f√ºr Cross-Environment Certificate Protection\n‚Ä¢ Access Control Synchronization f√ºr Consistent Security Policies\n\n‚öôÔ∏è Azure Arc Integration:\n‚Ä¢ Azure Arc-enabled Servers f√ºr Hybrid Server Management und Certificate Deployment\n‚Ä¢ Azure Arc-enabled Kubernetes f√ºr Container-based PKI Services in Hybrid Environments\n‚Ä¢ Azure Arc-enabled Data Services f√ºr Hybrid Database Certificate Management\n‚Ä¢ Unified Management Plane f√ºr Consistent PKI Operations across Environments\n‚Ä¢ Policy Enforcement f√ºr Hybrid Compliance und Governance Requirements\n\nüîß Migration und Modernization Strategies:\n‚Ä¢ Phased Migration Approaches f√ºr graduelle Cloud Adoption ohne Service Disruption\n‚Ä¢ Certificate Migration Tools f√ºr Bulk Certificate Transfer und Conversion\n‚Ä¢ Legacy System Integration f√ºr Backward Compatibility und Smooth Transitions\n‚Ä¢ Modernization Roadmaps f√ºr Long-term Hybrid to Cloud Evolution\n‚Ä¢ Risk Assessment und Mitigation Strategies f√ºr Migration Projects\n\nüìà Scalability und Performance Optimization:\n‚Ä¢ Load Balancing zwischen On-Premises und Cloud Certificate Services\n‚Ä¢ Caching Strategies f√ºr Optimal Certificate Retrieval Performance\n‚Ä¢ Geographic Distribution f√ºr Global Certificate Service Availability\n‚Ä¢ Auto-scaling f√ºr Dynamic Certificate Demand Management\n‚Ä¢ Performance Monitoring f√ºr Hybrid PKI Service Optimization\n\nüîÑ Disaster Recovery und Business Continuity:\n‚Ä¢ Cross-Environment Backup und Recovery Strategies f√ºr Certificate Data\n‚Ä¢ Failover Mechanisms f√ºr High Availability in Hybrid Scenarios\n‚Ä¢ Business Continuity Planning f√ºr PKI Service Continuity\n‚Ä¢ Recovery Time Objective und Recovery Point Objective Optimization\n‚Ä¢ Testing und Validation f√ºr Disaster Recovery Procedures"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Welche Monitoring und Governance-Funktionen bietet Azure f√ºr PKI-Services und wie erfolgt die Compliance-√úberwachung?',
        answer: "Azure bietet umfassende Monitoring und Governance-Funktionen f√ºr PKI-Services, die es Unternehmen erm√∂glichen, ihre Certificate Management Operationen zu √ºberwachen, zu steuern und kontinuierlich zu optimieren. Diese Funktionen sind entscheidend f√ºr die Aufrechterhaltung von Sicherheit, Compliance und operativer Exzellenz.\n\nüìä Azure Monitor Integration und Metriken:\n‚Ä¢ Real-time Certificate Lifecycle Monitoring mit konfigurierbaren Alerts und Notifications\n‚Ä¢ Certificate Expiration Tracking mit automatischen Renewal Reminders und Escalation Workflows\n‚Ä¢ Performance Metrics f√ºr Certificate Operations wie Issuance, Validation und Revocation\n‚Ä¢ Usage Analytics f√ºr Certificate Utilization Patterns und Capacity Planning\n‚Ä¢ Custom Metrics und KPIs f√ºr Business-specific Certificate Management Requirements\n\nüîç Azure Security Center Integration:\n‚Ä¢ Security Posture Assessment f√ºr PKI-Infrastrukturen und Certificate Management Practices\n‚Ä¢ Vulnerability Assessment f√ºr Certificate-related Security Weaknesses\n‚Ä¢ Threat Detection f√ºr Anomalous Certificate Activities und Potential Security Breaches\n‚Ä¢ Security Recommendations f√ºr PKI Best Practices und Compliance Improvements\n‚Ä¢ Secure Score Integration f√ºr Holistic Security Posture Management\n\nüìã Azure Policy und Governance Automation:\n‚Ä¢ Policy-based Certificate Management f√ºr Automated Compliance Enforcement\n‚Ä¢ Certificate Template Policies f√ºr Standardized Certificate Issuance Procedures\n‚Ä¢ Access Control Policies f√ºr Role-based Certificate Management Permissions\n‚Ä¢ Compliance Policies f√ºr Regulatory Requirements und Internal Standards\n‚Ä¢ Remediation Actions f√ºr Automated Policy Violation Resolution\n\nüîê Azure Sentinel SIEM Integration:\n‚Ä¢ Security Information und Event Management f√ºr Certificate-related Security Events\n‚Ä¢ Threat Intelligence Integration f√ºr Certificate-based Attack Pattern Detection\n‚Ä¢ Incident Response Workflows f√ºr Certificate Security Incidents\n‚Ä¢ Forensic Analysis f√ºr Certificate-related Security Investigations\n‚Ä¢ Automated Response Actions f√ºr Certificate Security Threats\n\nüìà Log Analytics und Audit Trails:\n‚Ä¢ Comprehensive Audit Logging f√ºr alle Certificate Operations und Administrative Actions\n‚Ä¢ Log Analytics Queries f√ºr Custom Certificate Management Reporting\n‚Ä¢ Retention Policies f√ºr Long-term Audit Trail Storage und Compliance Requirements\n‚Ä¢ Log Correlation f√ºr Cross-service Certificate Activity Analysis\n‚Ä¢ Export Capabilities f√ºr External Audit und Compliance Reporting Systems\n\nüéØ Compliance Manager Integration:\n‚Ä¢ Regulatory Compliance Tracking f√ºr Industry-specific Certificate Requirements\n‚Ä¢ Compliance Score Calculation f√ºr Certificate Management Maturity Assessment\n‚Ä¢ Action Items f√ºr Compliance Gap Remediation und Improvement Planning\n‚Ä¢ Evidence Collection f√ºr Audit Preparation und Regulatory Reporting\n‚Ä¢ Continuous Compliance Monitoring f√ºr Ongoing Regulatory Adherence\n\nüì± Power BI und Reporting Integration:\n‚Ä¢ Executive Dashboards f√ºr High-level Certificate Management Insights\n‚Ä¢ Operational Reports f√ºr Day-to-day Certificate Management Activities\n‚Ä¢ Compliance Reports f√ºr Regulatory Reporting und Internal Audits\n‚Ä¢ Trend Analysis f√ºr Certificate Usage Patterns und Capacity Planning\n‚Ä¢ Custom Visualizations f√ºr Business-specific Certificate Management Metrics\n\nüîÑ Automated Governance Workflows:\n‚Ä¢ Azure Logic Apps Integration f√ºr Certificate Lifecycle Automation\n‚Ä¢ Power Automate Workflows f√ºr Certificate Request Approval Processes\n‚Ä¢ Event-driven Automation f√ºr Certificate Lifecycle Management\n‚Ä¢ Integration mit External Systems f√ºr Holistic Certificate Governance\n‚Ä¢ Workflow Templates f√ºr Common Certificate Management Scenarios\n\nüåê Multi-tenant und Cross-subscription Governance:\n‚Ä¢ Azure Lighthouse f√ºr Managed Service Provider Certificate Management\n‚Ä¢ Cross-tenant Certificate Trust und Governance Policies\n‚Ä¢ Subscription-level Certificate Policies und Resource Management\n‚Ä¢ Cost Management f√ºr Certificate-related Azure Resource Optimization\n‚Ä¢ Resource Tagging f√ºr Certificate Asset Management und Cost Allocation"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Wie unterst√ºtzt Azure PKI moderne Authentifizierungsszenarien wie Zero Trust und Passwordless Authentication?',
        answer: "Azure PKI spielt eine zentrale Rolle in modernen Authentifizierungsszenarien und erm√∂glicht Zero Trust Architekturen sowie Passwordless Authentication durch fortschrittliche Certificate-basierte Sicherheitsmechanismen. Diese Ans√§tze transformieren traditionelle Sicherheitsmodelle zu adaptiven, risikobasierten Authentifizierungsstrategien.\n\nüõ°Ô∏è Zero Trust Architecture Foundation:\n‚Ä¢ Never Trust, Always Verify Prinzipien durch Certificate-basierte Identity Verification\n‚Ä¢ Continuous Authentication und Authorization durch Dynamic Certificate Validation\n‚Ä¢ Least Privilege Access durch Certificate-based Role und Permission Management\n‚Ä¢ Micro-segmentation Support durch Certificate-based Network Access Control\n‚Ä¢ Risk-based Authentication durch Certificate Context und Behavioral Analysis\n\nüîê Passwordless Authentication Mechanisms:\n‚Ä¢ Windows Hello for Business Integration mit Certificate-backed Biometric Authentication\n‚Ä¢ FIDO2 und WebAuthn Support f√ºr Modern Web Authentication Standards\n‚Ä¢ Smart Card und PIV Card Integration f√ºr High-security Authentication Scenarios\n‚Ä¢ Mobile Device Certificate Authentication f√ºr Seamless Mobile Access\n‚Ä¢ Hardware Security Key Integration f√ºr Phishing-resistant Authentication\n\nüì± Modern Device Authentication:\n‚Ä¢ Azure AD Joined Device Certificate Provisioning f√ºr Seamless Device Authentication\n‚Ä¢ Intune Integration f√ºr Mobile Device Certificate Management und Policy Enforcement\n‚Ä¢ Conditional Access Policies f√ºr Device Compliance und Certificate-based Access Control\n‚Ä¢ Device Trust Evaluation durch Certificate-based Device Identity Verification\n‚Ä¢ Bring Your Own Device Support mit Certificate-based Security Policies\n\nüåê Application und Service Authentication:\n‚Ä¢ Service Principal Certificate Authentication f√ºr Application-to-Application Communication\n‚Ä¢ Managed Identity Integration f√ºr Azure Service Authentication ohne Explicit Certificates\n‚Ä¢ API Authentication durch Certificate-based Client Authentication\n‚Ä¢ Microservices Authentication f√ºr Container und Kubernetes Environments\n‚Ä¢ Legacy Application Integration f√ºr Certificate-based Authentication Modernization\n\nüîÑ Adaptive Authentication und Risk Assessment:\n‚Ä¢ Risk-based Certificate Validation durch Machine Learning und Behavioral Analytics\n‚Ä¢ Contextual Authentication durch Location, Device und Time-based Certificate Policies\n‚Ä¢ Threat Intelligence Integration f√ºr Certificate-based Risk Assessment\n‚Ä¢ Anomaly Detection f√ºr Unusual Certificate Usage Patterns\n‚Ä¢ Dynamic Authentication Requirements basierend auf Risk Score und Context\n\nüè¢ Enterprise Integration und Single Sign-On:\n‚Ä¢ Seamless SSO f√ºr Certificate-enabled Applications und Services\n‚Ä¢ Federation Support f√ºr Cross-organization Certificate Trust\n‚Ä¢ Identity Provider Integration f√ºr Hybrid Identity Scenarios\n‚Ä¢ Legacy System Integration f√ºr Certificate-based Authentication Modernization\n‚Ä¢ Cross-platform Authentication f√ºr Diverse Technology Stacks\n\nüîí Advanced Security Features:\n‚Ä¢ Multi-Factor Authentication Integration mit Certificate als Strong Authentication Factor\n‚Ä¢ Step-up Authentication f√ºr High-risk Operations und Sensitive Resource Access\n‚Ä¢ Certificate Pinning f√ºr Enhanced Application Security und Man-in-the-Middle Protection\n‚Ä¢ Certificate Transparency f√ºr Public Certificate Monitoring und Validation\n‚Ä¢ Quantum-resistant Cryptography Support f√ºr Future-proof Authentication\n\nüìä Monitoring und Analytics:\n‚Ä¢ Authentication Pattern Analysis f√ºr Security Posture Assessment\n‚Ä¢ Certificate Usage Analytics f√ºr Optimization und Capacity Planning\n‚Ä¢ Security Event Correlation f√ºr Threat Detection und Incident Response\n‚Ä¢ User Experience Metrics f√ºr Authentication Process Optimization\n‚Ä¢ Compliance Reporting f√ºr Regulatory Requirements und Internal Audits\n\nüîß Implementation und Migration Support:\n‚Ä¢ Phased Migration Strategies f√ºr Passwordless Authentication Adoption\n‚Ä¢ User Training und Change Management f√ºr New Authentication Methods\n‚Ä¢ Pilot Programs f√ºr Gradual Certificate-based Authentication Rollout\n‚Ä¢ Integration Testing f√ºr Application Compatibility und Performance\n‚Ä¢ Rollback Procedures f√ºr Risk Mitigation w√§hrend Migration Phases"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
