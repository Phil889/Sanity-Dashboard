import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Integration page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-integration' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-integration" not found')
    }
    
    // Create new FAQs for IAM Integration fundamentals
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Warum ist IAM Integration der kritische Erfolgsfaktor f√ºr moderne Unternehmen und wie unterscheidet sie sich von traditionellen Systemintegrations-Ans√§tzen?',
        answer: "IAM Integration ist das strategische Nervensystem moderner Unternehmen und transformiert fragmentierte IT-Landschaften in orchestrierte, intelligente √ñkosysteme, die Gesch√§ftsprozesse beschleunigen und gleichzeitig h√∂chste Sicherheitsstandards gew√§hrleisten. Anders als traditionelle punkt-zu-punkt Integrationen schafft moderne IAM-Integration eine zentrale, API-gesteuerte Architektur, die Identit√§ten als prim√§ren Integrationspunkt nutzt und dabei Skalierbarkeit, Sicherheit und Zukunftssicherheit gew√§hrleistet.\n\nüéØ Strategische Transformation und Business-Enablement:\n‚Ä¢ Zentrale Identity-Orchestrierung als Fundament f√ºr digitale Transformation und Cloud-Migration\n‚Ä¢ API-first Architektur mit standardisierten Schnittstellen f√ºr nahtlose Systemkonnektivit√§t\n‚Ä¢ Event-driven Integration f√ºr Real-time Synchronisation und intelligente Workflow-Automatisierung\n‚Ä¢ Microservices-Patterns f√ºr flexible, skalierbare Identit√§tsservices und modulare Architektur\n‚Ä¢ Cloud-native Deployment mit Container-Orchestrierung f√ºr globale Verf√ºgbarkeit\n\nüöÄ Innovation-Enablement und Competitive Advantage:\n‚Ä¢ Zero-Trust-Integration mit kontinuierlicher Verifikation und adaptiven Sicherheitskontrollen\n‚Ä¢ Intelligent Automation durch KI-gest√ºtzte Orchestrierung und selbstheilende Systemarchitekturen\n‚Ä¢ Multi-Cloud Federation f√ºr konsistente Identit√§tsverwaltung √ºber alle Cloud-Umgebungen\n‚Ä¢ DevOps-Integration f√ºr beschleunigte Entwicklungszyklen und kontinuierliche Deployment-Pipelines\n‚Ä¢ Edge-Computing-Support f√ºr IoT-Integration und dezentrale Identit√§tsverwaltung\n\nüõ°Ô∏è Advanced Security und Compliance Framework:\n‚Ä¢ Security-by-Design Integration mit Zero-Trust-Prinzipien und End-to-End-Verschl√ºsselung\n‚Ä¢ Automated Threat Detection durch integrierte Security-Analytics und Behavioral Monitoring\n‚Ä¢ Compliance-Automation f√ºr kontinuierliche regulatorische Exzellenz und Audit-Bereitschaft\n‚Ä¢ Identity-centric Security mit granularen Zugriffskontrollen und Privileged Access Management\n‚Ä¢ Incident Response Integration f√ºr automatisierte Reaktion auf Sicherheitsvorf√§lle\n\nüìä Data-driven Integration und Analytics:\n‚Ä¢ Real-time Integration Monitoring mit Performance-Analytics und Capacity Planning\n‚Ä¢ Identity Analytics f√ºr Einblicke in Benutzerverhalten und Systemnutzung\n‚Ä¢ Predictive Integration mit Machine Learning f√ºr proaktive Optimierung und Fehlervermeidung\n‚Ä¢ Business Intelligence Integration f√ºr datengetriebene Entscheidungsfindung\n‚Ä¢ Cost Optimization durch intelligente Ressourcenallokation und Workload-Management\n\nüåê Enterprise-Scale Integration Excellence:\n‚Ä¢ Legacy-Modernisierung ohne Disruption kritischer Gesch√§ftsprozesse\n‚Ä¢ Hybrid-Cloud-Integration f√ºr nahtlose On-Premises und Cloud-Konnektivit√§t\n‚Ä¢ Partner-Ecosystem-Integration f√ºr sichere B2B-Collaboration und Supply Chain Connectivity\n‚Ä¢ Global Deployment mit lokaler Compliance f√ºr internationale Gesch√§ftst√§tigkeit\n‚Ä¢ Disaster Recovery Integration f√ºr Business Continuity und Hochverf√ºgbarkeit"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Welche kritischen Komponenten und Architektur-Patterns bilden eine enterprise-grade IAM-Integrationslandschaft und wie arbeiten sie zusammen f√ºr maximale Effizienz?',
        answer: "Eine enterprise-grade IAM-Integrationslandschaft ist ein hochkomplexes √ñkosystem intelligenter Komponenten und bew√§hrter Architektur-Patterns, die nahtlos zusammenarbeiten, um eine robuste, skalierbare und adaptive Identit√§tsintegration zu erm√∂glichen. Diese Architektur muss sowohl h√∂chste Performance-Standards als auch optimale Sicherheit gew√§hrleisten, w√§hrend sie gleichzeitig Gesch√§ftsprozesse beschleunigt und operative Exzellenz erm√∂glicht.\n\nüèóÔ∏è Core Integration Infrastructure und Service Mesh:\n‚Ä¢ Enterprise Service Bus als zentrale Orchestrierungsschicht f√ºr alle Identit√§tsdienste und Systemkommunikation\n‚Ä¢ API Gateway Management mit intelligenter Routing, Load Balancing und Traffic Management\n‚Ä¢ Service Mesh Architecture f√ºr Microservices-Kommunikation mit automatischer Service Discovery\n‚Ä¢ Message Queue Systems f√ºr asynchrone Kommunikation und Event-driven Architecture\n‚Ä¢ Integration Hub als zentrale Konfiguration und Monitoring-Plattform f√ºr alle Integrationspunkte\n\nüîê Advanced Authentication und Authorization Layer:\n‚Ä¢ OAuth und OpenID Connect Implementation f√ºr standardisierte Authentifizierung und Authorization\n‚Ä¢ SAML Federation f√ºr Enterprise Single Sign-On und Cross-Domain-Authentication\n‚Ä¢ JWT Token Management mit automatischer Rotation und Lifecycle-Management\n‚Ä¢ Multi-Factor Authentication Integration mit adaptiven Sicherheitsanforderungen\n‚Ä¢ Policy Decision Points f√ºr zentrale Autorisierungsentscheidungen und Compliance-Enforcement\n\n‚öôÔ∏è Intelligent Orchestration und Workflow Engine:\n‚Ä¢ Business Process Management Integration f√ºr komplexe Workflow-Orchestrierung\n‚Ä¢ Event-driven Architecture mit Real-time Event Processing und Correlation\n‚Ä¢ Automated Provisioning Workflows mit Business-Rule-Integration und Approval-Prozessen\n‚Ä¢ Data Synchronization Engine f√ºr konsistente Identit√§tsdaten √ºber alle Systeme\n‚Ä¢ Error Handling und Retry Mechanisms f√ºr robuste Fehlerbehandlung und Selbstheilung\n\nüõ°Ô∏è Security Integration und Monitoring Framework:\n‚Ä¢ Zero-Trust Network Access Integration f√ºr sichere Systemkommunikation\n‚Ä¢ API Security mit Rate Limiting, Threat Protection und Vulnerability Scanning\n‚Ä¢ Security Information und Event Management Integration f√ºr umfassende √úberwachung\n‚Ä¢ Encryption-at-Rest und Encryption-in-Transit f√ºr End-to-End-Datenschutz\n‚Ä¢ Audit Trail Management mit umfassender Protokollierung aller Integrationsereignisse\n\nüìä Performance Monitoring und Analytics Platform:\n‚Ä¢ Application Performance Monitoring f√ºr Real-time Performance-√úberwachung\n‚Ä¢ Integration Analytics mit Machine Learning f√ºr Anomaly Detection und Optimization\n‚Ä¢ Capacity Planning Tools f√ºr proaktive Ressourcenplanung und Skalierung\n‚Ä¢ Business Intelligence Integration f√ºr datengetriebene Insights und Reporting\n‚Ä¢ Cost Management und Resource Optimization f√ºr effiziente Ressourcennutzung\n\nüåê Cloud-native und Hybrid Integration Layer:\n‚Ä¢ Container Orchestration mit Kubernetes f√ºr skalierbare Microservices-Deployment\n‚Ä¢ Multi-Cloud Integration f√ºr konsistente Services √ºber verschiedene Cloud-Provider\n‚Ä¢ Edge Computing Integration f√ºr dezentrale Identit√§tsdienste und IoT-Support\n‚Ä¢ Hybrid Connectivity f√ºr nahtlose On-Premises und Cloud-Integration\n‚Ä¢ DevOps Pipeline Integration f√ºr kontinuierliche Integration und Deployment"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Wie implementiert man eine API-first IAM-Integrationsarchitektur erfolgreich und welche strategischen Vorteile bietet sie f√ºr moderne Unternehmensentwicklung?',
        answer: "API-first IAM-Integrationsarchitekturen revolutionieren die Unternehmensentwicklung durch standardisierte, skalierbare und zukunftssichere Integrationsmuster, die Agilit√§t maximieren und gleichzeitig robuste Sicherheits- und Governance-Frameworks etablieren. Diese Architektur-Philosophie transformiert IAM von einem monolithischen System zu einem modularen, service-orientierten √ñkosystem, das Innovation beschleunigt und Gesch√§ftswert maximiert.\n\nüéØ API-first Design Principles und Architecture Patterns:\n‚Ä¢ Contract-first Development mit OpenAPI-Spezifikationen f√ºr konsistente API-Design und Dokumentation\n‚Ä¢ RESTful API Design mit standardisierten HTTP-Methoden und Resource-orientierten Endpunkten\n‚Ä¢ GraphQL Integration f√ºr flexible Datenabfragen und optimierte Client-Server-Kommunikation\n‚Ä¢ Event-driven APIs mit Webhooks und Server-sent Events f√ºr Real-time Benachrichtigungen\n‚Ä¢ Versioning Strategies f√ºr backward-kompatible API-Evolution und Lifecycle-Management\n\nüõ°Ô∏è Security-by-Design API Implementation:\n‚Ä¢ OAuth und JWT-basierte Authentication mit granularen Scope-Definitionen\n‚Ä¢ API Rate Limiting und Throttling f√ºr Schutz vor Missbrauch und DDoS-Attacken\n‚Ä¢ Input Validation und Output Encoding f√ºr Schutz vor Injection-Attacken\n‚Ä¢ mTLS Implementation f√ºr sichere Service-to-Service-Kommunikation\n‚Ä¢ API Security Testing mit automatisierten Vulnerability Scans und Penetration Testing\n\nüöÄ Microservices Architecture und Service Decomposition:\n‚Ä¢ Domain-driven Design f√ºr logische Service-Abgrenzung und Bounded Contexts\n‚Ä¢ Service Mesh Implementation f√ºr Microservices-Kommunikation und Traffic Management\n‚Ä¢ Circuit Breaker Patterns f√ºr Resilience und Fault Tolerance\n‚Ä¢ Distributed Tracing f√ºr End-to-End Monitoring und Performance-Analyse\n‚Ä¢ Service Registry und Discovery f√ºr dynamische Service-Lokalisierung\n\nüìä API Governance und Lifecycle Management:\n‚Ä¢ API Gateway als zentrale Kontrollebene f√ºr alle API-Zugriffe und Policy-Enforcement\n‚Ä¢ Developer Portal f√ºr API-Dokumentation, Testing und Community-Building\n‚Ä¢ API Analytics f√ºr Usage-Monitoring, Performance-Tracking und Business-Insights\n‚Ä¢ Automated Testing mit Contract Testing und API-Mocking f√ºr kontinuierliche Qualit√§tssicherung\n‚Ä¢ Deprecation Management f√ºr kontrollierte API-Evolution und Migration\n\nüåê Cloud-native API Deployment und Scaling:\n‚Ä¢ Container-based Deployment mit Docker und Kubernetes f√ºr skalierbare API-Services\n‚Ä¢ Auto-scaling Policies f√ºr dynamische Ressourcenanpassung basierend auf API-Load\n‚Ä¢ Multi-Region Deployment f√ºr globale Verf√ºgbarkeit und Latency-Optimierung\n‚Ä¢ Blue-Green Deployment f√ºr Zero-Downtime API-Updates und Rollback-F√§higkeiten\n‚Ä¢ Infrastructure as Code f√ºr reproduzierbare und versionierte API-Infrastruktur\n\nüí° Innovation Enablement und Business Agility:\n‚Ä¢ Rapid Prototyping durch modulare API-Komponenten und Reusable Services\n‚Ä¢ Partner Integration durch standardisierte API-Schnittstellen und Developer-friendly Documentation\n‚Ä¢ Mobile-first Development mit optimierten APIs f√ºr mobile Anwendungen\n‚Ä¢ IoT Integration durch lightweight APIs und Edge-Computing-Support\n‚Ä¢ AI/ML Integration f√ºr intelligente API-Services und Predictive Analytics"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Welche Herausforderungen entstehen bei der Legacy-System-Integration in moderne IAM-Landschaften und wie l√∂st man diese ohne Disruption kritischer Gesch√§ftsprozesse?',
        answer: "Legacy-System-Integration in moderne IAM-Landschaften ist eine der komplexesten Herausforderungen der digitalen Transformation und erfordert strategische Planung, innovative Technologien und bew√§hrte Migrationsmuster, um kritische Gesch√§ftsprozesse zu sch√ºtzen und gleichzeitig moderne Sicherheits- und Effizienzstandards zu etablieren. Erfolgreiche Legacy-Integration verwandelt technische Schulden in strategische Assets und schafft die Grundlage f√ºr nachhaltige Innovation.\n\nüéØ Legacy Assessment und Modernisierungsstrategie:\n‚Ä¢ Comprehensive System Inventory mit detaillierter Analyse aller Legacy-Komponenten und Abh√§ngigkeiten\n‚Ä¢ Business Impact Assessment f√ºr Priorisierung kritischer Systeme und Risikobewertung\n‚Ä¢ Technical Debt Analysis mit Bewertung von Modernisierungsaufwand und ROI-Potenzial\n‚Ä¢ Integration Complexity Mapping f√ºr Identifikation von Integrationspunkten und Datenfl√ºssen\n‚Ä¢ Migration Roadmap Development mit phasenweiser Umsetzung und Meilenstein-Definition\n\nüîß API Wrapper und Adapter Pattern Implementation:\n‚Ä¢ Legacy API Wrapper Development f√ºr moderne REST/GraphQL-Schnittstellen\n‚Ä¢ Protocol Translation zwischen Legacy-Protokollen und modernen Standards\n‚Ä¢ Data Format Transformation f√ºr JSON/XML-Konvertierung und Schema-Mapping\n‚Ä¢ Authentication Bridge f√ºr Integration von Legacy-Authentifizierung in moderne IAM-Systeme\n‚Ä¢ Error Handling und Retry Logic f√ºr robuste Legacy-System-Kommunikation\n\n‚öôÔ∏è Graduelle Migration und Strangler Fig Pattern:\n‚Ä¢ Incremental Migration mit schrittweiser Funktionalit√§ts√ºbertragung ohne System-Disruption\n‚Ä¢ Parallel Run Strategies f√ºr Risikominimierung und Rollback-F√§higkeiten\n‚Ä¢ Feature Toggle Implementation f√ºr kontrollierte Funktionsfreigabe und A/B-Testing\n‚Ä¢ Data Migration Pipelines mit ETL-Prozessen und Datenqualit√§tssicherung\n‚Ä¢ Cutover Planning mit detaillierten Rollback-Szenarien und Contingency-Pl√§nen\n\nüõ°Ô∏è Security Bridge und Compliance Maintenance:\n‚Ä¢ Legacy Security Assessment mit Vulnerability Scanning und Risk Analysis\n‚Ä¢ Security Wrapper Implementation f√ºr moderne Sicherheitsstandards\n‚Ä¢ Compliance Mapping zwischen Legacy-Systemen und aktuellen regulatorischen Anforderungen\n‚Ä¢ Audit Trail Preservation f√ºr kontinuierliche Compliance-Dokumentation\n‚Ä¢ Identity Federation f√ºr nahtlose Integration in moderne IAM-Architekturen\n\nüìä Monitoring und Performance Optimization:\n‚Ä¢ Legacy System Monitoring mit modernen APM-Tools und Alerting-Systemen\n‚Ä¢ Performance Baseline Establishment f√ºr Vergleichsmessungen und Optimierung\n‚Ä¢ Capacity Planning f√ºr Legacy-Systeme in hybriden Umgebungen\n‚Ä¢ Integration Testing mit automatisierten Test-Suites und Regression-Testing\n‚Ä¢ Business Continuity Monitoring f√ºr kritische Legacy-Funktionen\n\nüåê Hybrid Architecture und Cloud Integration:\n‚Ä¢ Hybrid Cloud Connectivity f√ºr sichere Legacy-Cloud-Integration\n‚Ä¢ VPN und Private Connectivity f√ºr gesch√ºtzte Daten√ºbertragung\n‚Ä¢ Edge Computing Integration f√ºr Legacy-Systeme mit Latency-Anforderungen\n‚Ä¢ Disaster Recovery Planning f√ºr Legacy-Systeme in Cloud-Umgebungen\n‚Ä¢ Cost Optimization durch intelligente Workload-Verteilung zwischen Legacy und Cloud"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
