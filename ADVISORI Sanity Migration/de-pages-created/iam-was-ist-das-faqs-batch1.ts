import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Was ist das page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-was-ist-das' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-was-ist-das" not found')
    }
    
    // Create new FAQs for IAM fundamentals
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Was ist IAM eigentlich und warum ist Identity & Access Management f√ºr moderne Unternehmen unverzichtbar geworden?',
        answer: "Identity & Access Management ist das fundamentale Sicherheitsframework, das definiert und kontrolliert, wer Zugang zu welchen digitalen Ressourcen hat, wann dieser Zugang gew√§hrt wird und unter welchen spezifischen Bedingungen. IAM ist weit mehr als nur eine technische L√∂sung ‚Äì es ist das strategische Nervensystem moderner Organisationen, das Sicherheit, Produktivit√§t und Compliance nahtlos miteinander verbindet und dabei als Enabler f√ºr digitale Transformation fungiert.\n\nüéØ Fundamentale IAM-Definition und Kernkonzepte:\n‚Ä¢ Identit√§tsverwaltung als zentrales Repository f√ºr alle digitalen Identit√§ten, Attribute und Beziehungen\n‚Ä¢ Authentifizierung zur sicheren Verifikation von Benutzeridentit√§ten durch verschiedene Faktoren\n‚Ä¢ Autorisierung f√ºr granulare Kontrolle √ºber Ressourcenzugriffe basierend auf Rollen und Attributen\n‚Ä¢ Governance-Mechanismen f√ºr kontinuierliche √úberwachung, Compliance und Risikomanagement\n‚Ä¢ Lifecycle Management f√ºr automatisierte Verwaltung von Identit√§ten von der Erstellung bis zur Deaktivierung\n\nüè¢ Strategische Gesch√§ftsbedeutung und Business-Impact:\n‚Ä¢ Digitale Transformation Enablement durch sichere und skalierbare Identit√§tsinfrastruktur\n‚Ä¢ Produktivit√§tssteigerung durch nahtlose Benutzerfreundlichkeit und Single Sign-On Erfahrungen\n‚Ä¢ Kostenreduktion durch Automatisierung manueller Prozesse und reduzierte IT-Belastung\n‚Ä¢ Compliance-Exzellenz durch automatisierte Erf√ºllung regulatorischer Anforderungen\n‚Ä¢ Risikominimierung durch proaktive Sicherheitskontrollen und kontinuierliche √úberwachung\n\nüîê Moderne Sicherheitsarchitektur und Zero-Trust-Integration:\n‚Ä¢ Zero-Trust-Prinzipien mit kontinuierlicher Verifikation statt implizitem Vertrauen\n‚Ä¢ Adaptive Authentifizierung mit KI-gest√ºtzter Risikobewertung und kontextbasierter Sicherheit\n‚Ä¢ Behavioral Analytics f√ºr Erkennung anomaler Aktivit√§tsmuster und Insider-Threats\n‚Ä¢ Multi-Factor Authentication mit verschiedenen Authentifizierungsfaktoren f√ºr erh√∂hte Sicherheit\n‚Ä¢ Privileged Access Management f√ºr besonderen Schutz kritischer und administrativer Zugriffe\n\nüåê Cloud-native Integration und Hybrid-Unterst√ºtzung:\n‚Ä¢ Multi-Cloud Identity Federation f√ºr konsistente Identit√§tsverwaltung √ºber alle Cloud-Umgebungen\n‚Ä¢ Hybrid-Integration f√ºr nahtlose Verbindung von On-Premises und Cloud-Systemen\n‚Ä¢ API-first Architecture f√ºr moderne Anwendungsentwicklung und Microservices-Integration\n‚Ä¢ Container-Security f√ºr sichere Identit√§tsverwaltung in containerisierten Umgebungen\n‚Ä¢ Edge Computing Support f√ºr IoT-Ger√§te und dezentrale Anwendungsarchitekturen\n\nüìä Datengetriebene Entscheidungsfindung und Analytics:\n‚Ä¢ Identity Analytics f√ºr tiefe Einblicke in Benutzerverhalten und Zugriffsmuster\n‚Ä¢ Risk Scoring mit Machine Learning f√ºr intelligente und adaptive Sicherheitsentscheidungen\n‚Ä¢ Compliance Dashboards f√ºr Real-time √úberwachung und automatisierte Berichterstattung\n‚Ä¢ Performance Metrics f√ºr kontinuierliche Optimierung und ROI-Maximierung\n‚Ä¢ Predictive Insights f√ºr proaktive Kapazit√§tsplanung und pr√§ventive Sicherheitsma√ünahmen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Welche grundlegenden Komponenten bilden ein vollst√§ndiges IAM-System und wie arbeiten sie zusammen f√ºr eine sichere Identit√§tsverwaltung?',
        answer: "Ein vollst√§ndiges IAM-System besteht aus mehreren integrierten Komponenten, die nahtlos zusammenarbeiten, um eine umfassende und sichere Identit√§tsverwaltung zu gew√§hrleisten. Diese Komponenten bilden ein intelligentes √ñkosystem, das von der grundlegenden Identit√§tsspeicherung bis hin zu fortgeschrittenen Governance-Funktionen alle Aspekte der digitalen Identit√§tsverwaltung abdeckt.\n\nüóÑÔ∏è Identity Repository und Directory Services:\n‚Ä¢ Zentraler Identity Store als hochverf√ºgbare Datenbank f√ºr alle Benutzeridentit√§ten und Attribute\n‚Ä¢ Directory Services mit hierarchischer Organisation und intelligenter Datenstrukturierung\n‚Ä¢ Identity Synchronization f√ºr Real-time Updates und Konsistenz √ºber alle verbundenen Systeme\n‚Ä¢ Attribute Management f√ºr granulare Speicherung und Verwaltung von Benutzerinformationen\n‚Ä¢ Backup und Recovery Mechanismen f√ºr Datenschutz und Business Continuity\n\nüîë Authentication Engine und Verification Systems:\n‚Ä¢ Multi-Factor Authentication mit verschiedenen Authentifizierungsfaktoren und adaptiven Anforderungen\n‚Ä¢ Single Sign-On f√ºr nahtlose Benutzerfreundlichkeit und reduzierte Passwort-Belastung\n‚Ä¢ Adaptive Authentication mit KI-gest√ºtzter Risikobewertung und kontextbasierter Sicherheit\n‚Ä¢ Biometric Authentication f√ºr erweiterte Sicherheit durch einzigartige biologische Merkmale\n‚Ä¢ Certificate-based Authentication f√ºr PKI-Integration und h√∂chste Sicherheitsstandards\n\n‚öôÔ∏è Authorization Engine und Policy Management:\n‚Ä¢ Role-Based Access Control mit hierarchischen Rollenmodellen und Vererbungsstrukturen\n‚Ä¢ Attribute-Based Access Control f√ºr granulare Zugriffskontrollen basierend auf dynamischen Attributen\n‚Ä¢ Policy Engine f√ºr zentrale Definition und Durchsetzung von Sicherheitsrichtlinien\n‚Ä¢ Dynamic Authorization mit Real-time Entscheidungsfindung basierend auf aktuellen Kontextdaten\n‚Ä¢ Fine-grained Permissions f√ºr pr√§zise Kontrolle √ºber spezifische Ressourcen und Aktionen\n\nüîÑ Provisioning und Lifecycle Management:\n‚Ä¢ Automated Provisioning f√ºr effiziente Erstellung und Konfiguration neuer Benutzerkonten\n‚Ä¢ Workflow Engine f√ºr strukturierte Genehmigungsprozesse und Business-Rule-Integration\n‚Ä¢ Identity Lifecycle Management von der Erstellung √ºber Modifikationen bis zur Deaktivierung\n‚Ä¢ Self-Service Capabilities f√ºr Benutzer-initiierte Aktionen und reduzierte IT-Belastung\n‚Ä¢ Bulk Operations f√ºr effiziente Verwaltung gro√üer Benutzergruppen und Massen√§nderungen\n\nüõ°Ô∏è Governance und Compliance Framework:\n‚Ä¢ Access Governance f√ºr kontinuierliche √úberwachung und Optimierung von Zugriffsrechten\n‚Ä¢ Compliance Monitoring mit automatisierter √úberpr√ºfung regulatorischer Anforderungen\n‚Ä¢ Audit Trail Management f√ºr umfassende Protokollierung aller IAM-Aktivit√§ten\n‚Ä¢ Risk Analytics mit Machine Learning f√ºr datengetriebene Risikobewertung\n‚Ä¢ Recertification Processes f√ºr regelm√§√üige √úberpr√ºfung und Validierung von Zugriffsrechten\n\nüîó Integration Layer und API Management:\n‚Ä¢ API Gateway f√ºr sichere und skalierbare Integration mit modernen Anwendungen\n‚Ä¢ Connector Framework f√ºr nahtlose Anbindung verschiedener Systeme und Anwendungen\n‚Ä¢ Event-driven Architecture f√ºr Real-time Synchronisation und Benachrichtigungen\n‚Ä¢ Standards Compliance mit SAML, OAuth, OpenID Connect und anderen Industriestandards\n‚Ä¢ Custom Integration f√ºr spezielle Anforderungen und Legacy-System-Anbindung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Wie funktioniert die Authentifizierung in IAM-Systemen und welche verschiedenen Methoden stehen f√ºr sichere Benutzerverifikation zur Verf√ºgung?',
        answer: "Authentifizierung ist der kritische Prozess der Identit√§tsverifikation in IAM-Systemen und bildet die erste und wichtigste Verteidigungslinie gegen unbefugten Zugriff. Moderne Authentifizierungssysteme nutzen verschiedene Faktoren und intelligente Technologien, um sowohl h√∂chste Sicherheit als auch optimale Benutzerfreundlichkeit zu gew√§hrleisten.\n\nüîê Fundamentale Authentifizierungsprinzipien:\n‚Ä¢ Something You Know wie Passw√∂rter, PINs oder Sicherheitsfragen als traditionelle Wissensfaktoren\n‚Ä¢ Something You Have wie Smartphones, Hardware-Token oder Smart Cards als Besitzfaktoren\n‚Ä¢ Something You Are wie Fingerabdr√ºcke, Gesichtserkennung oder Iris-Scans als biometrische Faktoren\n‚Ä¢ Something You Do wie Tippverhalten, Gangmuster oder Unterschriftsdynamik als Verhaltensfaktoren\n‚Ä¢ Somewhere You Are wie GPS-Koordinaten, IP-Adressen oder Netzwerkstandorte als Ortsfaktoren\n\nüéØ Multi-Factor Authentication und Adaptive Security:\n‚Ä¢ Two-Factor Authentication als Mindeststandard mit Kombination verschiedener Authentifizierungsfaktoren\n‚Ä¢ Multi-Factor Authentication f√ºr erweiterte Sicherheit durch mehrere unabh√§ngige Verifikationsmethoden\n‚Ä¢ Adaptive Authentication mit dynamischer Anpassung der Sicherheitsanforderungen basierend auf Risikobewertung\n‚Ä¢ Risk-based Authentication mit intelligenter Analyse von Benutzerkontext und Verhaltensmustern\n‚Ä¢ Step-up Authentication f√ºr zus√§tzliche Verifikation bei kritischen Aktionen oder erh√∂htem Risiko\n\nü§ñ KI-gest√ºtzte und Behavioral Authentication:\n‚Ä¢ Behavioral Biometrics f√ºr kontinuierliche Authentifizierung w√§hrend der gesamten Benutzersitzung\n‚Ä¢ Machine Learning Algorithms f√ºr Erkennung anomaler Authentifizierungsmuster\n‚Ä¢ Continuous Authentication mit permanenter √úberwachung und Verifikation der Benutzeridentit√§t\n‚Ä¢ Anomaly Detection f√ºr Identifizierung verd√§chtiger Anmeldeversuche und Bedrohungen\n‚Ä¢ Fraud Prevention durch intelligente Analyse von Authentifizierungsmustern und Risikoindikatoren\n\nüì± Moderne Authentifizierungstechnologien:\n‚Ä¢ Mobile Authentication mit Smartphone-basierten L√∂sungen und Push-Benachrichtigungen\n‚Ä¢ Biometric Authentication durch Fingerabdruck, Gesichtserkennung oder Spracherkennung\n‚Ä¢ Hardware Security Keys f√ºr h√∂chste Sicherheit durch dedizierte Authentifizierungsger√§te\n‚Ä¢ Certificate-based Authentication mit PKI-Integration f√ºr Enterprise-Umgebungen\n‚Ä¢ Passwordless Authentication f√ºr verbesserte Benutzerfreundlichkeit ohne traditionelle Passw√∂rter\n\nüåê Single Sign-On und Federation:\n‚Ä¢ Single Sign-On f√ºr nahtlose Authentifizierung √ºber alle verbundenen Anwendungen\n‚Ä¢ Identity Federation f√ºr sichere Authentifizierung √ºber Organisationsgrenzen hinweg\n‚Ä¢ SAML Integration f√ºr standardisierte Authentifizierung in Enterprise-Umgebungen\n‚Ä¢ OAuth und OpenID Connect f√ºr moderne Web- und Mobile-Anwendungen\n‚Ä¢ Social Login Integration f√ºr vereinfachte Authentifizierung durch bestehende Social Media Accounts\n\nüîÑ Session Management und Security:\n‚Ä¢ Session Lifecycle Management mit intelligenter Timeout-Steuerung und Sicherheits√ºberwachung\n‚Ä¢ Concurrent Session Control f√ºr Verwaltung mehrerer gleichzeitiger Benutzersitzungen\n‚Ä¢ Session Security Monitoring mit Real-time √úberwachung verd√§chtiger Aktivit√§ten\n‚Ä¢ Secure Session Termination f√ºr sichere Beendigung von Benutzersitzungen\n‚Ä¢ Cross-device Authentication f√ºr nahtlose Authentifizierung √ºber verschiedene Ger√§te hinweg"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Was bedeutet Autorisierung in IAM-Kontexten und wie werden Zugriffsrechte granular gesteuert und verwaltet?',
        answer: "Autorisierung ist der kritische Prozess der Zugriffskontrolle in IAM-Systemen, der nach erfolgreicher Authentifizierung bestimmt, welche spezifischen Ressourcen, Anwendungen oder Daten ein Benutzer zugreifen darf und welche Aktionen er ausf√ºhren kann. Moderne Autorisierungssysteme nutzen intelligente Regelwerke und dynamische Entscheidungsmechanismen f√ºr granulare und kontextbasierte Zugriffskontrolle.\n\nüé≠ Role-Based Access Control und Rollenmanagement:\n‚Ä¢ Hierarchische Rollenmodelle mit strukturierter Organisation von Berechtigungen und Verantwortlichkeiten\n‚Ä¢ Role Inheritance f√ºr effiziente Verwaltung komplexer Berechtigungsstrukturen\n‚Ä¢ Dynamic Role Assignment basierend auf Benutzerattributen und organisatorischen √Ñnderungen\n‚Ä¢ Role Mining f√ºr automatische Identifizierung optimaler Rollenstrukturen aus bestehenden Zugriffsmustern\n‚Ä¢ Segregation of Duties f√ºr Verhinderung von Interessenkonflikten und Compliance-Verst√∂√üen\n\nüè∑Ô∏è Attribute-Based Access Control und Policy Engine:\n‚Ä¢ Attribute-driven Authorization mit granularer Kontrolle basierend auf Benutzer-, Ressourcen- und Umgebungsattributen\n‚Ä¢ Policy Engine f√ºr zentrale Definition und Durchsetzung komplexer Autorisierungsregeln\n‚Ä¢ Dynamic Policy Evaluation mit Real-time Entscheidungsfindung basierend auf aktuellen Kontextdaten\n‚Ä¢ Contextual Authorization mit Ber√ºcksichtigung von Zeit, Ort, Ger√§t und Netzwerkkontext\n‚Ä¢ Fine-grained Permissions f√ºr pr√§zise Kontrolle √ºber spezifische Aktionen und Datenelemente\n\n‚ö° Just-in-Time Access und Temporal Authorization:\n‚Ä¢ Just-in-Time Provisioning f√ºr tempor√§re Rechteerweiterung bei spezifischen Gesch√§ftsanforderungen\n‚Ä¢ Time-based Access Controls mit automatischer Aktivierung und Deaktivierung von Berechtigungen\n‚Ä¢ Emergency Access Procedures f√ºr Notfallsituationen mit umfassender Protokollierung\n‚Ä¢ Approval Workflows f√ºr kontrollierte Genehmigung kritischer oder tempor√§rer Zugriffe\n‚Ä¢ Automatic Revocation mit zeitgesteuerten Mechanismen f√ºr Berechtigungsentzug\n\nüîç Risk-based Authorization und Intelligent Decision Making:\n‚Ä¢ Risk Scoring f√ºr dynamische Bewertung von Autorisierungsanfragen basierend auf verschiedenen Faktoren\n‚Ä¢ Adaptive Authorization mit intelligenter Anpassung von Zugriffskontrollen an Bedrohungslage\n‚Ä¢ Behavioral Analysis f√ºr Erkennung anomaler Zugriffsmuster und verd√§chtiger Aktivit√§ten\n‚Ä¢ Machine Learning Integration f√ºr kontinuierliche Verbesserung von Autorisierungsentscheidungen\n‚Ä¢ Threat Intelligence Integration f√ºr proaktive Anpassung von Sicherheitsrichtlinien\n\nüìä Governance und Compliance Integration:\n‚Ä¢ Access Reviews f√ºr regelm√§√üige √úberpr√ºfung und Validierung von Zugriffsrechten\n‚Ä¢ Compliance Monitoring mit automatisierter √úberpr√ºfung regulatorischer Anforderungen\n‚Ä¢ Audit Trail f√ºr umfassende Protokollierung aller Autorisierungsentscheidungen\n‚Ä¢ Violation Detection f√ºr Identifizierung von Richtlinienverst√∂√üen und Sicherheitsl√ºcken\n‚Ä¢ Remediation Workflows f√ºr strukturierte Behebung identifizierter Compliance-Probleme\n\nüåê API Authorization und Microservices Security:\n‚Ä¢ API Gateway Integration f√ºr sichere Autorisierung von Service-to-Service-Kommunikation\n‚Ä¢ OAuth und JWT Token Management f√ºr moderne Anwendungsarchitekturen\n‚Ä¢ Microservices Authorization mit granularer Kontrolle √ºber einzelne Services und Funktionen\n‚Ä¢ Container Security f√ºr Autorisierung in containerisierten Umgebungen\n‚Ä¢ Cloud-native Authorization f√ºr skalierbare Zugriffskontrolle in Cloud-Umgebungen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
