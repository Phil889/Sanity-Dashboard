import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating Basel III Anpassung interner Risikomodelle page with FAQs batch 1 (German)...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'basel-iii-anpassung-interner-risikomodelle' })
    
    if (!existingDoc) {
      throw new Error('Document "basel-iii-anpassung-interner-risikomodelle" not found')
    }
    
    // Create new FAQs in German
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: "Welche Anforderungen stellt Basel III an interne Risikomodelle und wie k√∂nnen Finanzinstitute diese effektiv erf√ºllen?",
        answer: "Die Basel III-Regulierung hat die Anforderungen an interne Risikomodelle substantiell versch√§rft, mit dem Ziel, deren Robustheit, Zuverl√§ssigkeit und Vergleichbarkeit zu erh√∂hen. Finanzinstitute stehen vor der komplexen Aufgabe, ihre bestehenden Modelle methodisch anzupassen und gleichzeitig deren Wert f√ºr die interne Steuerung zu erhalten oder sogar zu steigern.\n\nüîç Kernelemente der Basel III-Anforderungen an interne Modelle:\n‚Ä¢ Erh√∂hte Modellgenauigkeit: Strengere Vorgaben f√ºr die Kalibrierung von Risikoparametern wie PD, LGD und EAD, mit besonderem Fokus auf Datenhistorien und Downturn-Bedingungen.\n‚Ä¢ Output-Floors: Einf√ºhrung von Untergrenzen f√ºr modellbasierte Kapitalanforderungen im Verh√§ltnis zu Standardans√§tzen, um exzessive Kapitalentlastungen durch interne Modelle zu begrenzen.\n‚Ä¢ Einschr√§nkung der Modellierungsfreiheit: Reduzierung des Anwendungsbereichs interner Modelle, insbesondere f√ºr Low-Default-Portfolios und operationelle Risiken.\n‚Ä¢ Erweiterte Validierungsanforderungen: Umfassendere und h√§ufigere Backtesting- und Benchmarking-Prozesse zur kontinuierlichen √úberpr√ºfung der Modellgenauigkeit.\n‚Ä¢ Versch√§rfte Governance-Strukturen: Pr√§zisere Anforderungen an Unabh√§ngigkeit, Kompetenzen und Verantwortlichkeiten in der Modellentwicklung, -validierung und -anwendung.\n\nüõ†Ô∏è Strategien zur effektiven Umsetzung:\n‚Ä¢ Integrierter Modellierungsansatz: Entwicklung einer koh√§renten Modelllandschaft, die aufsichtsrechtliche Anforderungen erf√ºllt und gleichzeitig interne Steuerungsimpulse liefert, statt isolierter regulatorischer Modelle.\n‚Ä¢ Data Excellence Programme: Systematische Verbesserung der Datenqualit√§t und -verf√ºgbarkeit als Grundlage f√ºr pr√§zisere und robustere Modelle, insbesondere f√ºr Downturn-Perioden.\n‚Ä¢ Automatisierte Validierungsprozesse: Implementierung effizienter Werkzeuge und Prozesse f√ºr kontinuierliche Modell√ºberwachung und -validierung, die Ressourcenaufw√§nde minimieren.\n‚Ä¢ Modellrisiko-Management-Framework: Etablierung eines umfassenden Frameworks zur Identifikation, Bewertung und Steuerung von Modellrisiken √ºber den gesamten Modelllebenszyklus.\n‚Ä¢ Aufsichtskonforme Dokumentation: Entwicklung einer strukturierten und umfassenden Dokumentation, die Modellannahmen, -limitationen und -ergebnisse transparent darstellt.\n\nüìä Praxisorientierte Implementierungsschritte:\n‚Ä¢ Modell-Inventarisierung und Gap-Analyse: Systematische Erfassung und Bewertung der bestehenden Modelllandschaft im Hinblick auf Basel III-Anforderungen.\n‚Ä¢ Priorisierung und Roadmap-Entwicklung: Erarbeitung eines strukturierten Implementierungsplans basierend auf regulatorischen Fristen und gesch√§ftlichen Priorit√§ten.\n‚Ä¢ Pilotprojekte f√ºr kritische Modelle: Initiale Fokussierung auf besonders relevante oder problematische Modellbereiche, um Erfahrungen zu sammeln und Methodik zu validieren.\n‚Ä¢ Kontinuierliche Kommunikation mit Aufsichtsbeh√∂rden: Proaktiver Dialog zur Kl√§rung von Interpretationsfragen und zur Demonstration des Implementierungsfortschritts."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: "Wie kann die Validierung interner Risikomodelle methodisch fundiert und effizient gestaltet werden?",
        answer: "Die Validierung interner Risikomodelle bildet einen kritischen Pfeiler des Modellrisikomanagements und hat durch Basel III weiter an Bedeutung gewonnen. Eine methodisch fundierte und zugleich effiziente Validierung erfordert eine systematische Herangehensweise, die quantitative und qualitative Elemente integriert und sowohl regulatorische Anforderungen als auch gesch√§ftliche Nutzenpotenziale ber√ºcksichtigt.\n\nüîÑ Kernkomponenten einer robusten Modellvalidierung:\n‚Ä¢ Konzeptionelle Validierung: Kritische √úberpr√ºfung der methodischen Grundlagen, theoretischen Annahmen und der konzeptionellen Eignung des Modells f√ºr den intendierten Anwendungsbereich.\n‚Ä¢ Implementierungsvalidierung: Verifizierung der korrekten technischen Umsetzung des konzeptionellen Modells in IT-Systemen und Prozessen, einschlie√ülich Code-Reviews und System-Integrationstests.\n‚Ä¢ Performance-Validierung: Quantitative Bewertung der Modellgenauigkeit, Diskriminierungsf√§higkeit und Kalibrierung anhand historischer Daten mittels statistischer Tests und Backtesting-Verfahren.\n‚Ä¢ Outcome-Analyse: Bewertung der Modellergebnisse im Gesch√§ftskontext, einschlie√ülich Plausibilit√§tspr√ºfungen und Vergleichen mit alternativen Modellierungsans√§tzen oder Benchmarks.\n‚Ä¢ Use-Test: Evaluation der tats√§chlichen Nutzung und des Einflusses des Modells auf Gesch√§ftsentscheidungen und Risikomanagementprozesse.\n\nüìà Methodische Ans√§tze f√ºr effiziente Validierungsprozesse:\n‚Ä¢ Risikoorientierte Validierungstiefe: Abstufung der Validierungsintensit√§t basierend auf der Materiality und Komplexit√§t des Modells sowie dessen Einfluss auf Kapitalanforderungen und Gesch√§ftsentscheidungen.\n‚Ä¢ Kontinuierliche √úberwachung: Erg√§nzung umfassender periodischer Validierungen durch automatisierte Monitoring-Verfahren, die kritische Indikatoren kontinuierlich √ºberwachen und fr√ºhzeitig auf Modellschw√§chen hinweisen.\n‚Ä¢ Challenger-Modelle: Entwicklung vereinfachter alternativer Modelle als Vergleichsma√üstab und Plausibilit√§tspr√ºfung f√ºr komplexere Hauptmodelle.\n‚Ä¢ Stresstests und Sensitivit√§tsanalysen: Bewertung der Modellrobustheit unter extremen, aber plausiblen Szenarien und Identifikation kritischer Modellparameter durch systematische Variation der Eingabeparameter.\n‚Ä¢ Bootstrap- und Kreuzvalidierungsmethoden: Anwendung fortgeschrittener statistischer Techniken zur robusten Sch√§tzung der Prognoseg√ºte und Modellunsicherheit.\n\nüõ†Ô∏è Organisatorische Erfolgsfaktoren:\n‚Ä¢ Unabh√§ngigkeit der Validierungsfunktion: Strukturelle und funktionale Trennung von Modellentwicklung und -validierung zur Vermeidung von Interessenkonflikten und Selbstvalidierung.\n‚Ä¢ Fachliche Expertise: Sicherstellung ausreichender methodischer und fachlicher Kompetenz im Validierungsteam, ggf. erg√§nzt durch Experten f√ºr spezifische Modellbereiche.\n‚Ä¢ Dokumentationsstandards: Etablierung klarer Standards f√ºr die Dokumentation von Validierungsergebnissen, einschlie√ülich Befunden, Empfehlungen und Follow-up-Ma√ünahmen.\n‚Ä¢ Validierungskomitees: Einrichtung interdisziplin√§rer Gremien zur Bewertung von Validierungsergebnissen und Entscheidung √ºber Modellfreigaben oder erforderliche Anpassungen.\n‚Ä¢ Validierungskalender: Entwicklung eines strukturierten Zeitplans f√ºr regelm√§√üige Validierungsaktivit√§ten, abgestimmt auf regulatorische Anforderungen und interne Revisionsprozesse."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: "Welche Herausforderungen stellen die Basel III Output-Floors f√ºr interne Modelle dar und wie k√∂nnen Banken damit umgehen?",
        answer: "Die Einf√ºhrung von Output-Floors durch Basel III markiert einen Paradigmenwechsel in der regulatorischen Anerkennung interner Modelle. Diese Untergrenzen begrenzen die maximal m√∂gliche Kapitalentlastung durch interne Modelle im Vergleich zu Standardans√§tzen und stellen Finanzinstitute vor erhebliche strategische und operative Herausforderungen.\n\n‚ö†Ô∏è Zentrale Herausforderungen der Output-Floors:\n‚Ä¢ Erh√∂hte Kapitalanforderungen: F√ºr Banken mit signifikanten Modellentlastungen k√∂nnen die Floors zu substantiellen Kapitalerh√∂hungen f√ºhren, was Rentabilit√§tskennzahlen und die Wettbewerbsf√§higkeit beeintr√§chtigen kann.\n‚Ä¢ Strategische Neuausrichtung: Die reduzierte Kapitalentlastung durch interne Modelle stellt deren Kosten-Nutzen-Verh√§ltnis infrage und erfordert eine Neubewertung der Modellierungsstrategie.\n‚Ä¢ Parallele Methodiken: Die Notwendigkeit, sowohl interne Modelle als auch Standardans√§tze parallel zu berechnen und zu optimieren, erh√∂ht die methodische und technische Komplexit√§t erheblich.\n‚Ä¢ Granularit√§tsunterschiede: Die unterschiedliche Granularit√§t und Risikosensitivit√§t zwischen internen Modellen und Standardans√§tzen erschwert die konsistente Steuerung und Optimierung.\n‚Ä¢ Datenmanagement: Die parallele Berechnung erfordert umfangreiche zus√§tzliche Datenanforderungen, insbesondere f√ºr Standardans√§tze, die bisher nicht im Fokus standen.\n\nüîç Strategische Anpassungsoptionen:\n‚Ä¢ Portfolioumstrukturierung: Anpassung der Gesch√§ftsstrategie und Portfoliozusammensetzung zur Minimierung der Floor-Auswirkungen, etwa durch Fokussierung auf Segmente mit geringeren Diskrepanzen zwischen internen Modellen und Standardans√§tzen.\n‚Ä¢ Methodische Konvergenz: Anpassung interner Modelle, um deren Ergebnisse n√§her an Standardans√§tze heranzuf√ºhren, ohne die Risikosensitivit√§t und Steuerungsrelevanz zu kompromittieren.\n‚Ä¢ Selektive Modellierungsstrategie: Fokussierung der internen Modellierung auf Portfoliosegmente, in denen trotz Floors substantielle Kapitalvorteile oder Steuerungsmehrwerte erzielt werden k√∂nnen.\n‚Ä¢ Pricing-Anpassungen: Integration der Floor-Effekte in die Produktkalkulation und das Pricing, um risikoad√§quate Renditen sicherzustellen.\n‚Ä¢ Strategische Kommunikation: Proaktive Erl√§uterung der Floor-Auswirkungen gegen√ºber Investoren und Analysten zur Steuerung von Markterwartungen.\n\nüõ†Ô∏è Operationalisierung und technische Umsetzung:\n‚Ä¢ Integrierte Berechnungsplattform: Entwicklung einer einheitlichen technischen Infrastruktur f√ºr die konsistente und effiziente Berechnung beider Ans√§tze.\n‚Ä¢ Erweiterte Datenarchitektur: Erweiterung der Datenmodelle und -prozesse zur Erf√ºllung der zus√§tzlichen Datenanforderungen f√ºr Standardans√§tze.\n‚Ä¢ Simulationsf√§higkeiten: Implementierung von Tools zur Simulation und Optimierung der Kapitalauswirkungen unter Ber√ºcksichtigung der Floors.\n‚Ä¢ Automatisiertes Reporting: Entwicklung integrierter Reportingprozesse, die sowohl interne Modellierungsergebnisse als auch Floor-Berechnungen transparent darstellen.\n‚Ä¢ Intelligente Steuerungskennzahlen: Etablierung kombinierter Kennzahlen, die die Effekte beider Ans√§tze reflektieren und f√ºr die gesch√§ftliche Steuerung nutzbar machen."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: "Wie k√∂nnen Finanzinstitute Modellrisiken systematisch identifizieren, bewerten und steuern?",
        answer: "Modellrisiken haben in der komplexen Finanzwelt zunehmend an Bedeutung gewonnen und werden von Aufsichtsbeh√∂rden mit erh√∂hter Aufmerksamkeit betrachtet. Ein systematisches Modellrisikomanagement ist nicht nur eine regulatorische Notwendigkeit, sondern sch√ºtzt Finanzinstitute vor potenziell schwerwiegenden finanziellen, operativen und reputationsbezogenen Konsequenzen fehlerhafter Modellentscheidungen.\n\nüîç Dimensionen des Modellrisikos:\n‚Ä¢ Inputrisiken: Fehler oder Verzerrungen in den Eingabedaten, die zu fehlerhaften Modellergebnissen f√ºhren k√∂nnen, etwa durch Datenqualit√§tsprobleme, Stichprobenverzerrungen oder fehlende Datenhistorien.\n‚Ä¢ Methodische Risiken: Unzul√§nglichkeiten in der konzeptionellen Modellentwicklung, wie ungeeignete statistische Methoden, unrealistische Annahmen oder vereinfachende Approximationen komplexer Zusammenh√§nge.\n‚Ä¢ Implementierungsrisiken: Diskrepanzen zwischen der theoretischen Modellkonzeption und der praktischen Umsetzung durch Programmier- oder Konfigurationsfehler, Datenkonvertierungsprobleme oder Systemintegrationsschwierigkeiten.\n‚Ä¢ Anwendungsrisiken: Unsachgem√§√üe Nutzung oder Fehlinterpretation von Modellergebnissen, etwa durch mangelndes Verst√§ndnis der Modelllimitationen oder Verwendung au√üerhalb des validierten Anwendungsbereichs.\n‚Ä¢ Governance-Risiken: Unzureichende Kontrollen, unklare Verantwortlichkeiten oder mangelhafte Dokumentation im Modellmanagementprozess.\n\nüõ†Ô∏è Framework f√ºr ein umfassendes Modellrisikomanagement:\n‚Ä¢ Modell-Inventarisierung und Klassifizierung: Systematische Erfassung aller Modelle im Institut und deren Klassifizierung nach Risikorelevanz, Komplexit√§t und Anwendungsbereich als Grundlage f√ºr risikoorientierte Steuerungsans√§tze.\n‚Ä¢ Modellentwicklungsstandards: Etablierung klarer methodischer Leitlinien, Dokumentationsanforderungen und Qualit√§tssicherungsprozesse f√ºr die Modellentwicklung.\n‚Ä¢ Unabh√§ngige Validierung: Implementierung mehrstufiger Validierungsprozesse durch unabh√§ngige Einheiten, abgestuft nach Modellrelevanz und -komplexit√§t.\n‚Ä¢ Limitsysteme und √úberwachung: Festlegung von Toleranzgrenzen f√ºr Modellabweichungen und kontinuierliche √úberwachung der Modellperformance durch geeignete Schl√ºsselindikatoren.\n‚Ä¢ Eskalationsprozesse: Definition klarer Eskalationswege und Handlungsoptionen bei √úberschreitung von Toleranzgrenzen oder Identifikation kritischer Modellschw√§chen.\n\nüìä Methoden zur Modellrisikoquantifizierung:\n‚Ä¢ Sensitivit√§tsanalysen: Systematische Variation von Modellannahmen und -parametern zur Identifikation kritischer Einflussfaktoren und zur Bewertung der Modellunsicherheit.\n‚Ä¢ Benchmark-Modelle: Vergleich mit alternativen, idealerweise methodisch unterschiedlichen Modellen zur Identifikation und Quantifizierung modellspezifischer Verzerrungen.\n‚Ä¢ Stresstests f√ºr Modelle: Bewertung der Modellrobustheit unter extremen, aber plausiblen Szenarien, um potenzielle Modellschw√§chen in Stresssituationen zu identifizieren.\n‚Ä¢ Bootstrap- und Monte-Carlo-Methoden: Anwendung fortgeschrittener statistischer Techniken zur Quantifizierung der Parameterunsicherheit und deren Auswirkungen auf Modellergebnisse.\n‚Ä¢ Bayesianische Ans√§tze: Integration von Expertenurteilen und Vorwissen in die Modellierung, besonders wertvoll bei Datenlimitationen oder neuartigen Risiken.\n\nüèõÔ∏è Governance-Strukturen und organisatorische Aspekte:\n‚Ä¢ Dreilinienverteidigung: Klare Trennung zwischen Modellentwicklung (erste Linie), unabh√§ngiger Validierung (zweite Linie) und interner Revision (dritte Linie).\n‚Ä¢ Modellrisikokomitee: Etablierung eines hochrangigen Gremiums zur √úberwachung des Modellrisikoprofils und zur Entscheidung √ºber kritische Modellfragen.\n‚Ä¢ Kompetenzaufbau: Systematische Schulung von Modellentwicklern, -validierern und -anwendern zu methodischen Grundlagen, Modellrisiken und deren Steuerung.\n‚Ä¢ Dokumentationsstandards: Umfassende Dokumentation von Modellannahmen, -limitationen, Validierungsergebnissen und Nutzungseinschr√§nkungen.\n‚Ä¢ Modellrisiko-Reporting: Regelm√§√üige Berichterstattung √ºber das Modellrisikoprofil, kritische Modellschw√§chen und den Status von Verbesserungsma√ünahmen an Vorstand und Aufsichtsorgane."
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs (German) to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQs batch 1 (German) added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
