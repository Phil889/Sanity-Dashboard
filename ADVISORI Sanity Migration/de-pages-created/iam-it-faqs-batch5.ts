import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM IT page with FAQ batch 5...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-it' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-it" not found')
    }
    
    // Create new FAQs for operations and maintenance
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 17),
        question: 'Wie etabliert man effektive Patch Management und Vulnerability Management Prozesse f√ºr IAM IT-Infrastrukturen ohne Service-Unterbrechungen?',
        answer: "Patch Management und Vulnerability Management f√ºr IAM IT-Infrastrukturen erfordern besondere Sorgfalt, da diese Systeme kritisch f√ºr die gesamte Unternehmens-IT sind und gleichzeitig h√§ufige Angriffsziele darstellen. Ein systematischer Ansatz erm√∂glicht es, Sicherheitsl√ºcken zu schlie√üen, ohne die Verf√ºgbarkeit zu beeintr√§chtigen.\n\nüîç Vulnerability Assessment und Risk Prioritization:\n‚Ä¢ Automated Vulnerability Scanning f√ºr kontinuierliche Threat Detection\n‚Ä¢ Risk-based Prioritization basierend auf CVSS Scores und Business Impact\n‚Ä¢ Zero-Day Vulnerability Monitoring f√ºr proaktive Bedrohungserkennung\n‚Ä¢ Threat Intelligence Integration f√ºr kontextuelle Risikobewertung\n‚Ä¢ Asset Inventory Management f√ºr vollst√§ndige Visibility\n\nüìã Patch Management Lifecycle:\n‚Ä¢ Automated Patch Detection und Classification\n‚Ä¢ Testing in isolierten Staging-Umgebungen\n‚Ä¢ Change Advisory Board (CAB) Approval f√ºr kritische Patches\n‚Ä¢ Rollout Planning mit Rollback-Strategien\n‚Ä¢ Post-Deployment Validation und Monitoring\n\n‚öôÔ∏è Zero-Downtime Deployment Strategies:\n‚Ä¢ Blue-Green Deployments f√ºr nahtlose Updates\n‚Ä¢ Rolling Updates mit Load Balancer-Integration\n‚Ä¢ Canary Releases f√ºr risikoarme Patch-Rollouts\n‚Ä¢ Maintenance Windows f√ºr kritische System-Updates\n‚Ä¢ Hot-Patching f√ºr Security-kritische Fixes\n\nüß™ Testing und Validation Framework:\n‚Ä¢ Automated Regression Testing f√ºr Functionality Validation\n‚Ä¢ Security Testing f√ºr Patch Effectiveness\n‚Ä¢ Performance Testing f√ºr Impact Assessment\n‚Ä¢ Integration Testing f√ºr System Compatibility\n‚Ä¢ User Acceptance Testing f√ºr Business Process Validation\n\nüìä Automated Patch Orchestration:\n‚Ä¢ Configuration Management Tools f√ºr konsistente Deployments\n‚Ä¢ Infrastructure-as-Code f√ºr reproduzierbare Updates\n‚Ä¢ Automated Rollback Triggers f√ºr Failed Deployments\n‚Ä¢ Dependency Management f√ºr Complex Update Chains\n‚Ä¢ Compliance Validation f√ºr Regulatory Requirements\n\nüîß Emergency Patch Procedures:\n‚Ä¢ Expedited Approval Processes f√ºr Critical Vulnerabilities\n‚Ä¢ Emergency Change Procedures f√ºr Zero-Day Exploits\n‚Ä¢ Out-of-Band Patching f√ºr Urgent Security Fixes\n‚Ä¢ Incident Response Integration f√ºr Coordinated Response\n‚Ä¢ Communication Protocols f√ºr Stakeholder Notification\n\nüìà Metrics und KPI Tracking:\n‚Ä¢ Mean Time to Patch (MTTP) f√ºr Efficiency Measurement\n‚Ä¢ Patch Success Rate f√ºr Quality Assessment\n‚Ä¢ Vulnerability Exposure Time f√ºr Risk Metrics\n‚Ä¢ System Availability w√§hrend Patch-Zyklen\n‚Ä¢ Compliance Metrics f√ºr Regulatory Reporting\n\nüõ°Ô∏è Security Hardening w√§hrend Updates:\n‚Ä¢ Temporary Security Controls w√§hrend Maintenance\n‚Ä¢ Access Restriction f√ºr Update-Prozesse\n‚Ä¢ Audit Logging f√ºr alle Patch-Aktivit√§ten\n‚Ä¢ Backup Verification vor kritischen Updates\n‚Ä¢ Security Validation nach Patch-Deployment\n\nüåê Multi-Environment Coordination:\n‚Ä¢ Staged Rollout √ºber Development, Test und Production\n‚Ä¢ Environment Synchronization f√ºr Consistent Updates\n‚Ä¢ Cross-Environment Testing f√ºr Compatibility\n‚Ä¢ Production Readiness Gates f√ºr Quality Assurance\n‚Ä¢ Environment-specific Configuration Management\n\nüìã Documentation und Knowledge Management:\n‚Ä¢ Patch Documentation f√ºr Audit Trails\n‚Ä¢ Lessons Learned f√ºr Process Improvement\n‚Ä¢ Runbook Maintenance f√ºr Operational Procedures\n‚Ä¢ Knowledge Base Updates f√ºr Support Teams\n‚Ä¢ Training Materials f√ºr Operations Staff"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 18),
        question: 'Welche Capacity Planning und Performance Tuning Strategien sind f√ºr wachsende IAM IT-Infrastrukturen entscheidend und wie automatisiert man diese Prozesse?',
        answer: "Capacity Planning und Performance Tuning f√ºr wachsende IAM IT-Infrastrukturen erfordern eine proaktive Herangehensweise, die sowohl aktuelle Performance-Anforderungen als auch zuk√ºnftiges Wachstum ber√ºcksichtigt. Die Automatisierung dieser Prozesse ist entscheidend f√ºr Effizienz und Skalierbarkeit.\n\nüìä Comprehensive Performance Monitoring:\n‚Ä¢ Real-time Metrics Collection f√ºr CPU, Memory, Disk und Network\n‚Ä¢ Application Performance Monitoring (APM) f√ºr Code-Level Insights\n‚Ä¢ Database Performance Tracking f√ºr Query Optimization\n‚Ä¢ User Experience Monitoring f√ºr End-to-End Performance\n‚Ä¢ Business Metrics Correlation f√ºr Impact Assessment\n\nüìà Predictive Capacity Planning:\n‚Ä¢ Trend Analysis f√ºr Resource Utilization Patterns\n‚Ä¢ Growth Forecasting basierend auf Business Projections\n‚Ä¢ Seasonal Pattern Recognition f√ºr Capacity Adjustments\n‚Ä¢ Machine Learning f√ºr Predictive Analytics\n‚Ä¢ Scenario Planning f√ºr verschiedene Growth-Szenarien\n\n‚ö° Automated Scaling Strategies:\n‚Ä¢ Horizontal Pod Autoscaling (HPA) f√ºr Kubernetes Workloads\n‚Ä¢ Vertical Pod Autoscaling (VPA) f√ºr Resource Optimization\n‚Ä¢ Database Auto-Scaling f√ºr Storage und Compute\n‚Ä¢ Load Balancer Auto-Scaling f√ºr Traffic Distribution\n‚Ä¢ Cloud Resource Auto-Scaling f√ºr Cost Optimization\n\nüîß Performance Optimization Techniques:\n‚Ä¢ Database Query Optimization f√ºr Faster Response Times\n‚Ä¢ Caching Strategy Implementation f√ºr Reduced Latency\n‚Ä¢ Connection Pool Tuning f√ºr Resource Efficiency\n‚Ä¢ JVM Tuning f√ºr Java-based Applications\n‚Ä¢ Operating System Optimization f√ºr Infrastructure Performance\n\nüìã Capacity Planning Methodology:\n‚Ä¢ Baseline Performance Establishment f√ºr Current State\n‚Ä¢ Bottleneck Identification f√ºr Constraint Analysis\n‚Ä¢ Resource Utilization Analysis f√ºr Optimization Opportunities\n‚Ä¢ Cost-Performance Trade-off Analysis\n‚Ä¢ Capacity Modeling f√ºr Future Requirements\n\nü§ñ Automated Performance Tuning:\n‚Ä¢ Self-Tuning Database Parameters\n‚Ä¢ Automated Cache Configuration Optimization\n‚Ä¢ Dynamic Resource Allocation basierend auf Workload\n‚Ä¢ Automated Performance Regression Detection\n‚Ä¢ Machine Learning-based Optimization Recommendations\n\nüìä Performance Testing Automation:\n‚Ä¢ Load Testing f√ºr Capacity Validation\n‚Ä¢ Stress Testing f√ºr Breaking Point Identification\n‚Ä¢ Endurance Testing f√ºr Long-term Stability\n‚Ä¢ Spike Testing f√ºr Traffic Surge Handling\n‚Ä¢ Volume Testing f√ºr Data Growth Impact\n\nüîç Monitoring und Alerting Automation:\n‚Ä¢ Threshold-based Alerting f√ºr Capacity Warnings\n‚Ä¢ Anomaly Detection f√ºr Unusual Performance Patterns\n‚Ä¢ Predictive Alerting f√ºr Proactive Capacity Management\n‚Ä¢ Automated Escalation f√ºr Critical Performance Issues\n‚Ä¢ Performance Dashboard Automation f√ºr Stakeholder Visibility\n\nüí∞ Cost Optimization Strategies:\n‚Ä¢ Right-Sizing f√ºr Optimal Resource Allocation\n‚Ä¢ Reserved Instance Planning f√ºr Cost Savings\n‚Ä¢ Spot Instance Utilization f√ºr Non-Critical Workloads\n‚Ä¢ Resource Scheduling f√ºr Off-Peak Optimization\n‚Ä¢ Multi-Cloud Cost Comparison f√ºr Vendor Optimization\n\nüåê Global Performance Optimization:\n‚Ä¢ Geographic Load Distribution f√ºr Latency Reduction\n‚Ä¢ CDN Integration f√ºr Content Delivery Optimization\n‚Ä¢ Edge Computing f√ºr Distributed Performance\n‚Ä¢ Multi-Region Deployment f√ºr Global Availability\n‚Ä¢ Network Optimization f√ºr Cross-Region Communication\n\nüìà Continuous Improvement Process:\n‚Ä¢ Performance Review Cycles f√ºr Regular Assessment\n‚Ä¢ Benchmark Comparison f√ºr Industry Standards\n‚Ä¢ Technology Refresh Planning f√ºr Infrastructure Updates\n‚Ä¢ Performance Engineering Culture f√ºr Team Development\n‚Ä¢ Innovation Pipeline f√ºr Emerging Technologies"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 19),
        question: 'Wie implementiert man effektive Change Management und Configuration Management f√ºr komplexe IAM IT-Infrastrukturen?',
        answer: "Change Management und Configuration Management f√ºr komplexe IAM IT-Infrastrukturen erfordern strukturierte Prozesse und automatisierte Tools, um Stabilit√§t, Compliance und Nachvollziehbarkeit zu gew√§hrleisten. Die richtige Implementierung minimiert Risiken und maximiert die Effizienz von √Ñnderungen.\n\nüìã Change Management Framework:\n‚Ä¢ Standardized Change Categories (Standard, Normal, Emergency)\n‚Ä¢ Change Advisory Board (CAB) f√ºr Risk Assessment\n‚Ä¢ Impact Analysis f√ºr Business und Technical Dependencies\n‚Ä¢ Approval Workflows f√ºr verschiedene Change-Typen\n‚Ä¢ Rollback Planning f√ºr Failed Changes\n\n‚öôÔ∏è Configuration Management Database (CMDB):\n‚Ä¢ Comprehensive Asset Inventory f√ºr alle IAM-Komponenten\n‚Ä¢ Relationship Mapping zwischen Configuration Items (CIs)\n‚Ä¢ Version Control f√ºr Configuration Changes\n‚Ä¢ Dependency Tracking f√ºr Impact Analysis\n‚Ä¢ Automated Discovery f√ºr Dynamic Environments\n\nüîÑ Automated Change Orchestration:\n‚Ä¢ Infrastructure-as-Code f√ºr Reproducible Changes\n‚Ä¢ GitOps Workflows f√ºr Version-controlled Infrastructure\n‚Ä¢ Automated Testing f√ºr Change Validation\n‚Ä¢ Deployment Pipelines f√ºr Consistent Rollouts\n‚Ä¢ Automated Rollback f√ºr Failed Deployments\n\nüìä Change Risk Assessment:\n‚Ä¢ Risk Scoring basierend auf Impact und Probability\n‚Ä¢ Historical Analysis f√ºr Risk Pattern Recognition\n‚Ä¢ Automated Risk Calculation f√ºr Standard Changes\n‚Ä¢ Stakeholder Impact Assessment\n‚Ä¢ Compliance Risk Evaluation\n\nüß™ Testing und Validation Processes:\n‚Ä¢ Pre-Change Testing in Staging Environments\n‚Ä¢ Automated Regression Testing f√ºr Functionality Validation\n‚Ä¢ Security Testing f√ºr Change Impact on Security Posture\n‚Ä¢ Performance Testing f√ºr Performance Impact Assessment\n‚Ä¢ User Acceptance Testing f√ºr Business Process Validation\n\nüìà Change Metrics und KPIs:\n‚Ä¢ Change Success Rate f√ºr Process Effectiveness\n‚Ä¢ Mean Time to Implement (MTTI) f√ºr Efficiency\n‚Ä¢ Change-related Incidents f√ºr Quality Assessment\n‚Ä¢ Emergency Change Frequency f√ºr Process Maturity\n‚Ä¢ Rollback Rate f√ºr Change Quality\n\nüîç Configuration Drift Detection:\n‚Ä¢ Automated Configuration Scanning f√ºr Drift Identification\n‚Ä¢ Baseline Comparison f√ºr Configuration Validation\n‚Ä¢ Compliance Checking f√ºr Policy Adherence\n‚Ä¢ Automated Remediation f√ºr Configuration Drift\n‚Ä¢ Alert Generation f√ºr Unauthorized Changes\n\nüìã Documentation und Audit Trail:\n‚Ä¢ Comprehensive Change Documentation\n‚Ä¢ Approval Trail f√ºr Audit Purposes\n‚Ä¢ Implementation Logs f√ºr Troubleshooting\n‚Ä¢ Post-Implementation Review Documentation\n‚Ä¢ Lessons Learned f√ºr Process Improvement\n\nüõ°Ô∏è Security Integration:\n‚Ä¢ Security Review f√ºr alle Changes\n‚Ä¢ Vulnerability Assessment f√ºr New Configurations\n‚Ä¢ Access Control f√ºr Change Implementation\n‚Ä¢ Audit Logging f√ºr all Configuration Changes\n‚Ä¢ Compliance Validation f√ºr Regulatory Requirements\n\nüåê Multi-Environment Coordination:\n‚Ä¢ Environment Promotion Workflows\n‚Ä¢ Configuration Synchronization zwischen Environments\n‚Ä¢ Environment-specific Configuration Management\n‚Ä¢ Cross-Environment Impact Analysis\n‚Ä¢ Consistent Deployment Procedures\n\nüîß Tool Integration und Automation:\n‚Ä¢ ITSM Tool Integration f√ºr Workflow Management\n‚Ä¢ Monitoring Tool Integration f√ºr Change Impact Tracking\n‚Ä¢ CI/CD Pipeline Integration f√ºr Automated Deployments\n‚Ä¢ Configuration Management Tool Integration\n‚Ä¢ API Integration f√ºr Cross-Tool Communication\n\nüìä Continuous Improvement:\n‚Ä¢ Regular Process Review f√ºr Optimization Opportunities\n‚Ä¢ Stakeholder Feedback f√ºr Process Enhancement\n‚Ä¢ Automation Opportunities Identification\n‚Ä¢ Tool Evaluation f√ºr Technology Improvements\n‚Ä¢ Training und Skill Development f√ºr Team Capabilities"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 20),
        question: 'Welche Incident Management und Problem Management Strategien sind f√ºr IAM IT-Infrastrukturen besonders kritisch und wie optimiert man die Mean Time to Resolution?',
        answer: "Incident Management und Problem Management f√ºr IAM IT-Infrastrukturen erfordern spezialisierte Ans√§tze, da Ausf√§lle oder Performance-Probleme in Identity-Systemen weitreichende Auswirkungen auf die gesamte Unternehmens-IT haben k√∂nnen. Die Optimierung der Mean Time to Resolution (MTTR) ist dabei entscheidend f√ºr Business Continuity.\n\nüö® Incident Classification und Prioritization:\n‚Ä¢ Severity-based Classification (Critical, High, Medium, Low)\n‚Ä¢ Business Impact Assessment f√ºr Priority Determination\n‚Ä¢ Automated Incident Categorization basierend auf Symptoms\n‚Ä¢ Escalation Matrix f√ºr verschiedene Incident-Typen\n‚Ä¢ SLA Definition f√ºr Response und Resolution Times\n\n‚ö° Rapid Response Procedures:\n‚Ä¢ On-Call Rotation f√ºr 24/7 Coverage\n‚Ä¢ Automated Incident Detection und Alerting\n‚Ä¢ War Room Procedures f√ºr Major Incidents\n‚Ä¢ Communication Templates f√ºr Stakeholder Updates\n‚Ä¢ Emergency Access Procedures f√ºr Critical Fixes\n\nüîç Root Cause Analysis Framework:\n‚Ä¢ Systematic Investigation Methodology\n‚Ä¢ Timeline Reconstruction f√ºr Incident Analysis\n‚Ä¢ Log Analysis und Correlation\n‚Ä¢ Configuration Change Impact Assessment\n‚Ä¢ Third-Party Dependency Analysis\n\nüìä Automated Incident Response:\n‚Ä¢ Self-Healing Infrastructure f√ºr Common Issues\n‚Ä¢ Automated Diagnostic Scripts f√ºr Faster Troubleshooting\n‚Ä¢ Runbook Automation f√ºr Standard Procedures\n‚Ä¢ Automated Escalation f√ºr Unresolved Incidents\n‚Ä¢ Intelligent Routing basierend auf Incident Characteristics\n\nüõ†Ô∏è Problem Management Integration:\n‚Ä¢ Known Error Database (KEDB) f√ºr Recurring Issues\n‚Ä¢ Proactive Problem Identification durch Trend Analysis\n‚Ä¢ Workaround Documentation f√ºr Temporary Solutions\n‚Ä¢ Permanent Fix Implementation Planning\n‚Ä¢ Problem Prevention durch Root Cause Elimination\n\nüìà MTTR Optimization Strategies:\n‚Ä¢ Incident Response Time Reduction durch Automation\n‚Ä¢ Diagnostic Tool Integration f√ºr Faster Analysis\n‚Ä¢ Knowledge Base Optimization f√ºr Quick Resolution\n‚Ä¢ Team Skill Development f√ºr Expertise Building\n‚Ä¢ Tool Consolidation f√ºr Streamlined Workflows\n\nüîß Monitoring und Early Warning Systems:\n‚Ä¢ Proactive Monitoring f√ºr Issue Prevention\n‚Ä¢ Threshold-based Alerting f√ºr Early Detection\n‚Ä¢ Predictive Analytics f√ºr Failure Prediction\n‚Ä¢ Health Check Automation f√ºr System Validation\n‚Ä¢ Performance Baseline Monitoring f√ºr Anomaly Detection\n\nüìã Documentation und Knowledge Management:\n‚Ä¢ Incident Documentation Standards\n‚Ä¢ Solution Database f√ºr Reusable Fixes\n‚Ä¢ Troubleshooting Guides f√ºr Common Issues\n‚Ä¢ Lessons Learned Documentation\n‚Ä¢ Best Practice Sharing f√ºr Team Learning\n\nüåê Multi-Tier Support Structure:\n‚Ä¢ Level 1 Support f√ºr Initial Triage\n‚Ä¢ Level 2 Support f√ºr Technical Investigation\n‚Ä¢ Level 3 Support f√ºr Complex Problem Resolution\n‚Ä¢ Vendor Escalation f√ºr Third-Party Issues\n‚Ä¢ Expert Consultation f√ºr Specialized Problems\n\nüìä Metrics und Continuous Improvement:\n‚Ä¢ MTTR Tracking f√ºr Performance Measurement\n‚Ä¢ First Call Resolution Rate f√ºr Efficiency Assessment\n‚Ä¢ Incident Volume Trends f√ºr Capacity Planning\n‚Ä¢ Customer Satisfaction Metrics f√ºr Service Quality\n‚Ä¢ Process Improvement Identification\n\nüîÑ Post-Incident Activities:\n‚Ä¢ Post-Incident Review (PIR) f√ºr Learning\n‚Ä¢ Action Item Tracking f√ºr Follow-up\n‚Ä¢ Process Improvement Implementation\n‚Ä¢ Training Need Identification\n‚Ä¢ Communication Effectiveness Assessment\n\nüõ°Ô∏è Security Incident Integration:\n‚Ä¢ Security Incident Response Team (SIRT) Coordination\n‚Ä¢ Forensic Evidence Preservation\n‚Ä¢ Compliance Notification Requirements\n‚Ä¢ Legal und Regulatory Considerations\n‚Ä¢ Business Continuity Planning Integration"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 5 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
