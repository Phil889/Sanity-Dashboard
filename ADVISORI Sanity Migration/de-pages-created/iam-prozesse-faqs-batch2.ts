import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Prozesse page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-prozesse' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-prozesse" not found')
    }
    
    // Create new FAQs for process automation and orchestration
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Wie implementiert man erfolgreiche Provisioning und Deprovisioning Automation und welche kritischen Erfolgsfaktoren m√ºssen dabei ber√ºcksichtigt werden?',
        answer: "Provisioning und Deprovisioning Automation bildet das operative Herzst√ºck moderner IAM-Systeme und transformiert manuelle, fehleranf√§llige Prozesse in intelligente, selbstlernende Workflows. Erfolgreiche Automation erfordert eine durchdachte Architektur, die technische Exzellenz mit gesch√§ftlichen Anforderungen verbindet und dabei h√∂chste Sicherheitsstandards mit optimaler Benutzerfreundlichkeit vereint.\n\nüéØ Strategic Automation Framework und Architecture Design:\n‚Ä¢ Comprehensive System Mapping f√ºr vollst√§ndige Erfassung aller Zielsysteme und Abh√§ngigkeiten\n‚Ä¢ Intelligent Workflow Orchestration mit Event-driven Architecture und Real-time Processing\n‚Ä¢ Business Rule Engine f√ºr flexible Anpassung an organisatorische Anforderungen und Compliance-Vorgaben\n‚Ä¢ Error Handling und Recovery Mechanisms f√ºr robuste Verarbeitung auch bei tempor√§ren Ausf√§llen\n‚Ä¢ Scalability Design f√ºr wachsende Anforderungen und globale Deployment-Szenarien\n\nüîÑ Advanced Provisioning Orchestration:\n‚Ä¢ Automated Account Creation mit intelligenter Generierung von Benutzernamen, E-Mail-Adressen und initialen Passw√∂rtern\n‚Ä¢ Role-based Provisioning mit dynamischer Zuweisung basierend auf Organisationsstruktur, Abteilung und Gesch√§ftsanforderungen\n‚Ä¢ Attribute Synchronization f√ºr konsistente Identit√§tsdaten √ºber alle verbundenen Systeme hinweg\n‚Ä¢ Dependency Management f√ºr korrekte Reihenfolge bei komplexen, mehrstufigen Provisioning-Vorg√§ngen\n‚Ä¢ Template-based Provisioning f√ºr standardisierte und wiederholbare Prozesse\n\n‚öôÔ∏è Intelligent Deprovisioning und Lifecycle Management:\n‚Ä¢ Automated Deprovisioning mit vollst√§ndiger Entfernung aller Zugriffsrechte und Systemzugriffe\n‚Ä¢ Orphaned Account Detection f√ºr Identifikation und Bereinigung verwaister Accounts\n‚Ä¢ Grace Period Management mit konfigurierbaren Zeitfenstern f√ºr verschiedene Deprovisioning-Szenarien\n‚Ä¢ Data Retention Compliance f√ºr regelkonforme Behandlung von Benutzerdaten nach Deprovisioning\n‚Ä¢ Rollback Capabilities f√ºr sichere Wiederherstellung bei versehentlichem oder vorzeitigem Deprovisioning\n\nüõ°Ô∏è Security und Compliance Integration:\n‚Ä¢ Real-time Security Validation mit sofortiger √úberpr√ºfung von Sicherheitsrichtlinien und Compliance-Anforderungen\n‚Ä¢ Segregation of Duties Checks mit automatischer Erkennung und Verhinderung von Interessenkonflikten\n‚Ä¢ Audit Trail Generation f√ºr l√ºckenlose Dokumentation aller Provisioning- und Deprovisioning-Aktivit√§ten\n‚Ä¢ Risk-based Processing mit intelligenter Anpassung der Automation basierend auf Risikobewertung\n‚Ä¢ Compliance Reporting f√ºr automatische Generierung regulatorischer Berichte und Nachweise\n\nüìä Process Intelligence und Continuous Improvement:\n‚Ä¢ Real-time Monitoring mit Live-Dashboards f√ºr alle Provisioning- und Deprovisioning-Aktivit√§ten\n‚Ä¢ Performance Analytics f√ºr Identifikation von Bottlenecks, Optimierungsm√∂glichkeiten und Effizienzsteigerungen\n‚Ä¢ Success Rate Tracking f√ºr kontinuierliche √úberwachung und Verbesserung der Automation-Qualit√§t\n‚Ä¢ Exception Analysis f√ºr systematische Behandlung und Reduzierung von Fehlern und Ausnahmen\n‚Ä¢ Predictive Analytics f√ºr Vorhersage von Kapazit√§tsanforderungen und Ressourcenbedarf\n\nüåê Enterprise Integration und Scalability:\n‚Ä¢ API-first Design f√ºr nahtlose Integration mit modernen Anwendungen und Cloud-Services\n‚Ä¢ Connector Framework f√ºr standardisierte Anbindung verschiedener Zielsysteme und Legacy-Anwendungen\n‚Ä¢ Message Queue Integration f√ºr zuverl√§ssige und asynchrone Kommunikation zwischen Systemen\n‚Ä¢ Load Balancing und Auto-scaling f√ºr optimale Performance auch bei hohem Durchsatz\n‚Ä¢ Multi-tenant Architecture f√ºr sichere Trennung verschiedener Organisationseinheiten oder Mandanten"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Welche Rolle spielt Process Analytics in modernen IAM-Systemen und wie erm√∂glicht es datengetriebene Optimierung und kontinuierliche Verbesserung?',
        answer: "Process Analytics ist das strategische Nervensystem moderner IAM-Systeme und transformiert operative Daten in wertvolle Erkenntnisse f√ºr kontinuierliche Optimierung und strategische Entscheidungsfindung. Durch die Kombination von Real-time Monitoring, Machine Learning und Predictive Analytics schaffen moderne IAM-Systeme eine Infrastruktur f√ºr datengetriebene Excellence und proaktive Prozessoptimierung.\n\nüéØ Strategic Analytics Framework und Data-driven Excellence:\n‚Ä¢ Comprehensive Data Collection mit Erfassung aller relevanten Metriken und KPIs aus allen IAM-Prozessen\n‚Ä¢ Real-time Processing f√ºr sofortige Analyse und Reaktion auf kritische Ereignisse und Anomalien\n‚Ä¢ Historical Trend Analysis f√ºr Identifikation langfristiger Muster und Entwicklungen\n‚Ä¢ Predictive Modeling f√ºr Vorhersage zuk√ºnftiger Anforderungen und proaktive Kapazit√§tsplanung\n‚Ä¢ Business Intelligence Integration f√ºr strategische Entscheidungsunterst√ºtzung auf F√ºhrungsebene\n\nüìä Advanced Performance Monitoring und KPI Management:\n‚Ä¢ Process Efficiency Metrics f√ºr Messung von Durchlaufzeiten, Success Rates und Ressourcenverbrauch\n‚Ä¢ User Experience Analytics f√ºr Bewertung der Benutzerfreundlichkeit und Identifikation von Verbesserungsm√∂glichkeiten\n‚Ä¢ System Performance Monitoring f√ºr √úberwachung der technischen Performance und Verf√ºgbarkeit\n‚Ä¢ Compliance Metrics f√ºr kontinuierliche √úberwachung der Einhaltung regulatorischer Anforderungen\n‚Ä¢ Cost Analytics f√ºr Bewertung der Wirtschaftlichkeit und ROI-Optimierung\n\nüîç Intelligent Anomaly Detection und Proactive Optimization:\n‚Ä¢ Machine Learning-based Anomaly Detection f√ºr automatische Erkennung ungew√∂hnlicher Muster und Abweichungen\n‚Ä¢ Behavioral Analytics f√ºr Analyse von Benutzerverhalten und Identifikation von Optimierungsm√∂glichkeiten\n‚Ä¢ Bottleneck Identification mit automatischer Lokalisierung von Engp√§ssen und Performance-Hindernissen\n‚Ä¢ Root Cause Analysis f√ºr systematische Identifikation und Behebung von Problemen\n‚Ä¢ Automated Recommendations f√ºr intelligente Vorschl√§ge zur Prozessoptimierung\n\n‚ö° Real-time Dashboards und Visualization:\n‚Ä¢ Executive Dashboards f√ºr strategische √úbersicht und Entscheidungsunterst√ºtzung auf F√ºhrungsebene\n‚Ä¢ Operational Dashboards f√ºr t√§gliche √úberwachung und operative Steuerung\n‚Ä¢ Custom Views f√ºr rollenbasierte Darstellung relevanter Informationen\n‚Ä¢ Interactive Analytics f√ºr tiefgehende Analyse und Ad-hoc-Untersuchungen\n‚Ä¢ Mobile-optimized Interfaces f√ºr Zugriff von √ºberall und jederzeit\n\nüõ°Ô∏è Security Analytics und Risk Intelligence:\n‚Ä¢ Risk Scoring Analytics f√ºr kontinuierliche Bewertung und √úberwachung von Sicherheitsrisiken\n‚Ä¢ Threat Pattern Recognition f√ºr Erkennung von Angriffsmustern und Sicherheitsbedrohungen\n‚Ä¢ Compliance Drift Detection f√ºr fr√ºhzeitige Erkennung von Compliance-Abweichungen\n‚Ä¢ Access Pattern Analysis f√ºr Identifikation ungew√∂hnlicher Zugriffsmuster und potenzieller Sicherheitsvorf√§lle\n‚Ä¢ Fraud Detection f√ºr Erkennung verd√§chtiger Aktivit√§ten und Identit√§tsmissbrauch\n\nüåê Enterprise-Scale Analytics und Integration:\n‚Ä¢ Multi-dimensional Analysis f√ºr umfassende Betrachtung aus verschiedenen Perspektiven\n‚Ä¢ Cross-system Correlation f√ºr system√ºbergreifende Analyse und Erkenntnisgewinnung\n‚Ä¢ Data Warehouse Integration f√ºr langfristige Datenspeicherung und historische Analyse\n‚Ä¢ API-driven Analytics f√ºr Integration in bestehende Business Intelligence Systeme\n‚Ä¢ Automated Reporting f√ºr regelm√§√üige Bereitstellung relevanter Informationen an Stakeholder"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Wie gestaltet man effektive Change Management Strategien f√ºr IAM-Prozess-Transformationen und welche Faktoren sind entscheidend f√ºr nachhaltige User-Adoption?',
        answer: "Change Management ist der kritische Erfolgsfaktor f√ºr IAM-Prozess-Transformationen und entscheidet ma√ügeblich dar√ºber, ob technische Innovationen tats√§chlich zu gesch√§ftlichen Verbesserungen f√ºhren. Erfolgreiche IAM-Transformationen erfordern eine ganzheitliche Change-Strategie, die Menschen, Prozesse und Technologie gleicherma√üen ber√ºcksichtigt und dabei kulturelle Ver√§nderungen mit operativer Exzellenz verbindet.\n\nüéØ Strategic Change Framework und Stakeholder Alignment:\n‚Ä¢ Comprehensive Stakeholder Mapping f√ºr Identifikation aller betroffenen Gruppen und Entscheidungstr√§ger\n‚Ä¢ Change Impact Assessment f√ºr systematische Bewertung der Auswirkungen auf verschiedene Organisationsbereiche\n‚Ä¢ Executive Sponsorship f√ºr starke F√ºhrungsunterst√ºtzung und strategische Verankerung der Transformation\n‚Ä¢ Communication Strategy f√ºr transparente und kontinuierliche Information aller Beteiligten\n‚Ä¢ Resistance Management f√ºr proaktive Behandlung von Widerst√§nden und Bedenken\n\nüöÄ User-Centric Adoption Strategy:\n‚Ä¢ User Journey Mapping f√ºr detailliertes Verst√§ndnis der Benutzererfahrung und Identifikation von Verbesserungsm√∂glichkeiten\n‚Ä¢ Persona-based Training f√ºr zielgruppenspezifische Schulungen und Unterst√ºtzung\n‚Ä¢ Champions Network f√ºr Aufbau eines Netzwerks von Multiplikatoren und Change Agents\n‚Ä¢ Feedback Loops f√ºr kontinuierliche Sammlung und Integration von Benutzerfeedback\n‚Ä¢ Success Stories f√ºr Kommunikation von Erfolgen und Motivation der Benutzer\n\n‚öôÔ∏è Phased Implementation und Risk Mitigation:\n‚Ä¢ Pilot Programs f√ºr kontrollierte Einf√ºhrung und Validierung neuer Prozesse\n‚Ä¢ Gradual Rollout mit schrittweiser Ausweitung auf verschiedene Benutzergruppen und Systeme\n‚Ä¢ Parallel Running f√ºr sichere √úbergangsphase mit Fallback-M√∂glichkeiten\n‚Ä¢ Risk Assessment f√ºr systematische Identifikation und Behandlung von Implementierungsrisiken\n‚Ä¢ Contingency Planning f√ºr Vorbereitung auf unvorhergesehene Herausforderungen\n\nüìö Comprehensive Training und Support:\n‚Ä¢ Multi-modal Training mit verschiedenen Lernformaten f√ºr unterschiedliche Lerntypen\n‚Ä¢ Just-in-time Learning f√ºr kontextuelle Unterst√ºtzung direkt im Arbeitsprozess\n‚Ä¢ Self-service Resources f√ºr autonome Probleml√∂sung und kontinuierliches Lernen\n‚Ä¢ Expert Support f√ºr komplexe Fragen und Sonderf√§lle\n‚Ä¢ Continuous Learning f√ºr fortlaufende Weiterbildung und Kompetenzentwicklung\n\nüîç Measurement und Continuous Improvement:\n‚Ä¢ Adoption Metrics f√ºr quantitative Messung des Implementierungserfolgs\n‚Ä¢ User Satisfaction Surveys f√ºr qualitative Bewertung der Benutzerzufriedenheit\n‚Ä¢ Performance Indicators f√ºr √úberwachung der gesch√§ftlichen Auswirkungen\n‚Ä¢ Lessons Learned f√ºr systematische Erfassung und Anwendung von Erfahrungen\n‚Ä¢ Iterative Improvement f√ºr kontinuierliche Optimierung basierend auf Feedback und Erfahrungen\n\nüåê Cultural Transformation und Organizational Development:\n‚Ä¢ Culture Assessment f√ºr Bewertung der aktuellen Organisationskultur und Identifikation von Ver√§nderungsbedarfen\n‚Ä¢ Leadership Development f√ºr Bef√§higung von F√ºhrungskr√§ften als Change Leaders\n‚Ä¢ Team Building f√ºr St√§rkung der Zusammenarbeit und des Teamgeists\n‚Ä¢ Recognition Programs f√ºr Anerkennung und Belohnung von Change-Engagement\n‚Ä¢ Long-term Sustainability f√ºr Verankerung der Ver√§nderungen in der Organisationskultur"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Welche fortgeschrittenen Integration-Strategien erm√∂glichen nahtlose IAM-Prozess-Orchestrierung in komplexen Enterprise-Umgebungen mit Legacy-Systemen?',
        answer: "Integration-Strategien f√ºr IAM-Prozess-Orchestrierung in komplexen Enterprise-Umgebungen erfordern eine durchdachte Architektur, die moderne Cloud-native Technologien mit bestehenden Legacy-Systemen verbindet. Erfolgreiche Integration schafft eine einheitliche, orchestrierte Identit√§tslandschaft, die Gesch√§ftsprozesse beschleunigt, Sicherheit maximiert und dabei die Komplexit√§t f√ºr Endbenutzer minimiert.\n\nüéØ Strategic Integration Architecture und Enterprise Design:\n‚Ä¢ Hybrid Integration Platform f√ºr nahtlose Verbindung von Cloud-Services und On-Premises-Systemen\n‚Ä¢ API-first Strategy f√ºr moderne, skalierbare und zukunftssichere Integrationsarchitektur\n‚Ä¢ Event-driven Architecture f√ºr Real-time Synchronisation und asynchrone Kommunikation\n‚Ä¢ Microservices Design f√ºr modulare, flexible und wartbare Integrationsl√∂sungen\n‚Ä¢ Enterprise Service Bus f√ºr zentrale Orchestrierung und Management aller Integrationen\n\nüîó Advanced Connector Framework und Legacy Integration:\n‚Ä¢ Universal Connector Platform f√ºr standardisierte Anbindung verschiedenster Zielsysteme\n‚Ä¢ Legacy System Adapters f√ºr sichere Integration √§lterer Systeme ohne Modernisierungszwang\n‚Ä¢ Protocol Translation f√ºr √úberbr√ºckung verschiedener Kommunikationsprotokolle und Standards\n‚Ä¢ Data Transformation Engine f√ºr intelligente Konvertierung zwischen verschiedenen Datenformaten\n‚Ä¢ Custom Connector Development f√ºr spezielle Anforderungen und propriet√§re Systeme\n\n‚öôÔ∏è Intelligent Orchestration und Workflow Management:\n‚Ä¢ Business Process Orchestration f√ºr End-to-End-Automatisierung komplexer Gesch√§ftsprozesse\n‚Ä¢ Conditional Logic Engine f√ºr intelligente Entscheidungsfindung basierend auf Gesch√§ftsregeln\n‚Ä¢ Exception Handling Framework f√ºr robuste Behandlung von Fehlern und Sonderf√§llen\n‚Ä¢ Compensation Patterns f√ºr sichere R√ºckg√§ngigmachung bei fehlgeschlagenen Transaktionen\n‚Ä¢ State Management f√ºr konsistente Verfolgung des Prozessstatus √ºber alle Systeme hinweg\n\nüõ°Ô∏è Security und Compliance Integration:\n‚Ä¢ End-to-End Encryption f√ºr sichere Daten√ºbertragung zwischen allen integrierten Systemen\n‚Ä¢ Certificate Management f√ºr automatisierte Verwaltung und Rotation von Sicherheitszertifikaten\n‚Ä¢ Audit Trail Aggregation f√ºr zentrale Sammlung und Korrelation von Audit-Daten\n‚Ä¢ Compliance Validation f√ºr automatische √úberpr√ºfung regulatorischer Anforderungen\n‚Ä¢ Zero-Trust Network Integration f√ºr sichere Kommunikation auch in unsicheren Netzwerkumgebungen\n\nüìä Monitoring und Performance Optimization:\n‚Ä¢ End-to-End Monitoring f√ºr vollst√§ndige √úberwachung aller Integrationspfade und Abh√§ngigkeiten\n‚Ä¢ Performance Analytics f√ºr Identifikation von Bottlenecks und Optimierungsm√∂glichkeiten\n‚Ä¢ Health Checks f√ºr proaktive √úberwachung der Systemverf√ºgbarkeit und -performance\n‚Ä¢ Capacity Planning f√ºr vorausschauende Ressourcenplanung und Skalierung\n‚Ä¢ SLA Monitoring f√ºr √úberwachung und Einhaltung von Service Level Agreements\n\nüåê Cloud-native und Multi-Cloud Integration:\n‚Ä¢ Container-based Deployment f√ºr portable und skalierbare Integrationsl√∂sungen\n‚Ä¢ Kubernetes Orchestration f√ºr automatisierte Verwaltung und Skalierung von Integrations-Services\n‚Ä¢ Multi-Cloud Connectivity f√ºr nahtlose Integration √ºber verschiedene Cloud-Anbieter hinweg\n‚Ä¢ Edge Computing Integration f√ºr lokale Verarbeitung und reduzierte Latenz\n‚Ä¢ Serverless Integration f√ºr kosteneffiziente und automatisch skalierbare Integrationsfunktionen"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
