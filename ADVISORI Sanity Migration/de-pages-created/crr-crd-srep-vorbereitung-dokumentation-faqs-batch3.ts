import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating CRR/CRD SREP Vorbereitung & Dokumentation page with FAQs batch 3 (German)...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'crr-crd-srep-vorbereitung-dokumentation' })
    
    if (!existingDoc) {
      throw new Error('Document "crr-crd-srep-vorbereitung-dokumentation" not found')
    }
    
    // Create new FAQs in German
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: "Wie k√∂nnen Stresstests √ºberzeugend f√ºr den SREP-Prozess dokumentiert werden?",
        answer: "Stresstests sind ein zentrales Element des SREP-Prozesses und spielen eine entscheidende Rolle in der aufsichtlichen Bewertung der Kapital- und Liquidit√§tsad√§quanz eines Instituts. Eine √ºberzeugende Dokumentation des Stresstestrahmenwerks, der Szenarien und Ergebnisse demonstriert nicht nur regulatorische Compliance, sondern auch die F√§higkeit des Instituts, Risiken unter adversen Bedingungen zu verstehen und zu steuern. ADVISORI unterst√ºtzt Institute bei der Optimierung ihrer Stresstest-Dokumentation durch einen strukturierten, auf aufsichtliche Erwartungen ausgerichteten Ansatz.\n\nüîÑ Kernelemente einer √ºberzeugenden Stresstest-Dokumentation:\n‚Ä¢ Stresstest-Framework: Umfassende Darstellung des Stresstestrahmenwerks, einschlie√ülich Governance, Prozessen, Methoden und Verantwortlichkeiten.\n‚Ä¢ Szenarioentwicklung: Nachvollziehbare Dokumentation des Prozesses zur Entwicklung, Kalibrierung und Validierung der Stressszenarien.\n‚Ä¢ Methodik und Modelle: Detaillierte Beschreibung der angewandten Methoden und Modelle zur √úbersetzung der Szenarien in finanzielle Auswirkungen.\n‚Ä¢ Integration in die Gesamtbanksteuerung: Klare Darstellung, wie Stresstergebnisse in strategische Entscheidungen, Kapitalplanung und Risikoappetit einflie√üen.\n\nüìä Aufsichtliche Erwartungen an Stresstests im SREP-Kontext:\n‚Ä¢ Umfassende Risikoabdeckung: Nachweis, dass alle wesentlichen Risiken und ihre Interdependenzen im Stresstest ber√ºcksichtigt werden.\n‚Ä¢ Angemessene Szenariost√§rke: Dokumentation der Schwere der Szenarien und ihrer Angemessenheit im Verh√§ltnis zum Gesch√§ftsmodell und Risikoprofil des Instituts.\n‚Ä¢ Konsistenz zwischen Risikotypen: Darstellung der methodischen Konsistenz zwischen verschiedenen Risikotypen und der aggregierten Betrachtung.\n‚Ä¢ Reverse Stresstests: √úberzeugender Ansatz f√ºr Reverse Stresstests, die Schwachstellen des Gesch√§ftsmodells unter extremen Bedingungen identifizieren.\n\nüí° Erfolgsfaktoren f√ºr eine √ºberzeugende Stresstest-Dokumentation:\n‚Ä¢ Narrative Verkn√ºpfung: Entwicklung einer nachvollziehbaren Erz√§hlung, die die Szenarien mit dem makro√∂konomischen Umfeld und dem Gesch√§ftsmodell des Instituts verkn√ºpft.\n‚Ä¢ Transparenz bei Annahmen: Klare Dokumentation aller zugrunde liegenden Annahmen, Vereinfachungen und Limitationen mit √ºberzeugender Begr√ºndung.\n‚Ä¢ Anwendungsbezug: Konkrete Beispiele, wie Stresstergebnisse in Gesch√§ftsentscheidungen eingeflossen sind, z.B. bei der Kapitalplanung oder Risikostrategie.\n‚Ä¢ Visuelle Aufbereitung: Effektive Visualisierung komplexer Zusammenh√§nge und Ergebnisse durch aussagekr√§ftige Grafiken, Dashboards und Heatmaps.\n\nüõ†Ô∏è ADVISORI's Ansatz zur Optimierung der Stresstest-Dokumentation:\n‚Ä¢ Gap-Analyse gegen EBA-Leitlinien: Wir f√ºhren eine detaillierte Analyse Ihrer bestehenden Stresstest-Dokumentation gegen die aktuellen aufsichtlichen Erwartungen und Best Practices durch.\n‚Ä¢ Methodenoptimierung: Wir unterst√ºtzen Sie bei der Weiterentwicklung und √ºberzeugenden Dokumentation Ihrer Stresstest-Methoden und -Modelle.\n‚Ä¢ Szenarioentwicklung: Wir helfen Ihnen bei der Entwicklung plausibler, schwerer und dennoch vertretbarer Stressszenarien, die auf Ihr spezifisches Gesch√§ftsmodell zugeschnitten sind.\n‚Ä¢ Management Information: Wir optimieren die Aufbereitung und Pr√§sentation von Stresstergebnissen f√ºr verschiedene Stakeholder, vom Vorstand bis zur Aufsicht."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: "Wie kann man sich optimal auf kritische SREP-Fragen zu Modellannahmen und -limitationen vorbereiten?",
        answer: "Im SREP-Prozess geh√∂ren Fragen zu Modellannahmen und -limitationen zu den kritischsten Pr√ºfbereichen, da sie die Grundlage f√ºr die Risikoquantifizierung und damit f√ºr die Kapital- und Liquidit√§tsad√§quanz bilden. Eine √ºberzeugende Darstellung des Modellverst√§ndnisses und ein reflektierter Umgang mit Modellunsicherheiten sind entscheidend f√ºr die aufsichtliche Bewertung. ADVISORI unterst√ºtzt Institute bei der gezielten Vorbereitung auf diese kritischen Pr√ºfungsaspekte durch einen strukturierten, auf Transparenz und Methodenkompetenz ausgerichteten Ansatz.\n\nüìè Kritische Modellaspekte im SREP-Fokus:\n‚Ä¢ Fundamentale Modellannahmen: Tiefgreifendes Verst√§ndnis und transparente Dokumentation der grundlegenden Annahmen in allen relevanten Risikomodellen.\n‚Ä¢ Parameterkalibrierung: Nachvollziehbare Begr√ºndung der gew√§hlten Parameterauspr√§gungen und ihrer empirischen oder theoretischen Fundierung.\n‚Ä¢ Modellimitationen: Ehrliche Identifikation und Analyse der inh√§renten Grenzen und Schw√§chen der eingesetzten Modelle.\n‚Ä¢ Modellunsicherheit: Systematischer Umgang mit Modellunsicherheiten und deren Ber√ºcksichtigung in Risikopuffern und Entscheidungsprozessen.\n\nüîç Typische kritische SREP-Fragen zu Modellen und ihre Beantwortung:\n‚Ä¢ Frage zur Datengrundlage: \"Wie stellen Sie sicher, dass Ihre Modelle auf ausreichenden und repr√§sentativen Daten basieren, insbesondere bei seltenen Ereignissen?\"\n  ‚Üí √úberzeugende Antwort: Konkrete Darstellung der Datenquellen, Datenanreicherungsstrategien (z.B. externe Daten, Expertensch√§tzungen) und systematischen Datenqualit√§tskontrollen. Transparente Diskussion der Dateneinschr√§nkungen und Kompensationsma√ünahmen.\n\n‚Ä¢ Frage zu Modellannahmen: \"Welche kritischen Annahmen liegen Ihrem Kreditrisikomodell zugrunde, und wie validieren Sie deren Angemessenheit?\"\n  ‚Üí √úberzeugende Antwort: Strukturierte Auflistung der Kernannahmen mit klarer Begr√ºndung ihrer Auswahl. Darstellung des regelm√§√üigen Validierungsprozesses mit konkreten Beispielen, wie Annahmen √ºberpr√ºft und bei Bedarf angepasst werden.\n\n‚Ä¢ Frage zu Modellrisiken: \"Wie ber√ºcksichtigen Sie Modellrisiken in Ihrer Kapitalplanung und Risikosteuerung?\"\n  ‚Üí √úberzeugende Antwort: Erl√§uterung des strukturierten Modellrisikorahmens, der Quantifizierungsans√§tze f√ºr Modellrisiken und der konkreten Ber√ºcksichtigung in Kapitalzuschl√§gen. Beispiele f√ºr Management-Entscheidungen, die Modellrisiken explizit ber√ºcksichtigt haben.\n\n‚Ä¢ Frage zum Modellversagen: \"Was w√§re, wenn Ihr Marktpreisrisikomodell in einer Stresssituation versagt?\"\n  ‚Üí √úberzeugende Antwort: Darstellung der Fallback-L√∂sungen und Notfallpl√§ne bei Modellversagen. Ergebnisse von Modellstresstests und Reverse Stresstests, die Schwachstellen identifizieren und entsprechende Mitigationsma√ünahmen.\n\nüß† Erfolgsfaktoren f√ºr √ºberzeugende Antworten zu Modellfragen:\n‚Ä¢ Tiefes technisches Verst√§ndnis: Sicherstellung, dass die Interviewpartner nicht nur die Modelle oberfl√§chlich kennen, sondern ein tiefes Verst√§ndnis ihrer mathematischen und konzeptionellen Grundlagen haben.\n‚Ä¢ Kritische Selbstreflexion: Demonstration einer kritisch-reflektierten Haltung gegen√ºber den eigenen Modellen, die Schw√§chen offen anspricht und Verbesserungspotenziale kennt.\n‚Ä¢ Konkrete Beispiele: Untermauerung abstrakter Erkl√§rungen durch konkrete Beispiele aus der Praxis, die die tats√§chliche Anwendung und Limitationen illustrieren.\n‚Ä¢ Konsistente Kommunikation: Sicherstellung, dass alle Interviewpartner ein konsistentes Verst√§ndnis der Modelle und ihrer Limitationen kommunizieren.\n\nüõ†Ô∏è ADVISORI's Vorbereitungsansatz f√ºr Modelldiskussionen im SREP:\n‚Ä¢ Modell-Inventarisierung: Wir unterst√ºtzen Sie bei der systematischen Erfassung und Dokumentation aller SREP-relevanten Modelle, ihrer Annahmen und Limitationen.\n‚Ä¢ Kritische Modellanalyse: Wir f√ºhren eine unabh√§ngige Bewertung Ihrer kritischen Modelle durch und identifizieren potenzielle Schwachstellen, die im SREP hinterfragt werden k√∂nnten.\n‚Ä¢ Interviewsimulationen: Wir bereiten Ihre Fachexperten durch anspruchsvolle Simulationen gezielt auf kritische Modellfragen vor und entwickeln √ºberzeugende Antwortstrategien.\n‚Ä¢ Modellrisiko-Framework: Wir unterst√ºtzen Sie bei der Entwicklung und Dokumentation eines robusten Rahmens f√ºr den Umgang mit Modellrisiken, der aufsichtlichen Erwartungen entspricht."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: "Wie sollte die Dokumentation der Datenqualit√§t und Datengovernance f√ºr den SREP optimiert werden?",
        answer: "Datenqualit√§t und Datengovernance haben in den letzten Jahren enorm an Bedeutung im SREP-Prozess gewonnen. Die Aufsichtsbeh√∂rden erkennen zunehmend, dass verl√§ssliche Daten die Grundlage f√ºr effektives Risikomanagement und fundierte Entscheidungen bilden. Eine √ºberzeugende Dokumentation der Datenarchitektur, Datenqualit√§tskontrollen und Datengovernance-Prozesse ist daher entscheidend f√ºr eine positive SREP-Bewertung. ADVISORI unterst√ºtzt Institute bei der Optimierung ihrer Datendokumentation durch einen strukturierten, auf aufsichtliche Erwartungen ausgerichteten Ansatz.\n\nüíæ Kernelemente einer √ºberzeugenden Datendokumentation f√ºr den SREP:\n‚Ä¢ Datenarchitektur und -fl√ºsse: Transparente Darstellung der Datenlandschaft, Datenfl√ºsse und Datentransformationen von der Quelle bis zur Berichterstattung.\n‚Ä¢ Datenqualit√§tsrahmenwerk: Umfassende Dokumentation des Ansatzes zur Sicherstellung und √úberwachung der Datenqualit√§t entlang aller Dimensionen (Vollst√§ndigkeit, Genauigkeit, Konsistenz, Aktualit√§t, etc.).\n‚Ä¢ Datengovernance: Klare Beschreibung der Rollen, Verantwortlichkeiten und Prozesse im Datenmanagement, einschlie√ülich der Dateneigent√ºmerschaft und Datenqualit√§tsverantwortung.\n‚Ä¢ Datenvalidierung: Nachvollziehbare Dokumentation der Kontrollen und Validierungsprozesse, die die Integrit√§t und Qualit√§t der Daten sicherstellen.\n\nüìä Aufsichtliche Erwartungen an die Datendokumentation:\n‚Ä¢ End-to-End-Datentransparenz: Nachverfolgbarkeit der Daten von der Quelle bis zur Verwendung in Berichten und Entscheidungsprozessen.\n‚Ä¢ Datenqualit√§tsmetriken: Etablierung und √úberwachung objektiver Kennzahlen zur Messung und Verbesserung der Datenqualit√§t √ºber die Zeit.\n‚Ä¢ Datenqualit√§tskultur: Nachweis einer organisationsweiten Kultur, die den Wert hochwertiger Daten anerkennt und f√∂rdert.\n‚Ä¢ Datenm√§ngelbehebung: Systematischer Prozess zur Identifikation, Priorisierung und Behebung von Datenm√§ngeln mit klaren Verantwortlichkeiten und Zeitpl√§nen.\n\nüîÑ Optimierungsans√§tze f√ºr die Datendokumentation:\n‚Ä¢ Daten-Lineage-Mapping: Entwicklung visueller Darstellungen der Datenfl√ºsse und -transformationen f√ºr kritische Datenpunkte und Berichte.\n‚Ä¢ Datenqualit√§tsdashboards: Implementierung und Dokumentation von Dashboards zur kontinuierlichen √úberwachung und Verbesserung der Datenqualit√§t.\n‚Ä¢ Datenw√∂rterbuch: Erstellung eines umfassenden Datenw√∂rterbuchs mit klaren Definitionen, Quellen, Verantwortlichkeiten und Qualit√§tsstandards f√ºr alle kritischen Datenpunkte.\n‚Ä¢ Issue-Management-Prozess: Dokumentation des strukturierten Prozesses zur Erfassung, Priorisierung und L√∂sung von Datenqualit√§tsproblemen.\n\nüí° Erfolgsfaktoren f√ºr eine √ºberzeugende Datendokumentation:\n‚Ä¢ Konkrete Beispiele: Untermauerung der Beschreibungen durch konkrete Beispiele, die die praktische Umsetzung der Datengovernance und Qualit√§tssicherung illustrieren.\n‚Ä¢ Kontinuierliche Verbesserung: Nachweis eines etablierten Prozesses zur kontinuierlichen Verbesserung der Datenqualit√§t mit messbaren Ergebnissen √ºber die Zeit.\n‚Ä¢ Technologie-Integration: Darstellung, wie Technologien und Tools eingesetzt werden, um Datenqualit√§t systematisch zu messen, zu √ºberwachen und zu verbessern.\n‚Ä¢ Management-Commitment: Demonstration des Engagements der F√ºhrungsebene f√ºr Datenqualit√§t durch formale Policies, Ressourcenzuweisung und regelm√§√üiges Reporting.\n\nüõ†Ô∏è ADVISORI's Ansatz zur Optimierung der Datendokumentation:\n‚Ä¢ Daten-Gap-Analyse: Wir f√ºhren eine detaillierte Analyse Ihrer bestehenden Datendokumentation gegen aufsichtliche Erwartungen und Best Practices durch.\n‚Ä¢ Daten-Lineage-Mapping: Wir unterst√ºtzen Sie bei der Entwicklung transparenter End-to-End-Darstellungen Ihrer kritischen Datenfl√ºsse f√ºr den SREP.\n‚Ä¢ Datenqualit√§tsframework: Wir helfen Ihnen, ein umfassendes Rahmenwerk f√ºr Datenqualit√§t zu dokumentieren, das alle relevanten Dimensionen und Kontrollen abdeckt.\n‚Ä¢ Datengovernance-Optimierung: Wir unterst√ºtzen Sie bei der Weiterentwicklung und √ºberzeugenden Dokumentation Ihrer Datengovernance-Strukturen und -Prozesse."
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: "Wie kann eine effektive Dokumentationsstrategie f√ºr den SREP-Prozess entwickelt werden?",
        answer: "Eine effektive SREP-Dokumentationsstrategie ist mehr als nur die Sammlung einzelner Dokumente ‚Äì sie ist ein systematischer Ansatz, der die Erstellung, Pflege und Nutzung aller relevanten Dokumentation koordiniert und optimiert. Eine durchdachte Strategie stellt sicher, dass die Dokumentation nicht nur vollst√§ndig und aktuell ist, sondern auch √ºberzeugend, konsistent und zielgruppengerecht aufbereitet wird. ADVISORI unterst√ºtzt Institute bei der Entwicklung ma√ügeschneiderter Dokumentationsstrategien, die den aufsichtlichen Erwartungen entsprechen und gleichzeitig den internen Aufwand minimieren.\n\nüìù Kernelemente einer effektiven SREP-Dokumentationsstrategie:\n‚Ä¢ Dokumentationsarchitektur: Entwicklung einer koh√§renten Struktur, die alle SREP-relevanten Dokumente systematisch organisiert und ihre Beziehungen zueinander darstellt.\n‚Ä¢ Dokumentationspriorit√§ten: Klare Priorisierung der Dokumentationsbem√ºhungen basierend auf aufsichtlicher Relevanz, Risikoprofil und identifizierten L√ºcken.\n‚Ä¢ Redaktionsprozesse: Etablierung effizienter Prozesse f√ºr die Erstellung, √úberpr√ºfung, Genehmigung und Aktualisierung der Dokumentation.\n‚Ä¢ Qualit√§tssicherung: Implementation systematischer Kontrollen zur Sicherstellung der inhaltlichen Qualit√§t, Konsistenz und Konformit√§t mit aufsichtlichen Erwartungen.\n\nüîÑ Zentrale Elemente f√ºr eine optimale Dokumentationsstruktur:\n‚Ä¢ Reader's Guide: Entwicklung eines √ºbergreifenden Navigationskonzepts, das den Pr√ºfern hilft, die Dokumentationsstruktur zu verstehen und relevante Inhalte schnell zu finden.\n‚Ä¢ Hierarchisches Konzept: Organisation der Dokumentation in verschiedenen Detaillierungsebenen ‚Äì von √úbersichtsdokumenten bis zu detaillierten technischen Spezifikationen.\n‚Ä¢ Modularer Aufbau: Strukturierung der Dokumentation in thematische Module, die unabh√§ngig voneinander aktualisiert werden k√∂nnen, aber durch klare Verweise miteinander verbunden sind.\n‚Ä¢ Konsistente Formatierung: Verwendung einheitlicher Vorlagen, Stilelemente und Begrifflichkeiten √ºber alle Dokumente hinweg, um die Professionalit√§t und Lesbarkeit zu erh√∂hen.\n\nüéØ Zielgruppenorientierte Aufbereitung der Dokumentation:\n‚Ä¢ Vorstandsebene: Fokus auf strategische Zusammenh√§nge, Gesch√§ftsrelevanz und wesentliche Risiken in pr√§gnanter, nicht-technischer Sprache.\n‚Ä¢ Fachebene: Detaillierte fachliche Inhalte mit klaren methodischen Erl√§uterungen und nachvollziehbaren Begr√ºndungen f√ºr getroffene Entscheidungen.\n‚Ä¢ Operative Ebene: Konkrete Handlungsanweisungen, Prozessbeschreibungen und technische Details f√ºr die t√§gliche Umsetzung.\n‚Ä¢ Aufsichtliche Perspektive: Ber√ºcksichtigung spezifischer aufsichtlicher Fragestellungen und explizite Bezugnahme auf regulatorische Anforderungen und Leitlinien.\n\n‚öôÔ∏è Implementierungsansatz f√ºr eine SREP-Dokumentationsstrategie:\n‚Ä¢ Gap-Analyse und Bestandsaufnahme: Systematische Erfassung und Bewertung der vorhandenen Dokumentation gegen aufsichtliche Anforderungen und Best Practices.\n‚Ä¢ Dokumentations-Roadmap: Entwicklung eines priorisierten Plans zur schrittweisen Optimierung der Dokumentation mit klaren Meilensteinen und Verantwortlichkeiten.\n‚Ä¢ Vorlagen und Leitlinien: Erstellung standardisierter Vorlagen und redaktioneller Leitlinien, die Konsistenz, Qualit√§t und Effizienz in der Dokumentationserstellung f√∂rdern.\n‚Ä¢ Kollaborationsplattform: Implementierung einer zentralen Plattform f√ºr die kollaborative Erstellung, Verwaltung und Nutzung der Dokumentation.\n\nüõ†Ô∏è ADVISORI's Unterst√ºtzungsansatz f√ºr Ihre Dokumentationsstrategie:\n‚Ä¢ Strategische Dokumentationsberatung: Wir entwickeln mit Ihnen eine ma√ügeschneiderte Dokumentationsstrategie, die auf Ihr spezifisches Gesch√§ftsmodell, Risikoprofil und Ihre organisatorischen Rahmenbedingungen zugeschnitten ist.\n‚Ä¢ Dokumentations-Blueprint: Wir erstellen einen umfassenden Blueprint f√ºr Ihre SREP-Dokumentation, der alle relevanten Dokumente, ihre Beziehungen und Verantwortlichkeiten definiert.\n‚Ä¢ Redaktionelle Unterst√ºtzung: Wir bieten professionelle Unterst√ºtzung bei der Erstellung und Optimierung kritischer SREP-Dokumente, die hohen qualitativen und aufsichtlichen Anspr√ºchen gen√ºgen.\n‚Ä¢ Wissenstransfer: Wir bef√§higen Ihre Mitarbeiter durch gezielte Schulungen und Coaching, hochwertige SREP-Dokumentation selbstst√§ndig zu erstellen und zu pflegen."
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs (German) to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQs batch 3 (German) added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
