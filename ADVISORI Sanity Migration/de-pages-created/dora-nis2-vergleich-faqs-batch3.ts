import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating DORA NIS2 Vergleich page with FAQ batch 3...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'dora-nis2-vergleich' })
    
    if (!existingDoc) {
      throw new Error('Document "dora-nis2-vergleich" not found')
    }
    
    // Create new FAQs for DORA NIS2 comparison strategic aspects
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 9),
        question: 'Welche Auswirkungen haben die unterschiedlichen Aufsichtsstrukturen von DORA und NIS2 auf die Compliance-Strategie?',
        answer: "Die unterschiedlichen Aufsichtsstrukturen von DORA und NIS2 schaffen komplexe regulatorische Landschaften, die strategische √úberlegungen f√ºr die Compliance-Gestaltung erfordern. Das Verst√§ndnis dieser Strukturen ist entscheidend f√ºr eine effektive Stakeholder-Kommunikation und Risikomanagement.\n\nüèõÔ∏è DORA-Aufsichtsarchitektur:\n‚Ä¢ Direkte europ√§ische Aufsicht durch die European Supervisory Authorities (ESAs) f√ºr kritische IKT-Drittanbieter\n‚Ä¢ Harmonisierte Aufsichtspraktiken durch die Joint Committee der ESAs f√ºr grenz√ºberschreitende Koordination\n‚Ä¢ Nationale Aufsichtsbeh√∂rden behalten prim√§re Verantwortung f√ºr Finanzinstitute in ihren Jurisdiktionen\n‚Ä¢ Einheitliche Auslegung und Anwendung von DORA-Anforderungen durch technische Standards und Guidelines\n‚Ä¢ Koordinierte Enforcement-Ma√ünahmen und Sanktionen auf europ√§ischer Ebene\n\nüåç NIS2-Aufsichtslandschaft:\n‚Ä¢ Prim√§r nationale Umsetzung und Aufsicht durch Computer Security Incident Response Teams (CSIRTs)\n‚Ä¢ Unterschiedliche nationale Ans√§tze bei der Implementierung und Durchsetzung der Richtlinie\n‚Ä¢ Koordination durch das NIS Cooperation Group auf europ√§ischer Ebene\n‚Ä¢ Flexibilit√§t f√ºr Mitgliedstaaten bei der Ausgestaltung spezifischer Anforderungen\n‚Ä¢ Potenzielle Unterschiede in Auslegung und Enforcement zwischen verschiedenen EU-L√§ndern\n\nüìä Strategische Implikationen f√ºr Compliance:\n‚Ä¢ Notwendigkeit unterschiedlicher Stakeholder-Management-Ans√§tze f√ºr beide Frameworks\n‚Ä¢ Koordination mit verschiedenen Aufsichtsbeh√∂rden auf nationaler und europ√§ischer Ebene\n‚Ä¢ Anpassung der Compliance-Kommunikation an unterschiedliche regulatorische Kulturen\n‚Ä¢ Ber√ºcksichtigung verschiedener Enforcement-Philosophien und -Praktiken\n‚Ä¢ Entwicklung flexibler Compliance-Strukturen f√ºr unterschiedliche jurisdiktionelle Anforderungen\n\nü§ù Stakeholder-Engagement-Strategien:\n‚Ä¢ Aufbau von Beziehungen zu relevanten ESAs f√ºr DORA-spezifische Angelegenheiten\n‚Ä¢ Entwicklung von Kommunikationskan√§len zu nationalen NIS2-Aufsichtsbeh√∂rden\n‚Ä¢ Teilnahme an Industry-Consultations und Stakeholder-Dialogen f√ºr beide Frameworks\n‚Ä¢ Proaktive Kommunikation √ºber koordinierte Compliance-Ans√§tze\n‚Ä¢ Aufbau von Expertise in verschiedenen regulatorischen Kulturen und Erwartungen\n\nüîÑ Koordination und Harmonisierung:\n‚Ä¢ Entwicklung einheitlicher Reporting-Standards, die verschiedene Aufsichtserwartungen ber√ºcksichtigen\n‚Ä¢ Schaffung flexibler Governance-Strukturen f√ºr unterschiedliche regulatorische Anforderungen\n‚Ä¢ Implementierung adaptiver Compliance-Prozesse f√ºr verschiedene Aufsichtskulturen\n‚Ä¢ Etablierung koordinierter Incident-Response-Strategien f√ºr verschiedene Meldewege\n‚Ä¢ Aufbau von Capabilities f√ºr Multi-Jurisdictional-Compliance-Management\n\nüöÄ Zukunftsorientierte √úberlegungen:\n‚Ä¢ Antizipation m√∂glicher Konvergenz oder Divergenz der Aufsichtsans√§tze\n‚Ä¢ Vorbereitung auf potenzielle √Ñnderungen in der regulatorischen Landschaft\n‚Ä¢ Entwicklung adaptiver Strategien f√ºr sich entwickelnde Aufsichtspraktiken\n‚Ä¢ Aufbau von Flexibilit√§t f√ºr neue regulatorische Entwicklungen\n‚Ä¢ Investition in langfristige Stakeholder-Beziehungen und Regulatory-Intelligence"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 10),
        question: 'Wie k√∂nnen Finanzinstitute ihre bestehenden Cybersecurity-Frameworks erweitern, um sowohl DORA- als auch NIS2-Anforderungen zu erf√ºllen?',
        answer: "Die Erweiterung bestehender Cybersecurity-Frameworks zur Erf√ºllung beider Regulierungen erfordert einen strategischen, schrittweisen Ansatz, der vorhandene Investitionen maximiert und gleichzeitig neue Anforderungen effizient integriert.\n\nüîç Assessment bestehender Frameworks:\n‚Ä¢ Durchf√ºhrung umfassender Gap-Analysen gegen beide regulatorischen Anforderungen\n‚Ä¢ Bewertung der Kompatibilit√§t vorhandener Controls mit DORA- und NIS2-Standards\n‚Ä¢ Identifikation von Bereichen mit hoher Synergie und Effizienzpotenzialen\n‚Ä¢ Analyse der aktuellen Governance-Strukturen und deren Anpassungsbedarf\n‚Ä¢ Bewertung bestehender Technologie-Investitionen und deren Erweiterungsm√∂glichkeiten\n\nüèóÔ∏è Framework-Erweiterungsstrategien:\n‚Ä¢ Integration finanzspezifischer DORA-Kontrollen in bestehende Cybersecurity-Architekturen\n‚Ä¢ Erweiterung von Risk-Assessment-Prozessen um DORA- und NIS2-spezifische Kriterien\n‚Ä¢ Anpassung von Incident-Management-Frameworks f√ºr beide regulatorischen Anforderungen\n‚Ä¢ Entwicklung erweiterter Drittanbieter-Management-Capabilities\n‚Ä¢ Integration neuer Monitoring- und Detection-Anforderungen in bestehende SOC-Strukturen\n\nüìã Governance-Integration:\n‚Ä¢ Erweiterung bestehender Cybersecurity-Governance um regulatorische Compliance-Funktionen\n‚Ä¢ Integration von DORA- und NIS2-Anforderungen in bestehende Risk-Management-Frameworks\n‚Ä¢ Anpassung von Policy- und Procedure-Frameworks f√ºr beide Regulierungen\n‚Ä¢ Entwicklung integrierter Reporting- und Oversight-Mechanismen\n‚Ä¢ Schaffung koordinierter Training- und Awareness-Programme\n\nüîß Technische Implementierung:\n‚Ä¢ Erweiterung bestehender SIEM-Systeme um DORA- und NIS2-spezifische Use Cases\n‚Ä¢ Integration neuer Monitoring-Anforderungen in bestehende Security-Operations\n‚Ä¢ Anpassung von Vulnerability-Management-Prozessen f√ºr beide Frameworks\n‚Ä¢ Erweiterung von Backup- und Recovery-Systemen um neue Resilienz-Anforderungen\n‚Ä¢ Integration von Compliance-Monitoring in bestehende Security-Dashboards\n\nüìä Prozess-Optimierung:\n‚Ä¢ Harmonisierung bestehender Incident-Response-Prozesse mit neuen Reporting-Anforderungen\n‚Ä¢ Integration von Compliance-Testing in bestehende Security-Assessment-Zyklen\n‚Ä¢ Erweiterung von Change-Management-Prozessen um regulatorische √úberlegungen\n‚Ä¢ Anpassung von Vendor-Management-Prozessen f√ºr erweiterte Due-Diligence-Anforderungen\n‚Ä¢ Integration von Regulatory-Intelligence in bestehende Threat-Intelligence-Programme\n\nüéØ Phasenweise Implementierung:\n‚Ä¢ Priorisierung von High-Impact, Low-Effort-Verbesserungen f√ºr schnelle Compliance-Gewinne\n‚Ä¢ Entwicklung mittelfristiger Roadmaps f√ºr komplexere Framework-Erweiterungen\n‚Ä¢ Koordination von Implementierungstimelines mit regulatorischen Fristen\n‚Ä¢ Etablierung von Meilensteinen und Success-Metriken f√ºr jede Implementierungsphase\n‚Ä¢ Aufbau von Feedback-Mechanismen f√ºr kontinuierliche Optimierung\n\nüîÑ Kontinuierliche Verbesserung:\n‚Ä¢ Implementierung von Maturity-Assessment-Prozessen f√ºr beide Frameworks\n‚Ä¢ Entwicklung von Benchmarking-Capabilities gegen Industry-Best-Practices\n‚Ä¢ Etablierung von Lessons-Learned-Prozessen aus Implementierungserfahrungen\n‚Ä¢ Integration von Regulatory-Updates in bestehende Framework-Evolution\n‚Ä¢ Aufbau von Capabilities f√ºr proaktive Framework-Anpassungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 11),
        question: 'Welche Rolle spielen internationale Standards wie ISO 27001 bei der koordinierten Umsetzung von DORA und NIS2?',
        answer: "Internationale Standards wie ISO 27001 k√∂nnen als wertvolle Br√ºcke zwischen DORA und NIS2 fungieren und eine gemeinsame Grundlage f√ºr die koordinierte Umsetzung beider Frameworks schaffen. Die strategische Nutzung etablierter Standards kann Effizienz steigern und Compliance-Risiken reduzieren.\n\nüåê ISO 27001 als gemeinsame Basis:\n‚Ä¢ ISO 27001 bietet ein bew√§hrtes Information Security Management System (ISMS) Framework\n‚Ä¢ Viele DORA- und NIS2-Anforderungen k√∂nnen auf ISO 27001-Controls gemappt werden\n‚Ä¢ Der Standard bietet eine strukturierte Herangehensweise an Risikomanagement und Governance\n‚Ä¢ Bestehende ISO 27001-Zertifizierungen k√∂nnen als Ausgangspunkt f√ºr beide Compliance-Programme dienen\n‚Ä¢ Der Standard erm√∂glicht eine systematische, prozessorientierte Herangehensweise an Cybersecurity\n\nüìä Mapping und Integration:\n‚Ä¢ Systematisches Mapping von DORA-Anforderungen auf ISO 27001-Controls (Anhang A)\n‚Ä¢ Identifikation von NIS2-Anforderungen, die durch bestehende ISO-Controls abgedeckt werden\n‚Ä¢ Entwicklung erweiterter Control-Sets f√ºr regulatorische Spezifika beider Frameworks\n‚Ä¢ Integration regulatorischer Anforderungen in bestehende ISMS-Dokumentation\n‚Ä¢ Anpassung von Risk-Assessment-Methodologien f√ºr beide regulatorischen Kontexte\n\nüîß Framework-Erweiterungen:\n‚Ä¢ Erweiterung des ISO 27001-Scope um DORA-spezifische IKT-Risiken\n‚Ä¢ Integration von NIS2-Supply-Chain-Anforderungen in bestehende Vendor-Management-Controls\n‚Ä¢ Anpassung von Incident-Management-Prozessen f√ºr beide regulatorischen Reporting-Anforderungen\n‚Ä¢ Erweiterung von Business-Continuity-Controls um DORA-spezifische Resilienz-Anforderungen\n‚Ä¢ Integration von Compliance-Monitoring in bestehende ISMS-√úberwachungsprozesse\n\nüìã Governance-Synergien:\n‚Ä¢ Nutzung bestehender ISO 27001-Governance-Strukturen f√ºr regulatorische Compliance\n‚Ä¢ Integration von DORA- und NIS2-Anforderungen in bestehende Management-Reviews\n‚Ä¢ Erweiterung von Internal-Audit-Programmen um regulatorische Compliance-Pr√ºfungen\n‚Ä¢ Anpassung von Corrective-Action-Prozessen f√ºr regulatorische Non-Compliance\n‚Ä¢ Integration von Regulatory-Intelligence in bestehende ISMS-Improvement-Prozesse\n\nüéØ Zus√§tzliche Standards-Integration:\n‚Ä¢ Kombination mit ISO 22301 (Business Continuity) f√ºr erweiterte Resilienz-Anforderungen\n‚Ä¢ Integration von ISO 31000 (Risk Management) f√ºr umfassende Risk-Governance\n‚Ä¢ Nutzung von NIST Cybersecurity Framework f√ºr erweiterte technische Controls\n‚Ä¢ Integration von COBIT f√ºr IT-Governance und -Management\n‚Ä¢ Ber√ºcksichtigung von branchenspezifischen Standards und Best Practices\n\nüîÑ Audit und Zertifizierung:\n‚Ä¢ Koordination von ISO 27001-Audits mit regulatorischen Compliance-Assessments\n‚Ä¢ Entwicklung integrierter Audit-Programme f√ºr alle Frameworks\n‚Ä¢ Nutzung externer Zertifizierungen als Compliance-Evidence f√ºr Aufsichtsbeh√∂rden\n‚Ä¢ Integration von Regulatory-Compliance in bestehende Zertifizierungs-Zyklen\n‚Ä¢ Entwicklung von Multi-Standard-Audit-Ans√§tzen f√ºr Effizienzgewinne\n\nüöÄ Strategische Vorteile:\n‚Ä¢ Reduzierung von Compliance-Komplexit√§t durch einheitliche Framework-Basis\n‚Ä¢ Verbesserung der Audit-Effizienz durch koordinierte Assessment-Ans√§tze\n‚Ä¢ St√§rkung der Stakeholder-Confidence durch etablierte Standards-Compliance\n‚Ä¢ Vereinfachung der Vendor-Due-Diligence durch standardisierte Bewertungskriterien\n‚Ä¢ Aufbau einer soliden Basis f√ºr zuk√ºnftige regulatorische Entwicklungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 12),
        question: 'Wie sollten Organisationen ihre Mitarbeiter f√ºr die koordinierte DORA-NIS2-Compliance schulen und sensibilisieren?',
        answer: "Eine effektive Schulungs- und Sensibilisierungsstrategie f√ºr beide Frameworks erfordert einen zielgruppenspezifischen Ansatz, der sowohl die technischen Aspekte als auch die kulturellen Ver√§nderungen ber√ºcksichtigt, die f√ºr eine erfolgreiche Compliance erforderlich sind.\n\nüéØ Zielgruppenspezifische Schulungsans√§tze:\n‚Ä¢ Entwicklung ma√ügeschneiderter Programme f√ºr verschiedene Organisationsebenen und Funktionen\n‚Ä¢ Spezifische Schulungen f√ºr F√ºhrungskr√§fte zu strategischen Compliance-Implikationen\n‚Ä¢ Technische Deep-Dive-Sessions f√ºr IT- und Cybersecurity-Teams\n‚Ä¢ Awareness-Programme f√ºr allgemeine Mitarbeiter zu beiden regulatorischen Frameworks\n‚Ä¢ Spezialisierte Schulungen f√ºr Compliance-, Risk- und Audit-Funktionen\n\nüìö Curriculum-Entwicklung:\n‚Ä¢ Grundlagen beider Regulierungen und deren Unterschiede und Gemeinsamkeiten\n‚Ä¢ Praktische Implementierungsans√§tze und Best Practices f√ºr koordinierte Compliance\n‚Ä¢ Incident-Response und -Reporting-Verfahren f√ºr beide Frameworks\n‚Ä¢ Drittanbieter-Management-Anforderungen und deren praktische Umsetzung\n‚Ä¢ Governance- und Risikomanagement-Prinzipien f√ºr beide Regulierungen\n\nüîÑ Interaktive Lernmethoden:\n‚Ä¢ Entwicklung von Simulation-Exercises f√ºr Incident-Response-Szenarien\n‚Ä¢ Workshop-Formate f√ºr praktische Anwendung von Compliance-Konzepten\n‚Ä¢ Case-Study-Analysen realer Compliance-Herausforderungen\n‚Ä¢ Gamification-Ans√§tze f√ºr erh√∂htes Engagement und Retention\n‚Ä¢ Peer-Learning-Programme f√ºr Erfahrungsaustausch zwischen Teams\n\nüì± Technologie-unterst√ºtzte Schulungen:\n‚Ä¢ Entwicklung von E-Learning-Modulen f√ºr flexible, selbstgesteuerte Weiterbildung\n‚Ä¢ Mobile-Learning-Apps f√ºr kontinuierliche Micro-Learning-Opportunities\n‚Ä¢ Virtual-Reality-Simulationen f√ºr immersive Compliance-Training-Erfahrungen\n‚Ä¢ AI-powered Adaptive Learning f√ºr personalisierte Schulungspfade\n‚Ä¢ Integration von Learning-Management-Systemen f√ºr Tracking und Reporting\n\nüèÜ Kompetenzentwicklung und Zertifizierung:\n‚Ä¢ Entwicklung interner Zertifizierungsprogramme f√ºr DORA-NIS2-Expertise\n‚Ä¢ F√∂rderung externer Zertifizierungen und Professional-Development-Opportunities\n‚Ä¢ Mentoring-Programme f√ºr Wissenstransfer zwischen erfahrenen und neuen Mitarbeitern\n‚Ä¢ Cross-Training-Initiativen f√ºr breitere Compliance-Kompetenz\n‚Ä¢ Aufbau von Centers of Excellence f√ºr kontinuierliche Kompetenzentwicklung\n\nüìä Awareness und Kulturwandel:\n‚Ä¢ Entwicklung von Kommunikationskampagnen zur F√∂rderung einer Compliance-Kultur\n‚Ä¢ Integration von Compliance-Zielen in Performance-Management-Systeme\n‚Ä¢ Recognition-Programme f√ºr herausragende Compliance-Leistungen\n‚Ä¢ Regelm√§√üige Town-Halls und Updates zu regulatorischen Entwicklungen\n‚Ä¢ Schaffung von Feedback-Mechanismen f√ºr kontinuierliche Programm-Verbesserung\n\nüîÑ Kontinuierliche Weiterbildung:\n‚Ä¢ Implementierung regelm√§√üiger Refresher-Trainings f√ºr sich √§ndernde Anforderungen\n‚Ä¢ Integration von Regulatory-Updates in laufende Schulungsprogramme\n‚Ä¢ Entwicklung von Just-in-Time-Learning-Ressourcen f√ºr spezifische Situationen\n‚Ä¢ Aufbau von Knowledge-Management-Systemen f√ºr kontinuierlichen Wissensaustausch\n‚Ä¢ Etablierung von Communities of Practice f√ºr fachlichen Austausch\n\nüìà Messung und Optimierung:\n‚Ä¢ Entwicklung von Metriken zur Bewertung der Schulungseffektivit√§t\n‚Ä¢ Regelm√§√üige Assessments des Compliance-Wissenstands\n‚Ä¢ Feedback-Sammlung und -Analyse f√ºr Programm-Optimierung\n‚Ä¢ ROI-Bewertung von Schulungsinvestitionen\n‚Ä¢ Kontinuierliche Anpassung der Programme basierend auf Lessons Learned"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 3 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
