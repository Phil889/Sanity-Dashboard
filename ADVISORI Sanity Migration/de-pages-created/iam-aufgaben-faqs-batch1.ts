import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating IAM Aufgaben page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'iam-aufgaben' })
    
    if (!existingDoc) {
      throw new Error('Document "iam-aufgaben" not found')
    }
    
    // Create new FAQs for IAM Aufgaben fundamentals
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Welche strategischen IAM Aufgaben sind f√ºr moderne Unternehmen kritisch und wie transformieren sie traditionelle IT-Administration in Business-Enablement?',
        answer: "IAM Aufgaben bilden das operative Herzst√ºck moderner Unternehmenssicherheit und transcendieren traditionelle IT-Administration durch strategische Business-Integration. Diese Aufgaben orchestrieren komplexe Identit√§tslandschaften, automatisieren kritische Sicherheitsprozesse und schaffen die Grundlage f√ºr digitale Transformation, w√§hrend sie gleichzeitig h√∂chste Compliance-Standards gew√§hrleisten und operative Exzellenz erm√∂glichen.\n\nüéØ Strategische Identity Lifecycle Management Aufgaben:\n‚Ä¢ Automated User Provisioning mit intelligenter Rollenverteilung basierend auf Organisationsstrukturen und Gesch√§ftsprozessen\n‚Ä¢ Dynamic Identity Governance f√ºr kontinuierliche √úberwachung und Optimierung von Benutzerberechtigungen\n‚Ä¢ Cross-System Integration f√ºr nahtlose Identit√§tssynchronisation √ºber alle Unternehmensanwendungen\n‚Ä¢ Risk-based Deprovisioning mit automatisierter Compliance-Dokumentation und Audit-Trail-Management\n‚Ä¢ Identity Analytics f√ºr datengetriebene Insights und pr√§diktive Optimierung\n\nüîê Advanced Access Management und Governance Aufgaben:\n‚Ä¢ Access Certification Campaigns mit KI-gest√ºtzten Empfehlungen f√ºr optimale Berechtigungsstrukturen\n‚Ä¢ Segregation of Duties Monitoring f√ºr automatische Erkennung und Aufl√∂sung von Interessenkonflikten\n‚Ä¢ Privileged Access Orchestration mit Just-in-Time-Elevation und umfassendem Session-Monitoring\n‚Ä¢ Adaptive Authentication Management f√ºr kontextbasierte Sicherheitsentscheidungen\n‚Ä¢ Compliance Automation f√ºr kontinuierliche regulatorische Exzellenz und Audit-Bereitschaft\n\n‚ö° Process Optimization und Performance Management:\n‚Ä¢ Workflow Automation f√ºr Eliminierung manueller Prozesse und Reduzierung operativer Risiken\n‚Ä¢ Performance Analytics mit Real-time Dashboards f√ºr kontinuierliche Prozessoptimierung\n‚Ä¢ Bottleneck Analysis f√ºr Identifikation und Beseitigung von Effizienzbarrieren\n‚Ä¢ User Experience Optimization f√ºr maximale Produktivit√§t und Benutzerakzeptanz\n‚Ä¢ Change Management f√ºr nahtlose Transformation und Stakeholder-Enablement\n\nüõ°Ô∏è Security und Risk Management Aufgaben:\n‚Ä¢ Threat Intelligence Integration f√ºr proaktive Abwehr bekannter Angriffsmuster\n‚Ä¢ Behavioral Analytics f√ºr Erkennung anomaler Aktivit√§ten und Insider-Threats\n‚Ä¢ Incident Response Automation f√ºr schnelle Reaktion auf Sicherheitsvorf√§lle\n‚Ä¢ Vulnerability Assessment f√ºr kontinuierliche Sicherheitsbewertung aller Identit√§ten\n‚Ä¢ Risk Scoring mit Machine Learning f√ºr intelligente Priorisierung von Sicherheitsma√ünahmen\n\nüìä Strategic Planning und Innovation Integration:\n‚Ä¢ Technology Roadmap Development f√ºr zukunftssichere IAM-Evolution\n‚Ä¢ Best Practice Implementation f√ºr Industry-Leading Standards und Benchmarking\n‚Ä¢ Innovation Adoption f√ºr Integration neuester Technologien und Methodologien\n‚Ä¢ Business Alignment f√ºr strategische Unterst√ºtzung von Gesch√§ftszielen\n‚Ä¢ Continuous Improvement f√ºr nachhaltige Optimierung und Wettbewerbsvorteile"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Wie orchestriert man Identity Lifecycle Management Aufgaben effektiv und welche Automatisierungsstrategien maximieren operative Effizienz bei minimalen Sicherheitsrisiken?',
        answer: "Identity Lifecycle Management Aufgaben erfordern eine strategische Orchestrierung, die menschliche Expertise mit intelligenter Automatisierung kombiniert, um nahtlose Identit√§tsverwaltung zu gew√§hrleisten. Diese Aufgaben m√ºssen sowohl operative Effizienz als auch h√∂chste Sicherheitsstandards erreichen, w√§hrend sie gleichzeitig Compliance-Anforderungen automatisiert erf√ºllen und Benutzerfreundlichkeit optimieren.\n\nüöÄ Automated Provisioning und Onboarding Excellence:\n‚Ä¢ Intelligent Role Assignment basierend auf Organisationsstrukturen, Abteilungszugeh√∂rigkeit und Gesch√§ftsfunktionen\n‚Ä¢ Business Rule Integration f√ºr automatische Berechtigungsverteilung entsprechend Unternehmensrichtlinien\n‚Ä¢ Multi-System Provisioning mit synchronisierter Kontoerstellung √ºber alle relevanten Anwendungen\n‚Ä¢ Template-based Onboarding f√ºr konsistente und fehlerfreie Benutzereinrichtung\n‚Ä¢ Self-Service Capabilities f√ºr beschleunigte Prozesse und reduzierte IT-Belastung\n\n‚öôÔ∏è Dynamic Identity Governance und Continuous Monitoring:\n‚Ä¢ Real-time Identity Synchronization f√ºr konsistente Datenintegrit√§t √ºber alle Systeme\n‚Ä¢ Automated Attribute Management mit intelligenter Aktualisierung bei Organisations√§nderungen\n‚Ä¢ Policy-driven Access Controls f√ºr automatische Anpassung von Berechtigungen\n‚Ä¢ Exception Handling mit intelligenten Workflows f√ºr komplexe Sonderf√§lle\n‚Ä¢ Identity Validation f√ºr kontinuierliche √úberpr√ºfung der Datenqualit√§t und Konsistenz\n\nüîÑ Intelligent Lifecycle Transitions und Change Management:\n‚Ä¢ Role Change Automation bei Positionswechseln, Bef√∂rderungen oder Abteilungstransfers\n‚Ä¢ Temporary Access Management f√ºr Projektarbeit, Vertretungen oder externe Mitarbeiter\n‚Ä¢ Leave Management mit automatischer Deaktivierung und Reaktivierung von Accounts\n‚Ä¢ Contractor Lifecycle f√ºr zeitlich begrenzte Zugriffe mit automatischer Verl√§ngerung oder Beendigung\n‚Ä¢ Emergency Procedures f√ºr sofortige Deaktivierung bei Sicherheitsvorf√§llen oder Personalwechseln\n\nüõ°Ô∏è Secure Deprovisioning und Compliance Documentation:\n‚Ä¢ Automated Offboarding mit systematischer Entfernung aller Zugriffe und Berechtigungen\n‚Ä¢ Data Retention Management f√ºr compliance-konforme Archivierung von Identit√§tsdaten\n‚Ä¢ Asset Recovery Tracking f√ºr R√ºckgabe von Hardware, Software-Lizenzen und Zugangskarten\n‚Ä¢ Audit Trail Generation f√ºr l√ºckenlose Dokumentation aller Lifecycle-Aktivit√§ten\n‚Ä¢ Compliance Reporting f√ºr automatisierte Erstellung regulatorischer Berichte\n\nüìä Performance Analytics und Continuous Optimization:\n‚Ä¢ Lifecycle Metrics f√ºr Messung von Prozesseffizienz und Identifikation von Verbesserungspotenzialen\n‚Ä¢ User Experience Analytics f√ºr Optimierung der Onboarding und Offboarding Erfahrung\n‚Ä¢ Cost Analysis f√ºr ROI-Bewertung und Ressourcenoptimierung\n‚Ä¢ Process Mining f√ºr Entdeckung von Workflow-Ineffizienzen und Automatisierungsm√∂glichkeiten\n‚Ä¢ Predictive Analytics f√ºr proaktive Kapazit√§tsplanung und Ressourcenallokation\n\nüåê Integration und Ecosystem Management:\n‚Ä¢ API-driven Architecture f√ºr nahtlose Integration mit HR-Systemen und Business-Anwendungen\n‚Ä¢ Cloud-native Scalability f√ºr elastische Ressourcennutzung und globale Verf√ºgbarkeit\n‚Ä¢ Multi-tenant Support f√ºr komplexe Organisationsstrukturen und Tochtergesellschaften\n‚Ä¢ Partner Integration f√ºr sichere B2B-Collaboration und Supply Chain Management\n‚Ä¢ Legacy System Integration ohne Disruption bestehender Gesch√§ftsprozesse"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Welche Access Governance Aufgaben sind f√ºr kontinuierliche Compliance kritisch und wie implementiert man intelligente √úberwachungs- und Optimierungsprozesse?',
        answer: "Access Governance Aufgaben bilden das strategische Fundament f√ºr kontinuierliche Compliance und operative Sicherheitsexzellenz. Diese Aufgaben erfordern eine intelligente Orchestrierung von √úberwachung, Analyse und Optimierung, um sowohl regulatorische Anforderungen zu erf√ºllen als auch operative Effizienz zu maximieren, w√§hrend gleichzeitig Sicherheitsrisiken minimiert und Benutzerproduktivit√§t optimiert werden.\n\nüéØ Strategic Access Certification und Review Management:\n‚Ä¢ Automated Certification Campaigns mit intelligenten Empfehlungen basierend auf historischen Daten und Nutzungsmustern\n‚Ä¢ Risk-based Review Priorisierung f√ºr fokussierte Aufmerksamkeit auf kritische Berechtigungen\n‚Ä¢ Manager-driven Attestation mit Self-Service-Portalen f√ºr effiziente Genehmigungsprozesse\n‚Ä¢ Exception Management f√ºr systematische Behandlung von Compliance-Abweichungen\n‚Ä¢ Continuous Certification f√ºr Real-time √úberwachung statt periodischer Batch-Prozesse\n\nüîç Advanced Segregation of Duties und Conflict Management:\n‚Ä¢ Automated SoD Analysis mit Machine Learning f√ºr Erkennung komplexer Interessenkonflikte\n‚Ä¢ Policy Engine Integration f√ºr dynamische Anwendung von Gesch√§ftsregeln und Compliance-Anforderungen\n‚Ä¢ Conflict Resolution Workflows mit intelligenten Empfehlungen f√ºr optimale L√∂sungsans√§tze\n‚Ä¢ Risk Assessment f√ºr Bewertung und Priorisierung von SoD-Verletzungen\n‚Ä¢ Compensating Controls f√ºr sichere Ausnahmebehandlung bei gesch√§ftskritischen Anforderungen\n\nüìä Intelligent Analytics und Risk Scoring:\n‚Ä¢ Access Pattern Analysis f√ºr Erkennung ungew√∂hnlicher Berechtigungsnutzung und potenzieller Risiken\n‚Ä¢ Behavioral Analytics f√ºr Identifikation von Anomalien und verd√§chtigen Aktivit√§ten\n‚Ä¢ Risk Scoring Algorithms mit kontinuierlicher Anpassung basierend auf Threat Intelligence\n‚Ä¢ Predictive Modeling f√ºr proaktive Identifikation potenzieller Compliance-Probleme\n‚Ä¢ Trend Analysis f√ºr strategische Insights und datengetriebene Entscheidungsfindung\n\n‚ö° Automated Compliance Monitoring und Reporting:\n‚Ä¢ Real-time Compliance Dashboards f√ºr kontinuierliche √úberwachung regulatorischer Anforderungen\n‚Ä¢ Automated Report Generation f√ºr effiziente Erstellung von Audit-Dokumentation\n‚Ä¢ Regulatory Change Management f√ºr proaktive Anpassung an neue Compliance-Anforderungen\n‚Ä¢ Evidence Collection f√ºr systematische Sammlung und Archivierung von Compliance-Nachweisen\n‚Ä¢ Audit Trail Management f√ºr l√ºckenlose Dokumentation aller Governance-Aktivit√§ten\n\nüõ°Ô∏è Proactive Risk Mitigation und Remediation:\n‚Ä¢ Automated Remediation Workflows f√ºr schnelle Behebung identifizierter Compliance-Verst√∂√üe\n‚Ä¢ Risk-based Access Adjustments mit intelligenter Anpassung von Berechtigungen\n‚Ä¢ Preventive Controls f√ºr proaktive Verhinderung von Compliance-Verletzungen\n‚Ä¢ Incident Response Integration f√ºr koordinierte Reaktion auf Sicherheitsvorf√§lle\n‚Ä¢ Continuous Improvement f√ºr nachhaltige Optimierung von Governance-Prozessen\n\nüåê Enterprise Integration und Scalability:\n‚Ä¢ Multi-system Governance f√ºr einheitliche √úberwachung √ºber alle Unternehmensanwendungen\n‚Ä¢ Cloud Integration f√ºr hybride und Multi-Cloud-Umgebungen\n‚Ä¢ API-driven Architecture f√ºr nahtlose Integration mit bestehenden Security-Tools\n‚Ä¢ Global Deployment f√ºr internationale Compliance-Anforderungen und lokale Regulierungen\n‚Ä¢ Performance Optimization f√ºr skalierbare Governance auch in gro√üen Unternehmensumgebungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Wie strukturiert man Privileged Access Management Aufgaben f√ºr maximale Sicherheit und welche operativen Prozesse gew√§hrleisten kontinuierlichen Schutz kritischer Assets?',
        answer: "Privileged Access Management Aufgaben erfordern eine hochspezialisierte Orchestrierung, die kritische Unternehmensassets durch mehrschichtige Sicherheitskontrollen sch√ºtzt. Diese Aufgaben m√ºssen h√∂chste Sicherheitsstandards mit operativer Effizienz vereinen, w√§hrend sie gleichzeitig Compliance-Anforderungen erf√ºllen und Gesch√§ftskontinuit√§t gew√§hrleisten, ohne die Produktivit√§t autorisierter Benutzer zu beeintr√§chtigen.\n\nüîê Strategic Privileged Account Discovery und Inventory Management:\n‚Ä¢ Automated Account Discovery f√ºr systematische Identifikation aller privilegierten Accounts √ºber alle Systeme\n‚Ä¢ Asset Classification mit Risikobewertung f√ºr Priorisierung kritischer Ressourcen\n‚Ä¢ Privileged Account Lifecycle Management f√ºr kontinuierliche √úberwachung und Verwaltung\n‚Ä¢ Orphaned Account Detection f√ºr Identifikation und Bereinigung verwaister privilegierter Accounts\n‚Ä¢ Compliance Mapping f√ºr Zuordnung von Accounts zu regulatorischen Anforderungen\n\n‚ö° Just-in-Time Access und Elevation-on-Demand:\n‚Ä¢ Temporary Privilege Elevation mit automatischer Revokation nach definierten Zeitfenstern\n‚Ä¢ Approval Workflows mit Multi-Level-Genehmigung f√ºr kritische Systemzugriffe\n‚Ä¢ Emergency Access Procedures f√ºr Notfallsituationen mit umfassender Protokollierung\n‚Ä¢ Break-Glass Access mit sofortiger Benachrichtigung und Audit-Trail\n‚Ä¢ Time-based Access Controls mit intelligenten Zeitfenstern und Ausnahmebehandlung\n\nüõ°Ô∏è Advanced Session Management und Monitoring:\n‚Ä¢ Session Recording mit vollst√§ndiger Aufzeichnung aller privilegierten Aktivit√§ten\n‚Ä¢ Real-time Session Monitoring mit sofortiger Erkennung verd√§chtiger Aktivit√§ten\n‚Ä¢ Behavioral Analytics f√ºr Erkennung anomaler Verhaltensmuster privilegierter Benutzer\n‚Ä¢ Command Filtering mit Blockierung gef√§hrlicher Befehle und Aktionen\n‚Ä¢ Session Analytics f√ºr Optimierung von Sicherheitsrichtlinien und Benutzerfreundlichkeit\n\nüîë Comprehensive Credential Management und Protection:\n‚Ä¢ Password Vaulting mit hochsicherer Speicherung und automatischer Rotation privilegierter Credentials\n‚Ä¢ Certificate Management f√ºr PKI-basierte Authentifizierung und sichere Kommunikation\n‚Ä¢ API Key Management f√ºr sichere Verwaltung von Service-to-Service-Authentifizierung\n‚Ä¢ SSH Key Management mit zentralisierter Kontrolle und Lifecycle-Management\n‚Ä¢ Secret Management f√ºr sichere Speicherung und Verteilung von Anwendungsgeheimnissen\n\nüìä Advanced Threat Detection und Response:\n‚Ä¢ Insider Threat Detection mit Machine Learning f√ºr Erkennung kompromittierter Accounts\n‚Ä¢ Lateral Movement Prevention durch Segmentierung und Micro-Perimeter\n‚Ä¢ Threat Intelligence Integration f√ºr proaktive Abwehr bekannter Angriffsmuster\n‚Ä¢ Automated Incident Response mit sofortiger Isolation kompromittierter Accounts\n‚Ä¢ Forensic Capabilities f√ºr detaillierte Analyse von Sicherheitsvorf√§llen\n\nüåê Enterprise Integration und Operational Excellence:\n‚Ä¢ Multi-platform Support f√ºr einheitliche PAM-Kontrollen √ºber alle Betriebssysteme und Anwendungen\n‚Ä¢ Cloud-native Architecture f√ºr skalierbare Deployment-Optionen und globale Verf√ºgbarkeit\n‚Ä¢ DevOps Integration f√ºr sichere Verwaltung privilegierter Zugriffe in CI/CD-Pipelines\n‚Ä¢ Compliance Automation f√ºr kontinuierliche Erf√ºllung regulatorischer Anforderungen\n‚Ä¢ Performance Optimization f√ºr minimale Auswirkungen auf Gesch√§ftsprozesse bei maximaler Sicherheit"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
