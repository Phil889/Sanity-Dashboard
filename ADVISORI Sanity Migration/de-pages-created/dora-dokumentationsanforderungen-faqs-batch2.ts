import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating DORA Dokumentationsanforderungen page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'dora-dokumentationsanforderungen' })
    
    if (!existingDoc) {
      throw new Error('Document "dora-dokumentationsanforderungen" not found')
    }
    
    // Create new FAQs for documentation governance and processes
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Wie etabliere ich eine effektive Dokumentationsgovernance f√ºr DORA-Compliance?',
        answer: "Eine effektive Dokumentationsgovernance ist das Fundament nachhaltiger DORA-Compliance und erfordert klare Strukturen, Prozesse und Verantwortlichkeiten, die sowohl regulatorische Anforderungen erf√ºllen als auch operative Effizienz gew√§hrleisten. Erfolgreiche Dokumentationsgovernance geht √ºber reine Verwaltung hinaus und schafft eine Kultur der Qualit√§t und kontinuierlichen Verbesserung.\n\nüèõÔ∏è Governance-Struktur und Verantwortlichkeiten:\n‚Ä¢ Etablierung eines Dokumentations-Governance-Committees mit Vertretern aus allen relevanten Gesch√§ftsbereichen und klaren Entscheidungsbefugnissen\n‚Ä¢ Definition spezifischer Rollen wie Document Owner, Document Custodian und Document User mit eindeutigen Verantwortlichkeiten und Befugnissen\n‚Ä¢ Aufbau einer Matrix-Organisation mit funktionalen und fachlichen Verantwortlichkeiten f√ºr verschiedene Dokumentenkategorien\n‚Ä¢ Integration der Dokumentationsgovernance in bestehende Governance-Strukturen wie Risk Committees und Audit Committees\n‚Ä¢ Etablierung klarer Eskalationswege f√ºr Dokumentations-bezogene Entscheidungen und Konflikte\n\nüìú Policy- und Standard-Entwicklung:\n‚Ä¢ Entwicklung umfassender Dokumentations-Policies, die alle Aspekte von Erstellung bis Archivierung abdecken\n‚Ä¢ Etablierung einheitlicher Dokumentationsstandards f√ºr Format, Struktur, Sprache und Pr√§sentation\n‚Ä¢ Definition klarer Qualit√§tskriterien und Akzeptanzstandards f√ºr verschiedene Dokumententypen\n‚Ä¢ Aufbau von Compliance-Standards, die spezifische DORA-Anforderungen in operative Dokumentationspraktiken √ºbersetzen\n‚Ä¢ Integration von Datenschutz- und Informationssicherheits-Anforderungen in Dokumentationsstandards\n\nüîÑ Prozess-Design und Workflow-Management:\n‚Ä¢ Entwicklung standardisierter End-to-End-Prozesse f√ºr Dokumentenerstellung, Review, Genehmigung und Ver√∂ffentlichung\n‚Ä¢ Implementierung von Stage-Gate-Prozessen mit klaren Qualit√§tspr√ºfungen und Genehmigungskriterien\n‚Ä¢ Etablierung von Change-Management-Prozessen f√ºr Dokumentenaktualisierungen mit Impact-Assessment und Stakeholder-Kommunikation\n‚Ä¢ Aufbau von Exception-Handling-Prozessen f√ºr Notf√§lle oder au√üergew√∂hnliche Umst√§nde\n‚Ä¢ Integration von Feedback-Loops und kontinuierlichen Verbesserungsmechanismen in alle Dokumentationsprozesse\n\nüìä Performance-Management und Monitoring:\n‚Ä¢ Entwicklung von KPIs f√ºr Dokumentationsqualit√§t, Aktualit√§t, Vollst√§ndigkeit und Benutzerfreundlichkeit\n‚Ä¢ Implementierung regelm√§√üiger Governance-Reviews mit Bewertung der Effektivit√§t von Dokumentationsprozessen\n‚Ä¢ Etablierung von Benchmarking-Programmen zur Bewertung der Dokumentationsreife im Vergleich zu Best Practices\n‚Ä¢ Aufbau von Dashboard-Systemen f√ºr Echtzeit-Monitoring von Dokumentationsstatus und Compliance-Metriken\n‚Ä¢ Integration von Stakeholder-Feedback und Nutzungsstatistiken in kontinuierliche Verbesserungsprozesse\n\nüéì Training und Capability-Building:\n‚Ä¢ Entwicklung umfassender Schulungsprogramme f√ºr alle Dokumentationsrollen und -verantwortlichkeiten\n‚Ä¢ Etablierung von Zertifizierungsprogrammen f√ºr kritische Dokumentationsrollen\n‚Ä¢ Aufbau von Communities of Practice f√ºr Erfahrungsaustausch und Best-Practice-Sharing\n‚Ä¢ Implementation von Mentoring-Programmen f√ºr neue Dokumentenverantwortliche\n‚Ä¢ Integration von Dokumentationskompetenzen in Performance-Management und Karriereentwicklung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Welche Technologien und Tools unterst√ºtzen am besten die DORA-Dokumentationsanforderungen?',
        answer: "Die Auswahl geeigneter Technologien und Tools ist entscheidend f√ºr die effiziente Erf√ºllung der DORA-Dokumentationsanforderungen und sollte sowohl aktuelle Bed√ºrfnisse als auch zuk√ºnftige Skalierbarkeit ber√ºcksichtigen. Moderne Dokumentationsmanagement-Systeme bieten umfassende Funktionalit√§ten, die weit √ºber traditionelle Dokumentenverwaltung hinausgehen und integrierte Compliance-Unterst√ºtzung bieten.\n\nüóÑÔ∏è Enterprise Document Management Systeme:\n‚Ä¢ Implementierung robuster DMS-Plattformen mit nativer Unterst√ºtzung f√ºr regulatorische Compliance und Audit-Trails\n‚Ä¢ Integration von Workflow-Engines f√ºr automatisierte Dokumentenprozesse, Genehmigungsverfahren und Eskalationsmechanismen\n‚Ä¢ Aufbau von Metadaten-Management-Systemen f√ºr erweiterte Suchfunktionen und automatisierte Kategorisierung\n‚Ä¢ Etablierung von Versionskontroll-Systemen mit detaillierter Change-History und Rollback-Funktionalit√§ten\n‚Ä¢ Implementation von Role-based Access Control mit granularen Berechtigungen und Audit-Logging\n\nü§ñ Automatisierung und KI-Integration:\n‚Ä¢ Einsatz von Natural Language Processing f√ºr automatisierte Dokumentenklassifikation und Content-Extraktion\n‚Ä¢ Implementation von Machine Learning Algorithmen f√ºr Qualit√§tspr√ºfungen und Compliance-Validierung\n‚Ä¢ Aufbau von Chatbot-Systemen f√ºr Benutzerunterst√ºtzung und h√§ufige Dokumentationsanfragen\n‚Ä¢ Integration von Robotic Process Automation f√ºr repetitive Dokumentationsprozesse und Daten√ºbertragung\n‚Ä¢ Entwicklung von Predictive Analytics f√ºr proaktive Identifikation von Dokumentationsl√ºcken und Risiken\n\nüìä Business Intelligence und Reporting-Tools:\n‚Ä¢ Implementation von Dashboard-Systemen f√ºr Echtzeit-√úbersicht √ºber Dokumentationsstatus und Compliance-Metriken\n‚Ä¢ Aufbau von Advanced Analytics f√ºr Trend-Analysen und Performance-Monitoring\n‚Ä¢ Integration von Reporting-Tools f√ºr automatisierte Generierung regulatorischer Berichte und Management-Dashboards\n‚Ä¢ Entwicklung von Data Visualization L√∂sungen f√ºr intuitive Darstellung komplexer Dokumentationslandschaften\n‚Ä¢ Etablierung von Self-Service Analytics f√ºr dezentrale Berichterstattung und Ad-hoc-Analysen\n\nüîó Integration und Interoperabilit√§t:\n‚Ä¢ Aufbau von API-basierten Integrationen mit bestehenden Gesch√§ftssystemen und Datenquellen\n‚Ä¢ Implementation von Enterprise Service Bus Architekturen f√ºr nahtlose Systemkommunikation\n‚Ä¢ Integration mit Risk Management Systemen f√ºr automatisierte Risiko-Dokumentation und -Monitoring\n‚Ä¢ Aufbau von Schnittstellen zu Incident Management Systemen f√ºr automatisierte Incident-Dokumentation\n‚Ä¢ Etablierung von Data Governance Plattformen f√ºr konsistente Datenqualit√§t und -standards\n\n‚òÅÔ∏è Cloud-basierte L√∂sungen und Skalierbarkeit:\n‚Ä¢ Evaluation von Cloud-nativen Dokumentationsplattformen f√ºr Skalierbarkeit und Kosteneffizienz\n‚Ä¢ Implementation von Hybrid-Cloud-Architekturen f√ºr Balance zwischen Kontrolle und Flexibilit√§t\n‚Ä¢ Aufbau von Disaster Recovery und Business Continuity L√∂sungen f√ºr kritische Dokumentationssysteme\n‚Ä¢ Integration von Mobile-First-Ans√§tzen f√ºr ortsunabh√§ngigen Zugriff auf kritische Dokumentation\n‚Ä¢ Etablierung von Multi-Tenant-Architekturen f√ºr verschiedene Gesch√§ftsbereiche und regulatorische Anforderungen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Wie dokumentiere ich komplexe IKT-Drittanbieter-Arrangements DORA-konform?',
        answer: "Die DORA-konforme Dokumentation komplexer IKT-Drittanbieter-Arrangements erfordert einen systematischen und vielschichtigen Ansatz, der sowohl die direkten Vertragsbeziehungen als auch die komplexen Interdependenzen und Risiken in der gesamten Lieferkette erfasst. Effektive Drittanbieter-Dokumentation geht √ºber traditionelle Vendor-Management-Praktiken hinaus und schafft vollst√§ndige Transparenz √ºber alle kritischen Abh√§ngigkeiten.\n\nüè¢ Umfassende Vendor-Profile und -Register:\n‚Ä¢ Entwicklung detaillierter Vendor-Profile mit vollst√§ndigen Unternehmensinformationen, Gesch√§ftsmodell-Analysen und Marktpositionierung\n‚Ä¢ Aufbau hierarchischer Vendor-Register, die sowohl direkte als auch Sub-Contractor-Beziehungen abbilden\n‚Ä¢ Dokumentation von Vendor-Kategorisierung basierend auf Kritikalit√§t, Risikoprofil und regulatorischer Relevanz\n‚Ä¢ Etablierung von Vendor-Lifecycle-Dokumentation von Onboarding bis Exit-Management\n‚Ä¢ Integration von Financial Health Monitoring mit regelm√§√üigen Bonit√§tspr√ºfungen und Stabilit√§tsbewertungen\n\nüìã Vertragsdokumentation und SLA-Management:\n‚Ä¢ Vollst√§ndige Dokumentation aller Vertragsbestandteile mit spezifischem Fokus auf DORA-relevante Klauseln und Verpflichtungen\n‚Ä¢ Aufbau detaillierter SLA-Register mit Performance-Metriken, Verf√ºgbarkeitsanforderungen und Penalty-Strukturen\n‚Ä¢ Dokumentation von Sicherheitsanforderungen, Compliance-Verpflichtungen und Audit-Rechten\n‚Ä¢ Etablierung von Change-Management-Prozessen f√ºr Vertragsmodifikationen mit Impact-Assessment\n‚Ä¢ Integration von Exit-Klauseln und Transition-Planungen mit detaillierten Ausstiegsszenarien\n\nüîç Due-Diligence und Risk-Assessment-Dokumentation:\n‚Ä¢ Entwicklung standardisierter Due-Diligence-Frameworks mit spezifischen DORA-Compliance-Pr√ºfungen\n‚Ä¢ Aufbau umfassender Risk-Assessment-Dokumentation f√ºr alle kritischen Drittanbieter-Services\n‚Ä¢ Dokumentation von Security-Assessments, Penetrationstests und Vulnerability-Scans\n‚Ä¢ Etablierung von Compliance-Nachweisen und Zertifizierungsmanagement\n‚Ä¢ Integration von Business Impact Analysen f√ºr verschiedene Ausfallszenarien\n\nüìä Kontinuierliches Monitoring und Performance-Dokumentation:\n‚Ä¢ Implementation von Real-time Monitoring Dashboards f√ºr kritische Drittanbieter-Services\n‚Ä¢ Aufbau von Performance-Trend-Analysen und historischen Vergleichsstudien\n‚Ä¢ Dokumentation von Incident-Histories und deren Auswirkungen auf eigene Gesch√§ftst√§tigkeiten\n‚Ä¢ Etablierung von Escalation-Protokollen und deren Dokumentation\n‚Ä¢ Integration von Stakeholder-Feedback und Service-Quality-Bewertungen\n\nüåê Supply Chain Mapping und Interdependenz-Analyse:\n‚Ä¢ Entwicklung vollst√§ndiger Supply Chain Maps mit allen kritischen Abh√§ngigkeiten und Verbindungen\n‚Ä¢ Aufbau von Interdependenz-Matrizen zur Identifikation von Konzentrationsrisiken und Single Points of Failure\n‚Ä¢ Dokumentation von Datenfl√ºssen und Informationsaustausch zwischen verschiedenen Drittanbietern\n‚Ä¢ Etablierung von Scenario-Planning-Dokumentation f√ºr verschiedene Disruption-Szenarien\n‚Ä¢ Integration von Geographic Risk Mapping f√ºr geopolitische und regulatorische Risikobewertung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Welche Dokumentationsanforderungen gelten f√ºr DORA-Incident-Management und -Reporting?',
        answer: "DORA-Incident-Management-Dokumentation erfordert umfassende und strukturierte Erfassung aller IKT-bezogenen St√∂rungen und deren Management, die sowohl interne Governance-Bed√ºrfnisse als auch regulatorische Berichtspflichten erf√ºllt. Effektive Incident-Dokumentation erm√∂glicht nicht nur Compliance, sondern auch kontinuierliche Verbesserung der operationellen Resilienz durch systematische Analyse und Lessons Learned.\n\nüö® Incident-Klassifikation und Kategorisierung:\n‚Ä¢ Entwicklung umfassender Incident-Taxonomien mit klaren Definitionen f√ºr verschiedene St√∂rungstypen und Schweregrade\n‚Ä¢ Etablierung von Kritikalit√§ts-Matrizen basierend auf Business Impact, Dauer und betroffenen Systemen\n‚Ä¢ Aufbau von Eskalations-Triggern mit automatisierten Benachrichtigungssystemen f√ºr verschiedene Incident-Level\n‚Ä¢ Dokumentation von Incident-Scope-Definitionen zur klaren Abgrenzung von DORA-relevanten St√∂rungen\n‚Ä¢ Integration von Regulatory-Reporting-Kriterien in Incident-Klassifikationssysteme\n\nüìù Chronologische Incident-Dokumentation:\n‚Ä¢ Implementation von Real-time Incident-Logging mit pr√§zisen Zeitstempeln und automatisierter Datenerfassung\n‚Ä¢ Aufbau detaillierter Timeline-Dokumentation von Incident-Detection bis vollst√§ndiger Resolution\n‚Ä¢ Dokumentation aller Response-Aktivit√§ten mit Verantwortlichkeitszuweisungen und Entscheidungsbegr√ºndungen\n‚Ä¢ Etablierung von Communication-Logs f√ºr interne und externe Stakeholder-Kommunikation\n‚Ä¢ Integration von Evidence-Collection-Prozessen f√ºr forensische Analysen und Compliance-Nachweise\n\nüîç Root-Cause-Analysis und Impact-Assessment:\n‚Ä¢ Entwicklung standardisierter RCA-Methodiken mit strukturierten Analyseprozessen und Dokumentationsformaten\n‚Ä¢ Aufbau umfassender Impact-Assessment-Frameworks f√ºr Business-, Financial- und Reputational-Impact\n‚Ä¢ Dokumentation von Contributing-Factors und System-Interdependenzen, die zu Incidents beigetragen haben\n‚Ä¢ Etablierung von Lessons-Learned-Prozesse mit systematischer Erfassung und Verbreitung von Erkenntnissen\n‚Ä¢ Integration von Trend-Analysen zur Identifikation wiederkehrender Probleme und systemischer Schw√§chen\n\nüìä Regulatorische Berichterstattung und Compliance:\n‚Ä¢ Implementation automatisierter Regulatory-Reporting-Systeme f√ºr zeitnahe Meldungen an Aufsichtsbeh√∂rden\n‚Ä¢ Aufbau von Compliance-Checklisten f√ºr verschiedene Reporting-Anforderungen und Jurisdiktionen\n‚Ä¢ Dokumentation von Stakeholder-Notifications und deren Timing entsprechend regulatorischer Vorgaben\n‚Ä¢ Etablierung von Follow-up-Reporting-Prozesse f√ºr Updates und Final-Reports\n‚Ä¢ Integration von Legal-Review-Prozesse f√ºr kritische Incident-Communications\n\nüîÑ Recovery und Business Continuity Dokumentation:\n‚Ä¢ Vollst√§ndige Dokumentation aller Recovery-Aktivit√§ten mit Zeitstempeln und Verantwortlichkeitszuweisungen\n‚Ä¢ Aufbau von Business Continuity Activation-Logs mit Entscheidungsprozessen und Ressourcenallokation\n‚Ä¢ Dokumentation von Workaround-L√∂sungen und deren Effektivit√§t w√§hrend Incident-Response\n‚Ä¢ Etablierung von Service-Restoration-Tracking mit detaillierten Recovery-Metriken\n‚Ä¢ Integration von Post-Incident-Review-Prozesse mit systematischer Bewertung der Response-Effektivit√§t"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
