import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating DORA ISO 27001 Mapping page with FAQ batch 3...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'dora-iso-27001-mapping' })
    
    if (!existingDoc) {
      throw new Error('Document "dora-iso-27001-mapping" not found')
    }
    
    // Create new FAQs for risk management integration and incident response alignment
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 9),
        question: 'Wie integriere ich ISO 27001 Risikomanagement-Prozesse mit DORA-spezifischen Risikoanforderungen?',
        answer: "Die Integration von ISO 27001 Risikomanagement-Prozessen mit DORA-spezifischen Anforderungen erfordert eine strategische Erweiterung bestehender Frameworks, um sowohl traditionelle Informationssicherheitsrisiken als auch spezifische operative Resilienz-Risiken des Finanzsektors abzudecken. Eine effektive Integration schafft Synergien und gew√§hrleistet eine umfassende Risikoabdeckung.\n\nüéØ Erweiterte Risikokategorisierung und -bewertung:\n‚Ä¢ Erg√§nzen Sie bestehende ISO 27001 Risikokategorien um DORA-spezifische operative Resilienz-Risiken und IKT-Abh√§ngigkeiten\n‚Ä¢ Entwickeln Sie erweiterte Risikobewertungskriterien, die sowohl traditionelle Sicherheitsrisiken als auch finanzspezifische operative Risiken ber√ºcksichtigen\n‚Ä¢ Implementieren Sie spezifische Bewertungsverfahren f√ºr kritische IKT-Services und deren potenzielle Auswirkungen auf die Gesch√§ftskontinuit√§t\n‚Ä¢ Schaffen Sie integrierte Risiko-Scoring-Systeme, die beide Frameworks in einheitlichen Metriken abbilden\n‚Ä¢ Etablieren Sie erweiterte Szenario-Analysen, die komplexe Interdependenzen zwischen verschiedenen Risikokategorien ber√ºcksichtigen\n\nüîÑ Integrierte Risikomanagement-Prozesse:\n‚Ä¢ Erweitern Sie bestehende Risikoidentifikations-Prozesse um kontinuierliche √úberwachung von DORA-relevanten Bedrohungen und Vulnerabilit√§ten\n‚Ä¢ Entwickeln Sie integrierte Risikobewertungs-Workflows, die sowohl ISO 27001 als auch DORA-Kriterien in einheitlichen Prozessen anwenden\n‚Ä¢ Implementieren Sie erweiterte Risiko-Monitoring-Systeme, die Real-Time-√úberwachung kritischer IKT-Services und -Abh√§ngigkeiten erm√∂glichen\n‚Ä¢ Schaffen Sie integrierte Risiko-Reporting-Strukturen, die beide Compliance-Bereiche in koh√§renten Management-Reports abbilden\n‚Ä¢ Etablieren Sie erweiterte Risiko-Treatment-Strategien, die spezifische DORA-Anforderungen f√ºr operative Resilienz ber√ºcksichtigen\n\nüìä Drittanbieter-Risikomanagement-Integration:\n‚Ä¢ Erweitern Sie bestehende Vendor-Risk-Assessments um DORA-spezifische Kriterien f√ºr kritische IKT-Drittanbieter\n‚Ä¢ Entwickeln Sie integrierte Due-Diligence-Prozesse, die sowohl ISO 27001 als auch DORA-Anforderungen f√ºr Drittanbieter-Bewertungen abdecken\n‚Ä¢ Implementieren Sie kontinuierliche Monitoring-Systeme f√ºr kritische Drittanbieter-Services und deren Risikoprofile\n‚Ä¢ Schaffen Sie erweiterte Konzentrations-Risiko-Analysen, die Abh√§ngigkeiten von kritischen Service-Providern bewerten\n‚Ä¢ Etablieren Sie integrierte Exit-Strategy-Planungen, die sowohl Sicherheits- als auch operative Resilienz-Aspekte ber√ºcksichtigen\n\nüé™ Governance-Integration und Oversight:\n‚Ä¢ Erweitern Sie bestehende Risk-Committees um DORA-spezifische Expertise und Verantwortlichkeiten\n‚Ä¢ Entwickeln Sie integrierte Risk-Appetite-Statements, die sowohl ISO 27001 als auch DORA-Risikotoleranz definieren\n‚Ä¢ Implementieren Sie erweiterte Eskalations-Prozesse, die kritische operative Risiken angemessen an Management und Aufsichtsbeh√∂rden kommunizieren\n‚Ä¢ Schaffen Sie integrierte Risk-Dashboard-L√∂sungen, die Real-Time-Visibility in beide Risikobereiche bieten\n‚Ä¢ Etablieren Sie regelm√§√üige Risk-Reviews, die strategische Entwicklungen in beiden Compliance-Bereichen ber√ºcksichtigen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 10),
        question: 'Wie harmonisiere ich ISO 27001 Incident-Response mit DORA-spezifischen Incident-Management-Anforderungen?',
        answer: "Die Harmonisierung von ISO 27001 Incident-Response mit DORA-spezifischen Anforderungen erfordert eine strategische Erweiterung bestehender Prozesse, um sowohl traditionelle Sicherheitsvorf√§lle als auch spezifische operative Resilienz-Incidents des Finanzsektors effektiv zu bew√§ltigen. Eine integrierte Herangehensweise maximiert Effizienz und gew√§hrleistet regulatorische Compliance.\n\nüö® Erweiterte Incident-Klassifizierung und -Kategorisierung:\n‚Ä¢ Erg√§nzen Sie bestehende ISO 27001 Incident-Kategorien um DORA-spezifische Klassifizierungen f√ºr operative Resilienz-Vorf√§lle\n‚Ä¢ Entwickeln Sie integrierte Severity-Rating-Systeme, die sowohl Sicherheits- als auch operative Auswirkungen ber√ºcksichtigen\n‚Ä¢ Implementieren Sie spezifische Kategorisierungen f√ºr IKT-Service-Ausf√§lle, Drittanbieter-Incidents und systemische Risiko-Events\n‚Ä¢ Schaffen Sie erweiterte Impact-Assessment-Kriterien, die finanzspezifische Gesch√§ftsauswirkungen und regulatorische Implikationen bewerten\n‚Ä¢ Etablieren Sie automatisierte Klassifizierungs-Algorithmen, die Incidents basierend auf beiden Framework-Anforderungen einordnen\n\n‚è±Ô∏è Integrierte Response-Timelines und Eskalation:\n‚Ä¢ Harmonisieren Sie ISO 27001 Response-Timelines mit DORA-spezifischen Berichtspflichten und regulatorischen Fristen\n‚Ä¢ Entwickeln Sie erweiterte Eskalations-Matrizen, die sowohl interne Stakeholder als auch externe Aufsichtsbeh√∂rden ber√ºcksichtigen\n‚Ä¢ Implementieren Sie automatisierte Alerting-Systeme, die kritische Incidents basierend auf beiden Framework-Kriterien eskalieren\n‚Ä¢ Schaffen Sie integrierte Communication-Workflows, die sowohl interne Teams als auch regulatorische Berichtspflichten bedienen\n‚Ä¢ Etablieren Sie erweiterte Tracking-Systeme, die Compliance mit beiden Standard-Anforderungen kontinuierlich √ºberwachen\n\nüìã Erweiterte Dokumentation und Berichtswesen:\n‚Ä¢ Erg√§nzen Sie bestehende Incident-Documentation um DORA-spezifische Berichtselemente und regulatorische Anforderungen\n‚Ä¢ Entwickeln Sie integrierte Incident-Reports, die sowohl ISO 27001 als auch DORA-Compliance-Nachweise liefern\n‚Ä¢ Implementieren Sie automatisierte Report-Generation f√ºr regulatorische Berichtspflichten bei kritischen Incidents\n‚Ä¢ Schaffen Sie erweiterte Evidence-Collection-Prozesse, die beide Framework-Anforderungen f√ºr Forensik und Analyse erf√ºllen\n‚Ä¢ Etablieren Sie integrierte Lessons-Learned-Dokumentation, die Verbesserungen in beiden Compliance-Bereichen f√∂rdert\n\nüîß Technische Integration und Automation:\n‚Ä¢ Erweitern Sie bestehende Incident-Response-Tools um DORA-spezifische Workflows und Automation-Capabilities\n‚Ä¢ Implementieren Sie integrierte SOAR-Plattformen, die beide Framework-Anforderungen in automatisierten Playbooks abbilden\n‚Ä¢ Schaffen Sie erweiterte Integration mit Monitoring-Systemen f√ºr Real-Time-Detection kritischer operative Incidents\n‚Ä¢ Etablieren Sie automatisierte Compliance-Checks, die sicherstellen, dass Response-Aktivit√§ten beide Standards erf√ºllen\n‚Ä¢ Entwickeln Sie integrierte Metrics-Collection f√ºr kontinuierliche Verbesserung der Response-Capabilities in beiden Bereichen"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 11),
        question: 'Welche Governance-Strukturen ben√∂tige ich f√ºr eine effektive Integration von ISO 27001 und DORA?',
        answer: "Die Entwicklung effektiver Governance-Strukturen f√ºr die Integration von ISO 27001 und DORA erfordert eine strategische Neugestaltung bestehender Organisationsstrukturen, um sowohl traditionelle Informationssicherheit als auch spezifische operative Resilienz-Anforderungen des Finanzsektors zu koordinieren. Eine integrierte Governance schafft Klarheit, Effizienz und strategische Ausrichtung.\n\nüèõÔ∏è Integrierte Governance-Architektur und Organisationsdesign:\n‚Ä¢ Erweitern Sie bestehende Information Security Governance um dedizierte DORA-Compliance-Funktionen und operative Resilienz-Verantwortlichkeiten\n‚Ä¢ Schaffen Sie Cross-funktionale Steering-Committees, die strategische Entscheidungen f√ºr beide Compliance-Bereiche koordinieren\n‚Ä¢ Etablieren Sie integrierte Reporting-Lines, die sowohl Sicherheits- als auch operative Resilienz-Aspekte an das Senior Management kommunizieren\n‚Ä¢ Entwickeln Sie Matrix-Organisationsstrukturen, die Expertise aus verschiedenen Bereichen f√ºr beide Framework-Anforderungen b√ºndeln\n‚Ä¢ Implementieren Sie klare Accountability-Strukturen, die Verantwortlichkeiten f√ºr beide Standards eindeutig zuweisen\n\nüìä Strategische Planung und Oversight-Funktionen:\n‚Ä¢ Entwickeln Sie integrierte Strategic-Planning-Prozesse, die sowohl ISO 27001 als auch DORA-Roadmaps in koh√§renten Strategien vereinen\n‚Ä¢ Schaffen Sie erweiterte Board-Oversight-Strukturen, die beide Compliance-Bereiche in regelm√§√üigen Governance-Reviews abdecken\n‚Ä¢ Implementieren Sie integrierte Budget-Planning und Resource-Allocation-Prozesse f√ºr beide Framework-Anforderungen\n‚Ä¢ Etablieren Sie erweiterte Performance-Management-Systeme, die KPIs f√ºr beide Standards in einheitlichen Scorecards verfolgen\n‚Ä¢ Entwickeln Sie integrierte Risk-Appetite-Frameworks, die Risikotoleranz f√ºr beide Bereiche strategisch definieren\n\nüîÑ Operative Governance und Entscheidungsprozesse:\n‚Ä¢ Schaffen Sie integrierte Decision-Making-Frameworks, die beide Compliance-Bereiche in operativen Entscheidungen ber√ºcksichtigen\n‚Ä¢ Entwickeln Sie erweiterte Change-Governance-Prozesse, die sowohl Sicherheits- als auch operative Resilienz-Impacts bewerten\n‚Ä¢ Implementieren Sie integrierte Vendor-Governance-Strukturen f√ºr kritische IKT-Drittanbieter und Service-Provider\n‚Ä¢ Etablieren Sie erweiterte Incident-Governance-Prozesse, die beide Framework-Anforderungen in Response-Entscheidungen einbeziehen\n‚Ä¢ Schaffen Sie integrierte Compliance-Monitoring-Strukturen, die kontinuierliche Oversight f√ºr beide Standards gew√§hrleisten\n\n‚öñÔ∏è Compliance-Integration und regulatorische Koordination:\n‚Ä¢ Entwickeln Sie integrierte Compliance-Functions, die sowohl ISO 27001 als auch DORA-Anforderungen in einheitlichen Programmen verwalten\n‚Ä¢ Schaffen Sie erweiterte Legal-und-Regulatory-Affairs-Strukturen, die beide Compliance-Bereiche strategisch koordinieren\n‚Ä¢ Implementieren Sie integrierte Audit-Coordination-Prozesse, die interne und externe Audits f√ºr beide Standards optimieren\n‚Ä¢ Etablieren Sie erweiterte Stakeholder-Management-Strukturen f√ºr Kommunikation mit Aufsichtsbeh√∂rden und anderen externen Parteien\n‚Ä¢ Entwickeln Sie integrierte Training-und-Awareness-Governance, die Kompetenzentwicklung in beiden Bereichen strategisch steuert"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 12),
        question: 'Wie entwickle ich integrierte KPIs und Metriken f√ºr ISO 27001 und DORA-Compliance?',
        answer: "Die Entwicklung integrierter KPIs und Metriken f√ºr ISO 27001 und DORA-Compliance erfordert eine strategische Herangehensweise, die sowohl traditionelle Informationssicherheits-Metriken als auch spezifische operative Resilienz-Indikatoren des Finanzsektors in einem koh√§renten Measurement-Framework vereint. Effektive Metriken schaffen Transparenz, erm√∂glichen datengetriebene Entscheidungen und demonstrieren Compliance-Erfolg.\n\nüìä Integrierte Metric-Framework-Entwicklung:\n‚Ä¢ Entwickeln Sie ein hierarchisches KPI-System, das strategische, taktische und operative Metriken f√ºr beide Compliance-Bereiche strukturiert\n‚Ä¢ Schaffen Sie Balanced-Scorecard-Ans√§tze, die sowohl ISO 27001 als auch DORA-Performance in ausgewogenen Perspektiven darstellen\n‚Ä¢ Implementieren Sie Leading-und-Lagging-Indicator-Kombinationen, die sowohl pr√§ventive als auch reaktive Aspekte beider Standards messen\n‚Ä¢ Etablieren Sie Benchmark-Frameworks, die Performance gegen Industry-Standards und Best Practices in beiden Bereichen bewerten\n‚Ä¢ Entwickeln Sie integrierte Maturity-Assessment-Metriken, die Fortschritt in beiden Compliance-Bereichen kontinuierlich verfolgen\n\nüéØ Spezifische Performance-Indikatoren und Measurement-Bereiche:\n‚Ä¢ Schaffen Sie integrierte Availability-und-Resilience-Metriken, die sowohl ISO 27001 als auch DORA-Anforderungen f√ºr Systemverf√ºgbarkeit abdecken\n‚Ä¢ Entwickeln Sie erweiterte Incident-Response-KPIs, die Response-Times, Resolution-Rates und Compliance-Adherence f√ºr beide Standards messen\n‚Ä¢ Implementieren Sie integrierte Risk-Management-Metriken, die Risiko-Identification, -Assessment und -Mitigation-Effectiveness in beiden Bereichen verfolgen\n‚Ä¢ Etablieren Sie erweiterte Vendor-Management-KPIs, die Performance kritischer Drittanbieter und Compliance mit beiden Framework-Anforderungen bewerten\n‚Ä¢ Schaffen Sie integrierte Training-und-Awareness-Metriken, die Kompetenzentwicklung und Compliance-Kultur in beiden Bereichen messen\n\nüìà Datensammlung und Analytics-Integration:\n‚Ä¢ Implementieren Sie automatisierte Data-Collection-Systeme, die Metriken f√ºr beide Standards aus verschiedenen Quellen aggregieren\n‚Ä¢ Entwickeln Sie integrierte Dashboard-L√∂sungen, die Real-Time-Visibility in beide Compliance-Bereiche durch einheitliche Visualisierungen bieten\n‚Ä¢ Schaffen Sie erweiterte Analytics-Capabilities, die Trend-Analysis, Predictive-Modeling und Correlation-Analysis f√ºr beide Bereiche erm√∂glichen\n‚Ä¢ Etablieren Sie Data-Quality-Management-Prozesse, die Accuracy, Completeness und Timeliness der Metriken f√ºr beide Standards gew√§hrleisten\n‚Ä¢ Implementieren Sie integrierte Reporting-Automation, die regelm√§√üige Performance-Reports f√ºr beide Compliance-Bereiche generiert\n\nüîÑ Kontinuierliche Verbesserung und Optimization:\n‚Ä¢ Entwickeln Sie Feedback-Loops, die Metric-Effectiveness kontinuierlich bewerten und Verbesserungen in beiden Bereichen identifizieren\n‚Ä¢ Schaffen Sie integrierte Benchmarking-Prozesse, die Performance gegen externe Standards und Peer-Organizations in beiden Bereichen vergleichen\n‚Ä¢ Implementieren Sie regelm√§√üige Metric-Reviews, die Relevanz, Accuracy und Actionability der KPIs f√ºr beide Standards bewerten\n‚Ä¢ Etablieren Sie Action-Planning-Prozesse, die Performance-Gaps in beiden Bereichen systematisch adressieren\n‚Ä¢ Entwickeln Sie integrierte Communication-Strategien, die Metric-Results effektiv an verschiedene Stakeholder-Gruppen f√ºr beide Compliance-Bereiche vermitteln"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 3 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
