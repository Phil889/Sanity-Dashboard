import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating DORA Governance page with FAQ batch 2...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'dora-governance' })
    
    if (!existingDoc) {
      throw new Error('Document "dora-governance" not found')
    }
    
    // Create new FAQs for DORA governance management structures
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 5),
        question: 'Wie etabliere ich klare Rollen und Verantwortlichkeiten f√ºr IKT-Risikomanagement in meiner Organisation?',
        answer: "Die Etablierung klarer Rollen und Verantwortlichkeiten f√ºr IKT-Risikomanagement ist fundamental f√ºr effektive DORA-Governance und erfordert eine systematische Herangehensweise, die sowohl organisatorische Strukturen als auch individuelle Accountability ber√ºcksichtigt. Erfolgreiche Implementierung schafft Klarheit, vermeidet Verantwortungsl√ºcken und gew√§hrleistet effektive Koordination zwischen verschiedenen Organisationsebenen.\n\nüéØ RACI-Matrix-Entwicklung und Verantwortlichkeits-Mapping:\n‚Ä¢ Systematische Identifikation aller IKT-Risikomanagement-Prozesse und deren Aufschl√ºsselung in spezifische Aktivit√§ten und Entscheidungspunkte\n‚Ä¢ Entwicklung einer umfassenden RACI-Matrix, die f√ºr jede Aktivit√§t klar definiert, wer verantwortlich, rechenschaftspflichtig, konsultiert und informiert wird\n‚Ä¢ Ber√ºcksichtigung verschiedener Risikokategorien wie Cyber-Risiken, operationelle IKT-Risiken, Drittanbieter-Risiken und Business-Continuity-Aspekte\n‚Ä¢ Integration von Eskalationswegen und Entscheidungshierarchien f√ºr verschiedene Risiko-Szenarien und Incident-Typen\n‚Ä¢ Regelm√§√üige √úberpr√ºfung und Aktualisierung der RACI-Matrix basierend auf organisatorischen Ver√§nderungen und Lessons Learned\n\nüë• Organisationsstruktur und Governance-Committees:\n‚Ä¢ Etablierung spezialisierter IKT-Risiko-Committees auf verschiedenen Organisationsebenen mit klaren Mandaten und Entscheidungsbefugnissen\n‚Ä¢ Definition der Zusammensetzung, H√§ufigkeit und Agenda dieser Committees zur Gew√§hrleistung effektiver Oversight und Entscheidungsfindung\n‚Ä¢ Schaffung klarer Berichtslinien zwischen operativen Teams, mittlerem Management und Board-Level-Committees\n‚Ä¢ Integration von IKT-Risiko-Verantwortlichkeiten in bestehende Organisationsstrukturen ohne Schaffung paralleler Hierarchien\n‚Ä¢ Sicherstellung angemessener Repr√§sentation verschiedener Gesch√§ftsbereiche und Fachexpertisen in IKT-Governance-Strukturen\n\nüìã Job Descriptions und Competency Frameworks:\n‚Ä¢ √úberarbeitung bestehender Stellenbeschreibungen zur expliziten Einbeziehung von IKT-Risikomanagement-Verantwortlichkeiten\n‚Ä¢ Entwicklung spezifischer Kompetenzprofile f√ºr verschiedene IKT-Risikomanagement-Rollen, von technischen Spezialisten bis hin zu Senior Management\n‚Ä¢ Definition klarer Qualifikationsanforderungen und Erfahrungsprofile f√ºr kritische IKT-Risikomanagement-Positionen\n‚Ä¢ Integration von IKT-Risiko-Kompetenzen in Rekrutierungs- und Bef√∂rderungsprozesse\n‚Ä¢ Entwicklung von Schulungs- und Entwicklungsprogrammen zur St√§rkung der IKT-Risiko-Kompetenzen in der gesamten Organisation\n\nüîó Three Lines of Defense Integration:\n‚Ä¢ Klare Abgrenzung der IKT-Risikomanagement-Verantwortlichkeiten zwischen den drei Verteidigungslinien\n‚Ä¢ Erste Linie: Gesch√§ftsbereiche und operative Einheiten als Risiko-Owner mit direkter Verantwortung f√ºr IKT-Risiko-Kontrollen\n‚Ä¢ Zweite Linie: Spezialisierte IKT-Risikomanagement-Funktionen mit Oversight-, Monitoring- und Beratungsverantwortlichkeiten\n‚Ä¢ Dritte Linie: Interne Revision mit unabh√§ngiger Bewertung der Effektivit√§t des IKT-Risikomanagement-Frameworks\n‚Ä¢ Sicherstellung effektiver Koordination und Informationsaustausch zwischen den Linien ohne Verwischung der Verantwortlichkeiten"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 6),
        question: 'Welche Governance-Strukturen ben√∂tige ich f√ºr das Management kritischer IKT-Drittanbieter?',
        answer: "Das Management kritischer IKT-Drittanbieter erfordert spezialisierte Governance-Strukturen, die sowohl strategische Oversight als auch operative Effektivit√§t gew√§hrleisten. Diese Strukturen m√ºssen die einzigartigen Herausforderungen von Drittanbieter-Beziehungen ber√ºcksichtigen, einschlie√ülich begrenzter direkter Kontrolle, Konzentrationsrisiken und regulatorischer Komplexit√§t.\n\nüèõÔ∏è Drittanbieter-Governance-Committee-Strukturen:\n‚Ä¢ Etablierung eines Senior-Level Vendor Governance Committee mit Vertretern aus Gesch√§ftsbereichen, IT, Risikomanagement, Compliance und Beschaffung\n‚Ä¢ Schaffung spezialisierter Sub-Committees f√ºr verschiedene Drittanbieter-Kategorien oder kritische Services\n‚Ä¢ Definition klarer Mandate, Entscheidungsbefugnisse und Eskalationswege f√ºr Drittanbieter-bezogene Entscheidungen\n‚Ä¢ Integration von Drittanbieter-Governance in bestehende Risk-Committee-Strukturen und Board-Reporting\n‚Ä¢ Sicherstellung regelm√§√üiger Reviews und strategischer Diskussionen √ºber Drittanbieter-Portfolio und -Strategie\n\nüìä Strategisches Drittanbieter-Portfolio-Management:\n‚Ä¢ Entwicklung einer umfassenden Drittanbieter-Taxonomie und Klassifizierungsmatrix basierend auf Kritikalit√§t, Risiko und strategischer Bedeutung\n‚Ä¢ Implementierung von Portfolio-Management-Ans√§tzen zur Optimierung der Drittanbieter-Landschaft und Reduzierung von Konzentrationsrisiken\n‚Ä¢ Etablierung strategischer Vendor-Relationship-Management-Prozesse f√ºr kritische Drittanbieter\n‚Ä¢ Entwicklung von Diversifikationsstrategien und Exit-Pl√§nen f√ºr kritische Services\n‚Ä¢ Integration von Drittanbieter-Considerations in strategische Gesch√§ftsentscheidungen und Technologie-Roadmaps\n\nüîç Due Diligence und Ongoing Monitoring Governance:\n‚Ä¢ Etablierung robuster Due-Diligence-Prozesse mit klaren Governance-Checkpoints und Genehmigungsverfahren\n‚Ä¢ Implementierung kontinuierlicher Monitoring-Programme mit definierten KPIs und Eskalations-Triggern\n‚Ä¢ Entwicklung von Vendor-Scorecards und Performance-Management-Systemen\n‚Ä¢ Sicherstellung regelm√§√üiger Vendor-Assessments und Relationship-Reviews\n‚Ä¢ Integration von Drittanbieter-Risiko-Indikatoren in Enterprise-Risk-Management-Dashboards\n\n‚öñÔ∏è Vertragliche Governance und Compliance-Management:\n‚Ä¢ Entwicklung standardisierter Vertragsvorlagen mit robusten Governance-Klauseln und Compliance-Anforderungen\n‚Ä¢ Etablierung von Contract-Governance-Prozessen mit klaren Rollen f√ºr Vertragsverhandlung, -genehmigung und -management\n‚Ä¢ Implementierung von Compliance-Monitoring-Mechanismen f√ºr vertragliche Verpflichtungen\n‚Ä¢ Sicherstellung angemessener Audit-Rechte und Transparenz-Anforderungen in Drittanbieter-Vertr√§gen\n‚Ä¢ Integration von regulatorischen Anforderungen und Change-Management-Prozessen in Vertragsstrukturen\n\nüö® Incident-Management und Crisis-Governance:\n‚Ä¢ Entwicklung spezialisierter Incident-Response-Prozesse f√ºr Drittanbieter-bezogene St√∂rungen\n‚Ä¢ Etablierung von Crisis-Management-Strukturen mit klaren Rollen und Verantwortlichkeiten\n‚Ä¢ Sicherstellung effektiver Kommunikation und Koordination mit Drittanbietern w√§hrend Incidents\n‚Ä¢ Integration von Drittanbieter-Incidents in Enterprise-Incident-Management-Frameworks\n‚Ä¢ Entwicklung von Business-Continuity-Pl√§nen f√ºr kritische Drittanbieter-Ausf√§lle"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 7),
        question: 'Wie stelle ich sicher, dass meine IKT-Governance-Strukturen mit sich √§ndernden regulatorischen Anforderungen Schritt halten?',
        answer: "Die Gew√§hrleistung der Anpassungsf√§higkeit von IKT-Governance-Strukturen an sich √§ndernde regulatorische Anforderungen erfordert einen proaktiven und systematischen Ansatz zum Regulatory Change Management. Erfolgreiche Organisationen etablieren robuste Mechanismen zur fr√ºhzeitigen Identifikation, Bewertung und Integration regulatorischer Entwicklungen in ihre Governance-Frameworks.\n\nüîç Regulatory Intelligence und Horizon Scanning:\n‚Ä¢ Etablierung systematischer Monitoring-Prozesse f√ºr regulatorische Entwicklungen auf nationaler und internationaler Ebene\n‚Ä¢ Aufbau von Beziehungen zu Regulatoren, Branchenverb√§nden und Beratungsunternehmen f√ºr fr√ºhzeitige Einblicke\n‚Ä¢ Implementierung von Regulatory Intelligence Systemen und Alerts f√ºr relevante Gesetzgebungs- und Regulierungsentwicklungen\n‚Ä¢ Regelm√§√üige Teilnahme an Branchenkonferenzen, Konsultationen und Stakeholder-Engagements\n‚Ä¢ Entwicklung von Netzwerken mit Peers und Experten f√ºr Erfahrungsaustausch und Best-Practice-Sharing\n\nüìã Impact Assessment und Gap-Analyse-Prozesse:\n‚Ä¢ Entwicklung standardisierter Methoden zur Bewertung der Auswirkungen neuer regulatorischer Anforderungen auf bestehende Governance-Strukturen\n‚Ä¢ Implementierung systematischer Gap-Analyse-Prozesse zur Identifikation von Anpassungsbedarfen\n‚Ä¢ Etablierung von Cross-funktionalen Teams f√ºr die Bewertung regulatorischer Impacts auf verschiedene Gesch√§ftsbereiche\n‚Ä¢ Entwicklung von Priorisierungs-Frameworks f√ºr regulatorische √Ñnderungen basierend auf Risiko und Business Impact\n‚Ä¢ Sicherstellung angemessener Dokumentation und Nachvollziehbarkeit von Impact-Assessments\n\nüîÑ Agile Governance-Design und Anpassungsmechanismen:\n‚Ä¢ Design von Governance-Strukturen mit eingebauter Flexibilit√§t und Anpassungsf√§higkeit\n‚Ä¢ Implementierung modularer Governance-Frameworks, die leicht erweitert oder modifiziert werden k√∂nnen\n‚Ä¢ Etablierung von Change-Management-Prozessen speziell f√ºr Governance-Anpassungen\n‚Ä¢ Entwicklung von Pilot-Programmen und Sandbox-Ans√§tzen f√ºr die Erprobung neuer Governance-Mechanismen\n‚Ä¢ Sicherstellung regelm√§√üiger Reviews und Updates von Governance-Dokumenten und -Prozessen\n\nüìä Kontinuierliches Monitoring und Performance-Management:\n‚Ä¢ Implementierung von KPIs und Metriken zur Bewertung der Effektivit√§t von Governance-Anpassungen\n‚Ä¢ Etablierung regelm√§√üiger Governance-Effectiveness-Reviews mit Fokus auf regulatorische Compliance\n‚Ä¢ Entwicklung von Feedback-Mechanismen zur kontinuierlichen Verbesserung der Governance-Strukturen\n‚Ä¢ Sicherstellung angemessener Berichterstattung √ºber Governance-Anpassungen an Board und Aufsichtsbeh√∂rden\n‚Ä¢ Integration von Lessons Learned aus regulatorischen Entwicklungen in zuk√ºnftige Governance-Designs\n\nüéì Capability Building und Expertise-Entwicklung:\n‚Ä¢ Investition in kontinuierliche Weiterbildung und Kompetenzentwicklung f√ºr Governance-Teams\n‚Ä¢ Aufbau interner Expertise zu regulatorischen Trends und deren Auswirkungen auf IKT-Governance\n‚Ä¢ Entwicklung von Schulungsprogrammen f√ºr verschiedene Organisationsebenen zu regulatorischen Anforderungen\n‚Ä¢ Etablierung von Centers of Excellence oder Expertise-Netzwerken f√ºr regulatorische und Governance-Themen\n‚Ä¢ Sicherstellung angemessener Ressourcenallokation f√ºr Governance-Transformation und -Anpassung"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 8),
        question: 'Welche Performance-Indikatoren und Metriken sollte ich f√ºr die Bewertung der Effektivit√§t meiner DORA-Governance verwenden?',
        answer: "Die Bewertung der Effektivit√§t von DORA-Governance erfordert ein ausgewogenes Set von Performance-Indikatoren und Metriken, die sowohl quantitative als auch qualitative Aspekte der Governance-Performance erfassen. Erfolgreiche Metriken-Frameworks kombinieren Leading- und Lagging-Indikatoren und erm√∂glichen sowohl strategische Oversight als auch operative Steuerung.\n\nüìä Governance-Maturity und Strukturelle Indikatoren:\n‚Ä¢ Governance-Maturity-Scores basierend auf etablierten Frameworks wie COBIT oder ISO 38500\n‚Ä¢ Vollst√§ndigkeit und Aktualit√§t von Governance-Dokumentation, Policies und Verfahren\n‚Ä¢ Abdeckungsgrad von IKT-Risiken durch formelle Governance-Strukturen und -Prozesse\n‚Ä¢ H√§ufigkeit und Qualit√§t von Board- und Committee-Diskussionen zu IKT-Risiken\n‚Ä¢ Grad der Integration von IKT-Governance in bestehende Unternehmensf√ºhrungsstrukturen\n\nüéØ Entscheidungsqualit√§t und Responsiveness-Metriken:\n‚Ä¢ Durchschnittliche Zeit f√ºr kritische IKT-Risiko-Entscheidungen von Identifikation bis Umsetzung\n‚Ä¢ Qualit√§t und Vollst√§ndigkeit von Entscheidungsgrundlagen und Impact-Assessments\n‚Ä¢ Erfolgsrate von implementierten IKT-Risikomanagement-Ma√ünahmen\n‚Ä¢ H√§ufigkeit und Schweregrad von Governance-bedingten Verz√∂gerungen oder Fehlentscheidungen\n‚Ä¢ Stakeholder-Zufriedenheit mit Governance-Prozessen und Entscheidungsqualit√§t\n\nüîç Oversight-Effektivit√§t und Monitoring-Performance:\n‚Ä¢ Abdeckung und Tiefe von IKT-Risiko-Assessments und -Reviews\n‚Ä¢ Qualit√§t und Rechtzeitigkeit von Management-Reporting und Board-Dashboards\n‚Ä¢ Effektivit√§t von Eskalationsmechanismen und Incident-Response-Governance\n‚Ä¢ Vollst√§ndigkeit der Drittanbieter-Oversight und -Monitoring-Aktivit√§ten\n‚Ä¢ Grad der Proaktivit√§t bei der Identifikation und Behandlung emerging Risks\n\n‚öñÔ∏è Compliance und Regulatorische Performance-Indikatoren:\n‚Ä¢ Compliance-Scores f√ºr DORA-spezifische Anforderungen und andere relevante Regulierungen\n‚Ä¢ Anzahl und Schweregrad regulatorischer Findings oder Enforcement-Aktionen\n‚Ä¢ Rechtzeitigkeit und Vollst√§ndigkeit regulatorischer Berichterstattung\n‚Ä¢ Effektivit√§t der Integration neuer regulatorischer Anforderungen in Governance-Strukturen\n‚Ä¢ Qualit√§t der Aufsichtskommunikation und Stakeholder-Engagement\n\nüîÑ Kontinuierliche Verbesserung und Anpassungsf√§higkeit:\n‚Ä¢ H√§ufigkeit und Qualit√§t von Governance-Framework-Updates und -Verbesserungen\n‚Ä¢ Effektivit√§t von Lessons-Learned-Prozessen und deren Integration in Governance-Strukturen\n‚Ä¢ Geschwindigkeit der Anpassung an sich √§ndernde Gesch√§fts- oder Regulierungsanforderungen\n‚Ä¢ Innovation und Best-Practice-Adoption in Governance-Ans√§tzen\n‚Ä¢ Mitarbeiter-Engagement und -Kompetenz in IKT-Governance-Themen\n\nüíº Business Value und ROI-Metriken:\n‚Ä¢ Kosten-Nutzen-Verh√§ltnis von Governance-Investitionen und -Aktivit√§ten\n‚Ä¢ Beitrag effektiver Governance zur Reduzierung von IKT-Risiko-Verlusten\n‚Ä¢ Verbesserung der operationellen Effizienz durch bessere IKT-Governance\n‚Ä¢ Positive Auswirkungen auf Reputation und Stakeholder-Vertrauen\n‚Ä¢ Enablement von Gesch√§ftsinnovation und digitaler Transformation durch robuste Governance"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 2 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
