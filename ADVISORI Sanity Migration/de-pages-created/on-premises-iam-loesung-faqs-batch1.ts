import 'dotenv/config'
import { createClient } from '@sanity/client'

// Create client with direct credentials
const client = createClient({
  projectId: 'wwmm9rbb',
  dataset: 'production',
  apiVersion: '2024-02-14',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

// Helper function to generate unique keys
function generateKey(prefix: string, index: number): string {
  return `${prefix}_${Date.now()}_${index}`
}

const run = async () => {
  try {
    console.log('Updating On-Premises IAM-L√∂sung page with FAQ batch 1...')
    
    // First, get the existing document
    console.log('Fetching existing document...')
    const existingDoc = await client.fetch('*[_id == $id][0]', { id: 'on-premises-iam-loesung' })
    
    if (!existingDoc) {
      throw new Error('Document "on-premises-iam-loesung" not found')
    }
    
    // Create new FAQs for On-Premises IAM fundamentals
    const newFaqs = [
      {
        _type: 'object',
        _key: generateKey('faq', 1),
        question: 'Warum sind On-Premises IAM-L√∂sungen f√ºr Unternehmen mit h√∂chsten Sicherheitsanforderungen unverzichtbar und welche strategischen Vorteile bieten sie gegen√ºber Cloud-basierten Alternativen?',
        answer: "On-Premises IAM-L√∂sungen repr√§sentieren die h√∂chste Stufe der Identit√§tssicherheit und Datenkontrolle f√ºr Unternehmen, die kritische Assets verwalten oder in hochregulierten Branchen operieren. Diese lokalen Deployment-Modelle bieten eine unvergleichliche Kombination aus Sicherheit, Compliance und strategischer Kontrolle, die f√ºr viele Organisationen nicht nur w√ºnschenswert, sondern regulatorisch erforderlich ist.\n\nüèõÔ∏è Absolute Datensouver√§nit√§t und Kontrolle:\n‚Ä¢ Vollst√§ndige Datenhoheit mit lokaler Speicherung aller Identit√§tsinformationen und Authentifizierungsdaten\n‚Ä¢ Eliminierung externer Abh√§ngigkeiten und Third-Party-Risiken durch komplette interne Kontrolle\n‚Ä¢ Air-Gap-Architekturen f√ºr kritische Systeme mit physischer Isolation von externen Netzwerken\n‚Ä¢ Granulare Kontrolle √ºber Datenfl√ºsse, Backup-Strategien und Disaster-Recovery-Prozesse\n‚Ä¢ Schutz vor geopolitischen Risiken und internationalen Datentransfer-Beschr√§nkungen\n\nüõ°Ô∏è Enterprise-Grade Sicherheitsarchitekturen:\n‚Ä¢ Defense-in-Depth-Strategien mit mehrschichtigen Sicherheitskontrollen und Isolation\n‚Ä¢ Hardware-Security-Modules f√ºr kryptographische Operationen und Schl√ºsselverwaltung\n‚Ä¢ Physische Sicherheitskontrollen und Zugangsmanagement f√ºr Rechenzentren\n‚Ä¢ Custom Security Policies ohne Kompromisse durch Multi-Tenancy-Beschr√§nkungen\n‚Ä¢ Vollst√§ndige Kontrolle √ºber Patch-Management und Security-Updates\n\nüìã Regulatorische Exzellenz und Compliance-Sicherheit:\n‚Ä¢ Erf√ºllung branchenspezifischer Compliance-Anforderungen ohne externe Abh√§ngigkeiten\n‚Ä¢ Data Residency Controls f√ºr Branchen mit strikten Datenlokalisierungsanforderungen\n‚Ä¢ Vollst√§ndige Audit-Kontrolle mit l√ºckenloser Nachverfolgung aller Systemaktivit√§ten\n‚Ä¢ Compliance-by-Design f√ºr regulierte Industrien wie Finanzwesen, Gesundheitswesen und kritische Infrastrukturen\n‚Ä¢ Eliminierung von Compliance-Risiken durch Third-Party-Provider und internationale Datentransfers\n\n‚ö° Performance und Verf√ºgbarkeit:\n‚Ä¢ Optimierte Performance durch lokale Infrastruktur ohne Internet-Latenz\n‚Ä¢ Vollst√§ndige Kontrolle √ºber Hochverf√ºgbarkeits-Architekturen und Redundanz-Strategien\n‚Ä¢ Ma√ügeschneiderte Disaster-Recovery-Konzepte f√ºr spezifische Gesch√§ftsanforderungen\n‚Ä¢ Eliminierung von Service-Ausf√§llen durch externe Provider-Probleme\n‚Ä¢ Skalierbare Architektur mit vorhersagbaren Performance-Charakteristiken\n\nüîß Strategische Flexibilit√§t und Anpassbarkeit:\n‚Ä¢ Vollst√§ndige Anpassung an spezifische Gesch√§ftsprozesse ohne Provider-Beschr√§nkungen\n‚Ä¢ Integration in bestehende Legacy-Systeme ohne externe Kompatibilit√§tsbeschr√§nkungen\n‚Ä¢ Custom Development und Erweiterungen f√ºr einzigartige Unternehmensanforderungen\n‚Ä¢ Langfristige Technologie-Roadmap-Kontrolle ohne Abh√§ngigkeit von Provider-Strategien\n‚Ä¢ Flexible Hybrid-Architekturen mit selektiver Cloud-Integration nach eigenen Kriterien"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 2),
        question: 'Welche kritischen Architekturkomponenten und Sicherheitsschichten bilden eine robuste On-Premises IAM-Infrastruktur und wie gew√§hrleisten sie maximale Sicherheit bei optimaler Performance?',
        answer: "Eine robuste On-Premises IAM-Infrastruktur basiert auf einer durchdachten Multi-Layer-Architektur, die physische, netzwerk-basierte, anwendungs-spezifische und daten-orientierte Sicherheitsschichten intelligent kombiniert. Diese ganzheitliche Architektur gew√§hrleistet nicht nur h√∂chste Sicherheitsstandards, sondern auch optimale Performance und Skalierbarkeit f√ºr Enterprise-Anforderungen.\n\nüèóÔ∏è Foundational Infrastructure Layer:\n‚Ä¢ Hochsichere Rechenzentrumsinfrastruktur mit physischen Zugangskontrollen und Umgebungs√ºberwachung\n‚Ä¢ Redundante Hardware-Architekturen mit Hot-Standby-Systemen und automatischem Failover\n‚Ä¢ Dedicated Hardware-Security-Modules f√ºr kryptographische Operationen und Schl√ºsselverwaltung\n‚Ä¢ Isolierte Netzwerksegmente mit Micro-Perimeter und Zero-Trust-Netzwerkarchitektur\n‚Ä¢ Enterprise-Grade Storage-Systeme mit Verschl√ºsselung at Rest und in Transit\n\nüîê Identity Core Services Architecture:\n‚Ä¢ Hochverf√ºgbare Directory Services mit Multi-Master-Replikation und geografischer Verteilung\n‚Ä¢ Zentrale Identity Repository mit LDAP/Active Directory Integration und Synchronisation\n‚Ä¢ Policy Decision Points mit Real-time Autorisierungs-Engines und Regelverarbeitung\n‚Ä¢ Session Management Services mit intelligenter Timeout-Steuerung und Security-Monitoring\n‚Ä¢ Identity Federation Services f√ºr sichere Cross-Domain-Authentifizierung\n\nüõ°Ô∏è Advanced Security Control Layer:\n‚Ä¢ Multi-Factor Authentication mit Hardware-Token, Biometrie und Certificate-based Authentication\n‚Ä¢ Privileged Access Management mit Session-Recording, Just-in-Time-Access und Approval-Workflows\n‚Ä¢ Behavioral Analytics Engines mit Machine Learning f√ºr Anomaly Detection und Threat Intelligence\n‚Ä¢ Encryption Services mit End-to-End-Verschl√ºsselung und Key Lifecycle Management\n‚Ä¢ Security Information and Event Management mit Real-time Monitoring und Incident Response\n\nüìä Governance und Compliance Layer:\n‚Ä¢ Automated Compliance Monitoring mit Real-time Policy Enforcement und Violation Detection\n‚Ä¢ Comprehensive Audit Logging mit Tamper-proof Storage und Forensic Capabilities\n‚Ä¢ Risk Assessment Engines mit kontinuierlicher Risikobewertung und Scoring\n‚Ä¢ Identity Lifecycle Management mit automatisierten Provisioning und Deprovisioning-Prozessen\n‚Ä¢ Segregation of Duties Controls mit automatischer Konfliktdetektion und Resolution\n\nüîó Integration und API Layer:\n‚Ä¢ Secure API Gateway mit Rate Limiting, Authentication und Authorization Controls\n‚Ä¢ Enterprise Service Bus f√ºr sichere Anwendungsintegration und Message Routing\n‚Ä¢ Custom Connector Framework f√ºr Legacy-System-Integration und Datensynchonisation\n‚Ä¢ Event-driven Architecture mit Real-time Notifications und Workflow Orchestration\n‚Ä¢ Standards-based Integration mit SAML, OAuth, OpenID Connect und SCIM Support\n\n‚öôÔ∏è Operational Excellence Layer:\n‚Ä¢ Proaktives System-Monitoring mit Performance-Metriken und Capacity Planning\n‚Ä¢ Automated Backup und Disaster Recovery mit Point-in-Time Recovery und Geographic Replication\n‚Ä¢ Configuration Management mit Version Control und Change Tracking\n‚Ä¢ Performance Optimization mit Load Balancing, Caching und Database Tuning\n‚Ä¢ Continuous Security Assessment mit Vulnerability Scanning und Penetration Testing"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 3),
        question: 'Wie implementiert man eine sichere Legacy-System-Integration in On-Premises IAM-Umgebungen ohne Kompromittierung bestehender Gesch√§ftsprozesse oder Sicherheitsstandards?',
        answer: "Die sichere Integration von Legacy-Systemen in moderne On-Premises IAM-Umgebungen erfordert einen strategischen, phasenweisen Ansatz, der bestehende Gesch√§ftsprozesse respektiert, w√§hrend gleichzeitig moderne Sicherheitsstandards implementiert werden. Diese komplexe Transformation muss sowohl technische als auch organisatorische Herausforderungen bew√§ltigen und dabei Gesch√§ftskontinuit√§t gew√§hrleisten.\n\nüîç Comprehensive Legacy Assessment und Mapping:\n‚Ä¢ Detaillierte Inventarisierung aller Legacy-Systeme mit Abh√§ngigkeitsanalyse und Risikobewertung\n‚Ä¢ Authentication Flow Mapping f√ºr bestehende Anmeldeprozesse und Benutzerinteraktionen\n‚Ä¢ Data Flow Analysis zur Identifikation kritischer Identit√§tsdaten und Synchronisationspunkte\n‚Ä¢ Security Gap Assessment zur Bewertung aktueller Sicherheitskontrollen und Schwachstellen\n‚Ä¢ Business Impact Analysis zur Priorisierung von Integrationsprojekten nach Gesch√§ftskritikalit√§t\n\nüîó Adaptive Integration Strategies:\n‚Ä¢ Protocol Translation Services f√ºr die √úberbr√ºckung zwischen Legacy-Authentifizierungsprotokollen und modernen Standards\n‚Ä¢ Identity Synchronization Engines mit Bi-direktionaler Datenreplikation und Konfliktresolution\n‚Ä¢ Wrapper Services f√ºr Legacy-Anwendungen ohne native IAM-Integration-Capabilities\n‚Ä¢ Proxy-based Authentication f√ºr Systeme mit limitierten Integrationsm√∂glichkeiten\n‚Ä¢ Gradual Migration Pathways mit parallelem Betrieb und schrittweiser √úberf√ºhrung\n\nüõ°Ô∏è Security-First Integration Approach:\n‚Ä¢ Secure Communication Channels mit End-to-End-Verschl√ºsselung f√ºr alle Legacy-Integrationen\n‚Ä¢ Privilege Escalation Controls zur Minimierung von Sicherheitsrisiken w√§hrend der √úbergangsphase\n‚Ä¢ Comprehensive Monitoring f√ºr alle Legacy-Integration-Points mit Anomaly Detection\n‚Ä¢ Isolation Strategies zur Begrenzung potenzieller Sicherheitsrisiken von Legacy-Systemen\n‚Ä¢ Regular Security Assessments f√ºr integrierte Legacy-Systeme mit kontinuierlicher Risikobewertung\n\n‚ö° Business Continuity und Change Management:\n‚Ä¢ Phased Rollout Strategies mit Pilot-Gruppen und schrittweiser Ausweitung\n‚Ä¢ Rollback Procedures f√ºr jeden Integrationsschritt mit definierten Fallback-Mechanismen\n‚Ä¢ User Training Programs f√ºr neue Authentifizierungsprozesse und Workflow-√Ñnderungen\n‚Ä¢ Business Process Optimization zur Nutzung neuer IAM-Capabilities ohne Disruption\n‚Ä¢ Stakeholder Communication mit transparenter Kommunikation √ºber √Ñnderungen und Vorteile\n\nüîß Technical Implementation Excellence:\n‚Ä¢ Custom Connector Development f√ºr spezielle Legacy-System-Anforderungen\n‚Ä¢ API Modernization f√ºr Legacy-Systeme mit RESTful Interface-Entwicklung\n‚Ä¢ Database Integration Strategies mit sicherer Datenreplikation und Synchronisation\n‚Ä¢ Single Sign-On Implementation f√ºr nahtlose Benutzererfahrung √ºber alle Systeme\n‚Ä¢ Identity Federation f√ºr sichere Cross-System-Authentication ohne Passwort-Proliferation\n\nüìä Continuous Improvement und Optimization:\n‚Ä¢ Performance Monitoring f√ºr alle Integration-Points mit Latenz- und Durchsatz-Optimierung\n‚Ä¢ Security Posture Assessment mit regelm√§√üiger Bewertung der Integrationssicherheit\n‚Ä¢ User Experience Optimization basierend auf Feedback und Usage Analytics\n‚Ä¢ Technology Roadmap Planning f√ºr langfristige Legacy-System-Modernisierung\n‚Ä¢ Cost-Benefit Analysis zur Bewertung von Modernisierungs- versus Integrations-Strategien"
      },
      {
        _type: 'object',
        _key: generateKey('faq', 4),
        question: 'Welche spezifischen Compliance-Herausforderungen adressieren On-Premises IAM-L√∂sungen f√ºr regulierte Industrien und wie gew√§hrleisten sie kontinuierliche regulatorische Exzellenz?',
        answer: "On-Premises IAM-L√∂sungen sind f√ºr regulierte Industrien oft die einzige M√∂glichkeit, komplexe Compliance-Anforderungen vollst√§ndig zu erf√ºllen, da sie die notwendige Kontrolle, Transparenz und Nachweisbarkeit bieten, die externe Cloud-Services nicht gew√§hrleisten k√∂nnen. Diese L√∂sungen adressieren branchenspezifische Herausforderungen durch ma√ügeschneiderte Compliance-Frameworks und automatisierte Kontrollen.\n\nüè• Healthcare und HIPAA Compliance:\n‚Ä¢ Protected Health Information Safeguards mit lokaler Datenhaltung und Verschl√ºsselung\n‚Ä¢ Minimum Necessary Access Controls mit granularen Berechtigungen f√ºr Patientendaten\n‚Ä¢ Audit Trail Requirements mit l√ºckenloser Protokollierung aller Zugriffe auf Gesundheitsdaten\n‚Ä¢ Business Associate Agreement Compliance durch Eliminierung externer Datenverarbeitung\n‚Ä¢ Breach Notification Procedures mit automatisierten Erkennungs- und Meldeprozessen\n\nüè¶ Financial Services und Regulatory Frameworks:\n‚Ä¢ SOX Compliance mit Segregation of Duties und automatisierter Kontrollen√ºberwachung\n‚Ä¢ PCI DSS Requirements f√ºr Kreditkartendaten-Verarbeitung mit sicherer Tokenisierung\n‚Ä¢ Basel III Capital Requirements mit Risk-based Access Controls und Stress Testing\n‚Ä¢ GDPR Data Protection mit Privacy-by-Design und Right-to-be-Forgotten Implementation\n‚Ä¢ Anti-Money Laundering Controls mit Transaction Monitoring und Suspicious Activity Reporting\n\nüè≠ Critical Infrastructure und NERC CIP:\n‚Ä¢ Cyber Security Standards f√ºr Bulk Electric Systems mit Air-Gap-Architekturen\n‚Ä¢ Personnel Risk Assessment Programs mit Background Check Integration\n‚Ä¢ Information Protection Procedures mit Classified Information Handling\n‚Ä¢ Electronic Security Perimeters mit Multi-Factor Authentication und Continuous Monitoring\n‚Ä¢ Incident Reporting Requirements mit automatisierten Compliance-Meldungen\n\nüîí Government und FedRAMP Compliance:\n‚Ä¢ Federal Information Security Management Act Requirements mit Continuous Monitoring\n‚Ä¢ NIST Cybersecurity Framework Implementation mit Risk Assessment und Mitigation\n‚Ä¢ Authority to Operate Processes mit umfassender Dokumentation und Nachweisf√ºhrung\n‚Ä¢ Controlled Unclassified Information Protection mit Data Loss Prevention\n‚Ä¢ Supply Chain Risk Management mit Vendor Assessment und Monitoring\n\nüìã Automated Compliance Management:\n‚Ä¢ Real-time Policy Enforcement mit automatischer Violation Detection und Response\n‚Ä¢ Continuous Control Monitoring mit Dashboard-basiertem Compliance Status Reporting\n‚Ä¢ Automated Evidence Collection f√ºr Audit-Zwecke mit Tamper-proof Storage\n‚Ä¢ Regulatory Change Management mit automatischen Updates f√ºr neue Anforderungen\n‚Ä¢ Risk-based Compliance Scoring mit pr√§diktiven Analytics f√ºr Compliance-Risiken\n\nüîç Audit Readiness und Documentation:\n‚Ä¢ Comprehensive Audit Trails mit forensischen Capabilities und Chain-of-Custody\n‚Ä¢ Automated Report Generation f√ºr regulatorische Meldungen und Compliance-Nachweise\n‚Ä¢ Evidence Management Systems mit sicherer Archivierung und Retrieval\n‚Ä¢ Third-Party Audit Support mit standardisierten Dokumentations-Frameworks\n‚Ä¢ Compliance Dashboard mit Real-time Visibility in Compliance-Status und Trends"
      }
    ]
    
    // Update the document with new FAQs
    const updatedFaqs = [...(existingDoc.faq || []), ...newFaqs]
    
    console.log(`Adding ${newFaqs.length} new FAQs to the document...`)
    const transaction = client.transaction()
    transaction.patch(existingDoc._id, {
      set: {
        faq: updatedFaqs
      }
    })
    
    await transaction.commit()
    console.log('‚úÖ FAQ batch 1 added successfully')
  } catch (error) {
    console.error('Error:', error)
    throw error
  }
}

run()
